<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Private System</title>
  <!-- Third-party libraries -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>

  <style>
    /* Global Styles & Fonts */
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');

    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      margin: 0; padding: 0;
      background: #0d0d0d;
      color: #fff;
      transition: background-color 0.5s, color 0.5s;
      overflow-x: hidden;
    }
    
    body.login-body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      flex-direction: column;
    }

    /* --- Pre-loader & Post-Login Loader Styles --- */
    .loader-container {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: #0d0d0d;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 9999;
      transition: opacity 0.7s ease-in-out;
    }
    .loader-container.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .cube {
      width: 80px; height: 80px;
      position: relative;
      transform-style: preserve-3d;
      animation: rotateCube 12s infinite linear;
    }
    .face {
      position: absolute;
      width: 80px; height: 80px;
      border: 2px solid #ff914d;
      background: rgba(255, 145, 77, 0.1);
      box-shadow: 0 0 15px #ff914d, inset 0 0 10px #ff914d;
    }
    .front  { transform: translateZ(40px); }
    .back   { transform: rotateY(180deg) translateZ(40px); }
    .left   { transform: rotateY(-90deg) translateZ(40px); }
    .right  { transform: rotateY(90deg) translateZ(40px); }
    .top    { transform: rotateX(90deg) translateZ(40px); }
    .bottom { transform: rotateX(-90deg) translateZ(40px); }

    @keyframes rotateCube {
      from { transform: rotateX(0) rotateY(0); }
      to { transform: rotateX(360deg) rotateY(360deg); }
    }

    .loader-text {
      margin-top: 30px;
      font-family: 'Roboto Mono', monospace;
      font-size: 1.2em;
      letter-spacing: 2px;
      background: linear-gradient(90deg, #ff914d, #ff4c4c);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
      animation: gradient-text 3s infinite;
    }
    
    #code-loader-box {
      margin-top: 20px;
      width: 350px;
      height: 120px;
      background: #1a1a1a;
      border: 1px solid #ff914d;
      border-radius: 8px;
      padding: 10px;
      font-family: 'Roboto Mono', monospace;
      font-size: 0.8em;
      color: #0f0;
      overflow: hidden;
      white-space: pre-wrap;
    }

    @keyframes gradient-text {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }


    /* --- Neon Glow Effect --- */
    .neon-glow-container {
      position: relative;
      padding: 3px; /* Controls the distance of the glow from the content */
      overflow: hidden;
      border-radius: 16px; /* Should match the content's border-radius */
    }

    .neon-glow-container::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 200%;
      height: 200%;
      background: conic-gradient(
        from 180deg at 50% 50%,
        #ff4c4c, #ff914d, #ffd966, #ff914d, #ff4c4c
      );
      animation: rotate-glow 5s linear infinite;
      transform-origin: center;
    }

    .neon-glow-content {
      background: #111; /* Inner background of the box */
      position: relative;
      z-index: 2;
      border-radius: 14px; /* Slightly smaller than the container */
      padding: 30px 25px;
    }
    
    /* Login System Styles */
    #login-page {
        display: none; /* Initially hidden */
        flex-direction: column;
        align-items: center;
        gap: 20px;
    }
    .login-quickbar {
        display: flex; gap: 10px;
    }
    .login-quickbar button {
        background: #333; border: 1px solid #555; color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer;
    }
    #loginPanicBtn { background: #800; border-color: #ff4c4c; }

    .login-box {
      width: 400px;
      text-align: center;
    }
    .login-box h2 {
      font-size: 1.8em;
      margin-bottom: 25px;
      font-family: 'Roboto Mono', monospace;
    }
    .login-box input[type="text"], .login-box input[type="password"] {
      width: 100%; padding: 14px; margin-bottom: 20px;
      background: #1c1c1c; border: 1px solid #444; color: white;
      border-radius: 10px; font-size: 1em; transition: border-color 0.3s;
    }
    .login-box input:focus { border-color: #ff914d; outline: none; }

    /* Custom Toggle Switch */
    .toggle-switch {
      display: flex; align-items: center; justify-content: flex-start;
      gap: 10px; font-size: 0.9em; margin-bottom: 20px; cursor: pointer;
    }
    .toggle-switch input { display: none; }
    .slider {
      width: 44px; height: 24px; background-color: #555;
      border-radius: 12px; position: relative; transition: background-color 0.3s;
    }
    .slider::before {
      content: ''; position: absolute;
      height: 20px; width: 20px; left: 2px; top: 2px;
      background-color: white; border-radius: 50%; transition: transform 0.3s;
    }
    .toggle-switch input:checked + .slider { background-color: #4CAF50; }
    .toggle-switch input:checked + .slider::before { transform: translateX(20px); }

    .login-box button#submitBtn {
      width: 100%; padding: 14px; background-color: #ff4c4c;
      color: white; font-size: 1.1em; border: none;
      border-radius: 10px; cursor: pointer; transition: background-color 0.3s;
    }
    .login-box button#submitBtn:hover { background-color: #e03030; }

    .attempt-counter, .error-message { margin-top: 15px; font-size: 0.9em; color: #ff4c4c; }
    
    #time-date-box {
        margin-top: 20px;
        background: #1c1c1c;
        border: 1px solid #444;
        border-radius: 10px;
        padding: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    #time-date-box .time-date { font-family: 'Roboto Mono', monospace; }
    
    .popup {
      display: none; position: absolute; top: 50%; left: 50%;
      width: 320px; padding: 20px; transform: translate(-50%, -50%);
      background: black; border: 3px solid white; border-radius: 15px;
      box-shadow: 0 0 20px white; z-index: 10;
    }

    @keyframes rotate-glow {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* --- Dashboard Styles --- */
    body.dashboard-body {
      font-family: 'Montserrat', sans-serif;
      background-color: #1a1a1a;
      color: #f0f0f0;
      padding: 20px;
      zoom: 1; 
    }
    
    #dashboard { display: none; }

    .dashboard-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 15px 25px; color: #000; margin-bottom: 20px;
    }
    .dashboard-header .neon-glow-content { background: #ff914d; }
    h1 { font-size: 24px; }
    .user-info { font-weight: bold; }
    .version-box {
      background: #ffd966; padding: 8px 15px;
      border-radius: 8px; color: #000; font-weight: bold;
    }
    .quick-bar {
      display: flex; justify-content: center; gap: 10px;
      margin-bottom: 20px; flex-wrap: wrap; align-items: center;
    }
    .quick-bar button {
      background-color: #ff914d; border: none; padding: 10px 14px;
      border-radius: 8px; color: black; font-weight: bold; cursor: pointer;
      transition: background 0.2s; white-space: nowrap;
    }
    .quick-bar button:hover { background-color: #ffb67a; }
    #panicBtn { background: #ff4c4c !important; color: white !important; }
    
    #dashboardSearch {
        padding: 10px 14px; border-radius: 8px; border: 1px solid #555;
        background: #2a2a2a; color: white;
    }

    .main-row {
      display: flex; gap: 20px; margin-bottom: 20px; flex-wrap: wrap;
    }

    .box {
      padding: 20px; min-height: 120px; transition: background-color 0.3s, color 0.3s;
      flex: 1 1 300px; cursor: move;
    }
    .box .neon-glow-content { background-color: #2a2a2a; }
    .box h2 { font-size: 18px; margin-bottom: 10px; color: #ffbf80; }

    .wifi-entry .wifi-high { color: #4CAF50; font-weight: bold; }
    .wifi-entry .wifi-medium { color: #ffeb3b; font-weight: bold; }
    .wifi-entry .wifi-low { color: #f44336; font-weight: bold; }
    
    /* Draggable Placeholder */
    .sortable-ghost {
        opacity: 0.4;
        background: #ff914d;
        border: 2px dashed #000;
    }

    /* Canvas Controls */
    #canvasControls {
        margin-top: 10px; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;
    }
    #canvasControls button, #canvasControls input {
        background-color: #ff914d; border: none; padding: 8px 12px;
        border-radius: 8px; color: black; font-weight: bold; cursor: pointer;
    }
    #canvasControls input[type="color"] { padding: 2px; width: 50px; height: 35px; }

    /* Toast Notification */
    .toast-notification {
        position: fixed; top: 20px; right: 20px;
        background-color: #4CAF50; color: white; padding: 15px 20px;
        border-radius: 8px; z-index: 10000;
        transform: translateX(120%);
        transition: transform 0.5s ease-in-out;
        box-shadow: 0 4px 15px rgba(0,0,0,0.4);
    }
    .toast-notification.show { transform: translateX(0); }

    /* General Panel Styles */
    .info-panel, .tool-panel {
        display: none; padding: 20px; margin-top: 20px;
    }
    .info-panel .neon-glow-content, .tool-panel .neon-glow-content {
        background-color: #2a2a2a;
    }
    .info-panel h2, .tool-panel h2 { color: #ff914d; margin-bottom: 15px; }
    
    /* Calculator styles */
    .calculator-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
    #calcDisplay { grid-column: 1 / -1; background: #1c1c1c; padding: 15px; text-align: right; font-size: 1.5em; border-radius: 8px; }
    .calculator-grid button { padding: 20px; font-size: 1.2em; background: #333; border: 1px solid #555; border-radius: 8px; color: white; cursor: pointer; }
    .calculator-grid button.operator { background: #ff914d; color: black; }

    /* Theme buttons in settings */
    .theme-buttons { display: flex; flex-wrap: wrap; gap: 10px; }
    .theme-buttons button { flex: 1 1 150px; }

    /* Themes */
    body.theme-light { background-color: #f9f2dc; color: #1a1a1a; }
    body.theme-light .box .neon-glow-content { background-color: #fff3cc; }
    body.theme-matrix { background-color: #000; color: #0f0; font-family: 'Roboto Mono', monospace; }
    body.theme-matrix .box .neon-glow-content { background-color: #050505; border: 1px solid #0f0; }
    body.theme-dracula { background-color: #282a36; color: #f8f8f2; }
    body.theme-dracula .box .neon-glow-content { background-color: #44475a; }
    body.theme-solarized { background-color: #002b36; color: #839496; }
    body.theme-solarized .box .neon-glow-content { background-color: #073642; }
    body.theme-gruvbox { background-color: #282828; color: #ebdbb2; }
    body.theme-gruvbox .box .neon-glow-content { background-color: #3c3836; }
    body.theme-nord { background-color: #2e3440; color: #d8dee9; }
    body.theme-nord .box .neon-glow-content { background-color: #3b4252; }
  </style>
</head>
<body id="bodyElement">

  <!-- Pre-loader -->
  <div class="loader-container" id="preloader">
    <div class="cube">
      <div class="face front"></div> <div class="face back"></div>
      <div class="face left"></div>  <div class="face right"></div>
      <div class="face top"></div>   <div class="face bottom"></div>
    </div>
    <p class="loader-text" id="init-text">Initializing System...</p>
  </div>
  
  <!-- Post-Login Loader -->
  <div class="loader-container hidden" id="dashboard-loader">
      <div class="cube">
        <div class="face front"></div> <div class="face back"></div>
        <div class="face left"></div>  <div class="face right"></div>
        <div class="face top"></div>   <div class="face bottom"></div>
      </div>
      <div id="code-loader-box"></div>
  </div>

  <!-- Login System -->
  <div id="login-page">
      <div class="login-quickbar">
          <button id="loginPanicBtn">🚨 Panic</button>
          <button id="loginZoomInBtn">➕ Zoom In</button>
          <button id="loginZoomOutBtn">➖ Zoom Out</button>
          <button id="loginActivityLogBtn">📜 Logs</button>
      </div>
      <div class="login-box neon-glow-container">
        <div class="neon-glow-content">
          <h2>𝙋𝙧𝙞𝙫𝙖𝙩𝙚 𝙎𝙮𝙨𝙩𝙚𝙢</h2>

          <input type="text" id="username" placeholder="Enter Username..." autocomplete="off" />
          <input type="password" id="password" placeholder="Enter Password..." autocomplete="off" />
          <input type="text" id="userID" placeholder="Enter User Identifier..." autocomplete="off" />

          <label class="toggle-switch">
              <input type="checkbox" id="showPasswordToggle">
              <span class="slider"></span>
              <span>Show Password</span>
          </label>

          <button id="submitBtn">Submit</button>

          <div class="error-message" id="errorMsg"></div>
          <div class="attempt-counter" id="attemptsText">Attempts Left: 3</div>
        </div>
      </div>
      <div id="time-date-box">
        <div class="time-date">
            <span id="loginTime">00:00:00</span> | <span id="loginDate">---</span>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="timeFormatToggle">
          <span class="slider"></span>
          <span>24-Hour</span>
        </label>
      </div>
  </div>
  <div class="popup" id="resetPopup" tabindex="-1" aria-hidden="true">
      <p>Too many failed attempts.</p>
      <input type="password" id="resetField" placeholder="Enter Reset Code" autocomplete="off" />
      <button id="resetBtn">Reset Counter</button>
  </div>


  <!-- Dashboard (hidden by default) -->
  <div id="dashboard">
    <!-- Welcome Notification -->
    <div class="toast-notification" id="welcomeToast">Welcome!</div>
    
    <div class="dashboard-header neon-glow-container" id="dashboardHeader">
     <div class="neon-glow-content">
      <div>
        <h1>Private Dashboard GUI</h1>
        <div class="user-info">User - <span id="loggedInUser"></span> | ID: <span id="loggedInID"></span></div>
      </div>
      <div class="version-box">Version 2.0.0</div>
     </div>
    </div>

    <div class="quick-bar">
      <input type="search" id="dashboardSearch" placeholder="Search panels...">
      <button id="settingsBtn">⚙️ Settings</button>
      <button id="keybindsBtn">⌨️ Keybinds</button>
      <button id="timerBtn">⏱️ Timer</button>
      <button id="calculatorBtn">🧮 Calculator</button>
      <button id="converterBtn">🔄 Converter</button>
      <button id="mediaBtn">📺 Media</button>
      <button id="reminderBtn">🔔 Reminders</button>
      <button id="activityLogBtn">📜 Activity Logs</button>
      <button id="loginHistoryBtn">📖 Login History</button>
      <button id="statsBtn">📊 Stats</button>
      <button id="downloadLogsBtn">💾 Download Logs</button>
      <button id="notesBtn">📒 Notes</button>
      <button id="screenshotBtn">📸 Screenshot</button>
      <button id="panicBtn">🚨 Panic</button>
      <button id="logoutBtn">🔓 Log Out</button>
    </div>
    
    <div class="main-row" id="mainGrid">
      <div class="box neon-glow-container" data-panel-name="Calendar">
          <div class="neon-glow-content">
            <h2>📅 Calendar</h2>
            <div class="calendar" id="calendar"></div>
          </div>
      </div>
      <div class="box neon-glow-container" data-panel-name="Daily Quote">
        <div class="neon-glow-content">
          <h2>💡 Daily Quote</h2>
          <p id="dailyQuote">"The only way to do great work is to love what you do."</p>
        </div>
      </div>
      <div class="box neon-glow-container" data-panel-name="Random Fact">
        <div class="neon-glow-content">
          <h2>🧠 Random Fact</h2>
          <p id="randomFact">A single cloud can weigh more than a million pounds.</p>
        </div>
      </div>
      <div class="box neon-glow-container" data-panel-name="Updates">
        <div class="neon-glow-content">
            <h2>🔄 Updates</h2>
            <div class="update-entry">V2.0.0 - Major Overhaul</div>
            <div class="update-entry">Added multiple new tools & panels.</div>
            <div class="update-entry">UI Redesigned with glow effects.</div>
        </div>
      </div>
    </div>

    <!-- Quick Access Buttons -->
    <div class="quick-bar" style="flex-wrap: wrap; margin-top: 30px;">
      <button onclick="dashboard.togglePanel('wifiPanel')">📡 WiFi Info</button>
      <button onclick="dashboard.togglePanel('ipadPanel')">📱 iPad Info</button>
      <button onclick="dashboard.togglePanel('exploitPanel')">🧨 Exploits</button>
      <!-- Add more buttons as needed -->
    </div>

    <!-- All Panels Container -->
    <div id="panelsContainer">
        <!-- New Panels -->
        <div id="settingsPanel" class="tool-panel neon-glow-container">
          <div class="neon-glow-content">
            <h2>⚙️ Settings</h2>
            <div class="theme-buttons">
              <button onclick="dashboard.setTheme('')">Default Dark</button>
              <button onclick="dashboard.setTheme('theme-light')">Light</button>
              <button onclick="dashboard.setTheme('theme-matrix')">Matrix</button>
              <button onclick="dashboard.setTheme('theme-dracula')">Dracula</button>
              <button onclick="dashboard.setTheme('theme-solarized')">Solarized</button>
              <button onclick="dashboard.setTheme('theme-gruvbox')">Gruvbox</button>
              <button onclick="dashboard.setTheme('theme-nord')">Nord</button>
            </div>
            <!-- Placeholder for 15 settings -->
            <p style="margin-top: 20px;">More settings coming soon...</p>
          </div>
        </div>
        
        <div id="keybindsPanel" class="tool-panel neon-glow-container">...</div>
        <div id="timerPanel" class="tool-panel neon-glow-container">...</div>
        <div id="calculatorPanel" class="tool-panel neon-glow-container">
            <div class="neon-glow-content">
                <h2>🧮 Calculator</h2>
                <div class="calculator-grid">
                    <div id="calcDisplay">0</div>
                    <button class="operator">C</button><button class="operator">()</button><button class="operator">%</button><button class="operator">/</button>
                    <button>7</button><button>8</button><button>9</button><button class="operator">*</button>
                    <button>4</button><button>5</button><button>6</button><button class="operator">-</button>
                    <button>1</button><button>2</button><button>3</button><button class="operator">+</button>
                    <button>0</button><button>.</button><button class="operator">DEL</button><button class="operator">=</button>
                </div>
            </div>
        </div>
        <div id="converterPanel" class="tool-panel neon-glow-container">...</div>
        <div id="mediaPanel" class="tool-panel neon-glow-container">...</div>
        <div id="reminderPanel" class="tool-panel neon-glow-container">...</div>
        <div id="activityLogPanel" class="tool-panel neon-glow-container">...</div>
        <div id="loginHistoryPanel" class="tool-panel neon-glow-container">...</div>
        <div id="statsPanel" class="tool-panel neon-glow-container">...</div>
        
        <!-- Original Info Panels (wrapped in glow container) -->
        <div id="wifiPanel" class="info-panel neon-glow-container">
            <div class="neon-glow-content">
                <h2>📡 School WiFi Information</h2>
                <div class="wifi-entry">
                    <div>Middletown_Core</div><div class="wifi-high">High</div>
                </div>
                 <div class="wifi-entry">
                    <div>Mtown Guest</div><div class="wifi-medium">Medium</div>
                </div>
                 <div class="wifi-entry">
                    <div>Radius Test</div><div class="wifi-low">Low</div>
                </div>
            </div>
        </div>
        
        <div id="ipadPanel" class="info-panel neon-glow-container">...</div>
        <div id="exploitPanel" class="info-panel neon-glow-container">...</div>

        <!-- Notes Canvas -->
        <div id="canvasContainer" class="tool-panel neon-glow-container">
          <div class="neon-glow-content">
              <h2>🖌️ Notes Canvas</h2>
              <canvas id="notesCanvas" width="800" height="500" style="background: #fff; border-radius: 8px;"></canvas>
              <div id="canvasControls">
                <input type="color" id="colorPicker" value="#ff914d">
                <label>Size: <input type="range" id="brushSize" min="1" max="50" value="2"></label>
                <button id="textBtn">Add Text</button>
                <button id="eraserBtn">Eraser</button>
                <button id="undoBtn">Undo</button>
                <button id="clearCanvasBtn">Clear Canvas</button>
                <button id="exportNotesBtn">💾 Export</button>
                <button id="closeCanvasBtn">Close Notes</button>
              </div>
          </div>
        </div>
    </div>
  </div>

  <script>
    // --- GLOBAL VARIABLES & STATE ---
    let activityLog = [];
    let userStats = { buttonsClicked: 0, togglesFlipped: 0, panelsOpened: 0 };
    let zoomLevel = 1;
    const zoomStep = 0.1;

    // --- UTILITY FUNCTIONS ---
    const logActivity = (action) => {
        const timestamp = new Date().toLocaleString();
        activityLog.push({ timestamp, action });
        // Optional: console.log for debugging
        // console.log(`[LOG] ${timestamp}: ${action}`);
    };
    
    const showAlert = (message, duration = 3000) => {
        const toast = document.getElementById('welcomeToast');
        toast.textContent = message;
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), duration);
        logActivity(`Alert shown: "${message}"`);
    };

    const setZoom = (level) => {
        zoomLevel = Math.max(0.5, Math.min(2, level));
        document.body.style.zoom = zoomLevel;
        logActivity(`Zoom level set to ${Math.round(zoomLevel*100)}%`);
    };

    // --- PRE-LOADER & PAGE TRANSITION LOGIC ---
    document.addEventListener('DOMContentLoaded', () => {
        const preloader = document.getElementById('preloader');
        const initText = document.getElementById('init-text');
        const loginPage = document.getElementById('login-page');
        
        setTimeout(() => {
            initText.textContent = "Initializing System... Complete.";
            logActivity("System Initialized");
            
            setTimeout(() => {
                initText.textContent = "Initializing Login Page...";
                logActivity("Login Page Initializing");

                setTimeout(() => {
                    preloader.classList.add('hidden');
                    loginPage.style.display = 'flex';
                    bodyElement.className = 'login-body';
                    // Initialize login page specific scripts
                    loginSystem.init();
                    logActivity("Login Page Loaded");
                }, 1500);

            }, 1000);

        }, 2500);
    });
    
    
    // --- DASHBOARD OBJECT ---
    const dashboard = {
        init: function(user) {
            // Populate user info
            document.getElementById('loggedInUser').textContent = user.name || user.username;
            document.getElementById('loggedInID').textContent = user.userID;
            
            // Show welcome message
            showAlert(`Welcome, ${user.name || user.username}!`);
            
            this.generateCalendar();
            this.initDraggablePanels();
            this.initTools();
            this.initCanvas();
            this.initQuotesAndFacts();
            logActivity("Dashboard Initialized");
        },

        initDraggablePanels: function() {
            const grid = document.getElementById('mainGrid');
            new Sortable(grid, {
                animation: 150,
                ghostClass: 'sortable-ghost',
                onEnd: () => logActivity("Dashboard layout changed.")
            });
        },
        
        initQuotesAndFacts: function() {
            const quotes = ["The future belongs to those who believe in the beauty of their dreams.", "The only limit to our realization of tomorrow is our doubts of today.", "Success is not final, failure is not fatal: it is the courage to continue that counts."];
            const facts = ["Honey never spoils.", "A day on Venus is longer than a year on Venus.", "Octopuses have three hearts."];
            document.getElementById('dailyQuote').textContent = `"${quotes[Math.floor(Math.random()*quotes.length)]}"`;
            document.getElementById('randomFact').textContent = facts[Math.floor(Math.random()*facts.length)];
        },
        
        initTools: function() {
            // General button listeners
            document.getElementById('panicBtn').addEventListener('click', () => { window.open('https://clever.com', '_blank'); logActivity("Panic button used."); });
            document.getElementById('screenshotBtn').addEventListener('click', this.takeScreenshot);
            document.getElementById('logoutBtn').addEventListener('click', () => { location.reload(); logActivity("User logged out."); });
            
            // Panel toggles
            document.getElementById('settingsBtn').addEventListener('click', () => this.togglePanel('settingsPanel'));
            document.getElementById('activityLogBtn').addEventListener('click', () => { this.displayLogs(); this.togglePanel('activityLogPanel'); });
            document.getElementById('loginHistoryBtn').addEventListener('click', () => { this.displayLoginHistory(); this.togglePanel('loginHistoryPanel'); });
            document.getElementById('statsBtn').addEventListener('click', () => { this.displayStats(); this.togglePanel('statsPanel'); });
            document.getElementById('calculatorBtn').addEventListener('click', () => this.togglePanel('calculatorPanel'));
            document.getElementById('notesBtn').addEventListener('click', () => this.togglePanel('canvasContainer'));

            // Search bar
            document.getElementById('dashboardSearch').addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    const query = e.target.value.toLowerCase();
                    const panels = document.querySelectorAll('.box[data-panel-name]');
                    for(const panel of panels) {
                        if (panel.dataset.panelName.toLowerCase().includes(query)) {
                            panel.scrollIntoView({ behavior: 'smooth' });
                            logActivity(`Searched for: "${query}"`);
                            break;
                        }
                    }
                }
            });
            
            // Download Logs Button
            document.getElementById('downloadLogsBtn').addEventListener('click', this.downloadLogs);
        },
        
        togglePanel: function(panelId) {
            userStats.panelsOpened++;
            const panel = document.getElementById(panelId);
            const allPanels = document.querySelectorAll('.info-panel, .tool-panel');
            allPanels.forEach(p => {
                if (p.id !== panelId) p.style.display = 'none';
            });
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
            logActivity(`${panel.style.display === 'block' ? 'Opened' : 'Closed'} panel: ${panelId}`);
        },

        setTheme: function(themeClass) {
            document.body.className = 'dashboard-body'; // Reset
            if (themeClass) {
                document.body.classList.add(themeClass);
            }
            logActivity(`Theme changed to: ${themeClass || 'Default Dark'}`);
        },

        displayLogs: function() {
            const panelContent = document.querySelector('#activityLogPanel .neon-glow-content');
            if(!panelContent) { // Create if it doesn't exist
                const panel = document.getElementById('activityLogPanel');
                panel.innerHTML = `<div class="neon-glow-content"><h2>📜 Activity Logs</h2><pre id="log-display"></pre></div>`;
            }
            const logDisplay = document.getElementById('log-display');
            logDisplay.textContent = activityLog.map(log => `[${log.timestamp}] ${log.action}`).join('\n');
        },
        
        downloadLogs: function() {
            const logData = JSON.stringify(activityLog, null, 2);
            const blob = new Blob([logData], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `activity_logs_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            logActivity("Activity logs downloaded.");
        },
        
        displayLoginHistory: function() {
            const lastLogin = localStorage.getItem('lastLogin');
            const panelContent = document.querySelector('#loginHistoryPanel .neon-glow-content');
             if(!panelContent) {
                const panel = document.getElementById('loginHistoryPanel');
                panel.innerHTML = `<div class="neon-glow-content"><h2>📖 Login History</h2><p>Last login: <span id="last-login-display"></span></p></div>`;
            }
            document.getElementById('last-login-display').textContent = lastLogin || "No history recorded.";
        },
        
        displayStats: function() {
             const panelContent = document.querySelector('#statsPanel .neon-glow-content');
             if(!panelContent) {
                const panel = document.getElementById('statsPanel');
                panel.innerHTML = `<div class="neon-glow-content"><h2>📊 Session Stats</h2>
                                    <p>Buttons Clicked: <span id="stats-clicks">0</span></p>
                                    <p>Toggles Flipped: <span id="stats-toggles">0</span></p>
                                    <p>Panels Opened: <span id="stats-panels">0</span></p></div>`;
            }
            document.getElementById('stats-clicks').textContent = userStats.buttonsClicked;
            document.getElementById('stats-toggles').textContent = userStats.togglesFlipped;
            document.getElementById('stats-panels').textContent = userStats.panelsOpened;
        },

        initCanvas: function() {
            // ... (A more advanced canvas implementation would go here)
        },
        generateCalendar: function() {
            // ... (Existing calendar logic)
        },
        takeScreenshot: function() {
            html2canvas(document.body).then(canvas => {
                const link = document.createElement('a');
                link.download = 'dashboard_screenshot.png';
                link.href = canvas.toDataURL();
                link.click();
                logActivity("Screenshot taken.");
            });
        }
    };
    
    // --- LOGIN SYSTEM OBJECT ---
    const loginSystem = {
        attempts: 3,
        users: [],
        
        init: function() {
            this.cacheDOM();
            this.bindEvents();
            this.fetchUsers();
            this.updateClock();
            setInterval(this.updateClock, 1000);
            logActivity("Login System Initialized");
        },
        
        cacheDOM: function() {
            this.loginBox = document.querySelector('.login-box');
            this.usernameInput = document.getElementById('username');
            this.passwordInput = document.getElementById('password');
            this.userIDInput = document.getElementById('userID');
            this.showPasswordToggle = document.getElementById('showPasswordToggle');
            this.submitBtn = document.getElementById('submitBtn');
            this.errorMsg = document.getElementById('errorMsg');
            this.attemptsText = document.getElementById('attemptsText');
            this.timeFormatToggle = document.getElementById('timeFormatToggle');
        },
        
        bindEvents: function() {
            this.submitBtn.addEventListener('click', () => { this.submitLogin(); userStats.buttonsClicked++; });
            document.addEventListener('keydown', e => { if (e.key === 'Enter') this.submitLogin(); });
            this.showPasswordToggle.addEventListener('change', () => { this.togglePasswordVisibility(); userStats.togglesFlipped++; });
            this.timeFormatToggle.addEventListener('change', () => { this.updateClock(); userStats.togglesFlipped++; });
            
            // Login Quickbar
            document.getElementById('loginPanicBtn').addEventListener('click', () => { window.open('https://clever.com', '_blank'); logActivity("Panic button used (login page)."); });
            document.getElementById('loginZoomInBtn').addEventListener('click', () => setZoom(zoomLevel + zoomStep));
            document.getElementById('loginZoomOutBtn').addEventListener('click', () => setZoom(zoomLevel - zoomStep));
        },
        
        fetchUsers: function() {
            fetch('https://raw.githubusercontent.com/Nuker214/Private.System/refs/heads/main/Whitelist.json')
                .then(res => res.json())
                .then(data => { this.users = data; })
                .catch(err => console.error("Failed to load user data.", err));
        },
        
        updateClock: function() {
            const now = new Date();
            const is24Hour = document.getElementById('timeFormatToggle').checked;
            const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: !is24Hour };
            
            document.getElementById('loginTime').textContent = now.toLocaleTimeString([], timeOptions);
            document.getElementById('loginDate').textContent = now.toLocaleDateString();
        },
        
        togglePasswordVisibility: function() {
            this.passwordInput.type = this.showPasswordToggle.checked ? 'text' : 'password';
            logActivity(`Password visibility ${this.showPasswordToggle.checked ? 'on' : 'off'}`);
        },

        submitLogin: async function() {
            const username = this.usernameInput.value;
            const password = this.passwordInput.value;
            const userID = this.userIDInput.value;

            const user = this.users.find(u => u.username?.toLowerCase() === username.toLowerCase() && u.userID?.toString() === userID.toString());
            
            if (user && user.password === password) {
                this.handleSuccessfulLogin(user);
            } else {
                this.handleFailedAttempt();
            }
        },
        
        handleSuccessfulLogin: function(user) {
            logActivity(`Successful login for user: ${user.username}`);
            localStorage.setItem('lastLogin', new Date().toLocaleString());
            
            // Transition to dashboard
            const loginPage = document.getElementById('login-page');
            const dashboardLoader = document.getElementById('dashboard-loader');
            const dashboardEl = document.getElementById('dashboard');
            
            loginPage.style.display = 'none';
            dashboardLoader.classList.remove('hidden');
            
            // Code typer animation
            const codeBox = document.getElementById('code-loader-box');
            const codeLines = ["Authenticating credentials...", "Access token verified.", "Loading user profile...", "Fetching dashboard components...", "Rendering UI elements...", "Finalizing session...", "System ready."];
            let i = 0;
            const typerInterval = setInterval(() => {
                if (i < codeLines.length) {
                    codeBox.innerHTML += `> ${codeLines[i]}\n`;
                    codeBox.scrollTop = codeBox.scrollHeight;
                    i++;
                } else {
                    clearInterval(typerInterval);
                    setTimeout(() => {
                        dashboardLoader.classList.add('hidden');
                        document.body.className = 'dashboard-body';
                        dashboardEl.style.display = 'block';
                        dashboard.init(user);
                    }, 500);
                }
            }, 300);
        },
        
        handleFailedAttempt: function() {
            this.attempts--;
            this.attemptsText.textContent = `Attempts Left: ${this.attempts}`;
            this.errorMsg.textContent = 'Invalid credentials.';
            logActivity(`Failed login attempt. Attempts left: ${this.attempts}`);
            
            this.loginBox.classList.add('flashing');
            setTimeout(() => this.loginBox.classList.remove('flashing'), 800);
            
            if (this.attempts <= 0) {
                this.errorMsg.textContent = 'Max attempts reached. System locked.';
                this.submitBtn.disabled = true;
                logActivity("Account locked due to max failed attempts.");
            }
        },
    };

  </script>
</body>
</html>
